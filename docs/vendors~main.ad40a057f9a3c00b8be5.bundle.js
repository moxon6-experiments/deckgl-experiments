(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"a",function(){return _defineProperty})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__webpack_require__.d(__webpack_exports__,"a",function(){return _classCallCheck})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}__webpack_require__.d(__webpack_exports__,"a",function(){return _createClass})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__.d(__webpack_exports__,"a",function(){return _getPrototypeOf})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return _possibleConstructorReturn});var _helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);function _possibleConstructorReturn(self,call){return!call||"object"!==Object(_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(call)&&"function"!=typeof call?Object(_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1__.a)(self):call}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return _inherits});var _setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(141);function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Object(_setPrototypeOf__WEBPACK_IMPORTED_MODULE_0__.a)(subClass,superClass)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}__webpack_require__.d(__webpack_exports__,"a",function(){return _assertThisInitialized})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(525)()},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),is_browser=__webpack_require__(71),globals=__webpack_require__(24),utils_log=new(__webpack_require__(539).a)({id:"luma"}).enable(),lib_stats=__webpack_require__(541),lumaStats=(__webpack_require__(138),new(function(){function StatsManager(){Object(classCallCheck.a)(this,StatsManager),this.stats=new Map}return Object(createClass.a)(StatsManager,[{key:"get",value:function get(name){return this.stats.has(name)||this.stats.set(name,new lib_stats.a({id:name})),this.stats.get(name)}}]),StatsManager}()));if(globals.a.luma&&"7.0.1"!==globals.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globals.a.luma.VERSION," vs ").concat("7.0.1"));globals.a.luma||(is_browser.a&&utils_log.log(1,"luma.gl ".concat("7.0.1"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),globals.a.luma=globals.a.luma||{VERSION:"7.0.1",version:"7.0.1",log:utils_log,stats:lumaStats,globals:{modules:{},nodeIO:{}}});globals.a.luma;var unified_parameter_api=__webpack_require__(50),slicedToArray=__webpack_require__(11),toConsumableArray=__webpack_require__(15);function webgl_setter_function_table_isArray(array){return Array.isArray(array)||ArrayBuffer.isView(array)}var webgl_setter_function_table={framebuffer:function framebuffer(gl,_framebuffer){var handle=_framebuffer&&"handle"in _framebuffer?_framebuffer.handle:_framebuffer;return gl.bindFramebuffer(36160,handle)},blend:function blend(gl,value){return value?gl.enable(3042):gl.disable(3042)},blendColor:function blendColor(gl,value){return gl.blendColor.apply(gl,Object(toConsumableArray.a)(value))},blendEquation:function blendEquation(gl,args){args=webgl_setter_function_table_isArray(args)?args:[args,args],gl.blendEquationSeparate.apply(gl,Object(toConsumableArray.a)(args))},blendFunc:function blendFunc(gl,args){args=webgl_setter_function_table_isArray(args)&&2===args.length?[].concat(Object(toConsumableArray.a)(args),Object(toConsumableArray.a)(args)):args,gl.blendFuncSeparate.apply(gl,Object(toConsumableArray.a)(args))},clearColor:function clearColor(gl,value){return gl.clearColor.apply(gl,Object(toConsumableArray.a)(value))},clearDepth:function clearDepth(gl,value){return gl.clearDepth(value)},clearStencil:function clearStencil(gl,value){return gl.clearStencil(value)},colorMask:function colorMask(gl,value){return gl.colorMask.apply(gl,Object(toConsumableArray.a)(value))},cull:function cull(gl,value){return value?gl.enable(2884):gl.disable(2884)},cullFace:function cullFace(gl,value){return gl.cullFace(value)},depthTest:function depthTest(gl,value){return value?gl.enable(2929):gl.disable(2929)},depthFunc:function depthFunc(gl,value){return gl.depthFunc(value)},depthMask:function depthMask(gl,value){return gl.depthMask(value)},depthRange:function depthRange(gl,value){return gl.depthRange.apply(gl,Object(toConsumableArray.a)(value))},dither:function dither(gl,value){return value?gl.enable(3024):gl.disable(3024)},derivativeHint:function derivativeHint(gl,value){gl.hint(35723,value)},frontFace:function frontFace(gl,value){return gl.frontFace(value)},mipmapHint:function mipmapHint(gl,value){return gl.hint(33170,value)},lineWidth:function lineWidth(gl,value){return gl.lineWidth(value)},polygonOffsetFill:function polygonOffsetFill(gl,value){return value?gl.enable(32823):gl.disable(32823)},polygonOffset:function polygonOffset(gl,value){return gl.polygonOffset.apply(gl,Object(toConsumableArray.a)(value))},sampleCoverage:function sampleCoverage(gl,value){return gl.sampleCoverage.apply(gl,Object(toConsumableArray.a)(value))},scissorTest:function scissorTest(gl,value){return value?gl.enable(3089):gl.disable(3089)},scissor:function scissor(gl,value){return gl.scissor.apply(gl,Object(toConsumableArray.a)(value))},stencilTest:function stencilTest(gl,value){return value?gl.enable(2960):gl.disable(2960)},stencilMask:function stencilMask(gl,value){var _value=value=webgl_setter_function_table_isArray(value)?value:[value,value],_value2=Object(slicedToArray.a)(_value,2),mask=_value2[0],backMask=_value2[1];gl.stencilMaskSeparate(1028,mask),gl.stencilMaskSeparate(1029,backMask)},stencilFunc:function stencilFunc(gl,args){var _args=args=webgl_setter_function_table_isArray(args)&&3===args.length?[].concat(Object(toConsumableArray.a)(args),Object(toConsumableArray.a)(args)):args,_args2=Object(slicedToArray.a)(_args,6),func=_args2[0],ref=_args2[1],mask=_args2[2],backFunc=_args2[3],backRef=_args2[4],backMask=_args2[5];gl.stencilFuncSeparate(1028,func,ref,mask),gl.stencilFuncSeparate(1029,backFunc,backRef,backMask)},stencilOp:function stencilOp(gl,args){var _args3=args=webgl_setter_function_table_isArray(args)&&3===args.length?[].concat(Object(toConsumableArray.a)(args),Object(toConsumableArray.a)(args)):args,_args4=Object(slicedToArray.a)(_args3,6),sfail=_args4[0],dpfail=_args4[1],dppass=_args4[2],backSfail=_args4[3],backDpfail=_args4[4],backDppass=_args4[5];gl.stencilOpSeparate(1028,sfail,dpfail,dppass),gl.stencilOpSeparate(1029,backSfail,backDpfail,backDppass)},viewport:function viewport(gl,value){return gl.viewport.apply(gl,Object(toConsumableArray.a)(value))}};function setParameters(gl,parameters){for(var key in Object(unified_parameter_api.c)(gl,parameters),parameters){var setter=webgl_setter_function_table[key];setter&&setter(gl,parameters[key],key)}}var track_context_state=__webpack_require__(58),utils=__webpack_require__(46);function withParameters(gl,parameters,func){if(Object(utils.b)(parameters))return func(gl);var value,_parameters$nocatch=parameters.nocatch,nocatch=void 0===_parameters$nocatch||_parameters$nocatch;if(Object(utils.a)(!parameters.frameBuffer),Object(track_context_state.c)(gl),setParameters(gl,parameters),nocatch)value=func(gl),Object(track_context_state.b)(gl);else try{value=func(gl)}finally{Object(track_context_state.b)(gl)}return value}var ERR_HEADLESSGL_LOAD="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.",headlessTypes=null;function headlessGL(){var headless=__webpack_require__(530);if(!headless)throw new Error(ERR_HEADLESSGL_LOAD);return headless.apply(void 0,arguments)}if(!is_browser.a)try{headlessTypes=__webpack_require__(531)}catch(error){}var webgl_types_DummyType=function DummyType(){Object(classCallCheck.a)(this,DummyType)},webgl_types_ref=headlessTypes||globals.a,_ref$WebGLBuffer=(webgl_types_ref.WebGLRenderingContext,webgl_types_ref.WebGLProgram,webgl_types_ref.WebGLShader,webgl_types_ref.WebGLBuffer),WebGLBuffer=void 0===_ref$WebGLBuffer?webgl_types_DummyType:_ref$WebGLBuffer;webgl_types_ref.WebGLFramebuffer,webgl_types_ref.WebGLRenderbuffer,webgl_types_ref.WebGLTexture,webgl_types_ref.WebGLUniformLocation,webgl_types_ref.WebGLActiveInfo,webgl_types_ref.WebGLShaderPrecisionFormat;var WebGL2RenderingContext=function getWebGL2RenderingContext(){return globals.a.WebGL2RenderingContext||function WebGL2RenderingContextNotSupported(){Object(classCallCheck.a)(this,WebGL2RenderingContextNotSupported)}}(),objectSpread=(function getImage(){return globals.a.Image||function ImageNotSupported(){Object(classCallCheck.a)(this,ImageNotSupported)}}(),__webpack_require__(19)),ERR_HEADLESSGL_NOT_AVAILABLE="Failed to create WebGL context in Node.js, headless gl not available",ERR_HEADLESSGL_FAILED="Failed to create WebGL context in Node.js, headless gl returned null";function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}var uidCounters={};function uid(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";uidCounters[id]=uidCounters[id]||1;var count=uidCounters[id]++;return"".concat(id,"-").concat(count)}function isPowerOfTwo(n){return assert("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function isObjectEmpty(obj){var isEmpty=!0;for(var key in obj){isEmpty=!1;break}return isEmpty}function formatValue(v){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_opts$isInteger=opts.isInteger,isInteger=void 0!==_opts$isInteger&&_opts$isInteger;if(Array.isArray(v)||ArrayBuffer.isView(v))return function formatArrayValue(v,opts){for(var _opts$maxElts=opts.maxElts,maxElts=void 0===_opts$maxElts?16:_opts$maxElts,_opts$size=opts.size,size=void 0===_opts$size?1:_opts$size,string="[",i=0;i<v.length&&i<maxElts;++i)i>0&&(string+=",".concat(i%size==0?" ":"")),string+=formatValue(v[i],opts);var terminator=v.length>maxElts?"...":"]";return"".concat(string).concat(terminator)}(v,opts);if(!Number.isFinite(v))return String(v);if(Math.abs(v)<1e-16)return isInteger?"0":"0.";if(isInteger)return v.toFixed(0);if(Math.abs(v)>100&&Math.abs(v)<1e4)return v.toFixed(0);var string=v.toPrecision(2);return string.indexOf(".0")===string.length-2?string.slice(0,-1):string}function stub_methods_stubRemovedMethods(instance,className,version,methodNames){var upgradeMessage="See luma.gl ".concat(version," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),prototype=Object.getPrototypeOf(instance);methodNames.forEach(function(methodName){prototype.methodName||(prototype[methodName]=function(){throw utils_log.removed("Calling removed method ".concat(className,".").concat(methodName,": "),upgradeMessage)(),new Error(methodName)})})}function checkProps(className,props,propChecks){var _propChecks$removedPr=propChecks.removedProps,removedProps=void 0===_propChecks$removedPr?{}:_propChecks$removedPr,_propChecks$deprecate=propChecks.deprecatedProps,deprecatedProps=void 0===_propChecks$deprecate?{}:_propChecks$deprecate,_propChecks$replacedP=propChecks.replacedProps,replacedProps=void 0===_propChecks$replacedP?{}:_propChecks$replacedP;for(var propName in removedProps)if(propName in props){var replacement=removedProps[propName]?"".concat(className,".").concat(removedProps[propName]):"N/A";utils_log.removed("".concat(className,".").concat(propName),replacement)()}for(var _propName in deprecatedProps)if(_propName in props){var _replacementProp=deprecatedProps[_propName];utils_log.deprecated("".concat(className,".").concat(_propName),"".concat(className,".").concat(_replacementProp))()}var newProps=null;for(var _propName2 in replacedProps)if(_propName2 in props){var _replacementProp2=replacedProps[_propName2];utils_log.deprecated("".concat(className,".").concat(_propName2),"".concat(className,".").concat(_replacementProp2))(),(newProps=newProps||Object.assign({},props))[_replacementProp2]=props[_propName2],delete newProps[_propName2]}return newProps||props}var pageLoadPromise,isPage=is_browser.a&&"undefined"!=typeof document,isPageLoaded=isPage&&"complete"===document.readyState;function getPageLoadPromise(){return pageLoadPromise||(pageLoadPromise=isPage?new Promise(function(resolve,reject){if(isPage&&"complete"===document.readyState)return isPageLoaded=!0,void resolve(document);window.onload=function(){isPageLoaded=!0,resolve(document)}}):Promise.resolve({})),pageLoadPromise}function getCanvas(_ref2){var targetCanvas,canvas=_ref2.canvas,width=_ref2.width,height=_ref2.height,_ref2$onError=_ref2.onError,onError=void 0===_ref2$onError?function(){}:_ref2$onError;return"string"==typeof canvas?(isPageLoaded||onError("createGLContext called on canvas '".concat(canvas,"' before page was loaded")),targetCanvas=document.getElementById(canvas)):targetCanvas=canvas||function createCanvas(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?800:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?600:_ref$height,_ref$id=_ref.id,id=void 0===_ref$id?"gl-canvas":_ref$id,_ref$insert=_ref.insert,insert=void 0===_ref$insert||_ref$insert,canvas=document.createElement("canvas");if(canvas.id=id,canvas.style.width=Number.isFinite(width)?"".concat(width,"px"):"100%",canvas.style.height=Number.isFinite(height)?"".concat(height,"px"):"100%",insert){var body=document.body;body.insertBefore(canvas,body.firstChild)}return canvas}({id:"lumagl-canvas",width:width,height:height,onError:onError}),targetCanvas}function getContextDebugInfo(gl){var vendorMasked=gl.getParameter(7936),rendererMasked=gl.getParameter(7937),ext=gl.getExtension("WEBGL_debug_renderer_info");return{vendor:ext&&gl.getParameter(ext.UNMASKED_VENDOR_WEBGL||7936)||vendorMasked,renderer:ext&&gl.getParameter(ext.UNMASKED_RENDERER_WEBGL||7937)||rendererMasked,vendorMasked:vendorMasked,rendererMasked:rendererMasked,version:gl.getParameter(7938),shadingLanguageVersion:gl.getParameter(35724)}}var ERR_CONTEXT="Invalid WebGLRenderingContext",ERR_WEBGL2="Requires WebGL2";function isWebGL(gl){return Boolean(gl&&Number.isFinite(gl._version))}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}function assertWebGLContext(gl){assert(isWebGL(gl),ERR_CONTEXT)}function assertWebGL2Context(gl){assert(isWebGL2(gl),ERR_WEBGL2)}function request_animation_frame_requestAnimationFrame(callback){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(callback):setTimeout(callback,1e3/60)}function cancelAnimationFrame(timerId){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):clearTimeout(timerId)}var ERR_TYPE_DEDUCTION="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(arrayOrType){switch(ArrayBuffer.isView(arrayOrType)?arrayOrType.constructor:arrayOrType){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ERR_TYPE_DEDUCTION)}}function getTypedArrayFromGLType(glType){var _ref$clamped=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,clamped=void 0===_ref$clamped||_ref$clamped;switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function scalePixels(_ref3){for(var data=_ref3.data,width=_ref3.width,height=_ref3.height,newWidth=Math.round(width/2),newHeight=Math.round(height/2),newData=new Uint8Array(newWidth*newHeight*4),y=0;y<newHeight;y++)for(var x=0;x<newWidth;x++)for(var c=0;c<4;c++)newData[4*(y*newWidth+x)+c]=data[4*(2*y*width+2*x)+c];return{data:newData,width:newWidth,height:newHeight}}function getKeyValue(gl,name){if("string"!=typeof name)return name;var number=Number(name);if(!isNaN(number))return number;var value=gl[name=name.replace(/^.*\./,"")];return assert(void 0!==value,"Accessing undefined constant GL.".concat(name)),value}function getKey(gl,value){for(var key in value=Number(value),gl)if(gl[key]===value)return"GL.".concat(key);return String(value)}var defineProperty=__webpack_require__(0),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),assertThisInitialized=__webpack_require__(6),inherits=__webpack_require__(5),ERR_RESOURCE_METHOD_UNDEFINED="Resource subclass must define virtual methods",resource_Resource=function(){function Resource(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Resource),assertWebGLContext(gl);var id=opts.id,_opts$userData=opts.userData,userData=void 0===_opts$userData?{}:_opts$userData;this.gl=gl,this.id=id||uid(this.constructor.name),this.userData=userData,this._bound=!1,this._handle=opts.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(createClass.a)(Resource,[{key:"toString",value:function toString(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function _delete(){var _ref$deleteChildren=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,deleteChildren=void 0!==_ref$deleteChildren&&_ref$deleteChildren,children=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,children&&deleteChildren&&children.filter(Boolean).forEach(function(child){child.delete()}),this}},{key:"bind",value:function bind(){var value,funcOrHandle=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof funcOrHandle?(this._bindHandle(funcOrHandle),this):(this._bound?value=funcOrHandle():(this._bindHandle(this.handle),this._bound=!0,value=funcOrHandle(),this._bound=!1,this._bindHandle(null)),value)}},{key:"unbind",value:function unbind(){this.bind(null)}},{key:"getParameter",value:function getParameter(pname){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};assert(pname=getKeyValue(this.gl,pname));var parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){var isWebgl2=isWebGL2(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension)))){var webgl1Default=parameter.webgl1,webgl2Default="webgl2"in parameter?parameter.webgl2:parameter.webgl1;return isWebgl2?webgl2Default:webgl1Default}}return this._getParameter(pname,opts)}},{key:"getParameters",value:function getParameters(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2={},parameters=_ref2.parameters,keys=_ref2.keys,PARAMETERS=this.constructor.PARAMETERS||{},isWebgl2=isWebGL2(this.gl),values={},parameterKeys=parameters||Object.keys(PARAMETERS),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pname=_step.value,parameter=PARAMETERS[pname];if(parameter&&(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))){var key=keys?getKey(this.gl,pname):pname;values[key]=this.getParameter(pname,opts),keys&&"GLenum"===parameter.type&&(values[key]=getKey(this.gl,values[key]))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return values}},{key:"setParameter",value:function setParameter(pname,value){assert(pname=getKeyValue(this.gl,pname));var parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){var isWebgl2=isWebGL2(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))))throw new Error("Parameter not available on this platform");"GLenum"===parameter.type&&(value=getKeyValue(value))}return this._setParameter(pname,value),this}},{key:"setParameters",value:function setParameters(parameters){for(var pname in parameters)this.setParameter(pname,parameters[pname]);return this}},{key:"stubRemovedMethods",value:function stubRemovedMethods(className,version,methodNames){return stub_methods_stubRemovedMethods(this,className,version,methodNames)}},{key:"initialize",value:function initialize(opts){}},{key:"_createHandle",value:function _createHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_deleteHandle",value:function _deleteHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_bindHandle",value:function _bindHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_getParameter",value:function _getParameter(pname,opts){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_setParameter",value:function _setParameter(pname,value){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}},{key:"_context",value:function _context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function _addStats(){var name=this.constructor.name,stats=lumaStats.get("Resource Counts");stats.get("Resources Created").incrementCount(),stats.get("".concat(name,"s Created")).incrementCount(),stats.get("".concat(name,"s Active")).incrementCount()}},{key:"_removeStats",value:function _removeStats(){var name=this.constructor.name;lumaStats.get("Resource Counts").get("".concat(name,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function _trackAllocatedMemory(bytes){var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,stats=lumaStats.get("Memory Usage");stats.get("GPU Memory").addCount(bytes),stats.get("".concat(name," Memory")).addCount(bytes),this.byteLength=bytes}},{key:"_trackDeallocatedMemory",value:function _trackDeallocatedMemory(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,stats=lumaStats.get("Memory Usage");stats.get("GPU Memory").subtractCount(this.byteLength),stats.get("".concat(name," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function get(){return this._handle}}]),Resource}(),setPrototypeOf=__webpack_require__(141);function construct_construct(Parent,args,Class){return(construct_construct=function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&Object(setPrototypeOf.a)(instance,Class.prototype),instance}).apply(null,arguments)}var _TEXTURE_FORMATS,_DATA_FORMAT_CHANNELS,_TYPE_SIZES,DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},accessor_Accessor=function(){function Accessor(){var _this=this;Object(classCallCheck.a)(this,Accessor);for(var _len2=arguments.length,accessors=new Array(_len2),_key2=0;_key2<_len2;_key2++)accessors[_key2]=arguments[_key2];accessors.forEach(function(accessor){return _this._assign(accessor)}),Object.freeze(this)}return Object(createClass.a)(Accessor,null,[{key:"getBytesPerElement",value:function getBytesPerElement(accessor){return getTypedArrayFromGLType(accessor.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function getBytesPerVertex(accessor){return assert(accessor.size),getTypedArrayFromGLType(accessor.type||5126).BYTES_PER_ELEMENT*accessor.size}},{key:"resolve",value:function resolve(){for(var _len=arguments.length,accessors=new Array(_len),_key=0;_key<_len;_key++)accessors[_key]=arguments[_key];return construct_construct(Accessor,[DEFAULT_ACCESSOR_VALUES].concat(accessors))}}]),Object(createClass.a)(Accessor,[{key:"toString",value:function toString(){return JSON.stringify(this)}},{key:"_assign",value:function _assign(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(props=checkProps("Accessor",props,PROP_CHECKS)).type&&(this.type=props.type,5124!==props.type&&5125!==props.type||(this.integer=!0)),void 0!==props.size&&(this.size=props.size),void 0!==props.offset&&(this.offset=props.offset),void 0!==props.stride&&(this.stride=props.stride),void 0!==props.normalized&&(this.normalized=props.normalized),void 0!==props.integer&&(this.integer=props.integer),void 0!==props.divisor&&(this.divisor=props.divisor),void 0!==props.buffer&&(this.buffer=props.buffer),void 0!==props.index&&("boolean"==typeof index?this.index=props.index?1:0:this.index=props.index),void 0!==props.instanced&&(this.divisor=props.instanced?1:0),void 0!==props.isInstanced&&(this.divisor=props.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function get(){return Accessor.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function get(){return Accessor.getBytesPerVertex(this)}}]),Accessor}(),DEPRECATED_PROPS={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},PROP_CHECKS_INITIALIZE={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:DEPRECATED_PROPS},PROP_CHECKS_SET_PROPS={removedProps:DEPRECATED_PROPS},buffer_Buffer=function(_Resource){function Buffer(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Buffer),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Buffer).call(this,gl,props))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),_this.target=props.target||(_this.gl.webgl2?36662:34962),_this.initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Buffer,_Resource),Object(createClass.a)(Buffer,[{key:"getElementCount",value:function getElementCount(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/accessor_Accessor.getBytesPerElement(accessor))}},{key:"getVertexCount",value:function getVertexCount(){var accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/accessor_Accessor.getBytesPerVertex(accessor))}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(props)&&(props={data:props}),Number.isFinite(props)&&(props={byteLength:props}),props=checkProps("Buffer",props,PROP_CHECKS_INITIALIZE),this.usage=props.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},props,props.accessor)),props.data?this._setData(props.data):this._setByteLength(props.byteLength||0),this}},{key:"setProps",value:function setProps(props){return"accessor"in(props=checkProps("Buffer",props,PROP_CHECKS_SET_PROPS))&&this.setAccessor(props.accessor),this}},{key:"setAccessor",value:function setAccessor(accessor){return delete(accessor=Object.assign({},accessor)).buffer,this.accessor=new accessor_Accessor(accessor),this}},{key:"reallocate",value:function reallocate(byteLength){return byteLength>this.byteLength?(this._setByteLength(byteLength),!0):(this.bytesUsed=byteLength,!1)}},{key:"setData",value:function setData(props){return this.initialize(props)}},{key:"subData",value:function subData(props){ArrayBuffer.isView(props)&&(props={data:props});var _props=props,data=_props.data,_props$offset=_props.offset,offset=void 0===_props$offset?0:_props$offset,_props$srcOffset=_props.srcOffset,srcOffset=void 0===_props$srcOffset?0:_props$srcOffset,byteLength=props.byteLength||props.length;assert(data);var target=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(target,this.handle),0!==srcOffset||void 0!==byteLength?(assertWebGL2Context(this.gl),this.gl.bufferSubData(this.target,offset,data,srcOffset,byteLength)):this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=null,this._inferType(data),this}},{key:"copyData",value:function copyData(_ref){var sourceBuffer=_ref.sourceBuffer,_ref$readOffset=_ref.readOffset,readOffset=void 0===_ref$readOffset?0:_ref$readOffset,_ref$writeOffset=_ref.writeOffset,writeOffset=void 0===_ref$writeOffset?0:_ref$writeOffset,size=_ref.size,gl=this.gl;return assertWebGL2Context(gl),gl.bindBuffer(36662,sourceBuffer.handle),gl.bindBuffer(36663,this.handle),gl.copyBufferSubData(36662,36663,readOffset,writeOffset,size),gl.bindBuffer(36662,null),gl.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function getData(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref2$dstData=_ref2.dstData,dstData=void 0===_ref2$dstData?null:_ref2$dstData,_ref2$srcByteOffset=_ref2.srcByteOffset,srcByteOffset=void 0===_ref2$srcByteOffset?0:_ref2$srcByteOffset,_ref2$dstOffset=_ref2.dstOffset,dstOffset=void 0===_ref2$dstOffset?0:_ref2$dstOffset,_ref2$length=_ref2.length,length=void 0===_ref2$length?0:_ref2$length;assertWebGL2Context(this.gl);var dstAvailableElementCount,dstElementCount,ArrayType=getTypedArrayFromGLType(this.accessor.type||5126,{clamped:!1}),sourceAvailableElementCount=this._getAvailableElementCount(srcByteOffset),dstElementOffset=dstOffset;dstData?dstAvailableElementCount=(dstElementCount=dstData.length)-dstElementOffset:dstElementCount=dstElementOffset+(dstAvailableElementCount=Math.min(sourceAvailableElementCount,length||sourceAvailableElementCount));var copyElementCount=Math.min(sourceAvailableElementCount,dstAvailableElementCount);return assert((length=length||copyElementCount)<=copyElementCount),dstData=dstData||new ArrayType(dstElementCount),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,srcByteOffset,dstData,dstOffset,length),this.gl.bindBuffer(36662,null),dstData}},{key:"bind",value:function bind(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$index=_ref3.index,index=void 0===_ref3$index?this.accessor&&this.accessor.index:_ref3$index,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,size=_ref3.size;return 35345===target||35982===target?void 0!==size?this.gl.bindBufferRange(target,index,this.handle,offset,size):(assert(0===offset),this.gl.bindBufferBase(target,index,this.handle)):this.gl.bindBuffer(target,this.handle),this}},{key:"unbind",value:function unbind(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref4$target=_ref4.target,target=void 0===_ref4$target?this.target:_ref4$target,_ref4$index=_ref4.index,index=void 0===_ref4$index?this.accessor&&this.accessor.index:_ref4$index;return 35345===target||35982===target?this.gl.bindBufferBase(target,index,null):this.gl.bindBuffer(target,null),this}},{key:"getDebugData",value:function getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function invalidateDebugData(){this.debugData=null}},{key:"_setData",value:function _setData(data){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;assert(ArrayBuffer.isView(data)),this._trackDeallocatedMemory();var target=this._getTarget();this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=data.slice(0,10),this.bytesUsed=data.byteLength,this._trackAllocatedMemory(data.byteLength);var type=getGLTypeFromTypedArray(data);return assert(type),this.setAccessor(new accessor_Accessor(this.accessor,{type:type})),this}},{key:"_setByteLength",value:function _setByteLength(byteLength){var usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;assert(byteLength>=0),this._trackDeallocatedMemory();var data=byteLength;0===byteLength&&(data=new Float32Array(0));var target=this._getTarget();return this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=null,this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength),this}},{key:"_getTarget",value:function _getTarget(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function _getAvailableElementCount(srcByteOffset){var sourceElementOffset=srcByteOffset/getTypedArrayFromGLType(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-sourceElementOffset}},{key:"_inferType",value:function _inferType(data){this.accessor.type||this.setAccessor(new accessor_Accessor(this.accessor,{type:getGLTypeFromTypedArray(data)}))}},{key:"_createHandle",value:function _createHandle(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function _getParameter(pname){this.gl.bindBuffer(this.target,this.handle);var value=this.gl.getBufferParameter(this.target,pname);return this.gl.bindBuffer(this.target,null),value}},{key:"setByteLength",value:function setByteLength(byteLength){return utils_log.deprecated("setByteLength","reallocate")(),this.reallocate(byteLength)}},{key:"updateAccessor",value:function updateAccessor(opts){return utils_log.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new accessor_Accessor(this.accessor,opts),this}},{key:"type",get:function get(){return utils_log.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function get(){return utils_log.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),Buffer}(resource_Resource),TEXTURE_FORMATS=(_TEXTURE_FORMATS={},Object(defineProperty.a)(_TEXTURE_FORMATS,6407,{dataFormat:6407,types:[5121,33635]}),Object(defineProperty.a)(_TEXTURE_FORMATS,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(defineProperty.a)(_TEXTURE_FORMATS,6406,{dataFormat:6406,types:[5121]}),Object(defineProperty.a)(_TEXTURE_FORMATS,6409,{dataFormat:6409,types:[5121]}),Object(defineProperty.a)(_TEXTURE_FORMATS,6410,{dataFormat:6410,types:[5121]}),Object(defineProperty.a)(_TEXTURE_FORMATS,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(defineProperty.a)(_TEXTURE_FORMATS,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(defineProperty.a)(_TEXTURE_FORMATS,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(defineProperty.a)(_TEXTURE_FORMATS,34836,{dataFormat:6408,types:[5126],gl2:!0}),_TEXTURE_FORMATS),DATA_FORMAT_CHANNELS=(_DATA_FORMAT_CHANNELS={},Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6403,1),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,36244,1),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,33319,2),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,33320,2),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6407,3),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,36248,3),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6408,4),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,36249,4),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6402,1),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,34041,1),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6406,1),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6409,1),Object(defineProperty.a)(_DATA_FORMAT_CHANNELS,6410,2),_DATA_FORMAT_CHANNELS),TYPE_SIZES=(_TYPE_SIZES={},Object(defineProperty.a)(_TYPE_SIZES,5126,4),Object(defineProperty.a)(_TYPE_SIZES,5125,4),Object(defineProperty.a)(_TYPE_SIZES,5124,4),Object(defineProperty.a)(_TYPE_SIZES,5123,2),Object(defineProperty.a)(_TYPE_SIZES,5122,2),Object(defineProperty.a)(_TYPE_SIZES,5131,2),Object(defineProperty.a)(_TYPE_SIZES,5120,1),Object(defineProperty.a)(_TYPE_SIZES,5121,1),_TYPE_SIZES);var NPOT_MIN_FILTERS=[9729,9728],texture_Texture=function(_Resource){function Texture(gl,props){var _this;Object(classCallCheck.a)(this,Texture);var _props$id=props.id,id=void 0===_props$id?uid("texture"):_props$id,handle=props.handle,target=props.target;return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture).call(this,gl,{id:id,handle:handle}))).target=target,_this.hasFloatTexture=gl.getExtension("OES_texture_float"),_this.textureUnit=void 0,_this.loaded=!1,_this.width=void 0,_this.height=void 0,_this.depth=void 0,_this.format=void 0,_this.type=void 0,_this.dataFormat=void 0,_this.border=void 0,_this.textureUnit=void 0,_this.mipmaps=void 0,_this}return Object(inherits.a)(Texture,_Resource),Object(createClass.a)(Texture,null,[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},format=_ref.format,linearFiltering=_ref.linearFiltering,supported=!0;return format&&(supported=(supported=supported&&function isFormatSupported(gl,format){var info=TEXTURE_FORMATS[format];if(!info)return!1;if(void 0===info.gl1&&void 0===info.gl2)return!0;var value=isWebGL2(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}(gl,format))&&(!linearFiltering||function isLinearFilteringSupported(gl,format){var info=TEXTURE_FORMATS[format];switch(info&&info.types[0]){case 5126:return gl.getExtension("OES_texture_float_linear");case 5131:return gl.getExtension("OES_texture_half_float_linear");default:return!0}}(gl,format))),supported}}]),Object(createClass.a)(Texture,[{key:"toString",value:function toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=props.data;if(data instanceof Promise)return data.then(function(resolvedImageData){return _this2.initialize(Object.assign({},props,{pixels:resolvedImageData,data:resolvedImageData}))}),this;var _props$pixels=props.pixels,pixels=void 0===_props$pixels?null:_props$pixels,_props$format=props.format,format=void 0===_props$format?6408:_props$format,_props$type=props.type,type=void 0===_props$type?5121:_props$type,_props$border=props.border,border=void 0===_props$border?0:_props$border,_props$recreate=props.recreate,recreate=void 0!==_props$recreate&&_props$recreate,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters,_props$pixelStore=props.pixelStore,pixelStore=void 0===_props$pixelStore?{}:_props$pixelStore,_props$textureUnit=props.textureUnit,textureUnit=void 0===_props$textureUnit?void 0:_props$textureUnit,_props$unpackFlipY=props.unpackFlipY,unpackFlipY=void 0===_props$unpackFlipY||_props$unpackFlipY,_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps;data||(data=pixels);var width=props.width,height=props.height,dataFormat=props.dataFormat,_props$depth=props.depth,depth=void 0===_props$depth?0:_props$depth,_this$_deduceParamete=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:!1,data:data,width:width,height:height});width=_this$_deduceParamete.width,height=_this$_deduceParamete.height,dataFormat=_this$_deduceParamete.dataFormat,this.width=width,this.height=height,this.depth=depth,this.format=format,this.type=type,this.dataFormat=dataFormat,this.border=border,this.textureUnit=textureUnit,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var DEFAULT_TEXTURE_SETTINGS=Object(defineProperty.a)({},37440,unpackFlipY),glSettings=Object.assign({},DEFAULT_TEXTURE_SETTINGS,pixelStore);return mipmaps&&this._isNPOT()&&(utils_log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),mipmaps=!1,this._updateForNPOT(parameters)),this.mipmaps=mipmaps,this.setImageData({data:data,width:width,height:height,depth:depth,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps,parameters:glSettings}),mipmaps&&this.generateMipmap(),this.setParameters(parameters),recreate&&(this.data=data),this}},{key:"resize",value:function resize(_ref2){var width=_ref2.width,height=_ref2.height;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function generateMipmap(){var _this3=this,params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),withParameters(this.gl,params,function(){_this3.gl.generateMipmap(_this3.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function setImageData(options){this._trackDeallocatedMemory("Texture");var _options$target=options.target,target=void 0===_options$target?this.target:_options$target,_options$pixels=options.pixels,pixels=void 0===_options$pixels?null:_options$pixels,_options$level=options.level,level=void 0===_options$level?0:_options$level,_options$format=options.format,format=void 0===_options$format?this.format:_options$format,_options$border=options.border,border=void 0===_options$border?this.border:_options$border,_options$offset=options.offset,offset=void 0===_options$offset?0:_options$offset,_options$parameters=options.parameters,parameters=void 0===_options$parameters?{}:_options$parameters,_options$data=options.data,data=void 0===_options$data?null:_options$data,_options$type=options.type,type=void 0===_options$type?this.type:_options$type,_options$width=options.width,width=void 0===_options$width?this.width:_options$width,_options$height=options.height,height=void 0===_options$height?this.height:_options$height,_options$dataFormat=options.dataFormat,dataFormat=void 0===_options$dataFormat?this.dataFormat:_options$dataFormat,_options$compressed=options.compressed,compressed=void 0!==_options$compressed&&_options$compressed;data||(data=pixels);var _this$_deduceParamete2=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});type=_this$_deduceParamete2.type,dataFormat=_this$_deduceParamete2.dataFormat,compressed=_this$_deduceParamete2.compressed,width=_this$_deduceParamete2.width,height=_this$_deduceParamete2.height;var gl=this.gl;gl.bindTexture(this.target,this.handle);var dataType,_this$_getDataType=this._getDataType({data:data,compressed:compressed});if(data=_this$_getDataType.data,dataType=_this$_getDataType.dataType,withParameters(this.gl,parameters,function(){switch(dataType){case"null":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data);break;case"typed-array":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data,offset);break;case"buffer":assertWebGL2Context(gl),gl.bindBuffer(35052,data.handle||data),gl.texImage2D(target,level,format,width,height,border,dataFormat,type,offset),gl.bindBuffer(35052,null);break;case"browser-object":isWebGL2(gl)?gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data):gl.texImage2D(target,level,format,dataFormat,type,data);break;case"compressed":gl.compressedTexImage2D(target,level,format,width,height,border,data);break;default:assert(!1,"Unknown image data type")}}),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=DATA_FORMAT_CHANNELS[this.dataFormat]||4,channelSize=TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*channels*channelSize,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function setSubImageData(_ref3){var _this4=this,_ref3$target=_ref3.target,target=void 0===_ref3$target?this.target:_ref3$target,_ref3$pixels=_ref3.pixels,pixels=void 0===_ref3$pixels?null:_ref3$pixels,_ref3$data=_ref3.data,data=void 0===_ref3$data?null:_ref3$data,_ref3$x=_ref3.x,x=void 0===_ref3$x?0:_ref3$x,_ref3$y=_ref3.y,y=void 0===_ref3$y?0:_ref3$y,_ref3$width=_ref3.width,width=void 0===_ref3$width?this.width:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?this.height:_ref3$height,_ref3$level=_ref3.level,level=void 0===_ref3$level?0:_ref3$level,_ref3$format=_ref3.format,format=void 0===_ref3$format?this.format:_ref3$format,_ref3$type=_ref3.type,type=void 0===_ref3$type?this.type:_ref3$type,_ref3$dataFormat=_ref3.dataFormat,dataFormat=void 0===_ref3$dataFormat?this.dataFormat:_ref3$dataFormat,_ref3$compressed=_ref3.compressed,compressed=void 0!==_ref3$compressed&&_ref3$compressed,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,_ref3$border=_ref3.border,_ref3$parameters=(void 0===_ref3$border&&this.border,_ref3.parameters),parameters=void 0===_ref3$parameters?{}:_ref3$parameters,_this$_deduceParamete3=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height});if(type=_this$_deduceParamete3.type,dataFormat=_this$_deduceParamete3.dataFormat,compressed=_this$_deduceParamete3.compressed,width=_this$_deduceParamete3.width,height=_this$_deduceParamete3.height,assert(0===this.depth,"texSubImage not supported for 3D textures"),data||(data=pixels),data&&data.data){var ndarray=data;data=ndarray.data,width=ndarray.shape[0],height=ndarray.shape[1]}data instanceof buffer_Buffer&&(data=data.handle),this.gl.bindTexture(this.target,this.handle),withParameters(this.gl,parameters,function(){compressed?_this4.gl.compressedTexSubImage2D(target,level,x,y,width,height,format,data):null===data?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,null):ArrayBuffer.isView(data)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data,offset):data instanceof WebGLBuffer?(assertWebGL2Context(_this4.gl),_this4.gl.bindBuffer(35052,data),_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,offset),_this4.gl.bindBuffer(35052,null)):isWebGL2(_this4.gl)?_this4.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data):_this4.gl.texSubImage2D(target,level,x,y,dataFormat,type,data)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function copyFramebuffer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function bind(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,this.handle),textureUnit}},{key:"unbind",value:function unbind(){var textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,gl=this.gl;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,null),textureUnit}},{key:"_getDataType",value:function _getDataType(_ref4){var data=_ref4.data,_ref4$compressed=_ref4.compressed;return void 0!==_ref4$compressed&&_ref4$compressed?{data:data,dataType:"compressed"}:null===data?{data:data,dataType:"null"}:ArrayBuffer.isView(data)?{data:data,dataType:"typed-array"}:data instanceof buffer_Buffer?{data:data.handle,dataType:"buffer"}:data instanceof WebGLBuffer?{data:data,dataType:"buffer"}:{data:data,dataType:"browser-object"}}},{key:"_deduceParameters",value:function _deduceParameters(opts){var format=opts.format,data=opts.data,width=opts.width,height=opts.height,dataFormat=opts.dataFormat,type=opts.type,compressed=opts.compressed,textureFormat=TEXTURE_FORMATS[format];dataFormat=dataFormat||textureFormat&&textureFormat.dataFormat,type=type||textureFormat&&textureFormat.types[0],compressed=compressed||textureFormat&&textureFormat.compressed;var _this$_deduceImageSiz=this._deduceImageSize(data,width,height);return{dataFormat:dataFormat,type:type,compressed:compressed,width:width=_this$_deduceImageSiz.width,height:height=_this$_deduceImageSiz.height,format:format,data:data}}},{key:"_deduceImageSize",value:function _deduceImageSize(data,width,height){var size;return assert(size="undefined"!=typeof ImageData&&data instanceof ImageData?{width:data.width,height:data.height}:"undefined"!=typeof HTMLImageElement&&data instanceof HTMLImageElement?{width:data.naturalWidth,height:data.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&data instanceof HTMLCanvasElement?{width:data.width,height:data.height}:"undefined"!=typeof HTMLVideoElement&&data instanceof HTMLVideoElement?{width:data.videoWidth,height:data.videoHeight}:data?{width:width,height:height}:{width:width>=0?width:1,height:height>=0?height:1},"Could not deduced texture size"),assert(void 0===width||size.width===width,"Deduced texture width does not match supplied width"),assert(void 0===height||size.height===height,"Deduced texture height does not match supplied height"),size}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function _getParameter(pname){switch(pname){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var value=this.gl.getTexParameter(this.target,pname);return this.gl.bindTexture(this.target,null),value}}},{key:"_setParameter",value:function _setParameter(pname,param){switch(this.gl.bindTexture(this.target,this.handle),param=this._getNPOTParam(pname,param),pname){case 33082:case 33083:this.gl.texParameterf(this.handle,pname,param);break;case 4096:case 4097:assert(!1);break;default:this.gl.texParameteri(this.target,pname,param)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function _isNPOT(){return!isWebGL2(this.gl)&&(!(!this.width||!this.height)&&(!isPowerOfTwo(this.width)||!isPowerOfTwo(this.height)))}},{key:"_updateForNPOT",value:function _updateForNPOT(parameters){void 0===parameters[this.gl.TEXTURE_MIN_FILTER]&&(parameters[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===parameters[this.gl.TEXTURE_WRAP_S]&&(parameters[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===parameters[this.gl.TEXTURE_WRAP_T]&&(parameters[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function _getNPOTParam(pname,param){if(this._isNPOT())switch(pname){case 10241:-1===NPOT_MIN_FILTERS.indexOf(param)&&(param=9729);break;case 10242:case 10243:33071!==param&&(param=33071)}return param}}]),Texture}(resource_Resource),pathPrefix="";var texture_2d_Texture2D=function(_Texture){function Texture2D(gl){var _this,url,opts,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Texture2D),assertWebGLContext(gl),(props instanceof Promise||"string"==typeof props)&&(props={data:props}),"string"==typeof props.data&&(props=Object.assign({},props,{data:(url=props.data,assert("string"==typeof url),url=pathPrefix+url,new Promise(function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(){return reject(new Error("Could not load image ".concat(url,".")))},image.crossOrigin=opts&&opts.crossOrigin||"anonymous",image.src=url}catch(error){reject(error)}}))})),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture2D).call(this,gl,Object.assign({},props,{target:3553})))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Texture2D,_Texture),Object(createClass.a)(Texture2D,null,[{key:"isSupported",value:function isSupported(gl,opts){return texture_Texture.isSupported(gl,opts)}}]),Texture2D}(texture_Texture),regenerator=__webpack_require__(41),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(59),FACES=[34069,34070,34071,34072,34073,34074],texture_cube_TextureCube=function(_Texture){function TextureCube(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,TextureCube),assertWebGLContext(gl),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TextureCube).call(this,gl,Object.assign({},props,{target:34067})))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(TextureCube,_Texture),Object(createClass.a)(TextureCube,[{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_props$mipmaps=props.mipmaps,mipmaps=void 0===_props$mipmaps||_props$mipmaps,_props$parameters=props.parameters,parameters=void 0===_props$parameters?{}:_props$parameters;this.opts=props,this.setCubeMapImageData(props).then(function(){_this2.loaded=!0,mipmaps&&_this2.generateMipmap(props),_this2.setParameters(parameters)})}},{key:"subImage",value:function subImage(_ref){var face=_ref.face,data=_ref.data,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$mipmapLevel=_ref.mipmapLevel,mipmapLevel=void 0===_ref$mipmapLevel?0:_ref$mipmapLevel;return this._subImage({target:face,data:data,x:x,y:y,mipmapLevel:mipmapLevel})}},{key:"setCubeMapImageData",value:function(){var _setCubeMapImageData=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(_ref2){var width,height,pixels,data,_ref2$border,border,_ref2$format,format,_ref2$type,type,gl,imageDataMap,resolvedFaces,_this3=this;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return width=_ref2.width,height=_ref2.height,pixels=_ref2.pixels,data=_ref2.data,_ref2$border=_ref2.border,border=void 0===_ref2$border?0:_ref2$border,_ref2$format=_ref2.format,format=void 0===_ref2$format?6408:_ref2$format,_ref2$type=_ref2.type,type=void 0===_ref2$type?5121:_ref2$type,gl=this.gl,imageDataMap=pixels||data,_context.next=5,Promise.all(FACES.map(function(face){var facePixels=imageDataMap[face];return Promise.all(Array.isArray(facePixels)?facePixels:[facePixels])}));case 5:resolvedFaces=_context.sent,this.bind(),FACES.forEach(function(face,index){resolvedFaces[index].length>1&&!1!==_this3.opts.mipmaps&&utils_log.warn("".concat(_this3.id," has mipmap and multiple LODs."))(),resolvedFaces[index].forEach(function(image,lodLevel){width&&height?gl.texImage2D(face,lodLevel,format,width,height,border,format,type,image):gl.texImage2D(face,lodLevel,format,format,type,image)})}),this.unbind();case 9:case"end":return _context.stop()}},_callee,this)}));return function setCubeMapImageData(_x){return _setCubeMapImageData.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function setImageDataForFace(options){var _this4=this,face=options.face,width=options.width,height=options.height,pixels=options.pixels,data=options.data,_options$border=options.border,border=void 0===_options$border?0:_options$border,_options$format=options.format,format=void 0===_options$format?6408:_options$format,_options$type=options.type,type=void 0===_options$type?5121:_options$type,gl=this.gl,imageData=pixels||data;return this.bind(),imageData instanceof Promise?imageData.then(function(resolvedImageData){return _this4.setImageDataForFace(Object.assign({},options,{face:face,data:resolvedImageData,pixels:resolvedImageData}))}):this.width||this.height?gl.texImage2D(face,0,format,width,height,border,format,type,imageData):gl.texImage2D(face,0,format,format,type,imageData),this}}]),TextureCube}(texture_Texture);texture_cube_TextureCube.FACES=FACES;var _$33190$36012$,texture_3d_Texture3D=function(_Texture){function Texture3D(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Texture3D),assertWebGL2Context(gl),props=Object.assign({depth:1},props,{target:32879,unpackFlipY:!1}),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Texture3D).call(this,gl,props))).initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Texture3D,_Texture),Object(createClass.a)(Texture3D,null,[{key:"isSupported",value:function isSupported(gl){return isWebGL2(gl)}}]),Object(createClass.a)(Texture3D,[{key:"setImageData",value:function setImageData(_ref){var _this2=this,_ref$level=_ref.level,level=void 0===_ref$level?0:_ref$level,_ref$dataFormat=_ref.dataFormat,dataFormat=void 0===_ref$dataFormat?6408:_ref$dataFormat,width=_ref.width,height=_ref.height,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$border=_ref.border,border=void 0===_ref$border?0:_ref$border,format=_ref.format,_ref$type=_ref.type,type=void 0===_ref$type?5121:_ref$type,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,data=_ref.data,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),withParameters(this.gl,parameters,function(){ArrayBuffer.isView(data)&&_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,data),data instanceof buffer_Buffer&&(_this2.gl.bindBuffer(35052,data.handle),_this2.gl.texImage3D(_this2.target,level,dataFormat,width,height,depth,border,format,type,offset))}),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{var channels=DATA_FORMAT_CHANNELS[this.dataFormat]||4,channelSize=TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*channels*channelSize,"Texture")}return this.loaded=!0,this}}]),Texture3D}(texture_Texture),EXT_FLOAT_WEBGL2="EXT_color_buffer_float",renderbuffer_formats=(_$33190$36012$={},Object(defineProperty.a)(_$33190$36012$,33189,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,33190,{gl2:!0,bpp:3}),Object(defineProperty.a)(_$33190$36012$,36012,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36168,{bpp:1}),Object(defineProperty.a)(_$33190$36012$,34041,{bpp:4}),Object(defineProperty.a)(_$33190$36012$,35056,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36013,{gl2:!0,bpp:5}),Object(defineProperty.a)(_$33190$36012$,32854,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,36194,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,32855,{bpp:2}),Object(defineProperty.a)(_$33190$36012$,33321,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33330,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33329,{gl2:!0,bpp:1}),Object(defineProperty.a)(_$33190$36012$,33332,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33331,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33334,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33333,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33323,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33336,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33335,{gl2:!0,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33338,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33337,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33340,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,33339,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,32849,{gl2:!0,bpp:3}),Object(defineProperty.a)(_$33190$36012$,32856,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,32857,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36220,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36238,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36975,{gl2:!0,bpp:4}),Object(defineProperty.a)(_$33190$36012$,36214,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,36232,{gl2:!0,bpp:8}),Object(defineProperty.a)(_$33190$36012$,36226,{gl2:!0,bpp:16}),Object(defineProperty.a)(_$33190$36012$,36208,{gl2:!0,bpp:16}),Object(defineProperty.a)(_$33190$36012$,33325,{gl2:EXT_FLOAT_WEBGL2,bpp:2}),Object(defineProperty.a)(_$33190$36012$,33327,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),Object(defineProperty.a)(_$33190$36012$,34842,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),Object(defineProperty.a)(_$33190$36012$,33326,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),Object(defineProperty.a)(_$33190$36012$,33328,{gl2:EXT_FLOAT_WEBGL2,bpp:8}),Object(defineProperty.a)(_$33190$36012$,34836,{gl2:EXT_FLOAT_WEBGL2,bpp:16}),Object(defineProperty.a)(_$33190$36012$,35898,{gl2:EXT_FLOAT_WEBGL2,bpp:4}),_$33190$36012$);var _$33901$3379$,renderbuffer_Renderbuffer=function(_Resource){function Renderbuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Renderbuffer),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Renderbuffer).call(this,gl,opts))).initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Renderbuffer,_Resource),Object(createClass.a)(Renderbuffer,null,[{key:"isSupported",value:function isSupported(gl){var format=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!format||function renderbuffer_isFormatSupported(gl,format,formats){var info=formats[format];if(!info)return!1;var value=isWebGL2(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}(gl,format,renderbuffer_formats)}},{key:"getSamplesForFormat",value:function getSamplesForFormat(gl,_ref2){var format=_ref2.format;return gl.getInternalformatParameter(36161,format,32937)}}]),Object(createClass.a)(Renderbuffer,[{key:"initialize",value:function initialize(_ref3){var format=_ref3.format,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$samples=_ref3.samples,samples=void 0===_ref3$samples?0:_ref3$samples;return assert(format,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==samples&&isWebGL2(this.gl)?this.gl.renderbufferStorageMultisample(36161,samples,format,width,height):this.gl.renderbufferStorage(36161,format,width,height),this.format=format,this.width=width,this.height=height,this.samples=samples,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*renderbuffer_formats[this.format].bpp),this}},{key:"resize",value:function resize(_ref4){var width=_ref4.width,height=_ref4.height;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindRenderbuffer(36161,handle)}},{key:"_syncHandle",value:function _syncHandle(handle){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function _getParameter(pname){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,pname)}}]),Renderbuffer}(resource_Resource),GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_COLOR_BUFFER_BIT=16384,GL_COLOR=6144,GL_DEPTH=6145,GL_STENCIL=6146,GL_DEPTH_STENCIL=34041,ERR_ARGUMENTS="clear: bad arguments";function clear_clear(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$framebuffer=_ref.framebuffer,framebuffer=void 0===_ref$framebuffer?null:_ref$framebuffer,_ref$color=_ref.color,color=void 0===_ref$color?null:_ref$color,_ref$depth=_ref.depth,depth=void 0===_ref$depth?null:_ref$depth,_ref$stencil=_ref.stencil,stencil=void 0===_ref$stencil?null:_ref$stencil,parameters={};framebuffer&&(parameters.framebuffer=framebuffer);var clearFlags=0;color&&(clearFlags|=GL_COLOR_BUFFER_BIT,!0!==color&&(parameters.clearColor=color)),depth&&(clearFlags|=GL_DEPTH_BUFFER_BIT,!0!==depth&&(parameters.clearDepth=depth)),stencil&&(clearFlags|=GL_STENCIL_BUFFER_BIT,!0!==depth&&(parameters.clearStencil=depth)),assert(0!==clearFlags,ERR_ARGUMENTS),withParameters(gl,parameters,function(){gl.clear(clearFlags)})}function glFormatToComponents(format){switch(format){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return assert(!1),0}}function readPixelsToArray(source){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$sourceX=_ref.sourceX,sourceX=void 0===_ref$sourceX?0:_ref$sourceX,_ref$sourceY=_ref.sourceY,sourceY=void 0===_ref$sourceY?0:_ref$sourceY,_ref$sourceFormat=_ref.sourceFormat,sourceFormat=void 0===_ref$sourceFormat?6408:_ref$sourceFormat,_ref$sourceAttachment=_ref.sourceAttachment,sourceAttachment=void 0===_ref$sourceAttachment?36064:_ref$sourceAttachment,_ref$target=_ref.target,target=void 0===_ref$target?null:_ref$target,sourceWidth=_ref.sourceWidth,sourceHeight=_ref.sourceHeight,sourceType=_ref.sourceType,_getFramebuffer=getFramebuffer(source),framebuffer=_getFramebuffer.framebuffer,deleteFramebuffer=_getFramebuffer.deleteFramebuffer;assert(framebuffer);var gl=framebuffer.gl,handle=framebuffer.handle,attachments=framebuffer.attachments;sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,36064===sourceAttachment&&null===handle&&(sourceAttachment=1028),assert(attachments[sourceAttachment]),target=function getPixelArray(pixelArray,type,format,width,height){if(pixelArray)return pixelArray;var ArrayType=getTypedArrayFromGLType(type=type||5121,{clamped:!1}),components=glFormatToComponents(format);return new ArrayType(width*height*components)}(target,sourceType=sourceType||attachments[sourceAttachment].type,sourceFormat,sourceWidth,sourceHeight),sourceType=sourceType||getGLTypeFromTypedArray(target);var prevHandle=gl.bindFramebuffer(36160,handle);return gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,target),gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete(),target}function copy_and_blit_readPixelsToBuffer(source,_ref2){var _ref2$sourceX=_ref2.sourceX,sourceX=void 0===_ref2$sourceX?0:_ref2$sourceX,_ref2$sourceY=_ref2.sourceY,sourceY=void 0===_ref2$sourceY?0:_ref2$sourceY,_ref2$sourceFormat=_ref2.sourceFormat,sourceFormat=void 0===_ref2$sourceFormat?6408:_ref2$sourceFormat,_ref2$target=_ref2.target,target=void 0===_ref2$target?null:_ref2$target,_ref2$targetByteOffse=_ref2.targetByteOffset,targetByteOffset=void 0===_ref2$targetByteOffse?0:_ref2$targetByteOffse,sourceWidth=_ref2.sourceWidth,sourceHeight=_ref2.sourceHeight,sourceType=_ref2.sourceType,_getFramebuffer2=getFramebuffer(source),framebuffer=_getFramebuffer2.framebuffer,deleteFramebuffer=_getFramebuffer2.deleteFramebuffer;assert(framebuffer);var gl=framebuffer.gl;if(sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,assertWebGL2Context(gl),sourceType=sourceType||(target?target.type:5121),!target){var components=glFormatToComponents(sourceFormat),byteCount=function glTypeToBytes(type){switch(type){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return assert(!1),0}}(sourceType);target=new buffer_Buffer(gl,{byteLength:targetByteOffset+sourceWidth*sourceHeight*components*byteCount,accessor:{type:sourceType,size:components}})}return target.bind({target:35051}),withParameters(gl,{framebuffer:framebuffer},function(){gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,targetByteOffset)}),target.unbind({target:35051}),deleteFramebuffer&&framebuffer.delete(),target}function copy_and_blit_copyToDataUrl(source){for(var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$sourceAttachmen=_ref3.sourceAttachment,sourceAttachment=void 0===_ref3$sourceAttachmen?36064:_ref3$sourceAttachmen,_ref3$targetMaxHeight=_ref3.targetMaxHeight,targetMaxHeight=void 0===_ref3$targetMaxHeight?Number.MAX_SAFE_INTEGER:_ref3$targetMaxHeight,data=readPixelsToArray(source,{sourceAttachment:sourceAttachment}),width=source.width,height=source.height;height>targetMaxHeight;){var _scalePixels=scalePixels({data:data,width:width,height:height});data=_scalePixels.data,width=_scalePixels.width,height=_scalePixels.height}!function flipRows(_ref2){var data=_ref2.data,width=_ref2.width,height=_ref2.height,_ref2$bytesPerPixel=_ref2.bytesPerPixel,bytesPerPixel=void 0===_ref2$bytesPerPixel?4:_ref2$bytesPerPixel,temp=_ref2.temp,bytesPerRow=width*bytesPerPixel;temp=temp||new Uint8Array(bytesPerRow);for(var y=0;y<height/2;++y){var topOffset=y*bytesPerRow,bottomOffset=(height-y-1)*bytesPerRow;temp.set(data.subarray(topOffset,topOffset+bytesPerRow)),data.copyWithin(topOffset,bottomOffset,bottomOffset+bytesPerRow),data.set(temp,bottomOffset)}}({data:data,width:width,height:height});var canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var context=canvas.getContext("2d"),imageData=context.createImageData(width,height);return imageData.data.set(data),context.putImageData(imageData,0,0),canvas.toDataURL()}function getFramebuffer(source){return source instanceof framebuffer_Framebuffer?{framebuffer:source,deleteFramebuffer:!1}:{framebuffer:(texture=source,gl=texture.gl,width=texture.width,height=texture.height,id=texture.id,framebuffer=new framebuffer_Framebuffer(gl,Object.assign({},opts,{id:"framebuffer-for-".concat(id),width:width,height:height,attachments:Object(defineProperty.a)({},36064,texture)})),framebuffer),deleteFramebuffer:!0};var texture,opts,gl,width,height,id,framebuffer}var _FEATURES$WEBGL2$FEAT;_$33901$3379$={},Object(defineProperty.a)(_$33901$3379$,33902,{gl1:new Float32Array([1,1])}),Object(defineProperty.a)(_$33901$3379$,33901,{gl1:new Float32Array([1,1])}),Object(defineProperty.a)(_$33901$3379$,3379,{gl1:64,gl2:2048}),Object(defineProperty.a)(_$33901$3379$,34076,{gl1:16}),Object(defineProperty.a)(_$33901$3379$,34930,{gl1:8}),Object(defineProperty.a)(_$33901$3379$,35661,{gl1:8}),Object(defineProperty.a)(_$33901$3379$,35660,{gl1:0}),Object(defineProperty.a)(_$33901$3379$,34024,{gl1:1}),Object(defineProperty.a)(_$33901$3379$,36348,{gl1:8}),Object(defineProperty.a)(_$33901$3379$,34921,{gl1:8}),Object(defineProperty.a)(_$33901$3379$,36347,{gl1:128}),Object(defineProperty.a)(_$33901$3379$,36349,{gl1:16}),Object(defineProperty.a)(_$33901$3379$,3386,{gl1:new Int32Array([0,0])}),Object(defineProperty.a)(_$33901$3379$,32883,{gl1:0,gl2:256}),Object(defineProperty.a)(_$33901$3379$,35071,{gl1:0,gl2:256}),Object(defineProperty.a)(_$33901$3379$,37447,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,36063,{gl1:0,gl2:4}),Object(defineProperty.a)(_$33901$3379$,35379,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35374,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35377,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,34852,{gl1:0,gl2:4}),Object(defineProperty.a)(_$33901$3379$,36203,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,33001,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,33e3,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,37157,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35373,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35657,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,36183,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,37137,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,34045,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35978,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35979,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35968,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35376,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35375,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35659,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,37154,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35371,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35658,{gl1:0,gl2:0}),Object(defineProperty.a)(_$33901$3379$,35076,{gl1:0,gl2:-8,negative:!0}),Object(defineProperty.a)(_$33901$3379$,35077,{gl1:0,gl2:7}),Object(defineProperty.a)(_$33901$3379$,35380,{gl1:0,gl2:0});var FEATURES={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"},webgl_features_table=(_FEATURES$WEBGL2$FEAT={},Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.WEBGL2,[function(gl){return isWebGL2(gl)}]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_RGBA32F,["WEBGL_color_buffer_float","EXT_color_buffer_float"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.COLOR_ATTACHMENT_HALF_FLOAT,[!1,"EXT_color_buffer_half_float"]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(defineProperty.a)(_FEATURES$WEBGL2$FEAT,FEATURES.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),_FEATURES$WEBGL2$FEAT);function hasFeature(gl,feature){return hasFeatures(gl,feature)}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every(function(feature){return isFeatureSupported(gl,feature)})}function isFeatureSupported(gl,cap){var feature=webgl_features_table[cap];assert(feature,cap);var isSupported,featureDefinition=isWebGL2(gl)&&feature[1]||feature[0];if("function"==typeof featureDefinition)isSupported=featureDefinition(gl);else if(Array.isArray(featureDefinition)){isSupported=!0;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=featureDefinition[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;isSupported=isSupported&&Boolean(gl.getExtension(extension))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else"string"==typeof featureDefinition?isSupported=Boolean(gl.getExtension(featureDefinition)):"boolean"==typeof featureDefinition?isSupported=featureDefinition:assert(!1);return isSupported}var framebuffer_Framebuffer=function(_Resource){function Framebuffer(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Framebuffer),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Framebuffer).call(this,gl,opts))).width=null,_this.height=null,_this.attachments={},_this.readBuffer=36064,_this.drawBuffers=[36064],_this.initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Framebuffer,_Resource),Object(createClass.a)(Framebuffer,[{key:"MAX_COLOR_ATTACHMENTS",get:function get(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function get(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function isSupported(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},colorBufferFloat=_ref.colorBufferFloat,colorBufferHalfFloat=_ref.colorBufferHalfFloat;return colorBufferFloat&&gl.getExtension(isWebGL2(gl)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),colorBufferHalfFloat&&gl.getExtension(isWebGL2(gl)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function getDefaultFramebuffer(gl){return gl.luma=gl.luma||{},gl.luma.defaultFramebuffer=gl.luma.defaultFramebuffer||new Framebuffer(gl,{id:"default-framebuffer",handle:null,attachments:{}}),gl.luma.defaultFramebuffer}}]),Object(createClass.a)(Framebuffer,[{key:"initialize",value:function initialize(_ref2){var _ref2$width=_ref2.width,width=void 0===_ref2$width?1:_ref2$width,_ref2$height=_ref2.height,height=void 0===_ref2$height?1:_ref2$height,_ref2$attachments=_ref2.attachments,attachments=void 0===_ref2$attachments?null:_ref2$attachments,_ref2$color=_ref2.color,color=void 0===_ref2$color||_ref2$color,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth||_ref2$depth,_ref2$stencil=_ref2.stencil,stencil=void 0!==_ref2$stencil&&_ref2$stencil,_ref2$check=_ref2.check,check=void 0===_ref2$check||_ref2$check,readBuffer=_ref2.readBuffer,drawBuffers=_ref2.drawBuffers;if(assert(width>=0&&height>=0,"Width and height need to be integers"),this.width=width,this.height=height,attachments)for(var attachment in attachments){var target=attachments[attachment];(Array.isArray(target)?target[0]:target).resize({width:width,height:height})}else attachments=this._createDefaultAttachments(color,depth,stencil,width,height);this.update({clearAttachments:!0,attachments:attachments,readBuffer:readBuffer,drawBuffers:drawBuffers}),attachments&&check&&this.checkStatus()}},{key:"update",value:function update(_ref3){var _ref3$attachments=_ref3.attachments,attachments=void 0===_ref3$attachments?{}:_ref3$attachments,readBuffer=_ref3.readBuffer,drawBuffers=_ref3.drawBuffers,_ref3$clearAttachment=_ref3.clearAttachments,clearAttachments=void 0!==_ref3$clearAttachment&&_ref3$clearAttachment,_ref3$resizeAttachmen=_ref3.resizeAttachments,resizeAttachments=void 0===_ref3$resizeAttachmen||_ref3$resizeAttachmen;this.attach(attachments,{clearAttachments:clearAttachments,resizeAttachments:resizeAttachments});var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle);return readBuffer&&this._setReadBuffer(readBuffer),drawBuffers&&this._setDrawBuffers(drawBuffers),gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"resize",value:function resize(){var _ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref4.width,height=_ref4.height;if(null===this.handle)return assert(void 0===width&&void 0===height),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var attachmentPoint in void 0===width&&(width=this.gl.drawingBufferWidth),void 0===height&&(height=this.gl.drawingBufferHeight),width!==this.width&&height!==this.height&&utils_log.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(width,"x").concat(height))(),this.attachments)this.attachments[attachmentPoint].resize({width:width,height:height});return this.width=width,this.height=height,this}},{key:"attach",value:function attach(attachments){var _this2=this,_ref5=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref5$clearAttachment=_ref5.clearAttachments,clearAttachments=void 0!==_ref5$clearAttachment&&_ref5$clearAttachment,_ref5$resizeAttachmen=_ref5.resizeAttachments,resizeAttachments=void 0===_ref5$resizeAttachmen||_ref5$resizeAttachmen,newAttachments={};clearAttachments&&Object.keys(this.attachments).forEach(function(key){newAttachments[key]=null}),Object.assign(newAttachments,attachments);var prevHandle=this.gl.bindFramebuffer(36160,this.handle);for(var key in newAttachments){assert(void 0!==key,"Misspelled framebuffer binding point?");var attachment=Number(key),descriptor=newAttachments[attachment],object=descriptor;if(object)if(object instanceof renderbuffer_Renderbuffer)this._attachRenderbuffer({attachment:attachment,renderbuffer:object});else if(Array.isArray(descriptor)){var _descriptor=Object(slicedToArray.a)(descriptor,3),texture=_descriptor[0],_descriptor$=_descriptor[1],layer=void 0===_descriptor$?0:_descriptor$,_descriptor$2=_descriptor[2],level=void 0===_descriptor$2?0:_descriptor$2;object=texture,this._attachTexture({attachment:attachment,texture:texture,layer:layer,level:level})}else this._attachTexture({attachment:attachment,texture:object,layer:0,level:0});else this._unattach(attachment);resizeAttachments&&object&&object.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,prevHandle||null),Object.assign(this.attachments,attachments),Object.keys(this.attachments).filter(function(key){return!_this2.attachments[key]}).forEach(function(key){delete _this2.attachments[key]})}},{key:"checkStatus",value:function checkStatus(){var gl=this.gl,prevHandle=gl.bindFramebuffer(36160,this.handle),status=gl.checkFramebufferStatus(36160);if(gl.bindFramebuffer(36160,prevHandle||null),36053!==status)throw new Error(function _getFrameBufferStatus(status){return(framebuffer_Framebuffer.STATUS||{})[status]||"Framebuffer error ".concat(status)}(status));return this}},{key:"clear",value:function clear(){var _ref6=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},color=_ref6.color,depth=_ref6.depth,stencil=_ref6.stencil,_ref6$drawBuffers=_ref6.drawBuffers,drawBuffers=void 0===_ref6$drawBuffers?[]:_ref6$drawBuffers,prevHandle=this.gl.bindFramebuffer(36160,this.handle);return(color||depth||stencil)&&clear_clear(this.gl,{color:color,depth:depth,stencil:stencil}),drawBuffers.forEach(function(value,drawBuffer){!function clearBuffer(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$framebuffer=_ref2.framebuffer,framebuffer=void 0===_ref2$framebuffer?null:_ref2$framebuffer,_ref2$buffer=_ref2.buffer,buffer=void 0===_ref2$buffer?GL_COLOR:_ref2$buffer,_ref2$drawBuffer=_ref2.drawBuffer,drawBuffer=void 0===_ref2$drawBuffer?0:_ref2$drawBuffer,_ref2$value=_ref2.value,value=void 0===_ref2$value?[0,0,0,0]:_ref2$value;assertWebGL2Context(gl),withParameters(gl,{framebuffer:framebuffer},function(){switch(buffer){case GL_COLOR:switch(value.constructor){case Int32Array:gl.clearBufferiv(buffer,drawBuffer,value);break;case Uint32Array:gl.clearBufferuiv(buffer,drawBuffer,value);break;case Float32Array:default:gl.clearBufferfv(buffer,drawBuffer,value)}break;case GL_DEPTH:gl.clearBufferfv(GL_DEPTH,0,[value]);break;case GL_STENCIL:gl.clearBufferiv(GL_STENCIL,0,[value]);break;case GL_DEPTH_STENCIL:var _value=Object(slicedToArray.a)(value,2),depth=_value[0],stencil=_value[1];gl.clearBufferfi(GL_DEPTH_STENCIL,0,depth,stencil);break;default:assert(!1,ERR_ARGUMENTS)}})}({drawBuffer:drawBuffer,value:value})}),this.gl.bindFramebuffer(36160,prevHandle||null),this}},{key:"readPixels",value:function readPixels(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function readPixelsToBuffer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function copyToDataUrl(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function copyToImage(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function copyToTexture(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function blit(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return utils_log.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function invalidate(_ref7){var _ref7$attachments=_ref7.attachments,attachments=void 0===_ref7$attachments?[]:_ref7$attachments,_ref7$x=_ref7.x,x=void 0===_ref7$x?0:_ref7$x,_ref7$y=_ref7.y,y=void 0===_ref7$y?0:_ref7$y,width=_ref7.width,height=_ref7.height,gl=this.gl;assertWebGL2Context(gl);var prevHandle=gl.bindFramebuffer(36008,this.handle);return 0===x&&0===y&&void 0===width&&void 0===height?gl.invalidateFramebuffer(36008,attachments):gl.invalidateFramebuffer(36008,attachments,x,y,width,height),gl.bindFramebuffer(36008,prevHandle),this}},{key:"getAttachmentParameter",value:function getAttachmentParameter(attachment,pname,keys){var value=this._getAttachmentParameterFallback(pname);return null===value&&(this.gl.bindFramebuffer(36160,this.handle),value=this.gl.getFramebufferAttachmentParameter(36160,attachment,pname),this.gl.bindFramebuffer(36160,null)),keys&&value>1e3&&(value=getKey(this.gl,value)),value}},{key:"getAttachmentParameters",value:function getAttachmentParameters(){var attachment=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,keys=arguments.length>1?arguments[1]:void 0,parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],values={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameters[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pname=_step.value;values[keys?getKey(this.gl,pname):pname]=this.getAttachmentParameter(attachment,pname,keys)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return values}},{key:"getParameters",value:function getParameters(){for(var keys=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],parameters={},_i=0,_attachments=Object.keys(this.attachments);_i<_attachments.length;_i++){var attachmentName=_attachments[_i],attachment=Number(attachmentName);parameters[keys?getKey(this.gl,attachment):attachment]=this.getAttachmentParameters(attachment,keys)}return parameters}},{key:"show",value:function show(){return"undefined"!=typeof window&&window.open(copy_and_blit_copyToDataUrl(this),"luma-debug-texture"),this}},{key:"log",value:function log(){var priority=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(priority>utils_log.priority||"undefined"==typeof window)return this;message=message||"Framebuffer ".concat(this.id);var image=copy_and_blit_copyToDataUrl(this,{maxHeight:100});return utils_log.image({priority:priority,message:message,image:image},message)(),this}},{key:"bind",value:function bind(){var _ref8$target=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,target=void 0===_ref8$target?36160:_ref8$target;return this.gl.bindFramebuffer(target,this.handle),this}},{key:"unbind",value:function unbind(){var _ref9$target=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,target=void 0===_ref9$target?36160:_ref9$target;return this.gl.bindFramebuffer(target,null),this}},{key:"_createDefaultAttachments",value:function _createDefaultAttachments(color,depth,stencil,width,height){var _parameters,defaultAttachments=null;color&&((defaultAttachments=defaultAttachments||{})[36064]=new texture_2d_Texture2D(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:width,height:height,mipmaps:!1,parameters:(_parameters={},Object(defineProperty.a)(_parameters,10241,9728),Object(defineProperty.a)(_parameters,10240,9728),Object(defineProperty.a)(_parameters,10242,33071),Object(defineProperty.a)(_parameters,10243,33071),_parameters)}));return depth&&stencil?(defaultAttachments=defaultAttachments||{})[33306]=new renderbuffer_Renderbuffer(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:width,height:111}):depth?(defaultAttachments=defaultAttachments||{})[36096]=new renderbuffer_Renderbuffer(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:width,height:height}):stencil&&assert(!1),defaultAttachments}},{key:"_unattach",value:function _unattach(attachment){var oldAttachment=this.attachments[attachment];oldAttachment&&(oldAttachment instanceof renderbuffer_Renderbuffer?this.gl.framebufferRenderbuffer(36160,attachment,36161,null):this.gl.framebufferTexture2D(36160,attachment,3553,null,0),delete this.attachments[attachment])}},{key:"_attachRenderbuffer",value:function _attachRenderbuffer(_ref10){var _ref10$attachment=_ref10.attachment,attachment=void 0===_ref10$attachment?36064:_ref10$attachment,renderbuffer=_ref10.renderbuffer;this.gl.framebufferRenderbuffer(36160,attachment,36161,renderbuffer.handle),this.attachments[attachment]=renderbuffer}},{key:"_attachTexture",value:function _attachTexture(_ref11){var _ref11$attachment=_ref11.attachment,attachment=void 0===_ref11$attachment?36064:_ref11$attachment,texture=_ref11.texture,layer=_ref11.layer,level=_ref11.level,gl=this.gl;switch(gl.bindTexture(texture.target,texture.handle),texture.target){case 35866:case 32879:gl.framebufferTextureLayer(36160,attachment,texture.target,level,layer);break;case 34067:var face=function mapIndexToCubeMapFace(layer){return layer<34069?layer+34069:layer}(layer);gl.framebufferTexture2D(36160,attachment,face,texture.handle,level);break;case 3553:gl.framebufferTexture2D(36160,attachment,3553,texture.handle,level);break;default:assert(!1,"Illegal texture type")}gl.bindTexture(texture.target,null),this.attachments[attachment]=texture}},{key:"_setReadBuffer",value:function _setReadBuffer(gl,readBuffer){isWebGL2(gl)?gl.readBuffer(readBuffer):assert(36064===readBuffer||1029===readBuffer,"Multiple render targets not supported"),this.readBuffer=readBuffer}},{key:"_setDrawBuffers",value:function _setDrawBuffers(gl,drawBuffers){if(isWebGL2(gl))gl.drawBuffers(drawBuffers);else{var ext=gl.getExtension("WEBGL.draw_buffers");ext?ext.drawBuffersWEBGL(drawBuffers):assert(1===drawBuffers.length&&(36064===drawBuffers[0]||1029===drawBuffers[0]),"Multiple render targets not supported")}this.drawBuffers=drawBuffers}},{key:"_getAttachmentParameterFallback",value:function _getAttachmentParameterFallback(pname){var caps=function getFeatures(gl){if(gl.luma=gl.luma||{},!gl.luma.caps)for(var cap in gl.luma.caps={},gl.luma.caps.webgl2=isWebGL2(gl),webgl_features_table)gl.luma.caps[cap]=isFeatureSupported(gl,cap);return gl.luma.caps}(this.gl);switch(pname){case 36052:return caps.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return caps.webgl2?null:8;case 33297:return caps.webgl2?null:5125;case 33296:return caps.webgl2||caps.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function _createHandle(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(handle){return this.gl.bindFramebuffer(36160,handle)}},{key:"color",get:function get(){return this.attachments[36064]||null}},{key:"texture",get:function get(){return this.attachments[36064]||null}},{key:"depth",get:function get(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function get(){return this.attachments[36128]||this.attachments[33306]||null}}]),Framebuffer}(resource_Resource);framebuffer_Framebuffer.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];function context_isWebGL2(gl){return Boolean(gl&&2===gl._version)}var contextDefaults={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function createGLContext(){var gl,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options=options=Object.assign({},contextDefaults,options),width=_options.width,height=_options.height;function onError(message){if(options.throwOnError)throw new Error(message);return null}is_browser.a?gl=function createBrowserContext(canvas,options){var _options$onError=options.onError,onError=void 0===_options$onError?function(message){return null}:_options$onError,onCreateError=function onCreateError(error){return onError("WebGL context: ".concat(error.statusMessage||"error"))};canvas.addEventListener("webglcontextcreationerror",onCreateError,!1);var _options$webgl=options.webgl1,webgl1=void 0===_options$webgl||_options$webgl,_options$webgl2=options.webgl2,webgl2=void 0===_options$webgl2||_options$webgl2,gl=null;return webgl2&&(gl=(gl=gl||canvas.getContext("webgl2",options))||canvas.getContext("experimental-webgl2",options)),webgl1&&(gl=(gl=gl||canvas.getContext("webgl",options))||canvas.getContext("experimental-webgl",options)),canvas.removeEventListener("webglcontextcreationerror",onCreateError,!1),gl||onError("Failed to create ".concat(webgl2&&!webgl1?"WebGL2":"WebGL"," context"))}(getCanvas({canvas:options.canvas,width:width,height:height,onError:onError}),options):gl=function createHeadlessContext(options){var width=options.width,height=options.height,webgl1=options.webgl1,webgl2=options.webgl2,onError=options.onError;if(webgl2&&!webgl1)return onError("headless-gl does not support WebGL2");if(!headlessGL)return onError(ERR_HEADLESSGL_NOT_AVAILABLE);var gl=headlessGL(width,height,options);return gl||onError(ERR_HEADLESSGL_FAILED)}(Object(objectSpread.a)({},options,{width:width,height:height,onError:onError}));return gl?(function logInfo(gl){var webGL=context_isWebGL2(gl)?"WebGL2":"WebGL1",info=getContextDebugInfo(gl),driver=info?"(".concat(info.vendor,",").concat(info.renderer,")"):"",debug=gl.debug?" debug":"";utils_log.once(1,"".concat(webGL).concat(debug," context ").concat(driver))()}(gl=instrumentGLContext(gl,options)),gl):null}function instrumentGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl._instrumented)return gl;gl._version=gl._version||function getVersion(gl){if(void 0!==WebGL2RenderingContext&&gl instanceof WebGL2RenderingContext)return 2;return 1}(gl);var _options3=options=Object.assign({},contextDefaults,options),manageState=_options3.manageState,debug=_options3.debug;return manageState&&Object(track_context_state.a)(gl,{copyState:!1,log:function log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return utils_log.log.apply(utils_log,[1].concat(args))()}}),is_browser.a&&debug&&(globals.a.makeDebugContext?(gl=globals.a.makeDebugContext(gl,{debug:debug}),utils_log.priority=Math.max(utils_log.priority,1)):utils_log.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),gl._instrumented=!0,gl}function getShaderName(shader){var defaultName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",match=shader.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return match?match[1]:defaultName}var GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633;function parseGLSLCompilerError(errLog,src,shaderType,shaderName){for(var errorStrings=errLog.split(/\r?\n/),errors={},warnings={},name=shaderName||getShaderName(src)||"(unnamed)",shaderDescription="".concat(function getShaderTypeName(type){switch(type){case GL_FRAGMENT_SHADER:return"fragment";case GL_VERTEX_SHADER:return"vertex";default:return"unknown type"}}(shaderType)," shader ").concat(name),i=0;i<errorStrings.length;i++){var errorString=errorStrings[i];if(!(errorString.length<=1)){var segments=errorString.split(":"),type=segments[0],line=parseInt(segments[2],10);if(isNaN(line))throw new Error("GLSL compilation error in ".concat(shaderDescription,": ").concat(errLog));"WARNING"!==type?errors[line]=errorString:warnings[line]=errorString}}var lines=function addLineNumbers(string){var start=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,delim=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",lines=string.split(/\r?\n/),maxDigits=String(lines.length+start-1).length;return lines.map(function(line,i){var lineNumber=i+start,digits=String(lineNumber).length,prefix=padLeft(lineNumber,maxDigits-digits);return prefix+delim+line})}(src);return{shaderName:shaderDescription,errors:formatErrors(errors,lines),warnings:formatErrors(warnings,lines)}}function formatErrors(errors,lines){for(var message="",i=0;i<lines.length;i++){var line=lines[i];if((errors[i+3]||errors[i+2]||errors[i+1])&&(message+="".concat(line,"\n"),errors[i+1])){var error=errors[i+1],segments=error.split(":",3),type=segments[0],column=parseInt(segments[1],10)||0,err=error.substring(segments.join(":").length+1).trim();message+=padLeft("^^^ ".concat(type,": ").concat(err,"\n\n"),column)}}return message}function padLeft(string,digits){for(var result="",i=0;i<digits;++i)result+=" ";return"".concat(result).concat(string)}function getShaderVersion(source){var version=100,words=source.match(/[^\s]+/g);if(words.length>=2&&"#version"===words[0]){var v=parseInt(words[1],10);Number.isFinite(v)&&(version=v)}return version}var _UNIFORM_SETTERS,_COMPOSITE_GL_TYPES,ERR_SOURCE="Shader: GLSL source code must be a JavaScript string",shader_Shader=function(_Resource){function Shader(gl,props){var _this;Object(classCallCheck.a)(this,Shader),assertWebGLContext(gl),assert("string"==typeof props.source,ERR_SOURCE);var id=getShaderName(props.source,null)||props.id||uid("unnamed ".concat(Shader.getTypeName(props.shaderType)));return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Shader).call(this,gl,{id:id}))).shaderType=props.shaderType,_this.source=props.source,_this.initialize(props),_this}return Object(inherits.a)(Shader,_Resource),Object(createClass.a)(Shader,null,[{key:"getTypeName",value:function getTypeName(shaderType){switch(shaderType){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return assert(!1),"unknown"}}}]),Object(createClass.a)(Shader,[{key:"initialize",value:function initialize(_ref){var source=_ref.source,shaderName=getShaderName(source,null);shaderName&&(this.id=uid(shaderName)),this._compile(source)}},{key:"getParameter",value:function getParameter(pname){return this.gl.getShaderParameter(this.handle,pname)}},{key:"toString",value:function toString(){return"".concat(Shader.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function getName(){return getShaderName(this.source)||"unnamed-shader"}},{key:"getSource",value:function getSource(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function getTranslatedSource(){var extension=this.gl.getExtension("WEBGL.debug_shaders");return extension?extension.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function _compile(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var _parseGLSLCompilerErr=parseGLSLCompilerError(this.gl.getShaderInfoLog(this.handle),this.source,this.shaderType,this.id),shaderName=_parseGLSLCompilerErr.shaderName,errors=_parseGLSLCompilerErr.errors,warnings=_parseGLSLCompilerErr.warnings;throw utils_log.error("GLSL compilation errors in ".concat(shaderName,"\n").concat(errors))(),utils_log.warn("GLSL compilation warnings in ".concat(shaderName,"\n").concat(warnings))(),new Error("GLSL compilation errors in ".concat(shaderName))}}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}]),Shader}(resource_Resource),shader_VertexShader=function(_Shader){function VertexShader(gl,props){return Object(classCallCheck.a)(this,VertexShader),"string"==typeof props&&(props={source:props}),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(VertexShader).call(this,gl,Object.assign({},props,{shaderType:35633})))}return Object(inherits.a)(VertexShader,_Shader),Object(createClass.a)(VertexShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(35633)}}]),VertexShader}(shader_Shader),shader_FragmentShader=function(_Shader2){function FragmentShader(gl,props){return Object(classCallCheck.a)(this,FragmentShader),"string"==typeof props&&(props={source:props}),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FragmentShader).call(this,gl,Object.assign({},props,{shaderType:35632})))}return Object(inherits.a)(FragmentShader,_Shader2),Object(createClass.a)(FragmentShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(35632)}}]),FragmentShader}(shader_Shader),esm_get=__webpack_require__(17),UNIFORM_SETTERS=(_UNIFORM_SETTERS={},Object(defineProperty.a)(_UNIFORM_SETTERS,5126,function(gl,location,value){return gl.uniform1fv(location,toFloatArray(value,1))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35664,function(gl,location,value){return gl.uniform2fv(location,toFloatArray(value,2))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35665,function(gl,location,value){return gl.uniform3fv(location,toFloatArray(value,3))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35666,function(gl,location,value){return gl.uniform4fv(location,toFloatArray(value,4))}),Object(defineProperty.a)(_UNIFORM_SETTERS,5124,function(gl,location,value){return gl.uniform1iv(location,toIntArray(value,1))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35667,function(gl,location,value){return gl.uniform2iv(location,toIntArray(value,2))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35668,function(gl,location,value){return gl.uniform3iv(location,toIntArray(value,3))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35669,function(gl,location,value){return gl.uniform4iv(location,toIntArray(value,4))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35670,function(gl,location,value){return gl.uniform1iv(location,toIntArray(value,1))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35671,function(gl,location,value){return gl.uniform2iv(location,toIntArray(value,2))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35672,function(gl,location,value){return gl.uniform3iv(location,toIntArray(value,3))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35673,function(gl,location,value){return gl.uniform4iv(location,toIntArray(value,4))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35674,function(gl,location,value){return gl.uniformMatrix2fv(location,!1,toFloatArray(value,4))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35675,function(gl,location,value){return gl.uniformMatrix3fv(location,!1,toFloatArray(value,9))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35676,function(gl,location,value){return gl.uniformMatrix4fv(location,!1,toFloatArray(value,16))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35678,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,35680,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,5125,function(gl,location,value){return gl.uniform1uiv(location,toUIntArray(value,1))}),Object(defineProperty.a)(_UNIFORM_SETTERS,36294,function(gl,location,value){return gl.uniform2uiv(location,toUIntArray(value,2))}),Object(defineProperty.a)(_UNIFORM_SETTERS,36295,function(gl,location,value){return gl.uniform3uiv(location,toUIntArray(value,3))}),Object(defineProperty.a)(_UNIFORM_SETTERS,36296,function(gl,location,value){return gl.uniform4uiv(location,toUIntArray(value,4))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35685,function(gl,location,value){return gl.uniformMatrix2x3fv(location,!1,toFloatArray(value,6))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35686,function(gl,location,value){return gl.uniformMatrix2x4fv(location,!1,toFloatArray(value,8))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35687,function(gl,location,value){return gl.uniformMatrix3x2fv(location,!1,toFloatArray(value,6))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35688,function(gl,location,value){return gl.uniformMatrix3x4fv(location,!1,toFloatArray(value,12))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35689,function(gl,location,value){return gl.uniformMatrix4x2fv(location,!1,toFloatArray(value,8))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35690,function(gl,location,value){return gl.uniformMatrix4x3fv(location,!1,toFloatArray(value,12))}),Object(defineProperty.a)(_UNIFORM_SETTERS,35679,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,35682,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36289,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36292,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36293,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36298,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36299,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36300,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36303,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36306,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36307,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36308,function(gl,location,value){return gl.uniform1i(location,value)}),Object(defineProperty.a)(_UNIFORM_SETTERS,36311,function(gl,location,value){return gl.uniform1i(location,value)}),_UNIFORM_SETTERS),FLOAT_ARRAY={},INT_ARRAY={},UINT_ARRAY={},array1=[0];function toTypedArray(value,uniformLength,Type,cache){1===uniformLength&&"boolean"==typeof value&&(value=value?1:0),Number.isFinite(value)&&(array1[0]=value,value=array1);var length=value.length;if(length%uniformLength&&utils_log.warn("Uniform size should be multiples of ".concat(uniformLength),value)(),value instanceof Type)return value;var result=cache[length];result||(result=new Type(length),cache[length]=result);for(var i=0;i<length;i++)result[i]=value[i];return result}function toFloatArray(value,uniformLength){return toTypedArray(value,uniformLength,Float32Array,FLOAT_ARRAY)}function toIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Int32Array,INT_ARRAY)}function toUIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Uint32Array,UINT_ARRAY)}function parseUniformName(name){if("]"!==name[name.length-1])return{name:name,length:1,isArray:!1};var matches=name.match(/([^[]*)(\[[0-9]+\])?/);if(!matches||matches.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(name));return{name:matches[1],length:matches[2]||1,isArray:Boolean(matches[2])}}function getUniformSetter(gl,location,info){var setter=UNIFORM_SETTERS[info.type];if(!setter)throw new Error("Unknown GLSL uniform type ".concat(info.type));return setter.bind(null,gl,location)}function checkUniformValue(value){return Array.isArray(value)||ArrayBuffer.isView(value)?function checkUniformArray(value){if(0===value.length)return!1;for(var checkLength=Math.min(value.length,16),i=0;i<checkLength;++i)if(!Number.isFinite(value[i]))return!1;return!0}(value):!!isFinite(value)||(!0===value||!1===value||(value instanceof texture_Texture||(value instanceof renderbuffer_Renderbuffer||value instanceof framebuffer_Framebuffer&&Boolean(value.texture))))}function areUniformsEqual(uniform1,uniform2){if(Array.isArray(uniform1)||ArrayBuffer.isView(uniform1)){if(!uniform2)return!1;var len=uniform1.length;if(uniform2.length!==len)return!1;for(var i=0;i<len;i++)if(uniform1[i]!==uniform2[i])return!1;return!0}return uniform1===uniform2}var GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_POINTS=0,GL_LINES=1,GL_LINE_LOOP=2,GL_LINE_STRIP=3,GL_TRIANGLES=4,GL_TRIANGLE_STRIP=5,GL_TRIANGLE_FAN=6,GL_FLOAT=5126,COMPOSITE_GL_TYPES=(_COMPOSITE_GL_TYPES={},Object(defineProperty.a)(_COMPOSITE_GL_TYPES,GL_FLOAT,[GL_FLOAT,1,"float"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35664,[GL_FLOAT,2,"vec2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35665,[GL_FLOAT,3,"vec3"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35666,[GL_FLOAT,4,"vec4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,5124,[5124,1,"int"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35667,[5124,2,"ivec2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35668,[5124,3,"ivec3"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35669,[5124,4,"ivec4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,5125,[5125,1,"uint"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,36294,[5125,2,"uvec2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,36295,[5125,3,"uvec3"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,36296,[5125,4,"uvec4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35670,[GL_FLOAT,1,"bool"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35671,[GL_FLOAT,2,"bvec2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35672,[GL_FLOAT,3,"bvec3"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35673,[GL_FLOAT,4,"bvec4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35674,[GL_FLOAT,8,"mat2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35685,[GL_FLOAT,8,"mat2x3"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35686,[GL_FLOAT,8,"mat2x4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35675,[GL_FLOAT,12,"mat3"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35687,[GL_FLOAT,12,"mat3x2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35688,[GL_FLOAT,12,"mat3x4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35676,[GL_FLOAT,16,"mat4"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35689,[GL_FLOAT,16,"mat4x2"]),Object(defineProperty.a)(_COMPOSITE_GL_TYPES,35690,[GL_FLOAT,16,"mat4x3"]),_COMPOSITE_GL_TYPES);function getPrimitiveDrawMode(drawMode){switch(drawMode){case GL_POINTS:return GL_POINTS;case GL_LINES:case GL_LINE_STRIP:case GL_LINE_LOOP:return GL_LINES;case GL_TRIANGLES:case GL_TRIANGLE_STRIP:case GL_TRIANGLE_FAN:return GL_TRIANGLES;default:return assert(!1),0}}function decomposeCompositeGLType(compositeGLType){var typeAndSize=COMPOSITE_GL_TYPES[compositeGLType];if(!typeAndSize)return null;var _typeAndSize=Object(slicedToArray.a)(typeAndSize,2);return{type:_typeAndSize[0],components:_typeAndSize[1]}}function getCompositeGLType(type,components){switch(type){case GL_BYTE:case GL_UNSIGNED_BYTE:case GL_SHORT:case GL_UNSIGNED_SHORT:type=GL_FLOAT}for(var glType in COMPOSITE_GL_TYPES){var _COMPOSITE_GL_TYPES$g=Object(slicedToArray.a)(COMPOSITE_GL_TYPES[glType],3),compType=_COMPOSITE_GL_TYPES$g[0],compComponents=_COMPOSITE_GL_TYPES$g[1],name=_COMPOSITE_GL_TYPES$g[2];if(compType===type&&compComponents===components)return{glType:glType,name:name}}return null}var program_configuration_ProgramConfiguration=function(){function ProgramConfiguration(program){Object(classCallCheck.a)(this,ProgramConfiguration),this.id=program.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(program),this._readVaryingsFromProgram(program)}return Object(createClass.a)(ProgramConfiguration,[{key:"getAttributeInfo",value:function getAttributeInfo(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.attributeInfosByLocation[location]:this.attributeInfosByName[locationOrName]||null}},{key:"getAttributeLocation",value:function getAttributeLocation(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.location:-1}},{key:"getAttributeAccessor",value:function getAttributeAccessor(locationOrName){var attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.accessor:null}},{key:"getVaryingInfo",value:function getVaryingInfo(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.varyingInfos[location]:this.varyingInfosByName[locationOrName]||null}},{key:"getVaryingIndex",value:function getVaryingIndex(locationOrName){var varying=this.getVaryingInfo();return varying?varying.location:-1}},{key:"getVaryingAccessor",value:function getVaryingAccessor(locationOrName){var varying=this.getVaryingInfo();return varying?varying.accessor:null}},{key:"_readAttributesFromProgram",value:function _readAttributesFromProgram(program){for(var gl=program.gl,count=gl.getProgramParameter(program.handle,35721),index=0;index<count;index++){var _gl$getActiveAttrib=gl.getActiveAttrib(program.handle,index),name=_gl$getActiveAttrib.name,type=_gl$getActiveAttrib.type,size=_gl$getActiveAttrib.size,location=gl.getAttribLocation(program.handle,name);location>=0&&this._addAttribute(location,name,type,size)}this.attributeInfos.sort(function(a,b){return a.location-b.location})}},{key:"_readVaryingsFromProgram",value:function _readVaryingsFromProgram(program){var gl=program.gl;if(isWebGL2(gl)){for(var count=gl.getProgramParameter(program.handle,35971),location=0;location<count;location++){var _gl$getTransformFeedb=gl.getTransformFeedbackVarying(program.handle,location),name=_gl$getTransformFeedb.name,type=_gl$getTransformFeedb.type,size=_gl$getTransformFeedb.size;this._addVarying(location,name,type,size)}this.varyingInfos.sort(function(a,b){return a.location-b.location})}}},{key:"_addAttribute",value:function _addAttribute(location,name,compositeType,size){var _decomposeCompositeGL=decomposeCompositeGLType(compositeType),accessor={type:_decomposeCompositeGL.type,size:size*_decomposeCompositeGL.components};this._inferProperties(location,name,accessor);var attributeInfo={location:location,name:name,accessor:new accessor_Accessor(accessor)};this.attributeInfos.push(attributeInfo),this.attributeInfosByLocation[location]=attributeInfo,this.attributeInfosByName[attributeInfo.name]=attributeInfo}},{key:"_inferProperties",value:function _inferProperties(location,name,accessor){/instance/i.test(name)&&(accessor.divisor=1)}},{key:"_addVarying",value:function _addVarying(location,name,compositeType,size){var _decomposeCompositeGL2=decomposeCompositeGLType(compositeType),type=_decomposeCompositeGL2.type,components=_decomposeCompositeGL2.components,varying={location:location,name:name,accessor:new accessor_Accessor({type:type,size:size*components})};this.varyingInfos.push(varying),this.varyingInfosByName[varying.name]=varying}}]),ProgramConfiguration}(),V6_DEPRECATED_METHODS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],program_Program=function(_Resource){function Program(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Program),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Program).call(this,gl,props))).stubRemovedMethods("Program","v6.0",V6_DEPRECATED_METHODS),_this._isCached=!1,_this.initialize(props),Object.seal(Object(assertThisInitialized.a)(_this)),_this._setId(props.id),_this}return Object(inherits.a)(Program,_Resource),Object(createClass.a)(Program,[{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vs=props.vs,fs=props.fs,varyings=props.varyings,_props$bufferMode=props.bufferMode,bufferMode=void 0===_props$bufferMode?35981:_props$bufferMode;return this.vs="string"==typeof vs?new shader_VertexShader(this.gl,{id:"".concat(props.id,"-vs"),source:vs}):vs,this.fs="string"==typeof fs?new shader_FragmentShader(this.gl,{id:"".concat(props.id,"-fs"),source:fs}):fs,assert(this.vs instanceof shader_VertexShader),assert(this.fs instanceof shader_FragmentShader),this.uniforms={},varyings&&(assertWebGL2Context(this.gl),this.varyings=varyings,this.gl.transformFeedbackVaryings(this.handle,varyings,bufferMode)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new program_configuration_ProgramConfiguration(this),this.setProps(props)}},{key:"delete",value:function _delete(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(esm_get.a)(Object(getPrototypeOf.a)(Program.prototype),"delete",this).call(this,options)}},{key:"setProps",value:function setProps(props){return"uniforms"in props&&this.setUniforms(props.uniforms),this}},{key:"draw",value:function draw(_ref){var _this2=this,logPriority=_ref.logPriority,_ref$drawMode=_ref.drawMode,drawMode=void 0===_ref$drawMode?4:_ref$drawMode,vertexCount=_ref.vertexCount,_ref$offset=_ref.offset,offset=void 0===_ref$offset?0:_ref$offset,start=_ref.start,end=_ref.end,_ref$isIndexed=_ref.isIndexed,isIndexed=void 0!==_ref$isIndexed&&_ref$isIndexed,_ref$indexType=_ref.indexType,indexType=void 0===_ref$indexType?5123:_ref$indexType,_ref$isInstanced=_ref.isInstanced,isInstanced=void 0!==_ref$isInstanced&&_ref$isInstanced,_ref$instanceCount=_ref.instanceCount,instanceCount=void 0===_ref$instanceCount?0:_ref$instanceCount,_ref$vertexArray=_ref.vertexArray,vertexArray=void 0===_ref$vertexArray?null:_ref$vertexArray,transformFeedback=_ref.transformFeedback,framebuffer=_ref.framebuffer,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,uniforms=_ref.uniforms,samplers=_ref.samplers;if((uniforms||samplers)&&(utils_log.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(uniforms||{})),void 0!==logPriority){var fb=framebuffer?framebuffer.id:"default",message="mode=".concat(getKey(this.gl,drawMode)," verts=").concat(vertexCount," ")+"instances=".concat(instanceCount," indexType=").concat(getKey(this.gl,indexType)," ")+"isInstanced=".concat(isInstanced," isIndexed=").concat(isIndexed," ")+"Framebuffer=".concat(fb);utils_log.log(logPriority,message)()}return assert(vertexArray),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(vertexArray.bindForDraw(vertexCount,instanceCount,function(){if(void 0!==framebuffer&&(parameters=Object.assign({},parameters,{framebuffer:framebuffer})),transformFeedback){var primitiveMode=getPrimitiveDrawMode(drawMode);transformFeedback.begin(primitiveMode)}_this2._bindTextures(),withParameters(_this2.gl,parameters,function(){isIndexed&&isInstanced?_this2.gl.drawElementsInstanced(drawMode,vertexCount,indexType,offset,instanceCount):isIndexed&&isWebGL2(_this2.gl)&&!isNaN(start)&&!isNaN(end)?_this2.gl.drawRangeElements(drawMode,start,end,vertexCount,indexType,offset):isIndexed?_this2.gl.drawElements(drawMode,vertexCount,indexType,offset):isInstanced?_this2.gl.drawArraysInstanced(drawMode,offset,vertexCount,instanceCount):_this2.gl.drawArrays(drawMode,offset,vertexCount)}),transformFeedback&&transformFeedback.end()}),!0)}},{key:"setUniforms",value:function setUniforms(){var uniform,uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_onChangeCallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},somethingChanged=!1,changedUniforms={};for(var key in uniforms)areUniformsEqual(this.uniforms[key],uniforms[key])||(somethingChanged=!0,changedUniforms[key]=uniforms[key],this.uniforms[key]=(uniform=uniforms[key],Array.isArray(uniform)||ArrayBuffer.isView(uniform)?uniform.slice():uniform));return somethingChanged&&(_onChangeCallback(),function checkUniformValues(uniforms,source,uniformMap){for(var uniformName in uniforms){var value=uniforms[uniformName];if((!uniformMap||Boolean(uniformMap[uniformName]))&&!checkUniformValue(value))throw source=source?"".concat(source," "):"",console.error("".concat(source," Bad uniform ").concat(uniformName),value),new Error("".concat(source," Bad uniform ").concat(uniformName))}return!0}(changedUniforms,this.id,this._uniformSetters),this._setUniforms(changedUniforms)),this}},{key:"reset",value:function reset(){}},{key:"_areTexturesRenderable",value:function _areTexturesRenderable(){var texturesRenderable=!0;for(var uniformName in this.uniforms){var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter&&void 0!==uniformSetter.textureIndex){var uniform=this.uniforms[uniformName];if(uniform instanceof framebuffer_Framebuffer)uniform=uniform.texture;if(uniform instanceof texture_Texture)texturesRenderable=texturesRenderable&&uniform.loaded}}return texturesRenderable}},{key:"_bindTextures",value:function _bindTextures(){for(var uniformName in this.uniforms){var uniformSetter=this._uniformSetters[uniformName];if(uniformSetter&&void 0!==uniformSetter.textureIndex){var uniform=this.uniforms[uniformName];if(uniform instanceof framebuffer_Framebuffer&&(uniform=uniform.texture),uniform instanceof texture_Texture)uniform.bind(uniformSetter.textureIndex)}}}},{key:"_setUniforms",value:function _setUniforms(uniforms){for(var uniformName in this.gl.useProgram(this.handle),uniforms){var uniform=uniforms[uniformName],uniformSetter=this._uniformSetters[uniformName];if(uniformSetter)if(uniform instanceof framebuffer_Framebuffer&&(uniform=uniform.texture),uniform instanceof texture_Texture){void 0===uniformSetter.textureIndex&&(uniformSetter.textureIndex=this._textureIndexCounter++);var texture=uniform,textureIndex=uniformSetter.textureIndex;texture.bind(textureIndex),uniformSetter(textureIndex)}else uniformSetter(uniform)}return this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function _getOptionsFromHandle(handle){var shaderHandles=this.gl.getAttachedShaders(handle),opts={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderHandles[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderHandle=_step.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:opts.vs=new shader_VertexShader({handle:shaderHandle});break;case 35632:opts.fs=new shader_FragmentShader({handle:shaderHandle})}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return opts}},{key:"_getParameter",value:function _getParameter(pname){return this.gl.getProgramParameter(this.handle,pname)}},{key:"_setId",value:function _setId(id){if(!id){var programName=this._getName();this.id=uid(programName)}}},{key:"_getName",value:function _getName(){var programName=this.vs.getName()||this.fs.getName();return programName=(programName=programName.replace(/shader/i,""))?"".concat(programName,"-program"):"program"}},{key:"_compileAndLink",value:function _compileAndLink(){var gl=this.gl;if((gl.attachShader(this.handle,this.vs.handle),gl.attachShader(this.handle,this.fs.handle),utils_log.time(4,"linkProgram for ".concat(this._getName()))(),gl.linkProgram(this.handle),utils_log.timeEnd(4,"linkProgram for ".concat(this._getName()))(),gl.debug||utils_log.priority>0)&&(gl.validateProgram(this.handle),!gl.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(gl.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function _readUniformLocationsFromLinkedProgram(){var gl=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var i=0;i<this._uniformCount;i++){var info=this.gl.getActiveUniform(this.handle,i),_parseUniformName=parseUniformName(info.name),name=_parseUniformName.name,location=(_parseUniformName.isArray,gl.getUniformLocation(this.handle,name));this._uniformSetters[name]=getUniformSetter(gl,location,info)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function getActiveUniforms(uniformIndices,pname){return this.gl.getActiveUniforms(this.handle,uniformIndices,pname)}},{key:"getUniformBlockIndex",value:function getUniformBlockIndex(blockName){return this.gl.getUniformBlockIndex(this.handle,blockName)}},{key:"getActiveUniformBlockParameter",value:function getActiveUniformBlockParameter(blockIndex,pname){return this.gl.getActiveUniformBlockParameter(this.handle,blockIndex,pname)}},{key:"uniformBlockBinding",value:function uniformBlockBinding(blockIndex,blockBinding){this.gl.uniformBlockBinding(this.handle,blockIndex,blockBinding)}}]),Program}(resource_Resource),query_Query=function(_Resource){function Query(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,Query),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Query).call(this,gl,opts))).target=null,_this._queryPending=!1,_this._pollingPromise=null,Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(Query,_Resource),Object(createClass.a)(Query,null,[{key:"isSupported",value:function isSupported(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],webgl2=isWebGL2(gl),hasTimerQuery=hasFeatures(gl,FEATURES.TIMER_QUERY),supported=webgl2||hasTimerQuery,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=opts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){switch(_step.value){case"queries":supported=supported&&webgl2;break;case"timers":supported=supported&&hasTimerQuery;break;default:assert(!1)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return supported}}]),Object(createClass.a)(Query,[{key:"beginTimeElapsedQuery",value:function beginTimeElapsedQuery(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function beginOcclusionQuery(){var _ref$conservative=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,conservative=void 0!==_ref$conservative&&_ref$conservative;return this.begin(conservative?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function beginTransformFeedbackQuery(){return this.begin(35976)}},{key:"begin",value:function begin(target){return this._queryPending?this:(this.target=target,this.gl.beginQuery(this.target,this.handle),this)}},{key:"end",value:function end(){return this._queryPending?this:(this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function isResultAvailable(){if(!this._queryPending)return!1;var resultAvailable=this.gl.getQueryParameter(this.handle,34919);return resultAvailable&&(this._queryPending=!1),resultAvailable}},{key:"isTimerDisjoint",value:function isTimerDisjoint(){return this.gl.getParameter(36795)}},{key:"getResult",value:function getResult(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function getTimerMilliseconds(){return this.getResult()/1e6}},{key:"createPoll",value:function createPoll(){var _this2=this,limit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var counter=0;return this._pollingPromise=new Promise(function(resolve,reject){requestAnimationFrame(function poll(){_this2.isResultAvailable()?(resolve(_this2.getResult()),_this2._pollingPromise=null):counter++>limit?(reject("Timed out"),_this2._pollingPromise=null):requestAnimationFrame(poll)})}),this._pollingPromise}},{key:"_createHandle",value:function _createHandle(){return Query.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteQuery(this.handle)}}]),Query}(resource_Resource),transform_feedback_TransformFeedback=function(_Resource){function TransformFeedback(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,TransformFeedback),assertWebGL2Context(gl),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TransformFeedback).call(this,gl,props))).initialize(props),_this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(TransformFeedback,_Resource),Object(createClass.a)(TransformFeedback,null,[{key:"isSupported",value:function isSupported(gl){return isWebGL2(gl)}}]),Object(createClass.a)(TransformFeedback,[{key:"initialize",value:function initialize(){var _this2=this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,isObjectEmpty(this.buffers)||this.bind(function(){return _this2._unbindBuffers()}),this.setProps(props),this}},{key:"setProps",value:function setProps(props){"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"bindOnUse"in props&&(props=props.bindOnUse),"buffers"in props&&this.setBuffers(props.buffers)}},{key:"setBuffers",value:function setBuffers(){var _this3=this,buffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var bufferName in buffers)_this3.setBuffer(bufferName,buffers[bufferName])}),this}},{key:"setBuffer",value:function setBuffer(locationOrName,bufferOrParams){var _this4=this,location=this._getVaryingIndex(locationOrName),_this$_getBufferParam=this._getBufferParams(bufferOrParams),buffer=_this$_getBufferParam.buffer,byteSize=_this$_getBufferParam.byteSize,byteOffset=_this$_getBufferParam.byteOffset;return location<0?(this.unused[locationOrName]=buffer,utils_log.warn(function(){return"".concat(_this4.id," unused varying buffer ").concat(locationOrName)})(),this):(this.buffers[location]=bufferOrParams,this.bindOnUse||this._bindBuffer(location,buffer,byteOffset,byteSize),this)}},{key:"begin",value:function begin(){var primitiveMode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(primitiveMode),this}},{key:"end",value:function end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function _getBufferParams(bufferOrParams){var byteOffset,byteSize,buffer;return bufferOrParams instanceof buffer_Buffer==!1?(buffer=bufferOrParams.buffer,byteSize=bufferOrParams.byteSize,byteOffset=bufferOrParams.byteOffset):buffer=bufferOrParams,void 0===byteOffset&&void 0===byteSize||(byteOffset=byteOffset||0,byteSize=byteSize||buffer.byteLength-byteOffset),{buffer:buffer,byteOffset:byteOffset,byteSize:byteSize}}},{key:"_getVaryingInfo",value:function _getVaryingInfo(locationOrName){return this.configuration&&this.configuration.getVaryingInfo(locationOrName)}},{key:"_getVaryingIndex",value:function _getVaryingIndex(locationOrName){if(this.configuration)return this.configuration.getVaryingInfo(locationOrName).location;var location=Number(locationOrName);return Number.isFinite(location)?location:-1}},{key:"_bindBuffers",value:function _bindBuffers(){if(this.bindOnUse)for(var bufferIndex in this.buffers){var _this$_getBufferParam2=this._getBufferParams(this.buffers[bufferIndex]),buffer=_this$_getBufferParam2.buffer,byteSize=_this$_getBufferParam2.byteSize,byteOffset=_this$_getBufferParam2.byteOffset;this._bindBuffer(bufferIndex,buffer,byteOffset,byteSize)}}},{key:"_unbindBuffers",value:function _unbindBuffers(){if(this.bindOnUse)for(var bufferIndex in this.buffers)this._bindBuffer(bufferIndex,null)}},{key:"_bindBuffer",value:function _bindBuffer(index,buffer){var byteOffset=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,byteSize=arguments.length>3?arguments[3]:void 0,handle=buffer&&buffer.handle;return handle&&void 0!==byteSize?this.gl.bindBufferRange(35982,index,handle,byteOffset,byteSize):this.gl.bindBufferBase(35982,index,handle),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function _bindHandle(handle){this.gl.bindTransformFeedback(36386,this.handle)}}]),TransformFeedback}(resource_Resource),arrayBuffer=null;function getScratchArray(Type,length){return new Type(function getScratchArrayBuffer(byteLength){return(!arrayBuffer||arrayBuffer.byteLength<byteLength)&&(arrayBuffer=new ArrayBuffer(byteLength)),arrayBuffer}(Type.BYTES_PER_ELEMENT*length),0,length)}var env_globals=__webpack_require__(30),env_is_browser=__webpack_require__(142),is_electron=__webpack_require__(143);var vertex_array_object_VertexArrayObject=function(_Resource){function VertexArrayObject(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,VertexArrayObject);var id=opts.id||opts.program&&opts.program.id;return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(VertexArrayObject).call(this,gl,Object.assign({},opts,{id:id})))).hasVertexArrays=VertexArrayObject.isSupported(gl),_this.buffer=null,_this.bufferValue=null,_this.initialize(opts),Object.seal(Object(assertThisInitialized.a)(_this)),_this}return Object(inherits.a)(VertexArrayObject,_Resource),Object(createClass.a)(VertexArrayObject,null,[{key:"isSupported",value:function isSupported(gl){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?isWebGL2(gl)||"Chrome"===function getBrowser(mockUserAgent){if(!mockUserAgent&&!Object(env_is_browser.a)())return"Node";if(Object(is_electron.a)(mockUserAgent))return"Electron";var navigator_="undefined"!=typeof navigator?navigator:{},userAgent=mockUserAgent||navigator_.userAgent||"";if(userAgent.indexOf("Edge")>-1)return"Edge";var isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident?"IE":env_globals.b.chrome?"Chrome":env_globals.b.safari?"Safari":env_globals.b.mozInnerScreenX?"Firefox":"Unknown"}():isWebGL2(gl)||gl.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function getDefaultArray(gl){return gl.luma=gl.luma||{},gl.luma.defaultVertexArray||(gl.luma.defaultVertexArray=new VertexArrayObject(gl,{handle:null})),gl.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function getMaxAttributes(gl){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||gl.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}},{key:"setConstant",value:function setConstant(gl,location,array){switch(array.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(gl,location,array);break;case Int32Array:VertexArrayObject._setConstantIntArray(gl,location,array);break;case Uint32Array:VertexArrayObject._setConstantUintArray(gl,location,array);break;default:assert(!1)}}}]),Object(createClass.a)(VertexArrayObject,[{key:"delete",value:function _delete(){Object(esm_get.a)(Object(getPrototypeOf.a)(VertexArrayObject.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(props)}},{key:"setProps",value:function setProps(props){return this}},{key:"setElementBuffer",value:function setElementBuffer(){var _this2=this,elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return assert(!elementBuffer||34963===elementBuffer.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){_this2.gl.bindBuffer(34963,elementBuffer?elementBuffer.handle:null)}),this}},{key:"setBuffer",value:function setBuffer(location,buffer,accessor){if(34963===buffer.target)return this.setElementBuffer(buffer,accessor);var size=accessor.size,type=accessor.type,stride=accessor.stride,offset=accessor.offset,normalized=accessor.normalized,integer=accessor.integer,divisor=accessor.divisor,gl=this.gl;return location=Number(location),this.bind(function(){gl.bindBuffer(34962,buffer.handle),integer?(assert(isWebGL2(gl)),gl.vertexAttribIPointer(location,size,type,stride,offset)):gl.vertexAttribPointer(location,size,type,normalized,stride,offset),gl.enableVertexAttribArray(location),gl.vertexAttribDivisor(location,divisor||0)}),this}},{key:"enable",value:function enable(location){var _this3=this,_enable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!_enable&&0===location&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0})||(location=Number(location),this.bind(function(){return _enable?_this3.gl.enableVertexAttribArray(location):_this3.gl.disableVertexAttribArray(location)})),this}},{key:"getConstantBuffer",value:function getConstantBuffer(elementCount,value,accessor){var constantValue=this._normalizeConstantArrayValue(value,accessor),byteLength=constantValue.byteLength*elementCount,length=constantValue.length*elementCount,updateNeeded=!this.buffer;if(this.buffer=this.buffer||new buffer_Buffer(this.gl,byteLength),updateNeeded=(updateNeeded=updateNeeded||this.buffer.reallocate(byteLength))||!this._compareConstantArrayValues(constantValue,this.bufferValue)){var typedArray=getScratchArray(value.constructor,length);!function fillArray(_ref){for(var target=_ref.target,source=_ref.source,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,_ref$count=_ref.count,count=void 0===_ref$count?1:_ref$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}({target:typedArray,source:constantValue,start:0,count:length}),this.buffer.subData(typedArray),this.bufferValue=value}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function _normalizeConstantArrayValue(arrayValue,accessor){return Array.isArray(arrayValue)?new Float32Array(arrayValue):arrayValue}},{key:"_compareConstantArrayValues",value:function _compareConstantArrayValues(v1,v2){if(!v1||!v2||v1.length!==v2.length||v1.constructor!==v2.constructor)return!1;for(var i=0;i<v1.length;++i)if(v1[i]!==v2[i])return!1;return!0}},{key:"_createHandle",value:function _createHandle(){return this.hasVertexArrays=VertexArrayObject.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function _deleteHandle(handle){return this.hasVertexArrays&&this.gl.deleteVertexArray(handle),[this.elements]}},{key:"_bindHandle",value:function _bindHandle(handle){this.hasVertexArrays&&this.gl.bindVertexArray(handle)}},{key:"_getParameter",value:function _getParameter(pname,_ref){var _this4=this,location=_ref.location;return assert(Number.isFinite(location)),this.bind(function(){switch(pname){case 34373:return _this4.gl.getVertexAttribOffset(location,pname);default:return _this4.gl.getVertexAttrib(location,pname)}})}},{key:"MAX_ATTRIBUTES",get:function get(){return VertexArrayObject.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function _setConstantFloatArray(gl,location,array){switch(array.length){case 1:gl.vertexAttrib1fv(location,array);break;case 2:gl.vertexAttrib2fv(location,array);break;case 3:gl.vertexAttrib3fv(location,array);break;case 4:gl.vertexAttrib4fv(location,array);break;default:assert(!1)}}},{key:"_setConstantIntArray",value:function _setConstantIntArray(gl,location,array){switch(assert(isWebGL2(gl)),array.length){case 1:gl.vertexAttribI1iv(location,array);break;case 2:gl.vertexAttribI2iv(location,array);break;case 3:gl.vertexAttribI3iv(location,array);break;case 4:gl.vertexAttribI4iv(location,array);break;default:assert(!1)}}},{key:"_setConstantUintArray",value:function _setConstantUintArray(gl,location,array){switch(assert(isWebGL2(gl)),array.length){case 1:gl.vertexAttribI1uiv(location,array);break;case 2:gl.vertexAttribI2uiv(location,array);break;case 3:gl.vertexAttribI3uiv(location,array);break;case 4:gl.vertexAttribI4uiv(location,array);break;default:assert(!1)}}}]),VertexArrayObject}(resource_Resource),MULTI_LOCATION_ATTRIBUTE_REGEXP=/^(.+)__LOCATION_([0-9]+)$/,DEPRECATIONS_V6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],vertex_array_VertexArray=function(){function VertexArray(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,VertexArray);var id=opts.id||opts.program&&opts.program.id;this.id=id,this.gl=gl,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=vertex_array_object_VertexArrayObject.isSupported(gl)?new vertex_array_object_VertexArrayObject(gl):vertex_array_object_VertexArrayObject.getDefaultArray(gl),stub_methods_stubRemovedMethods(this,"VertexArray","v6.0",DEPRECATIONS_V6),this.initialize(opts),Object.seal(this)}return Object(createClass.a)(VertexArray,[{key:"delete",value:function _delete(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(props)}},{key:"reset",value:function reset(){this.elements=null,this.elementsAccessor=null;var MAX_ATTRIBUTES=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(MAX_ATTRIBUTES).fill(null),this.accessors=new Array(MAX_ATTRIBUTES).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function setProps(props){return"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"attributes"in props&&this.setAttributes(props.attributes),"elements"in props&&this.setElementBuffer(props.elements),"bindOnUse"in props&&(props=props.bindOnUse),this}},{key:"clearDrawParams",value:function clearDrawParams(){this.drawParams=null}},{key:"getDrawParams",value:function getDrawParams(appParameters){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,appParameters)}},{key:"setAttributes",value:function setAttributes(attributes){var _this=this;return this.vertexArrayObject.bind(function(){for(var locationOrName in attributes){var value=attributes[locationOrName];_this._setAttribute(locationOrName,value)}_this.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function setElementBuffer(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=elementBuffer,this.elementsAccessor=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(elementBuffer,accessor),this}},{key:"setBuffer",value:function setBuffer(locationOrName,buffer){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===buffer.target)return this.setElementBuffer(buffer,appAccessor);var _this$_resolveLocatio=this._resolveLocationAndAccessor(locationOrName,buffer,buffer.accessor,appAccessor),location=_this$_resolveLocatio.location,accessor=_this$_resolveLocatio.accessor;return location>=0&&(this.values[location]=buffer,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(location,buffer,accessor)),this}},{key:"setConstant",value:function setConstant(locationOrName,arrayValue){var appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_this$_resolveLocatio2=this._resolveLocationAndAccessor(locationOrName,arrayValue,Object.assign({size:arrayValue.length},appAccessor)),location=_this$_resolveLocatio2.location,accessor=_this$_resolveLocatio2.accessor;return location>=0&&(arrayValue=this.vertexArrayObject._normalizeConstantArrayValue(arrayValue,accessor),this.values[location]=arrayValue,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(location,!1)),this}},{key:"unbindBuffers",value:function unbindBuffers(){var _this2=this;return this.vertexArrayObject.bind(function(){_this2.elements&&_this2.setElementBuffer(null),_this2.buffer=_this2.buffer||new buffer_Buffer(_this2.gl,{size:4});for(var location=0;location<_this2.vertexArrayObject.MAX_ATTRIBUTES;location++)_this2.values[location]instanceof buffer_Buffer&&(_this2.gl.disableVertexAttribArray(location),_this2.gl.bindBuffer(34962,_this2.buffer.handle),_this2.gl.vertexAttribPointer(location,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function bindBuffers(){var _this3=this;return this.vertexArrayObject.bind(function(){_this3.elements&&_this3.setElementBuffer(_this3.elements);for(var location=0;location<_this3.vertexArrayObject.MAX_ATTRIBUTES;location++){var buffer=_this3.values[location];buffer instanceof buffer_Buffer&&_this3.setBuffer(location,buffer)}}),this}},{key:"bindForDraw",value:function bindForDraw(vertexCount,instanceCount,func){var value,_this4=this;return this.vertexArrayObject.bind(function(){_this4._setConstantAttributes(vertexCount,instanceCount),_this4.vertexArrayObject.hasVertexArrays||_this4.bindBuffers(),value=func(),_this4.vertexArrayObject.hasVertexArrays||_this4.unbindBuffers()}),value}},{key:"_resolveLocationAndAccessor",value:function _resolveLocationAndAccessor(locationOrName,value,valueAccessor,appAccessor){var _this5=this,_this$_getAttributeIn=this._getAttributeIndex(locationOrName),location=_this$_getAttributeIn.location,name=_this$_getAttributeIn.name;if(!Number.isFinite(location)||location<0)return this.unused[locationOrName]=value,utils_log.once(3,function(){return"unused value ".concat(locationOrName," in ").concat(_this5.id)})(),this;var accessInfo=this._getAttributeInfo(name||location);if(!accessInfo)return{location:-1,accessor:null};var accessor=accessor_Accessor.resolve(accessInfo.accessor,valueAccessor,appAccessor),size=accessor.size,type=accessor.type;return assert(Number.isFinite(size)&&Number.isFinite(type)),{location:location,accessor:accessor}}},{key:"_getAttributeInfo",value:function _getAttributeInfo(attributeName){return this.configuration&&this.configuration.getAttributeInfo(attributeName)}},{key:"_getAttributeIndex",value:function _getAttributeIndex(locationOrName){var location=Number(locationOrName);if(Number.isFinite(location))return{location:location};var multiLocation=MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName),name=multiLocation?multiLocation[1]:locationOrName,locationOffset=multiLocation?Number(multiLocation[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(name)+locationOffset,name:name}:{location:-1}}},{key:"_setAttribute",value:function _setAttribute(locationOrName,value){if(value instanceof buffer_Buffer)this.setBuffer(locationOrName,value);else if(Array.isArray(value)&&value.length&&value[0]instanceof buffer_Buffer){var buffer=value[0],accessor=value[1];this.setBuffer(locationOrName,buffer,accessor)}else if(ArrayBuffer.isView(value)||Array.isArray(value)){var constant=value;this.setConstant(locationOrName,constant)}else{if(!(value.buffer instanceof buffer_Buffer))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var _accessor=value;this.setBuffer(locationOrName,_accessor.buffer,_accessor)}}},{key:"_setConstantAttributes",value:function _setConstantAttributes(vertexCount,instanceCount){var elementCount=Math.max(0|vertexCount,0|instanceCount),constant=this.values[0];ArrayBuffer.isView(constant)&&this._setConstantAttributeZero(constant,elementCount);for(var location=1;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)constant=this.values[location],ArrayBuffer.isView(constant)&&this._setConstantAttribute(location,constant)}},{key:"_setConstantAttributeZero",value:function _setConstantAttributeZero(constant,elementCount){if(vertex_array_object_VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,constant);else{var buffer=this.vertexArrayObject.getConstantBuffer(elementCount,constant);this.vertexArrayObject.setBuffer(0,buffer,this.accessors[0])}}},{key:"_setConstantAttribute",value:function _setConstantAttribute(location,constant){vertex_array_object_VertexArrayObject.setConstant(this.gl,location,constant),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(location,!1)}},{key:"_updateDrawParams",value:function _updateDrawParams(){for(var drawParams={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)this._updateDrawParamsForLocation(drawParams,location);return this.elements&&(drawParams.elementCount=this.elements.getElementCount(this.elements.accessor),drawParams.isIndexed=!0,drawParams.indexType=this.elementsAccessor.type||this.elements.accessor.type,drawParams.indexOffset=this.elementsAccessor.offset||0),drawParams.indexCount===1/0&&(drawParams.indexCount=0),drawParams.vertexCount===1/0&&(drawParams.vertexCount=0),drawParams.instanceCount===1/0&&(drawParams.instanceCount=0),drawParams}},{key:"_updateDrawParamsForLocation",value:function _updateDrawParamsForLocation(drawParams,location){var value=this.values[location],accessor=this.accessors[location];if(value){var isInstanced=accessor.divisor>0;if(drawParams.isInstanced=drawParams.isInstanced||isInstanced,value instanceof buffer_Buffer){var buffer=value;if(isInstanced){var instanceCount=buffer.getVertexCount(accessor);drawParams.instanceCount=Math.min(drawParams.instanceCount,instanceCount)}else{var vertexCount=buffer.getVertexCount(accessor);drawParams.vertexCount=Math.min(drawParams.vertexCount,vertexCount)}}}}},{key:"setElements",value:function setElements(){var elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return utils_log.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(elementBuffer,accessor)}}]),VertexArray}(),uniform_buffer_layout_GL_FLOAT=5126,uniform_buffer_layout_GL_INT=5124,uniform_buffer_layout_GL_UNSIGNED_INT=5125;!function(){function UniformBufferLayout(layout){var _this$typedArray;for(var key in Object(classCallCheck.a)(this,UniformBufferLayout),this.layout={},this.size=0,layout)this._addUniform(key,layout[key]);this.size+=(4-this.size%4)%4;var data=new Float32Array(this.size);this.typedArray=(_this$typedArray={},Object(defineProperty.a)(_this$typedArray,uniform_buffer_layout_GL_FLOAT,data),Object(defineProperty.a)(_this$typedArray,uniform_buffer_layout_GL_INT,new Int32Array(data.buffer)),Object(defineProperty.a)(_this$typedArray,uniform_buffer_layout_GL_UNSIGNED_INT,new Uint32Array(data.buffer)),_this$typedArray)}Object(createClass.a)(UniformBufferLayout,[{key:"getBytes",value:function getBytes(){return 4*this.size}},{key:"getData",value:function getData(){return this.typedArray[uniform_buffer_layout_GL_FLOAT]}},{key:"getSubData",value:function getSubData(index){var data,offset;if(void 0===index)data=this.data,offset=0;else{var begin=this.offsets[index],end=begin+this.sizes[index];data=this.data.subarray(begin,end),offset=4*begin}return{data:data,offset:offset}}},{key:"setUniforms",value:function setUniforms(values){for(var key in values)this._setValue(key,values[key]);return this}},{key:"_setValue",value:function _setValue(key,value){var layout=this.layout[key];assert(layout,"UniformLayoutStd140 illegal argument");var typedArray=this.typedArray[layout.type];1===layout.size?typedArray[layout.offset]=value:typedArray.set(value,layout.offset)}},{key:"_addUniform",value:function _addUniform(key,uniformType){var typeAndComponents=decomposeCompositeGLType(uniformType);assert(typeAndComponents,"UniformBufferLayout illegal argument");var type=typeAndComponents.type,count=typeAndComponents.components;this.size=this._alignTo(this.size,count);var offset=this.size;this.size+=count,this.layout[key]={type:type,size:count,offset:offset}}},{key:"_alignTo",value:function _alignTo(size,count){switch(count){case 1:return size;case 2:return size+size%2;default:return size+(4-size%4)%4}}}])}();function getDebugTableForUniforms(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$header=_ref.header,header=void 0===_ref$header?"Uniforms":_ref$header,program=_ref.program,uniforms=_ref.uniforms,_ref$undefinedOnly=_ref.undefinedOnly,undefinedOnly=void 0!==_ref$undefinedOnly&&_ref$undefinedOnly;assert(program);var uniformLocations=program._uniformSetters,table={},uniformNames=Object.keys(uniformLocations).sort(),count=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _uniformName=_step.value;_uniformName.match(".*_.*")||_uniformName.match(".*Matrix")||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _uniformName2=_step2.value;_uniformName2.match(".*Matrix")&&addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName2,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=uniformNames[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _uniformName3=_step3.value;table[_uniformName3]||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:_uniformName3,undefinedOnly:undefinedOnly})&&count++}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var unusedCount=0,unusedTable={};if(!undefinedOnly)for(var uniformName in uniforms){var uniform=uniforms[uniformName];table[uniformName]||(unusedCount++,unusedTable[uniformName]=Object(defineProperty.a)({Type:"NOT USED: ".concat(uniform)},header,formatValue(uniform)))}return{table:table,count:count,unusedTable:unusedTable,unusedCount:unusedCount}}function addUniformToTable(_ref2){var _table$uniformName,table=_ref2.table,header=_ref2.header,uniforms=_ref2.uniforms,uniformName=_ref2.uniformName,undefinedOnly=_ref2.undefinedOnly,value=uniforms[uniformName],isDefined=function isUniformDefined(value){return null!=value}(value);return(!undefinedOnly||!isDefined)&&(table[uniformName]=(_table$uniformName={},Object(defineProperty.a)(_table$uniformName,header,isDefined?formatValue(value):"N/A"),Object(defineProperty.a)(_table$uniformName,"Uniform Type",isDefined?value:"NOT PROVIDED"),_table$uniformName),!0)}function getDebugTableRow(vertexArray,attribute,accessor,header){var _ref3,isInteger,marker,value,gl=vertexArray.gl,type="NOT PROVIDED",size="N/A",verts="N/A",bytes="N/A";if(accessor&&(type=accessor.type,size=accessor.size,isInteger=-1!==(type=String(type).replace("Array","")).indexOf("nt")),attribute instanceof buffer_Buffer){var _ref2,format,buffer=attribute,_buffer$getDebugData=buffer.getDebugData(),data=_buffer$getDebugData.data;if(marker=_buffer$getDebugData.modified?"*":"",value=data,verts=(bytes=buffer.byteLength)/data.BYTES_PER_ELEMENT/size,accessor){var instanced=accessor.divisor>0;format="".concat(instanced?"I ":"P "," ").concat(verts," (x").concat(size,"=").concat(bytes," bytes ").concat(getKey(gl,type),")")}else isInteger=!0,format="".concat(bytes," bytes");return _ref2={},Object(defineProperty.a)(_ref2,header,"".concat(marker).concat(formatValue(value,{size:size,isInteger:isInteger}))),Object(defineProperty.a)(_ref2,"Format ",format),_ref2}return value=attribute,size=attribute.length,isInteger=-1!==(type=String(attribute.constructor.name).replace("Array","")).indexOf("nt"),_ref3={},Object(defineProperty.a)(_ref3,header,"".concat(formatValue(value,{size:size,isInteger:isInteger})," (constant)")),Object(defineProperty.a)(_ref3,"Format ","".concat(size,"x").concat(type," (constant)")),_ref3}function getGLSLDeclaration(name,accessor){var typeAndName=getCompositeGLType(accessor.type,accessor.size);return typeAndName?"".concat(name," (").concat(typeAndName.name,")"):name}function debug_program_configuration_getGLSLDeclaration(attributeInfo){var _attributeInfo$access=attributeInfo.accessor,typeAndName=getCompositeGLType(_attributeInfo$access.type,_attributeInfo$access.size);return typeAndName?"".concat(typeAndName.name," ").concat(attributeInfo.name):attributeInfo.name}var DRAW_MODE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},geometry_Geometry=function(){function Geometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Geometry);var _props$id=props.id,id=void 0===_props$id?uid("geometry"):_props$id,_props$drawMode=props.drawMode,drawMode=void 0===_props$drawMode?DRAW_MODE.TRIANGLES:_props$drawMode,mode=props.mode,_props$attributes=props.attributes,attributes=void 0===_props$attributes?{}:_props$attributes,_props$indices=props.indices,indices=void 0===_props$indices?null:_props$indices,_props$vertexCount=props.vertexCount,vertexCount=void 0===_props$vertexCount?null:_props$vertexCount;this.id=id,this.drawMode=0|drawMode||0|mode,this.attributes={},this.userData={},this._setAttributes(attributes,indices),this.vertexCount=vertexCount||this._calculateVertexCount(this.attributes,this.indices)}return Object(createClass.a)(Geometry,null,[{key:"DRAW_MODE",get:function get(){return DRAW_MODE}}]),Object(createClass.a)(Geometry,[{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getAttributes",value:function getAttributes(){return this.indices?Object(objectSpread.a)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function _print(attributeName){return"Geometry ".concat(this.id," attribute ").concat(attributeName)}},{key:"_setAttributes",value:function _setAttributes(attributes,indices){for(var attributeName in indices&&(this.indices=ArrayBuffer.isView(indices)?{value:indices,size:1}:indices),attributes){var attribute=attributes[attributeName];attribute=ArrayBuffer.isView(attribute)?{value:attribute}:attribute,assert(ArrayBuffer.isView(attribute.value),"".concat(this._print(attributeName),": must be typed array or object with value as typed array")),"indices"===attributeName?(assert(!this.indices),this.indices=attribute,void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed)):this.attributes[attributeName]=attribute}return this}},{key:"_calculateVertexCount",value:function _calculateVertexCount(attributes,indices){if(indices)return indices.value.length;var vertexCount=1/0;for(var attributeName in attributes){var attribute=attributes[attributeName],value=attribute.value,size=attribute.size;!attribute.constant&&value&&size>=1&&(vertexCount=Math.min(vertexCount,value.length/size))}if(!Number.isFinite(vertexCount)){var _attribute=attributes.POSITION||attributes.positions;_attribute&&(vertexCount=_attribute.value&&_attribute.value.length/(_attribute.size||3))}return assert(Number.isFinite(vertexCount)),vertexCount}},{key:"mode",get:function get(){return this.drawMode}}]),Geometry}(),material_Material=function Material(){Object(classCallCheck.a)(this,Material)},vector3=__webpack_require__(113),DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_ATTENUATION=[0,0,1],DEFAULT_LIGHT_DIRECTION=[0,0,-1],DEFAULT_LIGHT_POSITION=[0,0,1],light_source_Light=function Light(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Light),this.id=props.id||uid("light");var _props$color=props.color,color=void 0===_props$color?DEFAULT_LIGHT_COLOR:_props$color;this.color=color;var _props$intensity=props.intensity,intensity=void 0===_props$intensity?1:_props$intensity;this.intensity=intensity},light_source_AmbientLight=function(_Light){function AmbientLight(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(classCallCheck.a)(this,AmbientLight),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(AmbientLight).call(this,props))).type="ambient",_this}return Object(inherits.a)(AmbientLight,_Light),AmbientLight}(light_source_Light),light_source_DirectionalLight=function(_Light2){function DirectionalLight(){var _this2,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,DirectionalLight),(_this2=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DirectionalLight).call(this,props))).type="directional";var _props$direction=props.direction,direction=void 0===_props$direction?DEFAULT_LIGHT_DIRECTION:_props$direction;return _this2.direction=new vector3.a(direction).normalize().toArray(),_this2}return Object(inherits.a)(DirectionalLight,_Light2),DirectionalLight}(light_source_Light),light_source_PointLight=function(_Light3){function PointLight(){var _this3,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,PointLight),(_this3=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PointLight).call(this,props))).type="point";var _props$position=props.position,position=void 0===_props$position?DEFAULT_LIGHT_POSITION:_props$position;return _this3.position=position,_this3.attenuation=_this3._getAttenuation(props),_this3}return Object(inherits.a)(PointLight,_Light3),Object(createClass.a)(PointLight,[{key:"_getAttenuation",value:function _getAttenuation(props){return"attenuation"in props?props.attenuation:"intensity"in props?[0,0,props.intensity]:DEFAULT_ATTENUATION}}]),PointLight}(light_source_Light),esm_typeof=__webpack_require__(14),statIdCounter=0,animation_loop_AnimationLoop=function(){function AnimationLoop(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,AnimationLoop);var _props$onCreateContex=props.onCreateContext,onCreateContext=void 0===_props$onCreateContex?function(opts){return createGLContext(opts)}:_props$onCreateContex,_props$onAddHTML=props.onAddHTML,onAddHTML=void 0===_props$onAddHTML?null:_props$onAddHTML,_props$onInitialize=props.onInitialize,onInitialize=void 0===_props$onInitialize?function(){}:_props$onInitialize,_props$onRender=props.onRender,onRender=void 0===_props$onRender?function(){}:_props$onRender,_props$onFinalize=props.onFinalize,onFinalize=void 0===_props$onFinalize?function(){}:_props$onFinalize,_props$gl=props.gl,gl=void 0===_props$gl?null:_props$gl,_props$glOptions=props.glOptions,glOptions=void 0===_props$glOptions?{}:_props$glOptions,_props$debug=props.debug,debug=void 0!==_props$debug&&_props$debug,_props$createFramebuf=props.createFramebuffer,createFramebuffer=void 0!==_props$createFramebuf&&_props$createFramebuf,_props$autoResizeView=props.autoResizeViewport,autoResizeViewport=void 0===_props$autoResizeView||_props$autoResizeView,_props$autoResizeDraw=props.autoResizeDrawingBuffer,autoResizeDrawingBuffer=void 0===_props$autoResizeDraw||_props$autoResizeDraw,_props$stats=props.stats,stats=void 0===_props$stats?lumaStats.get("animation-loop-".concat(statIdCounter++)):_props$stats,_props$useDevicePixel=props.useDevicePixels,useDevicePixels=void 0===_props$useDevicePixel||_props$useDevicePixel;"useDevicePixelRatio"in props&&(utils_log.deprecated("useDevicePixelRatio","useDevicePixels")(),useDevicePixels=props.useDevicePixelRatio),this.props={onCreateContext:onCreateContext,onAddHTML:onAddHTML,onInitialize:onInitialize,onRender:onRender,onFinalize:onFinalize,gl:gl,glOptions:glOptions,debug:debug,createFramebuffer:createFramebuffer},this.gl=gl,this.needsRedraw=null,this.stats=stats,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:autoResizeViewport,autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return Object(createClass.a)(AnimationLoop,[{key:"delete",value:function _delete(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function setNeedsRedraw(reason){return assert("string"==typeof reason),this.needsRedraw=this.needsRedraw||reason,this}},{key:"setProps",value:function setProps(props){return"autoResizeViewport"in props&&(this.autoResizeViewport=props.autoResizeViewport),"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}},{key:"start",value:function start(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,getPageLoadPromise().then(function(){return!_this._running||_this._initialized?null:(_this._createWebGLContext(opts),_this._createFramebuffer(),_this._startEventHandling(),_this._initializeCallbackData(),_this._updateCallbackData(),_this._resizeCanvasDrawingBuffer(),_this._resizeViewport(),_this._gpuTimeQuery=query_Query.isSupported(_this.gl,["timers"])?new query_Query(_this.gl):null,_this._initialized=!0,_this.onInitialize(_this.animationProps))}).then(function(appContext){_this._running&&(_this._addCallbackData(appContext||{}),!1!==appContext&&_this._startLoop())}),this)}},{key:"redraw",value:function redraw(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function stop(){return this._running&&(this._finalizeCallbackData(),cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"waitForRender",value:function waitForRender(){var _this2=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(function(resolve){_this2._resolveNextFrame=resolve})),this._nextFramePromise}},{key:"toDataURL",value:function(){var _toDataURL=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.setNeedsRedraw("toDataURL"),_context.next=3,this.waitForRender();case 3:return _context.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return _context.stop()}},_callee,this)}));return function toDataURL(){return _toDataURL.apply(this,arguments)}}()},{key:"onCreateContext",value:function onCreateContext(){var _this$props;return(_this$props=this.props).onCreateContext.apply(_this$props,arguments)}},{key:"onInitialize",value:function onInitialize(){var _this$props2;return(_this$props2=this.props).onInitialize.apply(_this$props2,arguments)}},{key:"onRender",value:function onRender(){var _this$props3;return(_this$props3=this.props).onRender.apply(_this$props3,arguments)}},{key:"onFinalize",value:function onFinalize(){var _this$props4;return(_this$props4=this.props).onFinalize.apply(_this$props4,arguments)}},{key:"getHTMLControlValue",value:function getHTMLControlValue(id){var defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,element=document.getElementById(id);return element?Number(element.value):defaultValue}},{key:"setViewParameters",value:function setViewParameters(){return utils_log.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function _startLoop(){var _this3=this;cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(function renderFrame(){_this3._running&&(_this3.redraw(),_this3._animationFrameId=_this3._requestAnimationFrame(renderFrame))})}},{key:"_setDisplay",value:function _setDisplay(display){this.display&&(this.display.delete(),this.display.animationLoop=null),display&&(display.animationLoop=this),this.display=display}},{key:"_requestAnimationFrame",value:function _requestAnimationFrame(renderFrameCallback){this.display&&this.display.requestAnimationFrame(renderFrameCallback)||request_animation_frame_requestAnimationFrame(renderFrameCallback)}},{key:"_renderFrame",value:function _renderFrame(){var _this$display;this.display?(_this$display=this.display)._renderFrame.apply(_this$display,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function _clearNeedsRedraw(){this.needsRedraw=null}},{key:"_setupFrame",value:function _setupFrame(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function _initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function _updateCallbackData(){var _this$_getSizeAndAspe=this._getSizeAndAspect(),width=_this$_getSizeAndAspe.width,height=_this$_getSizeAndAspe.height,aspect=_this$_getSizeAndAspe.aspect;width===this.animationProps.width&&height===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),aspect!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=width,this.animationProps.height=height,this.animationProps.aspect=aspect,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function _finalizeCallbackData(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function _addCallbackData(appContext){"object"===Object(esm_typeof.a)(appContext)&&null!==appContext&&(this.animationProps=Object.assign({},this.animationProps,appContext))}},{key:"_createWebGLContext",value:function _createWebGLContext(opts){if(this.offScreen=opts.canvas&&"undefined"!=typeof OffscreenCanvas&&opts.canvas instanceof OffscreenCanvas,opts=Object.assign({},opts,this.props.glOptions),this.gl=this.props.gl?instrumentGLContext(this.props.gl,opts):this.onCreateContext(opts),!isWebGL(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(unified_parameter_api.b)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function _createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){var wrapperDiv=document.createElement("div");document.body.appendChild(wrapperDiv),wrapperDiv.style.position="relative";var div=document.createElement("div");div.style.position="absolute",div.style.left="10px",div.style.bottom="10px",div.style.width="300px",div.style.background="white",wrapperDiv.appendChild(this.gl.canvas),wrapperDiv.appendChild(div);var html=this.props.onAddHTML(div);html&&(div.innerHTML=html)}}},{key:"_getSizeAndAspect",value:function _getSizeAndAspect(){var width=this.gl.drawingBufferWidth,height=this.gl.drawingBufferHeight,aspect=1,_this$gl$canvas=this.gl.canvas,clientWidth=_this$gl$canvas.clientWidth,clientHeight=_this$gl$canvas.clientHeight;return clientWidth>0&&clientHeight>0?aspect=clientWidth/clientHeight:width>0&&height>0&&(aspect=width/height),{width:width,height:height,aspect:aspect}}},{key:"_resizeViewport",value:function _resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function resizeGLContext(gl){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl.canvas){var devicePixelRatio=options.useDevicePixels&&window.devicePixelRatio||1,width="width"in options?options.width:gl.canvas.clientWidth,height="height"in options?options.height:gl.canvas.clientHeight;return gl.canvas.width=width*devicePixelRatio,void(gl.canvas.height=height*devicePixelRatio)}var ext=gl.getExtension("STACKGL_resize_drawingbuffer");ext&&"width"in options&&"height"in options&&ext.resize(options.width,options.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function _createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new framebuffer_Framebuffer(this.gl))}},{key:"_resizeFramebuffer",value:function _resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function _beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function _endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function _startEventHandling(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function _onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function _onMouseleave(e){this.animationProps._mousePosition=null}}]),AnimationLoop}();new Uint8Array([0,0,0]);var GLTF_TO_LUMA_ATTRIBUTE_MAP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function mapAttributeName(name,options){var _ref$attributeMap=(options||{}).attributeMap,attributeMap=void 0===_ref$attributeMap?GLTF_TO_LUMA_ATTRIBUTE_MAP:_ref$attributeMap;return attributeMap&&attributeMap[name]||name}function inferAttributeAccessor(attributeName,attribute){var category;switch(attributeName){case"indices":category=category||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":category="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":category="vectors"}switch(category){case"vectors":attribute.size=attribute.size||3;break;case"uvs":attribute.size=attribute.size||2;break;case"indices":attribute.size=attribute.size||1,attribute.isIndexed=void 0===attribute.isIndexed||attribute.isIndexed,assert(attribute.value instanceof Uint16Array||attribute.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}assert(Number.isFinite(attribute.size),"attribute ".concat(attributeName," needs size"))}function transpileShader(source,targetGLSLVersion,isVertex){switch(targetGLSLVersion){case 300:return isVertex?function convertVertexShaderTo300(source){return source.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(source):function convertFragmentShaderTo300(source){return source.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(source);case 100:return isVertex?function convertVertexShaderTo100(source){return source.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(source):function convertFragmentShaderTo100(source){return source.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(source);default:throw new Error("unknown GLSL version ".concat(targetGLSLVersion))}}function assert_assert(condition,message){if(!condition)throw new Error(message||"shadertools: assertion failed.")}var shader_module_ShaderModule=function(){function ShaderModule(_ref){var name=_ref.name,vs=_ref.vs,fs=_ref.fs,_ref$dependencies=_ref.dependencies,dependencies=void 0===_ref$dependencies?[]:_ref$dependencies,_ref$getUniforms=_ref.getUniforms,getUniforms=void 0===_ref$getUniforms?function(){return{}}:_ref$getUniforms,_ref$deprecations=_ref.deprecations,deprecations=void 0===_ref$deprecations?[]:_ref$deprecations,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,vertexShader=_ref.vertexShader,fragmentShader=_ref.fragmentShader;Object(classCallCheck.a)(this,ShaderModule),assert_assert("string"==typeof name),this.name=name,this.vs=vs||vertexShader,this.fs=fs||fragmentShader,this.getModuleUniforms=getUniforms,this.dependencies=dependencies,this.deprecations=this._parseDeprecationDefinitions(deprecations),this.defines=defines}return Object(createClass.a)(ShaderModule,[{key:"getModuleSource",value:function getModuleSource(type,targetGLSLVersion){var moduleSource;switch(type){case"vs":moduleSource=transpileShader(this.vs||"",targetGLSLVersion,!0);break;case"fs":moduleSource=transpileShader(this.fs||"",targetGLSLVersion,!1);break;default:assert_assert(!1)}return"string"!=typeof moduleSource?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(moduleSource,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function getUniforms(opts,uniforms){return this.getModuleUniforms(opts,uniforms)}},{key:"getDefines",value:function getDefines(){return this.defines}},{key:"checkDeprecations",value:function checkDeprecations(shaderSource,log){this.deprecations.forEach(function(def){def.regex.test(shaderSource)&&(def.deprecated&&log?log.deprecated(def.old,def.new)():log&&log.removed(def.old,def.new)())})}},{key:"_parseDeprecationDefinitions",value:function _parseDeprecationDefinitions(){var deprecations=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return deprecations.forEach(function(def){switch(def.type){case"function":def.regex=new RegExp("\\b".concat(def.old,"\\("));break;default:def.regex=new RegExp("".concat(def.type," ").concat(def.old,";"))}}),deprecations}}]),ShaderModule}(),shaderModuleRegistry=new(function(){function ShaderModuleRegistry(){Object(classCallCheck.a)(this,ShaderModuleRegistry),this.shaderModules={},this.defaultShaderModules=[]}return Object(createClass.a)(ShaderModuleRegistry,[{key:"setDefaultShaderModules",value:function setDefaultShaderModules(modules){this.defaultShaderModules=this.resolveModules(modules)}},{key:"registerShaderModules",value:function registerShaderModules(shaderModuleList){var _ref$ignoreMultipleRe=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,ignoreMultipleRegistrations=void 0!==_ref$ignoreMultipleRe&&_ref$ignoreMultipleRe,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=shaderModuleList[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var shaderModule=_step.value;this._registerShaderModule(shaderModule,ignoreMultipleRegistrations)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"getShaderModule",value:function getShaderModule(moduleOrName){if(moduleOrName instanceof shader_module_ShaderModule)return moduleOrName;if("string"!=typeof moduleOrName)return this._registerShaderModule(moduleOrName,!0);var module=this.shaderModules[moduleOrName];return module||assert_assert(!1,"Unknown shader module ".concat(moduleOrName)),module}},{key:"resolveModules",value:function resolveModules(modules){var _this=this;return modules.map(function(moduleOrName){return _this.getShaderModule(moduleOrName)})}},{key:"_registerShaderModule",value:function _registerShaderModule(module){var ignoreMultipleRegistrations=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(module instanceof shader_module_ShaderModule)return module;if(assert_assert(module.name,"shader module has no name"),this.shaderModules[module.name]&&!ignoreMultipleRegistrations)throw new Error("shader module ".concat(module.name," already registered"));return(module=new shader_module_ShaderModule(module)).dependencies=this.resolveModules(module.dependencies),this.shaderModules[module.name]=module,this.shaderModules[module.name]}}]),ShaderModuleRegistry}());function setDefaultShaderModules(modules){shaderModuleRegistry.setDefaultShaderModules(modules)}function registerShaderModules(shaderModuleList){var _ref$ignoreMultipleRe=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,ignoreMultipleRegistrations=void 0!==_ref$ignoreMultipleRe&&_ref$ignoreMultipleRe;shaderModuleRegistry.registerShaderModules(shaderModuleList,{ignoreMultipleRegistrations:ignoreMultipleRegistrations})}function getShaderDependencies(modules){var moduleMap={},moduleDepth={};return getDependencyGraph({modules:modules,level:0,moduleMap:moduleMap,moduleDepth:moduleDepth}),Object.keys(moduleDepth).sort(function(a,b){return moduleDepth[b]-moduleDepth[a]}).map(function(name){return moduleMap[name]})}function getDependencyGraph(_ref2){var modules=_ref2.modules,level=_ref2.level,moduleMap=_ref2.moduleMap,moduleDepth=_ref2.moduleDepth;if(level>=5)throw new Error("Possible loop in shader dependency graph");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;moduleMap[module.name]=module,(void 0===moduleDepth[module.name]||moduleDepth[module.name]<level)&&(moduleDepth[module.name]=level)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _module=_step2.value;_module.dependencies&&getDependencyGraph({modules:_module.dependencies,level:level+1,moduleMap:moduleMap,moduleDepth:moduleDepth})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}var fp32={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function fp64ify(a){var out=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,hiPart=Math.fround(a),loPart=a-hiPart;return out[startIndex]=hiPart,out[startIndex+1]=loPart,out}var fp64_arithmetic_glsl="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",fp64shader="".concat(fp64_arithmetic_glsl,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"),CONST_UNIFORMS={ONE:1};var fp64={name:"fp64",vs:fp64shader,fs:null,fp64ify:fp64ify,fp64LowPart:function fp64LowPart(a){return a-Math.fround(a)},fp64ifyMatrix4:function fp64ifyMatrix4(matrix){for(var matrixFP64=new Float32Array(32),i=0;i<4;++i)for(var j=0;j<4;++j){var index=4*i+j;fp64ify(matrix[4*j+i],matrixFP64,2*index)}return matrixFP64},getUniforms:function fp64_getUniforms(){return Object.assign({},CONST_UNIFORMS)}},DEFAULT_MODULE_OPTIONS=("".concat(fp64_arithmetic_glsl),{pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1});var picking={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function picking_getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS,uniforms={};if(void 0!==opts.pickingSelectedColor)if(null===opts.pickingSelectedColor)uniforms.picking_uSelectedColorValid=0;else{var selectedColor=[opts.pickingSelectedColor[0],opts.pickingSelectedColor[1],opts.pickingSelectedColor[2]];uniforms.picking_uSelectedColorValid=1,uniforms.picking_uSelectedColor=selectedColor}return void 0!==opts.pickingHighlightColor&&(uniforms.picking_uHighlightColor=opts.pickingHighlightColor),void 0!==opts.pickingThreshold&&(uniforms.picking_uThreshold=opts.pickingThreshold),void 0!==opts.pickingActive&&(uniforms.picking_uActive=opts.pickingActive?1:0),uniforms}},lights_glsl="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",lights={name:"lights",vs:lights_glsl,fs:lights_glsl,getUniforms:function lights_getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;if("lightSources"in opts){var _ref3=opts.lightSources||{},ambientLight=_ref3.ambientLight,pointLights=_ref3.pointLights,directionalLights=_ref3.directionalLights,hasLights=ambientLight||pointLights&&pointLights.length>0||directionalLights&&directionalLights.length>0;return hasLights?Object.assign({},function getLightSourceUniforms(_ref2){var ambientLight=_ref2.ambientLight,_ref2$pointLights=_ref2.pointLights,pointLights=void 0===_ref2$pointLights?[]:_ref2$pointLights,_ref2$directionalLigh=_ref2.directionalLights,directionalLights=void 0===_ref2$directionalLigh?[]:_ref2$directionalLigh,lightSourceUniforms={};lightSourceUniforms["lighting_uAmbientLight.color"]=ambientLight?convertColor(ambientLight):[0,0,0];return pointLights.forEach(function(pointLight,index){lightSourceUniforms["lighting_uPointLight[".concat(index,"].color")]=convertColor(pointLight),lightSourceUniforms["lighting_uPointLight[".concat(index,"].position")]=pointLight.position,lightSourceUniforms["lighting_uPointLight[".concat(index,"].attenuation")]=pointLight.attenuation}),lightSourceUniforms.lighting_uPointLightCount=pointLights.length,directionalLights.forEach(function(directionalLight,index){lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].color")]=convertColor(directionalLight),lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].direction")]=directionalLight.direction}),lightSourceUniforms.lighting_uDirectionalLightCount=directionalLights.length,lightSourceUniforms}({ambientLight:ambientLight,pointLights:pointLights,directionalLights:directionalLights}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in opts){var lightSources={pointLights:[],directionalLights:[]},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(opts.lights||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var light=_step.value;switch(light.type){case"ambient":lightSources.ambientLight=light;break;case"directional":lightSources.directionalLights.push(light);break;case"point":lightSources.pointLights.push(light)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return lights_getUniforms({lightSources:lightSources})}return{}},defines:{MAX_LIGHTS:3}},INITIAL_MODULE_OPTIONS={};function convertColor(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$color=_ref.color,color=void 0===_ref$color?[0,0,0]:_ref$color,_ref$intensity=_ref.intensity,intensity=void 0===_ref$intensity?1:_ref$intensity;return color.map(function(component){return component*intensity/255})}var phong_lighting_glsl="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",gouraudlighting={name:"gouraud-lighting",dependencies:[lights],vs:phong_lighting_glsl,defines:{LIGHTING_VERTEX:1},getUniforms:phong_lighting_getUniforms},phonglighting={name:"phong-lighting",dependencies:[lights],fs:phong_lighting_glsl,defines:{LIGHTING_FRAGMENT:1},getUniforms:phong_lighting_getUniforms},phong_lighting_INITIAL_MODULE_OPTIONS={};function phong_lighting_getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:phong_lighting_INITIAL_MODULE_OPTIONS;if(!("material"in opts))return{};var material=opts.material;return material?function getMaterialUniforms(material){var materialUniforms={};return materialUniforms.lighting_uAmbient=material.ambient,materialUniforms.lighting_uDiffuse=material.diffuse,materialUniforms.lighting_uShininess=material.shininess,materialUniforms.lighting_uSpecularColor=material.specularColor,materialUniforms}(material):{lighting_uEnabled:!1}}var MODULAR_SHADERS_vs="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",MODULAR_SHADERS_fs="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",constants_VERTEX_SHADER="vs",constants_FRAGMENT_SHADER="fs";var GL_VENDOR=7936,GL_RENDERER=7937,GL_VERSION=7938,GL_SHADING_LANGUAGE_VERSION=35724,WEBGL_FEATURES={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},webgl_info_FEATURES={};Object.keys(WEBGL_FEATURES).forEach(function(key){webgl_info_FEATURES[key]=key});var webgl_info_compiledGlslExtensions={};function webgl_info_canCompileGLGSExtension(gl,cap){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},feature=WEBGL_FEATURES[cap];if(assert_assert(feature,cap),!function is_old_ie_isOldIE(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},navigator="undefined"!=typeof window&&window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident}(opts))return!0;if(cap in webgl_info_compiledGlslExtensions)return webgl_info_compiledGlslExtensions[cap];var extensionName=feature[0],behavior=opts.behavior||"enable",source="#extension GL_".concat(extensionName," : ").concat(behavior,"\nvoid main(void) {}"),shader=gl.createShader(35633);gl.shaderSource(shader,source),gl.compileShader(shader);var canCompile=gl.getShaderParameter(shader,35713);return gl.deleteShader(shader),webgl_info_compiledGlslExtensions[cap]=canCompile,canCompile}function getFeature(gl,cap){var feature=WEBGL_FEATURES[cap];assert_assert(feature,cap);var extensionName=function webgl_info_isWebGL2(gl){return Boolean(gl&&2===gl._version)}(gl)&&feature[1]||feature[0],value="string"==typeof extensionName?Boolean(gl.getExtension(extensionName)):extensionName;return assert_assert(!1===value||!0===value),value}function webgl_info_hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every(function(feature){return getFeature(gl,feature)})}function getPlatformShaderDefines(gl){switch(function webgl_info_getContextInfo(gl){var info=gl.getExtension("WEBGL_debug_renderer_info"),vendor=gl.getParameter(info&&info.UNMASKED_VENDOR_WEBGL||GL_VENDOR),renderer=gl.getParameter(info&&info.UNMASKED_RENDERER_WEBGL||GL_RENDERER);return{gpuVendor:function identifyGPUVendor(vendor,renderer){return vendor.match(/NVIDIA/i)||renderer.match(/NVIDIA/i)?"NVIDIA":vendor.match(/INTEL/i)||renderer.match(/INTEL/i)?"INTEL":vendor.match(/AMD/i)||renderer.match(/AMD/i)||vendor.match(/ATI/i)||renderer.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(vendor,renderer),vendor:vendor,renderer:renderer,version:gl.getParameter(GL_VERSION),shadingLanguageVersion:gl.getParameter(GL_SHADING_LANGUAGE_VERSION)}}(gl).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var _MODULE_INJECTORS,_SHADER_TYPE,MODULE_INJECTORS=(_MODULE_INJECTORS={},Object(defineProperty.a)(_MODULE_INJECTORS,constants_VERTEX_SHADER,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(defineProperty.a)(_MODULE_INJECTORS,constants_FRAGMENT_SHADER,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),_MODULE_INJECTORS),REGEX_START_OF_MAIN=/void main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/;function combineInjects(injects){var result={};return assert_assert(Array.isArray(injects)&&injects.length>1),injects.forEach(function(inject){for(var key in inject)result[key]=result[key]?"".concat(result[key],"\n").concat(inject[key]):inject[key]}),result}var SHADER_TYPE=(_SHADER_TYPE={},Object(defineProperty.a)(_SHADER_TYPE,constants_VERTEX_SHADER,"vertex"),Object(defineProperty.a)(_SHADER_TYPE,constants_FRAGMENT_SHADER,"fragment"),_SHADER_TYPE),FRAGMENT_SHADER_PROLOGUE="precision highp float;\n\n";function assembleShaders(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},vs=opts.vs,fs=opts.fs,modules=function resolveModules(modules){return modules=modules.concat(shaderModuleRegistry.defaultShaderModules),getShaderDependencies(modules=shaderModuleRegistry.resolveModules(modules))}(opts.modules||[]);return{gl:gl,vs:assembleShader(gl,Object.assign({},opts,{source:vs,type:constants_VERTEX_SHADER,modules:modules})),fs:assembleShader(gl,Object.assign({},opts,{source:fs,type:constants_FRAGMENT_SHADER,modules:modules})),getUniforms:assembleGetUniforms(modules),modules:assembleModuleMap(modules)}}function assembleShader(gl,_ref){var id=_ref.id,source=_ref.source,type=_ref.type,_ref$modules=_ref.modules,modules=void 0===_ref$modules?[]:_ref$modules,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,_ref$prologue=_ref.prologue,prologue=void 0===_ref$prologue||_ref$prologue,log=_ref.log;assert_assert("string"==typeof source,"shader source must be a string");var isVertex=type===constants_VERTEX_SHADER,sourceLines=source.split("\n"),glslVersion=100,versionLine="",coreSource=source;0===sourceLines[0].indexOf("#version ")&&(glslVersion=300,versionLine=sourceLines[0],coreSource=sourceLines.slice(1).join("\n"));var allDefines={};modules.forEach(function(module){Object.assign(allDefines,module.getDefines())}),Object.assign(allDefines,defines);var assembledSource=prologue?"".concat(versionLine,"\n").concat(function assemble_shaders_getShaderName(_ref3){var id=_ref3.id,source=_ref3.source,type=_ref3.type;return id&&"string"==typeof id&&-1===source.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(id,"_").concat(SHADER_TYPE[type],"\n\n"):""}({id:id,source:source,type:type}),"\n").concat(function getShaderType(_ref2){var type=_ref2.type;return"\n#define SHADER_TYPE_".concat(SHADER_TYPE[type].toUpperCase(),"\n")}({type:type}),"\n").concat(getPlatformShaderDefines(gl),"\n").concat(function getVersionDefines(gl,glslVersion,isFragment){var versionDefines="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return webgl_info_hasFeatures(gl,webgl_info_FEATURES.GLSL_FRAG_DEPTH)&&(versionDefines+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),webgl_info_hasFeatures(gl,webgl_info_FEATURES.GLSL_DERIVATIVES)&&webgl_info_canCompileGLGSExtension(gl,webgl_info_FEATURES.GLSL_DERIVATIVES)&&(versionDefines+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),webgl_info_hasFeatures(gl,webgl_info_FEATURES.GLSL_FRAG_DATA)&&webgl_info_canCompileGLGSExtension(gl,webgl_info_FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(versionDefines+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),webgl_info_hasFeatures(gl,webgl_info_FEATURES.GLSL_TEXTURE_LOD)&&(versionDefines+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),versionDefines}(gl),"\n").concat(function getApplicationDefines(){var defines=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},count=0,sourceText="";for(var define in defines){0===count&&(sourceText+="\n// APPLICATION DEFINES\n"),count++;var value=defines[define];(value||Number.isFinite(value))&&(sourceText+="#define ".concat(define.toUpperCase()," ").concat(defines[define],"\n"))}0===count&&(sourceText+="\n");return sourceText}(allDefines),"\n").concat(isVertex?"":FRAGMENT_SHADER_PROLOGUE,"\n"):"".concat(versionLine,"\n"),injectStandardStubs=!1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=modules[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var module=_step.value;switch(module.name){case"inject":injectStandardStubs=!0;break;default:module.checkDeprecations(coreSource,log),assembledSource+=module.getModuleSource(type,glslVersion)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return assembledSource=function injectShader(source,type,inject,injectStandardStubs){var isVertex=type===constants_VERTEX_SHADER,_loop=function _loop(key){var fragment=inject[key];switch(key){case"vs:#decl":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,function(match){return"".concat(fragment,"\n").concat(match)}));break;case"vs:#main-start":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,function(match){return match+fragment}));break;case"vs:#main-end":isVertex&&(source=source.replace(REGEX_END_OF_MAIN,function(match){return fragment+match}));break;case"fs:#decl":isVertex||(source=source.replace(REGEX_START_OF_MAIN,function(match){return"".concat(fragment,"\n").concat(match)}));break;case"fs:#main-start":isVertex||(source=source.replace(REGEX_START_OF_MAIN,function(match){return match+fragment}));break;case"fs:#main-end":isVertex||(source=source.replace(REGEX_END_OF_MAIN,function(match){return fragment+match}));break;default:source=source.replace(key,function(match){return match+fragment})}};for(var key in inject)_loop(key);return injectStandardStubs&&(source=source.replace("}s*$",function(match){return match+MODULE_INJECTORS[type]})),source}(assembledSource+=coreSource,type,inject,injectStandardStubs)}function assembleGetUniforms(modules){return function getUniforms(opts){var uniforms={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=modules[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var moduleUniforms=_step2.value.getUniforms(opts,uniforms);Object.assign(uniforms,moduleUniforms)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return uniforms}}function assembleModuleMap(modules){var moduleOrName,result={},_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=modules[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var moduleName=_step3.value,shaderModule=(moduleOrName=moduleName,shaderModuleRegistry.getShaderModule(moduleOrName));result[moduleName]=shaderModule}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return result}var dist=__webpack_require__(22),dist_default=__webpack_require__.n(dist),models={},recursiveSet=function recursiveSet(obj,path,value){obj&&(path.length>1?recursiveSet(obj[path[0]],path.slice(1),value):obj[path[0]]=value)},seer_integration_overrides=new Map;dist_default.a.listenFor("luma.gl",function(payload){var model=models[payload.itemKey];if(model&&"edit"===payload.type&&"uniforms"===payload.valuePath[0]){var valuePath=payload.valuePath.slice(1);!function setOverride(id,valuePath,value){globals.b.__SEER_INITIALIZED__&&(seer_integration_overrides.has(id)||seer_integration_overrides.set(id,new Map),seer_integration_overrides.get(id).set(valuePath,value))}(payload.itemKey,valuePath,payload.value);var uniforms=model.getUniforms();recursiveSet(uniforms,valuePath,payload.value),model.setUniforms(uniforms)}});var DEPRECATED_PICKING_UNIFORMS=["renderPickingBuffer","pickingEnabled"],base_model_BaseModel=function(){function BaseModel(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,BaseModel),assert(isWebGL(gl));var _props$id=props.id,id=void 0===_props$id?uid("base-model"):_props$id;this.id=id,this.gl=gl,this.id=props.id||uid("Model"),this.lastLogTime=0,this.initialize(props),this._setBaseModelProps(props)}return Object(createClass.a)(BaseModel,[{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(props),this.vertexArray=new vertex_array_VertexArray(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._setBaseModelProps(props),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(props.moduleSettings)))}},{key:"setProps",value:function setProps(props){this._setBaseModelProps(props)}},{key:"delete",value:function _delete(){for(var key in this._attributes)this._attributes[key]!==this.attributes[key]&&this._attributes[key].delete();this.program.delete(),this.vertexArray.delete(),function removeModel(id){delete models[id],dist_default.a.deleteItem("luma.gl",id)}(this.id)}},{key:"destroy",value:function destroy(){this.delete()}},{key:"isAnimated",value:function isAnimated(){return this.animated}},{key:"getProgram",value:function getProgram(){return this.program}},{key:"getUniforms",value:function getUniforms(){return this.program.getUniforms()}},{key:"setUniforms",value:function setUniforms(){var _this=this,uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uniforms=Object.assign({},uniforms),function getOverrides(id,uniforms){if(globals.b.__SEER_INITIALIZED__&&id){var overs=seer_integration_overrides.get(id);overs&&overs.forEach(function(value,valuePath){recursiveSet(uniforms,valuePath,value)})}}(this.id,uniforms),uniforms=this._extractAnimatedUniforms(uniforms),this.program.setUniforms(uniforms,function(){_this._checkForDeprecatedUniforms(uniforms)}),this}},{key:"updateModuleSettings",value:function updateModuleSettings(opts){var uniforms=this.getModuleUniforms(opts||{});return this.setUniforms(uniforms)}},{key:"clear",value:function clear(opts){return clear_clear(this.program.gl,opts),this}},{key:"drawGeometry",value:function drawGeometry(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$moduleSettings=opts.moduleSettings,moduleSettings=void 0===_opts$moduleSettings?null:_opts$moduleSettings,framebuffer=opts.framebuffer,_opts$uniforms=opts.uniforms,uniforms=void 0===_opts$uniforms?{}:_opts$uniforms,_opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes,_opts$transformFeedba=opts.transformFeedback,transformFeedback=void 0===_opts$transformFeedba?this.transformFeedback:_opts$transformFeedba,_opts$parameters=opts.parameters,parameters=void 0===_opts$parameters?{}:_opts$parameters,_opts$vertexArray=opts.vertexArray,vertexArray=void 0===_opts$vertexArray?this.vertexArray:_opts$vertexArray,animationProps=opts.animationProps;!function addModel(model){models[model.id]||(models[model.id]=model,dist_default.a.listItem("luma.gl",model.id))}(this),this.setAttributes(attributes),this.updateModuleSettings(moduleSettings),this.setUniforms(uniforms),this._refreshAnimationProps(animationProps);var logPriority=this._logDrawCallStart(2),drawParams=this.vertexArray.getDrawParams(this.props);drawParams.isInstanced&&!this.isInstanced&&utils_log.warn("Found instanced attributes on non-instanced model",this.id)();var isIndexed=drawParams.isIndexed,indexType=drawParams.indexType,indexOffset=drawParams.indexOffset,isInstanced=this.isInstanced,instanceCount=this.instanceCount,noop=function noop(){},_this$props=this.props,_this$props$onBeforeR=_this$props.onBeforeRender,onBeforeRender=void 0===_this$props$onBeforeR?noop:_this$props$onBeforeR,_this$props$onAfterRe=_this$props.onAfterRender,onAfterRender=void 0===_this$props$onAfterRe?noop:_this$props$onAfterRe;onBeforeRender(),this._timerQueryStart();var didDraw=this.program.draw(Object.assign({},opts,{logPriority:logPriority,uniforms:null,framebuffer:framebuffer,parameters:parameters,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:vertexArray,transformFeedback:transformFeedback,isIndexed:isIndexed,indexType:indexType,isInstanced:isInstanced,instanceCount:instanceCount,offset:isIndexed?indexOffset:0}));return this._timerQueryEnd(),onAfterRender(),this._logDrawCallEnd(logPriority,vertexArray,framebuffer),didDraw}},{key:"transform",value:function transform(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_opts$discard=opts.discard,discard=void 0===_opts$discard||_opts$discard,feedbackBuffers=opts.feedbackBuffers,_opts$unbindModels=opts.unbindModels,unbindModels=void 0===_opts$unbindModels?[]:_opts$unbindModels,parameters=opts.parameters;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,Object(defineProperty.a)({},35977,discard))),unbindModels.forEach(function(model){return model.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},opts,{parameters:parameters}))}finally{unbindModels.forEach(function(model){return model.vertexArray.bindBuffers()})}return this}},{key:"_setBaseModelProps",value:function _setBaseModelProps(props){Object.assign(this.props,props),"uniforms"in props&&this.setUniforms(props.uniforms),"pickable"in props&&(this.pickable=props.pickable),"timerQueryEnabled"in props&&(this.timerQueryEnabled=props.timerQueryEnabled&&query_Query.isSupported(this.gl,["timers"]),props.timerQueryEnabled&&!this.timerQueryEnabled&&utils_log.warn("GPU timer not supported")()),"_animationProps"in props&&this._setAnimationProps(props._animationProps),"_animationLoop"in props&&(this.animationLoop=props._animationLoop)}},{key:"_createProgram",value:function _createProgram(_ref){var _ref$vs=_ref.vs,vs=void 0===_ref$vs?null:_ref$vs,_ref$fs=_ref.fs,fs=void 0===_ref$fs?null:_ref$fs,_ref$modules=_ref.modules,modules=void 0===_ref$modules?null:_ref$modules,_ref$defines=_ref.defines,defines=void 0===_ref$defines?{}:_ref$defines,_ref$inject=_ref.inject,inject=void 0===_ref$inject?{}:_ref$inject,_ref$shaderCache=_ref.shaderCache,shaderCache=void 0===_ref$shaderCache?null:_ref$shaderCache,_ref$varyings=_ref.varyings,varyings=void 0===_ref$varyings?null:_ref$varyings,_ref$bufferMode=_ref.bufferMode,bufferMode=void 0===_ref$bufferMode?35981:_ref$bufferMode,_ref$program=_ref.program,program=void 0===_ref$program?null:_ref$program;this.getModuleUniforms=function(x){};var id=this.id;if(!program){vs=vs||MODULAR_SHADERS_vs,fs=fs||MODULAR_SHADERS_fs;var assembleResult=assembleShaders(this.gl,{vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,log:utils_log});vs=assembleResult.vs,fs=assembleResult.fs,program=shaderCache?shaderCache.getProgram(this.gl,{id:id,vs:vs,fs:fs}):new program_Program(this.gl,{id:id,vs:vs,fs:fs,varyings:varyings,bufferMode:bufferMode}),this.getModuleUniforms=assembleResult.getUniforms||function(x){}}return assert(program instanceof program_Program,"Model needs a program"),program}},{key:"_checkForDeprecatedUniforms",value:function _checkForDeprecatedUniforms(uniforms){DEPRECATED_PICKING_UNIFORMS.forEach(function(uniform){uniform in uniforms&&utils_log.deprecated(uniform,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function _refreshAnimationProps(animationProps){(animationProps=animationProps||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(animationProps)}},{key:"_evaluateAnimateUniforms",value:function _evaluateAnimateUniforms(animationProps){if(!this.animated)return{};var animatedUniforms={};for(var uniformName in this.animatedUniforms){var valueFunction=this.animatedUniforms[uniformName];animatedUniforms[uniformName]=valueFunction(animationProps)}return animatedUniforms}},{key:"_extractAnimatedUniforms",value:function _extractAnimatedUniforms(uniforms){var foundAnimated=!1;for(var uniformName in uniforms){var newValue=uniforms[uniformName];"function"==typeof newValue?(this.animatedUniforms[uniformName]=newValue,foundAnimated=!0):delete this.animatedUniforms[uniformName]}if(this.animated=!isObjectEmpty(this.animatedUniforms),!foundAnimated)return uniforms;var staticUniforms={};for(var _uniformName in uniforms)this.animatedUniforms[_uniformName]||(staticUniforms[_uniformName]=uniforms[_uniformName]);return staticUniforms}},{key:"_timerQueryStart",value:function _timerQueryStart(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new query_Query(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function _timerQueryEnd(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var elapsedTime=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=elapsedTime,this.stats.accumulatedFrameTime+=elapsedTime,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,utils_log.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function _logDrawCallStart(priority){var logDrawTimeout=priority>3?0:1e4;if(!(utils_log.priority<priority||Date.now()-this.lastLogTime<logDrawTimeout))return this.lastLogTime=Date.now(),utils_log.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:utils_log.priority<=2})(),priority}},{key:"_logDrawCallEnd",value:function _logDrawCallEnd(priority,vertexArray,uniforms,framebuffer){if(void 0!==priority){var attributeTable=function getDebugTableForVertexArray(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},vertexArray=_ref.vertexArray,_ref$header=_ref.header,header=void 0===_ref$header?"Attributes":_ref$header;if(!vertexArray.configuration)return{};var table={};vertexArray.elements&&(table.ELEMENT_ARRAY_BUFFER=getDebugTableRow(vertexArray,vertexArray.elements,null,header));var attributes=vertexArray.values;for(var attributeLocation in attributes){var info=vertexArray._getAttributeInfo(attributeLocation);if(info){var rowHeader="".concat(attributeLocation,": ").concat(info.name),accessor=vertexArray.accessors[info.location];accessor&&(rowHeader="".concat(attributeLocation,": ").concat(getGLSLDeclaration(info.name,accessor))),table[rowHeader]=getDebugTableRow(vertexArray,attributes[attributeLocation],accessor,header)}}return table}({vertexArray:vertexArray,header:"".concat(this.id," attributes"),attributes:this._attributes}),_getDebugTableForUnif=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms)}),uniformTable=_getDebugTableForUnif.table,unusedTable=_getDebugTableForUnif.unusedTable,unusedCount=_getDebugTableForUnif.unusedCount,_getDebugTableForUnif2=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms),undefinedOnly:!0}),missingTable=_getDebugTableForUnif2.table;_getDebugTableForUnif2.count>0&&utils_log.log("MISSING UNIFORMS",Object.keys(missingTable))(),unusedCount>0&&utils_log.log("UNUSED UNIFORMS",Object.keys(unusedTable))();var configTable=function getDebugTableForProgramConfiguration(config){var table={},header="Accessors for ".concat(config.id),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=config.attributeInfos[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var attributeInfo=_step.value;if(attributeInfo){var glslDeclaration=debug_program_configuration_getGLSLDeclaration(attributeInfo);table["in ".concat(glslDeclaration)]=Object(defineProperty.a)({},header,JSON.stringify(attributeInfo.accessor))}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=config.varyingInfos[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var varyingInfo=_step2.value;if(varyingInfo){var _glslDeclaration=debug_program_configuration_getGLSLDeclaration(varyingInfo);table["out ".concat(_glslDeclaration)]=Object(defineProperty.a)({},header,JSON.stringify(varyingInfo.accessor))}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return table}(this.vertexArray.configuration);utils_log.table(priority,attributeTable)(),utils_log.table(priority,uniformTable)(),utils_log.table(priority+1,configTable)(),function logModel(model,uniforms){if(dist_default.a.isReady()&&!dist_default.a.throttle("luma.gl:".concat(model.id),1e3)){var attributesObject=model.geometry?Object.assign({},model.geometry.attributes,model.attributes):model.attributes,uniformsObject=Object.assign({},model.uniforms,uniforms);dist_default.a.multiUpdate("luma.gl",model.id,[{path:"objects.uniforms",data:uniformsObject},{path:"objects.attributes",data:attributesObject}])}}(this,uniforms),framebuffer&&framebuffer.log({priority:2,message:"Rendered to ".concat(framebuffer.id)}),utils_log.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),BaseModel}(),model_Model=function(_BaseModel){function Model(gl,props){Object(classCallCheck.a)(this,Model);var _props$id=props.id,id=void 0===_props$id?uid("model"):_props$id;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Model).call(this,gl,Object(objectSpread.a)({},props,{id:id})))}return Object(inherits.a)(Model,_BaseModel),Object(createClass.a)(Model,[{key:"initialize",value:function initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(esm_get.a)(Object(getPrototypeOf.a)(Model.prototype),"initialize",this).call(this,props),this.drawMode=void 0!==props.drawMode?props.drawMode:4,this.vertexCount=props.vertexCount||0,this.geometryBuffers={},this.isInstanced=props.isInstanced||props.instanced,this._setModelProps(props),this.geometry={},assert(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function setProps(props){Object(esm_get.a)(Object(getPrototypeOf.a)(Model.prototype),"setProps",this).call(this,props),this._setModelProps(props)}},{key:"delete",value:function _delete(){Object(esm_get.a)(Object(getPrototypeOf.a)(Model.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"destroy",value:function destroy(){this.delete()}},{key:"getDrawMode",value:function getDrawMode(){return this.drawMode}},{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getInstanceCount",value:function getInstanceCount(){return this.instanceCount}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setDrawMode",value:function setDrawMode(drawMode){return this.drawMode=drawMode,this}},{key:"setVertexCount",value:function setVertexCount(vertexCount){return assert(Number.isFinite(vertexCount)),this.vertexCount=vertexCount,this}},{key:"setInstanceCount",value:function setInstanceCount(instanceCount){return assert(Number.isFinite(instanceCount)),this.instanceCount=instanceCount,this}},{key:"setGeometry",value:function setGeometry(geometry){return this.drawMode=geometry.drawMode,this.vertexCount=geometry.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function getBuffersFromGeometry(gl,geometry,options){var buffers={};for(var name in geometry.attributes){var attribute=geometry.attributes[name],remappedName=mapAttributeName(name,options);if(attribute.constant)buffers[remappedName]=attribute.value;else{var typedArray=attribute.value,accessor=Object(objectSpread.a)({},attribute);delete accessor.value,buffers[remappedName]=[new buffer_Buffer(gl,typedArray),accessor],inferAttributeAccessor(name,accessor)}}return geometry.indices&&(buffers.indices=new buffer_Buffer(gl,{data:geometry.indices.value||geometry.indices,target:34963})),buffers}(this.gl,geometry),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function setAttributes(){var attributes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(isObjectEmpty(attributes))return this;var normalizedAttributes={};for(var name in attributes){var attribute=attributes[name];normalizedAttributes[name]=attribute.getValue?attribute.getValue():attribute}return this.vertexArray.setAttributes(normalizedAttributes),this}},{key:"draw",value:function draw(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(options)}},{key:"transform",value:function transform(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$discard=options.discard,discard=void 0===_options$discard||_options$discard,feedbackBuffers=options.feedbackBuffers,_options$unbindModels=options.unbindModels,unbindModels=void 0===_options$unbindModels?[]:_options$unbindModels,parameters=options.parameters;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,Object(defineProperty.a)({},35977,discard))),unbindModels.forEach(function(model){return model.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},options,{parameters:parameters}))}finally{unbindModels.forEach(function(model){return model.vertexArray.bindBuffers()})}return this}},{key:"render",value:function render(){var uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return utils_log.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(uniforms).draw()}},{key:"_setModelProps",value:function _setModelProps(props){"instanceCount"in props&&(this.instanceCount=props.instanceCount),"geometry"in props&&this.setGeometry(props.geometry),"attributes"in props&&this.setAttributes(props.attributes),"_feedbackBuffers"in props&&this._setFeedbackBuffers(props._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function _deleteGeometryBuffers(){for(var name in this.geometryBuffers){var buffer=this.geometryBuffers[name][0]||this.geometryBuffers[name];buffer instanceof buffer_Buffer&&buffer.delete()}}},{key:"_setAnimationProps",value:function _setAnimationProps(animationProps){var _this=this;if(this.animated){assert(animationProps,"Model.draw(): animated uniforms but no animationProps");var animatedUniforms=this._evaluateAnimateUniforms(animationProps);this.program.setUniforms(animatedUniforms,function(){_this._checkForDeprecatedUniforms(animatedUniforms)})}}},{key:"_setFeedbackBuffers",value:function _setFeedbackBuffers(){var feedbackBuffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(isObjectEmpty(feedbackBuffers))return this;var gl=this.program.gl;return this.transformFeedback=this.transformFeedback||new transform_feedback_TransformFeedback(gl,{program:this.program}),this.transformFeedback.setBuffers(feedbackBuffers),this}},{key:"_timerQueryStart",value:function _timerQueryStart(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new query_Query(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function _timerQueryEnd(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var elapsedTime=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=elapsedTime,this.stats.accumulatedFrameTime+=elapsedTime,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,utils_log.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}}]),Model}(base_model_BaseModel),FS100="void main() {}",FS300="#version 300 es\n".concat(FS100);function getQualifierDetails(line,qualifiers){qualifiers=Array.isArray(qualifiers)?qualifiers:[qualifiers];var words=line.replace(/^\s+/,"").split(/\s+/),_words=Object(slicedToArray.a)(words,3),qualifier=_words[0],type=_words[1],definition=_words[2];return qualifiers.includes(qualifier)&&type&&definition?{qualifier:qualifier,type:type,name:definition.split(";")[0]}:null}function getPassthroughFS(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$version=_ref.version,version=void 0===_ref$version?100:_ref$version,input=_ref.input,inputType=_ref.inputType,output=_ref.output;if(!input)return 300===version?FS300:FS100;var outputValue=function convertToVec4(variable,type){switch(type){case"float":return"vec4(".concat(variable,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(variable,", 0.0, 1.0)");case"vec3":return"vec4(".concat(variable,", 1.0)");case"vec4":return variable;default:return assert_assert(!1),null}}(input,inputType);return 300===version?"#version 300 es\nin ".concat(inputType," ").concat(input,";\nout vec4 ").concat(output,";\nvoid main() {\n  ").concat(output," = ").concat(outputValue,";\n}"):"varying ".concat(inputType," ").concat(input,";\nvoid main() {\n  gl_FragColor = ").concat(outputValue,";\n}")}var _SRC_TEX_PARAMETER_OV,transform_transform={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},SAMPLER_UNIFORM_PREFIX="transform_uSampler_",SIZE_UNIFORM_PREFIX="transform_uSize_",VS_POS_VARIABLE="transform_position";function updateForTextures(_ref){var vs=_ref.vs,sourceTextureMap=_ref.sourceTextureMap,targetTextureVarying=_ref.targetTextureVarying,targetTexture=_ref.targetTexture,sourceCount=Object.keys(sourceTextureMap).length,targetTextureType=null,samplerTextureMap={},updatedVs=vs,finalInject={};if(sourceCount>0||targetTextureVarying){var vsLines=updatedVs.split("\n"),updateVsLines=vsLines.slice();if(vsLines.forEach(function(line,index,lines){if(sourceCount>0){var updated=function processAttributeDefinition(line,textureMap){var samplerTextureMap={},attributeData=function getAttributeDefinition(line){return getQualifierDetails(line,["attribute","in"])}(line);if(!attributeData)return null;var type=attributeData.type,name=attributeData.name;if(name&&textureMap[name]){var updatedLine="// ".concat(line," => Replaced by Transform with a sampler"),_getSamplerDecleratio=function getSamplerDeclerations(textureName){var samplerName="".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName),sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(textureName),uniformDeclerations="  uniform sampler2D ".concat(samplerName,";\n  uniform vec2 ").concat(sizeName,";");return{samplerName:samplerName,sizeName:sizeName,uniformDeclerations:uniformDeclerations}}(name),samplerName=_getSamplerDecleratio.samplerName,sizeName=_getSamplerDecleratio.sizeName,uniformDeclerations=_getSamplerDecleratio.uniformDeclerations,channels=function typeToChannelSuffix(type){switch(type){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return assert_assert(!1),null}}(type),sampleInstruction="  ".concat(type," ").concat(name," = transform_getInput(").concat(samplerName,", ").concat(sizeName,").").concat(channels,";\n");samplerTextureMap[samplerName]=name;var inject={"vs:#decl":uniformDeclerations,"vs:#main-start":sampleInstruction};return{updatedLine:updatedLine,inject:inject,samplerTextureMap:samplerTextureMap}}return null}(line,sourceTextureMap);if(updated){var updatedLine=updated.updatedLine,inject=updated.inject;updateVsLines[index]=updatedLine,finalInject=combineInjects([finalInject,inject]),Object.assign(samplerTextureMap,updated.samplerTextureMap),sourceCount--}}targetTextureVarying&&!targetTextureType&&(targetTextureType=function getVaryingType(line,varying){var qualaiferDetails=getQualifierDetails(line,["varying","out"]);if(!qualaiferDetails)return null;return qualaiferDetails.name===varying?qualaiferDetails.type:null}(line,targetTextureVarying))}),targetTextureVarying){assert(targetTexture);var sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying),uniformDeclaration="uniform vec2 ".concat(sizeName,";\n"),posInstructions="     vec2 ".concat(VS_POS_VARIABLE," = transform_getPos(").concat(sizeName,");\n     gl_Position = vec4(").concat(VS_POS_VARIABLE,", 0, 1.);\n");finalInject=combineInjects([finalInject,{"vs:#decl":uniformDeclaration,"vs:#main-start":posInstructions}])}updatedVs=updateVsLines.join("\n")}return{vs:updatedVs,targetTextureType:targetTextureType,inject:finalInject,samplerTextureMap:samplerTextureMap}}var SRC_TEX_PARAMETER_OVERRIDES=(_SRC_TEX_PARAMETER_OV={},Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10241,9728),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10240,9728),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10242,33071),Object(defineProperty.a)(_SRC_TEX_PARAMETER_OV,10243,33071),_SRC_TEX_PARAMETER_OV),transform_Transform=function(){function Transform(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Transform),assert(isWebGL2(gl)),this.gl=gl,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(props),Object.seal(this)}return Object(createClass.a)(Transform,null,[{key:"isSupported",value:function isSupported(gl){return isWebGL2(gl)}}]),Object(createClass.a)(Transform,[{key:"delete",value:function _delete(){for(var name in this._createdBuffers)this._createdBuffers[name].delete();this.model.delete()}},{key:"getBuffer",value:function getBuffer(){var varyingName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,bufferOrParams=varyingName?this.feedbackBuffers[this.currentIndex][varyingName]:null;return bufferOrParams?bufferOrParams instanceof buffer_Buffer?bufferOrParams:bufferOrParams.buffer:null}},{key:"_getTargetTexture",value:function _getTargetTexture(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function getData(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$varyingName=_ref.varyingName,varyingName=void 0===_ref$varyingName?null:_ref$varyingName,_ref$packed=_ref.packed,packed=void 0!==_ref$packed&&_ref$packed,buffer=this.getBuffer(varyingName);if(buffer)return buffer.getData();assert(!varyingName||varyingName===this.targetTextureVarying);var pixels=readPixelsToArray(this.framebuffers[this.currentIndex]);if(!packed)return pixels;for(var ArrayType=pixels.constructor,channelCount=function typeToChannelCount(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return assert_assert(!1),null}}(this.targetTextureType),packedPixels=new ArrayType(pixels.length*channelCount/4),packCount=0,i=0;i<pixels.length;i+=4)for(var j=0;j<channelCount;j++)packedPixels[packCount++]=pixels[i+j];return packedPixels}},{key:"getFramebuffer",value:function getFramebuffer(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function _getInputs(){var uniforms={},current=this.currentIndex,attributes=Object.assign({},this.sourceBuffers[current]);if(this.hasSourceTextures||this.targetTextureVarying){for(var sampler in attributes.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var textureName=this.samplerTextureMap[sampler];uniforms[sampler]=this.sourceTextures[current][textureName]}this._setSourceTextureParameters();var sizeUniforms=function getSizeUniforms(_ref2){var width,height,sourceTextureMap=_ref2.sourceTextureMap,targetTextureVarying=_ref2.targetTextureVarying,targetTexture=_ref2.targetTexture,uniforms={};for(var textureName in targetTextureVarying&&(width=targetTexture.width,height=targetTexture.height,uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)]=[width,height]),sourceTextureMap){var _sourceTextureMap$tex=sourceTextureMap[textureName];width=_sourceTextureMap$tex.width,height=_sourceTextureMap$tex.height,uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(textureName)]=[width,height]}return uniforms}({sourceTextureMap:this.sourceTextures[current],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[current]});Object.assign(uniforms,sizeUniforms)}return{attributes:attributes,uniforms:uniforms}}},{key:"run",value:function run(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_getInputs=this._getInputs(),attributes=_this$_getInputs.attributes,uniforms=_this$_getInputs.uniforms;Object.assign(uniforms,opts.uniforms);var parameters=Object.assign({},opts.parameters),_opts$clearRenderTarg=opts.clearRenderTarget,clearRenderTarget=void 0===_opts$clearRenderTarg||_opts$clearRenderTarg,framebuffer=null,discard=!0;this.renderingToTexture&&(discard=!1,assert(framebuffer=this.framebuffers[this.currentIndex]),parameters.viewport=[0,0,framebuffer.width,framebuffer.height],clearRenderTarget&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(attributes),this.model.transform(Object.assign({},opts,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:uniforms,discard:discard,framebuffer:framebuffer,parameters:parameters}))}},{key:"swapBuffers",value:function swapBuffers(){utils_log.deprecated("swapBuffers()","swap()")(),this.swap()}},{key:"swap",value:function swap(){assert(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function update(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};opts.elementCount&&this._setElementCount(opts.elementCount);var _opts$sourceBuffers=opts.sourceBuffers,sourceBuffers=void 0===_opts$sourceBuffers?null:_opts$sourceBuffers,_opts$feedbackBuffers=opts.feedbackBuffers,feedbackBuffers=void 0===_opts$feedbackBuffers?null:_opts$feedbackBuffers,currentIndex=this.currentIndex;if(sourceBuffers||feedbackBuffers){for(var bufferName in feedbackBuffers)assert(feedbackBuffers[bufferName]instanceof buffer_Buffer||feedbackBuffers[bufferName].buffer instanceof buffer_Buffer);Object.assign(this.sourceBuffers[currentIndex],sourceBuffers),Object.assign(this.feedbackBuffers[currentIndex],feedbackBuffers),this._createFeedbackBuffers({feedbackBuffers:feedbackBuffers}),this.transformFeedbacks[currentIndex]&&this.transformFeedbacks[currentIndex].setBuffers(this.feedbackBuffers[currentIndex]),this._setupSwapBuffers()}var _sourceTextures=opts._sourceTextures,_targetTexture=opts._targetTexture;(_sourceTextures||_targetTexture)&&(Object.assign(this.sourceTextures[currentIndex],_sourceTextures),this._updateTargetTexture(_targetTexture||this._targetRefTexName,currentIndex),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function _setSourceTextureParameters(){var index=this.currentIndex;for(var name in this.sourceTextures[index])this.sourceTextures[index][name].setParameters(SRC_TEX_PARAMETER_OVERRIDES)}},{key:"_setElementCount",value:function _setElementCount(elementCount){this.elementCount!==elementCount&&(this.elementCount<elementCount&&this._updateElementIDBuffer(elementCount),this.model.setVertexCount(elementCount),this.elementCount=elementCount)}},{key:"_updateTargetTexture",value:function _updateTargetTexture(texture,index){var targetTexture=this._buildTargetTexture(texture);targetTexture&&(this.targetTextures[index]=targetTexture,this.framebuffers[index]&&(this.framebuffers[index].update({attachments:Object(defineProperty.a)({},36064,this.targetTextures[index]),resizeAttachments:!1}),this.framebuffers[index].resize({width:targetTexture.width,height:targetTexture.height})))}},{key:"_initialize",value:function _initialize(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_validateProps=this._validateProps(props),feedbackBuffers=_this$_validateProps.feedbackBuffers,feedbackMap=_this$_validateProps.feedbackMap,sourceBuffers=props.sourceBuffers,varyings=props.varyings,_targetTexture=props._targetTexture,_targetTextureVarying=props._targetTextureVarying,_swapTexture=props._swapTexture,varyingsArray=varyings;feedbackMap&&!Array.isArray(varyings)&&(varyingsArray=Object.values(feedbackMap)),this.varyingsArray=varyingsArray,this.feedbackMap=feedbackMap,this._swapTexture=_swapTexture,_targetTexture&&(this.targetTextureVarying=_targetTextureVarying,this.renderingToTexture=!0,assert(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}),this._setupTextures(props),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},props,{id:props.id||"transform-model",drawMode:props.drawMode||0,varyings:varyingsArray}))}},{key:"_validateProps",value:function _validateProps(props){var feedbackBuffers=props.feedbackBuffers,feedbackMap=props.feedbackMap,destinationBuffers=props.destinationBuffers,sourceDestinationMap=props.sourceDestinationMap;destinationBuffers&&(utils_log.deprecated("destinationBuffers","feedbackBuffers")(),feedbackBuffers=feedbackBuffers||destinationBuffers),sourceDestinationMap&&(utils_log.deprecated("sourceDestinationMap","feedbackMap")(),feedbackMap=feedbackMap||sourceDestinationMap);var vs=props.vs,elementCount=props.elementCount,varyings=props.varyings,_sourceTextures=props._sourceTextures,_targetTexture=props._targetTexture,_targetTextureVarying=props._targetTextureVarying,_swapTexture=props._swapTexture;for(var bufferName in assert(vs&&(varyings||feedbackMap||_targetTexture)&&elementCount),feedbackBuffers||{})assert(feedbackBuffers[bufferName]instanceof buffer_Buffer||feedbackBuffers[bufferName].buffer instanceof buffer_Buffer);for(var textureName in _sourceTextures||{})assert(_sourceTextures[textureName]instanceof texture_2d_Texture2D);return assert(!_targetTexture||_targetTextureVarying),assert(!_swapTexture||_sourceTextures[_swapTexture]),{feedbackBuffers:feedbackBuffers,feedbackMap:feedbackMap}}},{key:"_setupBuffers",value:function _setupBuffers(_ref2){var _ref2$sourceBuffers=_ref2.sourceBuffers,sourceBuffers=void 0===_ref2$sourceBuffers?null:_ref2$sourceBuffers,_ref2$feedbackBuffers=_ref2.feedbackBuffers,feedbackBuffers=void 0===_ref2$feedbackBuffers?null:_ref2$feedbackBuffers;this.sourceBuffers[0]=Object.assign({},sourceBuffers),this.feedbackBuffers[0]=Object.assign({},feedbackBuffers),this._createFeedbackBuffers({feedbackBuffers:feedbackBuffers}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function _setupTextures(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_sourceTextures=props._sourceTextures,_targetTexture=props._targetTexture;if(this.sourceTextures[0]=Object.assign({},_sourceTextures),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var texture=this._buildTargetTexture(_targetTexture);assert(texture),this.targetTextures[0]=texture,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function _buildTargetTexture(textureOrAttribute){var _parameters;if(textureOrAttribute instanceof texture_2d_Texture2D)return textureOrAttribute;var refTexture=this.sourceTextures[0][textureOrAttribute];return refTexture?(this._targetRefTexName=textureOrAttribute,function cloneTextureFrom(refTexture,overrides){assert(refTexture instanceof texture_2d_Texture2D||refTexture instanceof texture_cube_TextureCube||refTexture instanceof texture_3d_Texture3D);var TextureType=refTexture.constructor,gl=refTexture.gl,width=refTexture.width,height=refTexture.height,format=refTexture.format,type=refTexture.type,dataFormat=refTexture.dataFormat,border=refTexture.border,mipmaps=refTexture.mipmaps;return new TextureType(gl,Object.assign({width:width,height:height,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps},overrides))}(refTexture,{parameters:(_parameters={},Object(defineProperty.a)(_parameters,10241,9728),Object(defineProperty.a)(_parameters,10240,9728),Object(defineProperty.a)(_parameters,10242,33071),Object(defineProperty.a)(_parameters,10243,33071),_parameters),pixelStore:Object(defineProperty.a)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function _createFeedbackBuffers(_ref3){var feedbackBuffers=_ref3.feedbackBuffers;if(this.feedbackMap){var current=this.currentIndex;for(var sourceBufferName in this.feedbackMap){var feedbackBufferName=this.feedbackMap[sourceBufferName];if(!(feedbackBufferName===this.targetTextureVarying||feedbackBuffers&&feedbackBuffers[feedbackBufferName])){var sourceBuffer=this.sourceBuffers[current][sourceBufferName],byteLength=sourceBuffer.byteLength,usage=sourceBuffer.usage,accessor=sourceBuffer.accessor,buffer=new buffer_Buffer(this.gl,{byteLength:byteLength,usage:usage,accessor:accessor});this._createdBuffers[feedbackBufferName]&&this._createdBuffers[feedbackBufferName].delete(),this._createdBuffers[feedbackBufferName]=buffer,this.feedbackBuffers[current][feedbackBufferName]=buffer}}}}},{key:"_createNewBuffer",value:function _createNewBuffer(name,opts){var buffer=new buffer_Buffer(this.gl,opts);return this._createdBuffers[name]&&(this._createdBuffers[name].delete(),this._createdBuffers[name]=buffer),buffer}},{key:"_setupSwapBuffers",value:function _setupSwapBuffers(){if(this.feedbackMap){var current=this.currentIndex,next=(current+1)%2;for(var srcName in Object.assign(this.sourceBuffers[next],this.sourceBuffers[current]),Object.assign(this.feedbackBuffers[next],this.feedbackBuffers[current]),this.feedbackMap){var dstName=this.feedbackMap[srcName];dstName!==this.targetTextureVarying&&(this.sourceBuffers[next][srcName]=this.feedbackBuffers[current][dstName],this.feedbackBuffers[next][dstName]=this.sourceBuffers[current][srcName],assert(this.feedbackBuffers[next][dstName]instanceof buffer_Buffer))}this.transformFeedbacks[next]&&this.transformFeedbacks[next].setBuffers(this.feedbackBuffers[next])}}},{key:"_setupSwapTextures",value:function _setupSwapTextures(){if(this._swapTexture&&this.targetTextureVarying){var current=this.currentIndex,next=(current+1)%2;Object.assign(this.sourceTextures[next],this.sourceTextures[current]),this.sourceTextures[next][this._swapTexture]=this.targetTextures[current],this._updateTargetTexture(this.sourceTextures[current][this._swapTexture],next)}}},{key:"_buildModel",value:function _buildModel(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_getShaders=this._getShaders(props),vs=_this$_getShaders.vs,fs=_this$_getShaders.fs,modules=_this$_getShaders.modules,uniforms=_this$_getShaders.uniforms,inject=_this$_getShaders.inject,samplerTextureMap=_this$_getShaders.samplerTextureMap;this.model=new model_Model(this.gl,Object.assign({},props,{vs:vs,fs:fs,vertexCount:props.elementCount,modules:modules,uniforms:uniforms,inject:inject})),this.samplerTextureMap=samplerTextureMap,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(props.elementCount)}},{key:"_setupTransformFeedback",value:function _setupTransformFeedback(){isObjectEmpty(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new transform_feedback_TransformFeedback(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new transform_feedback_TransformFeedback(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function _setupFramebuffers(){if(this.renderingToTexture){var _this$targetTextures$=this.targetTextures[0],width=_this$targetTextures$.width,height=_this$targetTextures$.height;if(this.framebuffers[0]=new framebuffer_Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:width,height:height,attachments:Object(defineProperty.a)({},36064,this.targetTextures[0])}),this._swapTexture){var _this$targetTextures$2=this.targetTextures[1];width=_this$targetTextures$2.width,height=_this$targetTextures$2.height,this.framebuffers[1]=new framebuffer_Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:width,height:height,attachments:Object(defineProperty.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function _updateElementIDBuffer(elementCount){if(this.hasSourceTextures||this.targetTextureVarying){var elementIds=new Float32Array(elementCount);elementIds.forEach(function(_,index,array){array[index]=index}),this.elementIDBuffer?this.elementIDBuffer.setData({data:elementIds}):this.elementIDBuffer=new buffer_Buffer(this.gl,{data:elementIds,size:1})}}},{key:"_getShaders",value:function _getShaders(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this$_processVertexS=this._processVertexShader(props.vs),vs=_this$_processVertexS.vs,uniforms=_this$_processVertexS.uniforms,targetTextureType=_this$_processVertexS.targetTextureType,inject=_this$_processVertexS.inject,samplerTextureMap=_this$_processVertexS.samplerTextureMap,combinedInject=combineInjects([props.inject||{},inject]);return this.targetTextureType=targetTextureType,{vs:vs,fs:getPassthroughFS({version:getShaderVersion(vs),input:this.targetTextureVarying,inputType:targetTextureType,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[transform_transform].concat(props.modules||[]):props.modules,uniforms:uniforms,inject:combinedInject,samplerTextureMap:samplerTextureMap}}},{key:"_processVertexShader",value:function _processVertexShader(vs){return updateForTextures({vs:vs,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),Transform}(),CLIPSPACE_VERTEX_SHADER="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",POSITIONS=[-1,-1,1,-1,-1,1,1,1],clip_space_ClipSpace=function(_Model){function ClipSpace(gl,opts){var _this;Object(classCallCheck.a)(this,ClipSpace);var TEX_COORDS=POSITIONS.map(function(coord){return-1===coord?0:coord});return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ClipSpace).call(this,gl,Object.assign({},opts,{vs:CLIPSPACE_VERTEX_SHADER,geometry:new geometry_Geometry({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(POSITIONS)},aTexCoord:{size:2,value:new Float32Array(TEX_COORDS)},aCoordinate:{size:2,value:new Float32Array(TEX_COORDS)}}})})))).setVertexCount(4),_this}return Object(inherits.a)(ClipSpace,_Model),ClipSpace}(model_Model),shader_cache_ShaderCache=function(){function ShaderCache(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},gl=_ref.gl,_ref$_cachePrograms=_ref._cachePrograms,_cachePrograms=void 0!==_ref$_cachePrograms&&_ref$_cachePrograms;Object(classCallCheck.a)(this,ShaderCache),assert(gl),this.gl=gl,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=_cachePrograms}return Object(createClass.a)(ShaderCache,[{key:"delete",value:function _delete(){return this}},{key:"getVertexShader",value:function getVertexShader(gl,source){assert("string"==typeof source),assert(this._compareContexts(gl,this.gl));var shader=this.vertexShaders[source];return shader||(shader=new shader_VertexShader(gl,source),this.vertexShaders[source]=shader),shader}},{key:"getFragmentShader",value:function getFragmentShader(gl,source){assert("string"==typeof source),assert(this._compareContexts(gl,this.gl));var shader=this.fragmentShaders[source];return shader||(shader=new shader_FragmentShader(gl,source),this.fragmentShaders[source]=shader),shader}},{key:"getProgram",value:function getProgram(gl,opts){assert(this._compareContexts(gl,this.gl)),assert("string"==typeof opts.vs),assert("string"==typeof opts.fs),assert("string"==typeof opts.id);var cacheKey=this._getProgramKey(opts),program=this.programs[cacheKey];return program?(this._resetProgram(program),program):(program=this._createNewProgram(gl,opts),this._cachePrograms&&this._checkProgramProp(program)&&(program._isCached=!0,this.programs[cacheKey]=program),program)}},{key:"_getProgramKey",value:function _getProgramKey(opts){return"".concat(opts.id,"-").concat(opts.vs,"-").concat(opts.fs)}},{key:"_checkProgramProp",value:function _checkProgramProp(program){return!program.varyings}},{key:"_createNewProgram",value:function _createNewProgram(gl,opts){var vs=opts.vs,fs=opts.fs,vertexShader=this.getVertexShader(gl,vs),fragmentShader=this.getFragmentShader(gl,fs);return new program_Program(this.gl,Object.assign({},opts,{vs:vertexShader,fs:fragmentShader}))}},{key:"_resetProgram",value:function _resetProgram(program,opts){program.reset()}},{key:"_compareContexts",value:function _compareContexts(gl1,gl2){return(gl1.gl||gl1)===(gl2.gl||gl2)}}]),ShaderCache}(),pass_Pass=(function(){function AnimationLoopProxy(worker){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,AnimationLoopProxy);var _opts$onInitialize=opts.onInitialize,onInitialize=void 0===_opts$onInitialize?function(){}:_opts$onInitialize,_opts$onFinalize=opts.onFinalize,onFinalize=void 0===_opts$onFinalize?function(){}:_opts$onFinalize,_opts$useDevicePixels=opts.useDevicePixels,useDevicePixels=void 0===_opts$useDevicePixels||_opts$useDevicePixels,_opts$autoResizeDrawi=opts.autoResizeDrawingBuffer,autoResizeDrawingBuffer=void 0===_opts$autoResizeDrawi||_opts$autoResizeDrawi;this.props={onInitialize:onInitialize,onFinalize:onFinalize},this.setProps({autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),assert(worker instanceof Worker),this.worker=worker,this.canvas=null,this.width=null,this.height=null,this._running=!1,this._animationFrameId=null,this._resolveNextFrame=null,this._nextFramePromise=null,this._onMessage=this._onMessage.bind(this),this._onEvent=this._onEvent.bind(this),this._updateFrame=this._updateFrame.bind(this)}Object(createClass.a)(AnimationLoopProxy,null,[{key:"createWorker",value:function createWorker(animationLoop){return function(self){animationLoop.setProps({useDevicePixels:!1,autoResizeDrawingBuffer:!1}),self.canvas=null,self.addEventListener("message",function(evt){switch(evt.data.command){case"start":!function initializeCanvas(canvas){var eventHandlers=new Map;canvas.addEventListener=function(type,handler){self.postMessage({command:"addEventListener",type:type}),eventHandlers.has(type)||eventHandlers.set(type,[]),eventHandlers.get(type).push(handler)},canvas.removeEventListener=function(type,handler){self.postMessage({command:"removeEventListener",type:type});var handlers=eventHandlers.get(type);handlers&&handlers.splice(handlers.indexOf(handler),1)},canvas.dispatchEvent=function(type,event){var handlers=eventHandlers.get(type);handlers&&handlers.forEach(function(handler){return handler(event)})},self.canvas=canvas}(evt.data.opts.canvas),animationLoop.start(evt.data.opts);break;case"stop":animationLoop.stop();break;case"resize":self.canvas.width=evt.data.width,self.canvas.height=evt.data.height;break;case"event":self.canvas.dispatchEvent(evt.data.type,evt.data.event)}})}}}]),Object(createClass.a)(AnimationLoopProxy,[{key:"setProps",value:function setProps(props){return"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}},{key:"start",value:function start(){var _this=this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this.worker.onmessage=this._onMessage,getPageLoadPromise().then(function(){return _this._running?(_this._createAndTransferCanvas(opts),_this.props.onInitialize(_this)):null}).then(function(){_this._running&&(_this._animationFrameId=request_animation_frame_requestAnimationFrame(_this._updateFrame))}),this)}},{key:"stop",value:function stop(){return this._running&&(cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1,this.props.onFinalize(this)),this.worker.postMessage({command:"stop"}),this}},{key:"waitForRender",value:function waitForRender(){var _this2=this;return this._nextFramePromise||(this._nextFramePromise=new Promise(function(resolve){_this2._resolveNextFrame=resolve})),this._nextFramePromise}},{key:"_onMessage",value:function _onMessage(evt){switch(evt.data.command){case"addEventListener":this.canvas.addEventListener(evt.data.type,this._onEvent);break;case"removeEventListener":this.canvas.removeEventListener(evt.data.type,this._onEvent)}}},{key:"_onEvent",value:function _onEvent(evt){var devicePixelRatio=this.useDevicePixels&&window.devicePixelRatio||1,type=evt.type,safeEvent={};for(var key in evt){var value=evt[key],valueType=Object(esm_typeof.a)(value);"offsetX"!==key&&"offsetY"!==key||(value*=devicePixelRatio),"number"!==valueType&&"boolean"!==valueType&&"string"!==valueType||(safeEvent[key]=value)}this.worker.postMessage({command:"event",type:type,event:safeEvent})}},{key:"_updateFrame",value:function _updateFrame(){this._resizeCanvasDrawingBuffer(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._animationFrameId=request_animation_frame_requestAnimationFrame(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function _createAndTransferCanvas(opts){var screenCanvas=getCanvas(opts);screenCanvas.transferControlToOffscreen||utils_log.error("OffscreenCanvas is not available in your browser.")();var offscreenCanvas=screenCanvas.transferControlToOffscreen();this.worker.postMessage({command:"start",opts:Object.assign({},opts,{canvas:offscreenCanvas})},[offscreenCanvas]),this.canvas=screenCanvas}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){if(this.autoResizeDrawingBuffer){var devicePixelRatio=this.useDevicePixels&&window.devicePixelRatio||1,width=this.canvas.clientWidth*devicePixelRatio,height=this.canvas.clientHeight*devicePixelRatio;this.width===width&&this.height===height||(this.width=width,this.height=height,this.worker.postMessage({command:"resize",width:width,height:height}))}}}])}(),function(){function Pass(gl,props){Object(classCallCheck.a)(this,Pass);var _props$id=props.id,id=void 0===_props$id?"pass":_props$id;this.id=id,this.gl=gl,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,props)}return Object(createClass.a)(Pass,[{key:"setProps",value:function setProps(props){Object.assign(this.props,props)}},{key:"render",value:function render(renderState,animationProps){var _this=this;if(this.props.enabled){var gl=this.gl,renderParams={gl:gl,outputBuffer:renderState.writeBuffer,inputBuffer:renderState.readBuffer,animationProps:animationProps,swapBuffers:function swapBuffers(){return renderState._swapFramebuffers()}};this.props.screen?(renderParams.inputBuffer=renderParams.outputBuffer,renderParams.outputBuffer=framebuffer_Framebuffer.getDefaultFramebuffer(gl)):this.props.swap&&(renderParams.inputBuffer=renderState.writeBuffer,renderParams.outputBuffer=renderState.readBuffer),withParameters(gl,{framebuffer:renderParams.outputBuffer},function(){return _this._renderPass(renderParams)}),this.props.debug&&renderParams.outputBuffer.log(1,this.id),this.props.swap&&renderState._swapFramebuffers()}}},{key:"_renderPass",value:function _renderPass(_ref){_ref.gl,_ref.inputBuffer,_ref.outputBuffer,_ref.animationProps}}]),Pass}()),composite_pass_CompositePass=function(_Pass){function CompositePass(gl,props){return Object(classCallCheck.a)(this,CompositePass),props=Array.isArray(props)?{passes:props}:props,Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CompositePass).call(this,gl,Object.assign({id:"composite-pass"},props)))}return Object(inherits.a)(CompositePass,_Pass),Object(createClass.a)(CompositePass,[{key:"render",value:function render(){var _this$props$passes=this.props.passes,passes=void 0===_this$props$passes?[]:_this$props$passes,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pass=_step.value;pass.render.apply(pass,arguments)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),CompositePass}(pass_Pass),render_state_RenderState=function(){function RenderState(gl){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(classCallCheck.a)(this,RenderState),this.gl=gl,this.framebuffer1=new framebuffer_Framebuffer(gl,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new framebuffer_Framebuffer(gl,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(createClass.a)(RenderState,[{key:"reset",value:function reset(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function _swapFramebuffers(){var tmp=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=tmp}}]),RenderState}(),copy_pass_fs=(function(_CompositePass){function MultiPassRenderer(gl,props){var _this;return Object(classCallCheck.a)(this,MultiPassRenderer),props=Array.isArray(props)?{passes:props}:props,(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MultiPassRenderer).call(this,gl,Object.assign({id:"multi-pass"},props)))).renderState=new render_state_RenderState(gl,props),_this}Object(inherits.a)(MultiPassRenderer,_CompositePass),Object(createClass.a)(MultiPassRenderer,[{key:"render",value:function render(animationProps){this.renderState.reset();var _this$props$passes=this.props.passes,passes=void 0===_this$props$passes?[]:_this$props$passes,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.render(this.renderState,animationProps)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return this}}])}(composite_pass_CompositePass),function(_Pass){function ClearPass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,ClearPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ClearPass).call(this,gl,Object.assign({id:"clear-pass"},props)))}Object(inherits.a)(ClearPass,_Pass),Object(createClass.a)(ClearPass,[{key:"_renderPass",value:function _renderPass(_ref){var gl=_ref.gl,_this$props$clearBits=this.props.clearBits,clearBits=void 0===_this$props$clearBits?16640:_this$props$clearBits;gl.clear(clearBits)}}])}(pass_Pass),function(_Pass){function RenderPass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,RenderPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(RenderPass).call(this,gl,Object.assign({id:"render-pass"},props)))}Object(inherits.a)(RenderPass,_Pass),Object(createClass.a)(RenderPass,[{key:"_renderPass",value:function _renderPass(_ref){var animationProps=_ref.animationProps,_this$props=this.props,_this$props$models=_this$props.models,models=void 0===_this$props$models?[]:_this$props$models,drawParams=_this$props.drawParams,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=models[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.draw(Object.assign({},drawParams,{animationProps:animationProps}))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}])}(pass_Pass),"uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n"),texture_pass_fs=(function(_Pass){function CopyPass(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,CopyPass),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CopyPass).call(this,gl,Object.assign({id:"copy-pass",swap:!0},props)))).clipspace=new clip_space_ClipSpace(gl,{id:"copy-pass",fs:copy_pass_fs}),_this}Object(inherits.a)(CopyPass,_Pass),Object(createClass.a)(CopyPass,[{key:"_renderPass",value:function _renderPass(_ref){var inputBuffer=_ref.inputBuffer,_this$props$opacity=this.props.opacity,opacity=void 0===_this$props$opacity?1:_this$props$opacity;this.clipspace.draw({uniforms:{uDiffuseSampler:inputBuffer,uOpacity:opacity},parameters:{depthWrite:!1,depthTest:!1}})}}])}(pass_Pass),"uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n"),TYPE_DEFINITIONS=(function(_Pass){function TexturePass(gl){var _this,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,TexturePass),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TexturePass).call(this,gl,Object.assign({id:"texture-pass"},options)));var texture=options.texture,_options$opacity=options.opacity,opacity=void 0===_options$opacity?1:_options$opacity;return _this.clipspace=new clip_space_ClipSpace(gl,{id:"texture-pass",fs:texture_pass_fs,uniforms:{uDiffuseSampler:texture,uOpacity:opacity}}),_this}Object(inherits.a)(TexturePass,_Pass),Object(createClass.a)(TexturePass,[{key:"_renderPass",value:function _renderPass(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}])}(pass_Pass),{boolean:{validate:function validate(value,propType){return!0}},number:{validateType:function validateType(value,propType){return"value"in propType&&(!("max"in propType)||Number.isFinite(propType.max))&&(!("min"in propType)||Number.isFinite(propType.min))},validate:function validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}}});function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return function parsePropDefinition(propDef){var type=propDef.type;(TYPE_DEFINITIONS[type]||{}).typeValidator;return propDef}(propDef=function normalizePropType(name,propDef){if(!("type"in propDef))return"value"in propDef?Object.assign({name:name,type:getTypeOf(propDef.value)},propDef):{name:name,type:"object",value:propDef};return Object.assign({name:name},propDef)}(name,propDef));case"array":return function guessArrayType(name,array){if(/color/i.test(name)&&(3===array.length||4===array.length))return{name:name,type:"color",value:array};return{name:name,type:"array",value:array}}(name,propDef);case"boolean":return{name:name,type:"boolean",value:propDef};case"number":return function guessNumberType(name,value){var max=/radius|scale|width|height|pixel|size|miter/i.test(name)&&/^((?!scale).)*$/.test(name)?100:1;return{name:name,type:"number",max:Math.max(value,max),min:Math.min(value,0),value:value}}(name,propDef);case"function":return{name:name,type:"function",value:propDef};default:return{name:name,type:"unknown",value:propDef}}}function getTypeOf(value){return Array.isArray(value)||ArrayBuffer.isView(value)?"array":null===value?"null":Object(esm_typeof.a)(value)}function normalizeShaderModule(module){if(!module.normalized){if(module.normalized=!0,module.uniforms){var propTypes=function parsePropTypes(propDefs){for(var propTypes={},defaultProps={},_i=0,_Object$entries=Object.entries(propDefs);_i<_Object$entries.length;_i++){var _Object$entries$_i=Object(slicedToArray.a)(_Object$entries[_i],2),propName=_Object$entries$_i[0],propType=parsePropType(propName,_Object$entries$_i[1]);propTypes[propName]=propType,defaultProps[propName]=propType.value}return{propTypes:propTypes,defaultProps:defaultProps}}(module.uniforms).propTypes;module.uniforms=propTypes}module.uniforms&&!module.getUniforms&&(module.getUniforms=function defaultGetUniforms(module,props){var uniforms={};if(void 0===props){for(var key in module.uniforms)uniforms[key]=module.uniforms[key].value;return uniforms}for(var _key in props)uniforms[_key]=props[_key];return uniforms}.bind(null,module))}return module}var shader_module_pass_ShaderModuleSinglePass=function(_Pass){function ShaderModuleSinglePass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,ShaderModuleSinglePass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ShaderModuleSinglePass).call(this,gl,Object.assign({swap:!0},props)))}return Object(inherits.a)(ShaderModuleSinglePass,_Pass),Object(createClass.a)(ShaderModuleSinglePass,[{key:"_renderPass",value:function _renderPass(_ref){var inputBuffer=_ref.inputBuffer;_ref.swapBuffers;this.props.model.setUniforms(this.props),this.props.model.draw({uniforms:{texture:inputBuffer,texSize:[inputBuffer.width,inputBuffer.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),ShaderModuleSinglePass}(pass_Pass);!function(_CompositePass){function ShaderModulePass(gl,module){var _this,props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,ShaderModulePass);var id="".concat(module.name,"-pass");normalizeShaderModule(module);var passes=function normalizePasses(gl,module,id,props){if(module.filter||module.sampler){var fs=getFragmentShaderForRenderPass(module),pass=new shader_module_pass_ShaderModuleSinglePass(gl,{id:id,model:getModel(gl,module,fs,id,props),uniforms:null});return[pass]}var passes=module.passes||[];return passes.map(function(pass){var fs=getFragmentShaderForRenderPass(module,pass),idn="".concat(id,"-").concat(passes.length+1);return new shader_module_pass_ShaderModuleSinglePass(gl,Object.assign({id:idn,model:getModel(gl,module,fs,idn,props),uniforms:pass.uniforms},props))})}(gl,module,id,props);return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ShaderModulePass).call(this,gl,Object.assign({id:id,passes:passes},props)))).module=module,_this}Object(inherits.a)(ShaderModulePass,_CompositePass),Object(createClass.a)(ShaderModulePass,[{key:"_renderPass",value:function _renderPass(_ref2){var inputBuffer=_ref2.inputBuffer,swapBuffers=_ref2.swapBuffers,first=!0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.module.passes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var pass=_step.value;first||swapBuffers(),first=!1,pass.uniforms&&pass.model.setUniforms(pass.uniforms),pass.model.draw({uniforms:{texture:inputBuffer,texSize:[inputBuffer.width,inputBuffer.height]},parameters:{depthWrite:!1,depthTest:!1}})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}])}(composite_pass_CompositePass);function getModel(gl,module,fs,id,props){var model=new clip_space_ClipSpace(gl,{id:id,fs:fs,modules:[module]}),uniforms=Object.assign(module.getUniforms(),module.getUniforms(props));return model.setUniforms(uniforms),model}var FILTER_FS_TEMPLATE=function FILTER_FS_TEMPLATE(func){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(func,"(gl_FragColor, texSize, texCoord);\n}\n")},SAMPLER_FS_TEMPLATE=function SAMPLER_FS_TEMPLATE(func){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(func,"(texture, texSize, texCoord);\n}\n")};function getFragmentShaderForRenderPass(module){var pass=arguments.length>1&&void 0!==arguments[1]?arguments[1]:module;if(pass.filter){var func="string"==typeof pass.filter?pass.filter:"".concat(module.name,"_filterColor");return FILTER_FS_TEMPLATE(func)}if(pass.sampler){var _func="string"==typeof pass.sampler?pass.sampler:"".concat(module.name,"_sampleColor");return SAMPLER_FS_TEMPLATE(_func)}return null}var INDEX_OFFSETS={x:[2,0,1],y:[0,1,2],z:[1,2,0]},truncated_cone_geometry_TruncatedConeGeometry=function(_Geometry){function TruncatedConeGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,TruncatedConeGeometry);var _props$id=props.id,id=void 0===_props$id?uid("truncated-code-geometry"):_props$id,_tesselateTruncatedCo=function tesselateTruncatedCone(props){for(var _props$bottomRadius=props.bottomRadius,bottomRadius=void 0===_props$bottomRadius?0:_props$bottomRadius,_props$topRadius=props.topRadius,topRadius=void 0===_props$topRadius?0:_props$topRadius,_props$height=props.height,height=void 0===_props$height?1:_props$height,_props$nradial=props.nradial,nradial=void 0===_props$nradial?10:_props$nradial,_props$nvertical=props.nvertical,nvertical=void 0===_props$nvertical?10:_props$nvertical,_props$verticalAxis=props.verticalAxis,verticalAxis=void 0===_props$verticalAxis?"y":_props$verticalAxis,_props$topCap=props.topCap,topCap=void 0!==_props$topCap&&_props$topCap,_props$bottomCap=props.bottomCap,bottomCap=void 0!==_props$bottomCap&&_props$bottomCap,extra=(topCap?2:0)+(bottomCap?2:0),numVertices=(nradial+1)*(nvertical+1+extra),slant=Math.atan2(bottomRadius-topRadius,height),msin=Math.sin,mcos=Math.cos,mpi=Math.PI,cosSlant=mcos(slant),sinSlant=msin(slant),start=topCap?-2:0,end=nvertical+(bottomCap?2:0),vertsAroundEdge=nradial+1,indices=new Uint16Array(nradial*(nvertical+extra)*6),indexOffset=INDEX_OFFSETS[verticalAxis],positions=new Float32Array(3*numVertices),normals=new Float32Array(3*numVertices),texCoords=new Float32Array(2*numVertices),i3=0,i2=0,i=start;i<=end;i++){var v=i/nvertical,y=height*v,ringRadius=void 0;i<0?(y=0,v=1,ringRadius=bottomRadius):i>nvertical?(y=height,v=1,ringRadius=topRadius):ringRadius=bottomRadius+i/nvertical*(topRadius-bottomRadius),-2!==i&&i!==nvertical+2||(ringRadius=0,v=0),y-=height/2;for(var j=0;j<vertsAroundEdge;j++){var sin=msin(j*mpi*2/nradial),cos=mcos(j*mpi*2/nradial);positions[i3+indexOffset[0]]=sin*ringRadius,positions[i3+indexOffset[1]]=y,positions[i3+indexOffset[2]]=cos*ringRadius,normals[i3+indexOffset[0]]=i<0||i>nvertical?0:sin*cosSlant,normals[i3+indexOffset[1]]=i<0?-1:i>nvertical?1:sinSlant,normals[i3+indexOffset[2]]=i<0||i>nvertical?0:cos*cosSlant,texCoords[i2+0]=j/nradial,texCoords[i2+1]=v,i2+=2,i3+=3}}for(var _i=0;_i<nvertical+extra;_i++)for(var _j=0;_j<nradial;_j++){var index=6*(_i*nradial+_j);indices[index+0]=vertsAroundEdge*(_i+0)+0+_j,indices[index+1]=vertsAroundEdge*(_i+0)+1+_j,indices[index+2]=vertsAroundEdge*(_i+1)+1+_j,indices[index+3]=vertsAroundEdge*(_i+0)+0+_j,indices[index+4]=vertsAroundEdge*(_i+1)+1+_j,indices[index+5]=vertsAroundEdge*(_i+1)+0+_j}return{indices:indices,attributes:{POSITION:{size:3,value:positions},NORMAL:{size:3,value:normals},TEXCOORD_0:{size:2,value:texCoords}}}}(props),indices=_tesselateTruncatedCo.indices,attributes=_tesselateTruncatedCo.attributes;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TruncatedConeGeometry).call(this,Object(objectSpread.a)({},props,{id:id,indices:indices,attributes:Object(objectSpread.a)({},attributes,props.attributes)})))}return Object(inherits.a)(TruncatedConeGeometry,_Geometry),TruncatedConeGeometry}(geometry_Geometry);!function(_TruncatedConeGeometr){function ConeGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,ConeGeometry);var _props$id=props.id,id=void 0===_props$id?uid("cone-geometry"):_props$id,_props$radius=props.radius,radius=void 0===_props$radius?1:_props$radius,_props$cap=props.cap,cap=void 0===_props$cap||_props$cap;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ConeGeometry).call(this,Object(objectSpread.a)({},props,{id:id,topRadius:0,topCap:Boolean(cap),bottomCap:Boolean(cap),bottomRadius:radius})))}Object(inherits.a)(ConeGeometry,_TruncatedConeGeometr)}(truncated_cone_geometry_TruncatedConeGeometry);var CUBE_INDICES=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),CUBE_POSITIONS=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),CUBE_NORMALS=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),CUBE_TEX_COORDS=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),ATTRIBUTES={POSITION:{size:3,value:new Float32Array(CUBE_POSITIONS)},NORMAL:{size:3,value:new Float32Array(CUBE_NORMALS)},TEXCOORD_0:{size:2,value:new Float32Array(CUBE_TEX_COORDS)}},cylinder_geometry_CylinderGeometry=(function(_Geometry){function CubeGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,CubeGeometry);var _props$id=props.id,id=void 0===_props$id?uid("cube-geometry"):_props$id;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CubeGeometry).call(this,Object(objectSpread.a)({},props,{id:id,indices:{size:1,value:new Uint16Array(CUBE_INDICES)},attributes:Object(objectSpread.a)({},ATTRIBUTES,props.attributes)})))}Object(inherits.a)(CubeGeometry,_Geometry)}(geometry_Geometry),function(_TruncatedConeGeometr){function CylinderGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,CylinderGeometry);var _props$id=props.id,id=void 0===_props$id?uid("cylinder-geometry"):_props$id,_props$radius=props.radius,radius=void 0===_props$radius?1:_props$radius;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CylinderGeometry).call(this,Object(objectSpread.a)({},props,{id:id,bottomRadius:radius,topRadius:radius})))}return Object(inherits.a)(CylinderGeometry,_TruncatedConeGeometr),CylinderGeometry}(truncated_cone_geometry_TruncatedConeGeometry)),ICO_POSITIONS=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],ICO_INDICES=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];!function(_Geometry){function IcoSphereGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,IcoSphereGeometry);var _props$id=props.id,id=void 0===_props$id?uid("ico-sphere-geometry"):_props$id,_tesselateIcosaHedron=function tesselateIcosaHedron(){var _props$iterations=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).iterations,iterations=void 0===_props$iterations?0:_props$iterations,PI=Math.PI,PI2=2*PI,positions=[].concat(ICO_POSITIONS),indices=[].concat(ICO_INDICES);positions.push(),indices.push();for(var getMiddlePoint=function(){var pointMemo={};return function(i1,i2){var mini=(i1*=3)<(i2*=3)?i1:i2,maxi=i1>i2?i1:i2,key="".concat(mini,"|").concat(maxi);if(key in pointMemo)return pointMemo[key];var x1=positions[i1],y1=positions[i1+1],z1=positions[i1+2],x2=positions[i2],y2=positions[i2+1],z2=positions[i2+2],xm=(x1+x2)/2,ym=(y1+y2)/2,zm=(z1+z2)/2,len=Math.sqrt(xm*xm+ym*ym+zm*zm);return xm/=len,ym/=len,zm/=len,positions.push(xm,ym,zm),pointMemo[key]=positions.length/3-1}}(),i=0;i<iterations;i++){for(var indices2=[],j=0;j<indices.length;j+=3){var a=getMiddlePoint(indices[j+0],indices[j+1]),b=getMiddlePoint(indices[j+1],indices[j+2]),c=getMiddlePoint(indices[j+2],indices[j+0]);indices2.push(c,indices[j+0],a,a,indices[j+1],b,b,indices[j+2],c,a,b,c)}indices=indices2}for(var normals=new Array(3*indices.length),texCoords=new Array(2*indices.length),_i=indices.length-3;_i>=0;_i-=3){var i1=indices[_i+0],i2=indices[_i+1],i3=indices[_i+2],in1=3*i1,in2=3*i2,in3=3*i3,iu1=2*i1,iu2=2*i2,iu3=2*i3,x1=positions[in1+0],y1=positions[in1+1],z1=positions[in1+2],theta1=Math.acos(z1/Math.sqrt(x1*x1+y1*y1+z1*z1)),phi1=Math.atan2(y1,x1)+PI,v1=theta1/PI,u1=1-phi1/PI2,x2=positions[in2+0],y2=positions[in2+1],z2=positions[in2+2],theta2=Math.acos(z2/Math.sqrt(x2*x2+y2*y2+z2*z2)),phi2=Math.atan2(y2,x2)+PI,v2=theta2/PI,u2=1-phi2/PI2,x3=positions[in3+0],y3=positions[in3+1],z3=positions[in3+2],theta3=Math.acos(z3/Math.sqrt(x3*x3+y3*y3+z3*z3)),phi3=Math.atan2(y3,x3)+PI,v3=theta3/PI,u3=1-phi3/PI2,vec1=[x3-x2,y3-y2,z3-z2],vec2=[x1-x2,y1-y2,z1-z2],normal=new vector3.a(vec1).cross(vec2).normalize(),newIndex=void 0;(0===u1||0===u2||0===u3)&&(0===u1||u1>.5)&&(0===u2||u2>.5)&&(0===u3||u3>.5)&&(positions.push(positions[in1+0],positions[in1+1],positions[in1+2]),newIndex=positions.length/3-1,indices.push(newIndex),texCoords[2*newIndex+0]=1,texCoords[2*newIndex+1]=v1,normals[3*newIndex+0]=normal.x,normals[3*newIndex+1]=normal.y,normals[3*newIndex+2]=normal.z,positions.push(positions[in2+0],positions[in2+1],positions[in2+2]),newIndex=positions.length/3-1,indices.push(newIndex),texCoords[2*newIndex+0]=1,texCoords[2*newIndex+1]=v2,normals[3*newIndex+0]=normal.x,normals[3*newIndex+1]=normal.y,normals[3*newIndex+2]=normal.z,positions.push(positions[in3+0],positions[in3+1],positions[in3+2]),newIndex=positions.length/3-1,indices.push(newIndex),texCoords[2*newIndex+0]=1,texCoords[2*newIndex+1]=v3,normals[3*newIndex+0]=normal.x,normals[3*newIndex+1]=normal.y,normals[3*newIndex+2]=normal.z),normals[in1+0]=normals[in2+0]=normals[in3+0]=normal.x,normals[in1+1]=normals[in2+1]=normals[in3+1]=normal.y,normals[in1+2]=normals[in2+2]=normals[in3+2]=normal.z,texCoords[iu1+0]=u1,texCoords[iu1+1]=v1,texCoords[iu2+0]=u2,texCoords[iu2+1]=v2,texCoords[iu3+0]=u3,texCoords[iu3+1]=v3}return{indices:{size:1,value:new Uint16Array(indices)},attributes:{POSITION:{size:3,value:new Float32Array(positions)},NORMAL:{size:3,value:new Float32Array(normals)},TEXCOORD_0:{size:2,value:new Float32Array(texCoords)}}}}(props),indices=_tesselateIcosaHedron.indices,attributes=_tesselateIcosaHedron.attributes;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(IcoSphereGeometry).call(this,Object(objectSpread.a)({},props,{id:id,indices:indices,attributes:Object(objectSpread.a)({},attributes,props.attributes)})))}Object(inherits.a)(IcoSphereGeometry,_Geometry)}(geometry_Geometry);!function(_Geometry){function PlaneGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,PlaneGeometry);var _props$id=props.id,id=void 0===_props$id?uid("plane-geometry"):_props$id,_tesselatePlane=function tesselatePlane(props){var _props$type=props.type,type=void 0===_props$type?"x,y":_props$type,_props$offset=props.offset,offset=void 0===_props$offset?0:_props$offset,_props$flipCull=props.flipCull,flipCull=void 0!==_props$flipCull&&_props$flipCull,_props$unpack=props.unpack,unpack=void 0!==_props$unpack&&_props$unpack,coords=type.split(","),c1len=props["".concat(coords[0],"len")],c2len=props["".concat(coords[1],"len")],subdivisions1=props["n".concat(coords[0])]||1,subdivisions2=props["n".concat(coords[1])]||1,numVertices=(subdivisions1+1)*(subdivisions2+1),positions=new Float32Array(3*numVertices),normals=new Float32Array(3*numVertices),texCoords=new Float32Array(2*numVertices);flipCull&&(c1len=-c1len);for(var i2=0,i3=0,z=0;z<=subdivisions2;z++)for(var x=0;x<=subdivisions1;x++){var u=x/subdivisions1,v=z/subdivisions2;switch(texCoords[i2+0]=flipCull?1-u:u,texCoords[i2+1]=v,type){case"x,y":positions[i3+0]=c1len*u-.5*c1len,positions[i3+1]=c2len*v-.5*c2len,positions[i3+2]=offset,normals[i3+0]=0,normals[i3+1]=0,normals[i3+2]=flipCull?1:-1;break;case"x,z":positions[i3+0]=c1len*u-.5*c1len,positions[i3+1]=offset,positions[i3+2]=c2len*v-.5*c2len,normals[i3+0]=0,normals[i3+1]=flipCull?1:-1,normals[i3+2]=0;break;case"y,z":positions[i3+0]=offset,positions[i3+1]=c1len*u-.5*c1len,positions[i3+2]=c2len*v-.5*c2len,normals[i3+0]=flipCull?1:-1,normals[i3+1]=0,normals[i3+2]=0}i2+=2,i3+=3}for(var numVertsAcross=subdivisions1+1,indices=new Uint16Array(subdivisions1*subdivisions2*6),_z=0;_z<subdivisions2;_z++)for(var _x=0;_x<subdivisions1;_x++){var index=6*(_z*subdivisions1+_x);indices[index+0]=(_z+0)*numVertsAcross+_x,indices[index+1]=(_z+1)*numVertsAcross+_x,indices[index+2]=(_z+0)*numVertsAcross+_x+1,indices[index+3]=(_z+1)*numVertsAcross+_x,indices[index+4]=(_z+1)*numVertsAcross+_x+1,indices[index+5]=(_z+0)*numVertsAcross+_x+1}var geometry={indices:{size:1,value:indices},attributes:{POSITION:{size:3,value:positions},NORMAL:{size:3,value:normals},TEXCOORD_0:{size:2,value:texCoords}}};return unpack?function unpackIndexedGeometry(geometry){var indices=geometry.indices,attributes=geometry.attributes;if(!indices)return geometry;for(var POSITION=attributes.POSITION,NORMAL=attributes.NORMAL,TEXCOORD_0=attributes.TEXCOORD_0,unpackedPositions=new Float32Array(3*indices.length),unpackedNormals=new Float32Array(3*indices.length),unpackedTexCoords=new Float32Array(2*indices.length),x=0;x<indices.length;++x){var index=indices[x];unpackedPositions[3*x+0]=POSITION[3*index+0],unpackedPositions[3*x+1]=POSITION[3*index+1],unpackedPositions[3*x+2]=POSITION[3*index+2],unpackedNormals[3*x+0]=NORMAL[3*index+0],unpackedNormals[3*x+1]=NORMAL[3*index+1],unpackedNormals[3*x+2]=NORMAL[3*index+2],unpackedTexCoords[2*x+0]=TEXCOORD_0[2*index+0],unpackedTexCoords[2*x+1]=TEXCOORD_0[2*index+1]}return{attributes:{POSITION:unpackedPositions,NORMAL:unpackedNormals,TEXCOORD_0:unpackedTexCoords}}}(geometry):geometry}(props),indices=_tesselatePlane.indices,attributes=_tesselatePlane.attributes;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PlaneGeometry).call(this,Object(objectSpread.a)({},props,{id:id,indices:indices,attributes:Object(objectSpread.a)({},attributes,props.attributes)})))}Object(inherits.a)(PlaneGeometry,_Geometry)}(geometry_Geometry);!function(_Geometry){function SphereGeometry(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,SphereGeometry);var _props$id=props.id,id=void 0===_props$id?uid("sphere-geometry"):_props$id,_tesselateSphere=function tesselateSphere(props){var _props$nlat=props.nlat,nlat=void 0===_props$nlat?10:_props$nlat,_props$nlong=props.nlong,nlong=void 0===_props$nlong?10:_props$nlong,_props$radius=props.radius,radius=void 0===_props$radius?1:_props$radius,latRange=Math.PI-0,longRange=2*Math.PI-0,numVertices=(nlat+1)*(nlong+1);if("number"==typeof radius){var value=radius;radius=function radius(n1,n2,n3,u,v){return value}}for(var positions=new Float32Array(3*numVertices),normals=new Float32Array(3*numVertices),texCoords=new Float32Array(2*numVertices),indices=new Uint16Array(nlat*nlong*6),y=0;y<=nlat;y++)for(var x=0;x<=nlong;x++){var u=x/nlong,v=y/nlat,index=x+y*(nlong+1),i2=2*index,i3=3*index,theta=longRange*u,phi=latRange*v,sinTheta=Math.sin(theta),cosTheta=Math.cos(theta),sinPhi=Math.sin(phi),cosPhi=Math.cos(phi),ux=cosTheta*sinPhi,uy=cosPhi,uz=sinTheta*sinPhi,r=radius(ux,uy,uz,u,v);positions[i3+0]=r*ux,positions[i3+1]=r*uy,positions[i3+2]=r*uz,normals[i3+0]=ux,normals[i3+1]=uy,normals[i3+2]=uz,texCoords[i2+0]=u,texCoords[i2+1]=1-v}for(var numVertsAround=nlat+1,_x=0;_x<nlat;_x++)for(var _y=0;_y<nlong;_y++){var _index=6*(_x*nlong+_y);indices[_index+0]=_y*numVertsAround+_x,indices[_index+1]=_y*numVertsAround+_x+1,indices[_index+2]=(_y+1)*numVertsAround+_x,indices[_index+3]=(_y+1)*numVertsAround+_x,indices[_index+4]=_y*numVertsAround+_x+1,indices[_index+5]=(_y+1)*numVertsAround+_x+1}return{indices:{size:1,value:indices},attributes:{POSITION:{size:3,value:positions},NORMAL:{size:3,value:normals},TEXCOORD_0:{size:2,value:texCoords}}}}(props),indices=_tesselateSphere.indices,attributes=_tesselateSphere.attributes;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SphereGeometry).call(this,Object(objectSpread.a)({},props,{id:id,indices:indices,attributes:Object(objectSpread.a)({},attributes,props.attributes)})))}Object(inherits.a)(SphereGeometry,_Geometry)}(geometry_Geometry);var phong_material_defaultProps={ambient:.35,diffuse:.6,shininess:32,specularColor:[30,30,30]},phong_material_PhongMaterial=function(_Material){function PhongMaterial(props){var _this;return Object(classCallCheck.a)(this,PhongMaterial),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PhongMaterial).call(this,props)),props=Object.assign({},phong_material_defaultProps,props),Object.assign(Object(assertThisInitialized.a)(_this),props),_this}return Object(inherits.a)(PhongMaterial,_Material),PhongMaterial}(material_Material),matrix4=(function(_Material){function PBRMaterial(){return Object(classCallCheck.a)(this,PBRMaterial),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PBRMaterial).apply(this,arguments))}Object(inherits.a)(PBRMaterial,_Material)}(material_Material),__webpack_require__(540)),scenegraph_node_ScenegraphNode=function(){function ScenegraphNode(props){Object(classCallCheck.a)(this,ScenegraphNode);var id=props.id;this.id=id||uid(this.constructor.name),this.display=!0,this.position=new vector3.a,this.rotation=new vector3.a,this.scale=new vector3.a(1,1,1),this.matrix=new matrix4.a,this.userData={},this.props={},this._setScenegraphNodeProps(props)}return Object(createClass.a)(ScenegraphNode,[{key:"delete",value:function _delete(){}},{key:"setProps",value:function setProps(props){return this._setScenegraphNodeProps(props),this}},{key:"toString",value:function toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function setPosition(position){return assert(3===position.length,"setPosition requires vector argument"),this.position=position,this}},{key:"setRotation",value:function setRotation(rotation){return assert(3===rotation.length,"setRotation requires vector argument"),this.rotation=rotation,this}},{key:"setScale",value:function setScale(scale){return assert(3===scale.length,"setScale requires vector argument"),this.scale=scale,this}},{key:"setMatrix",value:function setMatrix(matrix){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(matrix):this.matrix=matrix}},{key:"setMatrixComponents",value:function setMatrixComponents(_ref){var position=_ref.position,rotation=_ref.rotation,scale=_ref.scale,_ref$update=_ref.update,update=void 0===_ref$update||_ref$update;return position&&this.setPosition(position),rotation&&this.setRotation(rotation),scale&&this.setScale(scale),update&&this.updateMatrix(),this}},{key:"updateMatrix",value:function updateMatrix(){var pos=this.position,rot=this.rotation,scale=this.scale;return this.matrix.identity(),this.matrix.translate(pos),this.matrix.rotateXYZ(rot),this.matrix.scale(scale),this}},{key:"update",value:function update(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},position=_ref2.position,rotation=_ref2.rotation,scale=_ref2.scale;return position&&this.setPosition(position),rotation&&this.setRotation(rotation),scale&&this.setScale(scale),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function getCoordinateUniforms(viewMatrix,modelMatrix){assert(viewMatrix),modelMatrix=modelMatrix||this.matrix;var worldMatrix=new matrix4.a(viewMatrix).multiplyRight(modelMatrix),worldInverse=worldMatrix.invert(),worldInverseTranspose=worldInverse.transpose();return{viewMatrix:viewMatrix,modelMatrix:modelMatrix,objectMatrix:modelMatrix,worldMatrix:worldMatrix,worldInverseMatrix:worldInverse,worldInverseTransposeMatrix:worldInverseTranspose}}},{key:"transform",value:function transform(){if(this.parent){var parent=this.parent;this.endPosition.set(this.position.add(parent.endPosition)),this.endRotation.set(this.rotation.add(parent.endRotation)),this.endScale.set(this.scale.add(parent.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var ch=this.children,i=0;i<ch.length;++i)ch[i].transform();return this}},{key:"_setScenegraphNodeProps",value:function _setScenegraphNodeProps(props){"display"in props&&(this.display=props.display),"position"in props&&this.setPosition(props.position),"rotation"in props&&this.setPosition(props.rotation),"scale"in props&&this.setScale(props.scale),"matrix"in props&&this.setPosition(props.matrix),Object.assign(this.props,props)}}]),ScenegraphNode}();(function(_ScenegraphNode){function GroupNode(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,GroupNode);var _props$children=(props=Array.isArray(props)?{children:props}:props).children,children=void 0===_props$children?[]:_props$children;return children.every(function(child){return assert(child instanceof scenegraph_node_ScenegraphNode)}),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(GroupNode).call(this,props))).children=children,_this}Object(inherits.a)(GroupNode,_ScenegraphNode),Object(createClass.a)(GroupNode,[{key:"add",value:function add(){for(var _len=arguments.length,children=new Array(_len),_key=0;_key<_len;_key++)children[_key]=arguments[_key];for(var _i=0,_children=children;_i<_children.length;_i++){var child=_children[_i];Array.isArray(child)?this.add.apply(this,Object(toConsumableArray.a)(child)):this.children.push(child)}return this}},{key:"remove",value:function remove(child){var children=this.children,indexOf=children.indexOf(child);return indexOf>-1&&children.splice(indexOf,1),this}},{key:"removeAll",value:function removeAll(){return this.children=[],this}},{key:"delete",value:function _delete(){this.children.forEach(function(child){return child.delete()}),this.removeAll(),Object(esm_get.a)(Object(getPrototypeOf.a)(GroupNode.prototype),"delete",this).call(this)}},{key:"traverse",value:function traverse(visitor){var _ref$worldMatrix=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).worldMatrix,worldMatrix=void 0===_ref$worldMatrix?new matrix4.a:_ref$worldMatrix,modelMatrix=new matrix4.a(worldMatrix).multiplyRight(this.matrix),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.children[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var child=_step.value;child instanceof GroupNode?child.traverse(visitor,{worldMatrix:modelMatrix}):visitor(child,{worldMatrix:modelMatrix})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"traverseReverse",value:function traverseReverse(visitor,opts){return utils_log.warn("traverseReverse is not reverse")(),this.traverse(visitor,opts)}}])})(scenegraph_node_ScenegraphNode),function(_ScenegraphNode){function ModelNode(gl){var _this,props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(classCallCheck.a)(this,ModelNode),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ModelNode).call(this,props))).onBeforeRender=null,_this.AfterRender=null,gl instanceof model_Model?(_this.model=gl,_this._setModelNodeProps(props)):_this.model=new model_Model(gl,props),_this.managedResources=props.managedResources||[],_this}Object(inherits.a)(ModelNode,_ScenegraphNode),Object(createClass.a)(ModelNode,[{key:"setProps",value:function setProps(props){return Object(esm_get.a)(Object(getPrototypeOf.a)(ModelNode.prototype),"setProps",this).call(this,props),this._setModelNodeProps(props),this}},{key:"delete",value:function _delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(resource){return resource.delete()}),this.managedResources=[]}},{key:"draw",value:function draw(){var _this$model;return(_this$model=this.model).draw.apply(_this$model,arguments)}},{key:"setUniforms",value:function setUniforms(){var _this$model2;return(_this$model2=this.model).setUniforms.apply(_this$model2,arguments),this}},{key:"setAttributes",value:function setAttributes(){var _this$model3;return(_this$model3=this.model).setAttributes.apply(_this$model3,arguments),this}},{key:"updateModuleSettings",value:function updateModuleSettings(){var _this$model4;return(_this$model4=this.model).updateModuleSettings.apply(_this$model4,arguments),this}},{key:"_setModelNodeProps",value:function _setModelNodeProps(props){this.model.setProps(props)}}])}(scenegraph_node_ScenegraphNode),function(_ScenegraphNode){function CameraNode(){var _this,props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(classCallCheck.a)(this,CameraNode),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CameraNode).call(this,props))).projectionMatrix=props.projectionMatrix,_this}Object(inherits.a)(CameraNode,_ScenegraphNode)}(scenegraph_node_ScenegraphNode);__webpack_require__.d(__webpack_exports__,"p",function(){return createGLContext}),__webpack_require__.d(__webpack_exports__,"f",function(){return FEATURES}),__webpack_require__.d(__webpack_exports__,"t",function(){return hasFeature}),__webpack_require__.d(__webpack_exports__,"C",function(){return track_context_state.a}),__webpack_require__.d(__webpack_exports__,"B",function(){return setParameters}),__webpack_require__.d(__webpack_exports__,"E",function(){return withParameters}),__webpack_require__.d(__webpack_exports__,"c",function(){return buffer_Buffer}),__webpack_require__.d(__webpack_exports__,"g",function(){return framebuffer_Framebuffer}),__webpack_require__.d(__webpack_exports__,"l",function(){return texture_2d_Texture2D}),__webpack_require__.d(__webpack_exports__,"o",function(){return clear_clear}),__webpack_require__.d(__webpack_exports__,"x",function(){return readPixelsToArray}),__webpack_require__.d(__webpack_exports__,"y",function(){return copy_and_blit_readPixelsToBuffer}),__webpack_require__.d(__webpack_exports__,"h",function(){return geometry_Geometry}),__webpack_require__.d(__webpack_exports__,"a",function(){return light_source_AmbientLight}),__webpack_require__.d(__webpack_exports__,"e",function(){return light_source_DirectionalLight}),__webpack_require__.d(__webpack_exports__,"k",function(){return light_source_PointLight}),__webpack_require__.d(__webpack_exports__,"b",function(){return animation_loop_AnimationLoop}),__webpack_require__.d(__webpack_exports__,"i",function(){return model_Model}),__webpack_require__.d(__webpack_exports__,"m",function(){return transform_Transform}),__webpack_require__.d(__webpack_exports__,"n",function(){return shader_cache_ShaderCache}),__webpack_require__.d(__webpack_exports__,"d",function(){return cylinder_geometry_CylinderGeometry}),__webpack_require__.d(__webpack_exports__,"j",function(){return phong_material_PhongMaterial}),__webpack_require__.d(__webpack_exports__,"z",function(){return registerShaderModules}),__webpack_require__.d(__webpack_exports__,"A",function(){return setDefaultShaderModules}),__webpack_require__.d(__webpack_exports__,"q",function(){return fp32}),__webpack_require__.d(__webpack_exports__,"r",function(){return fp64}),__webpack_require__.d(__webpack_exports__,"w",function(){return picking}),__webpack_require__.d(__webpack_exports__,"s",function(){return gouraudlighting}),__webpack_require__.d(__webpack_exports__,"v",function(){return phonglighting}),__webpack_require__.d(__webpack_exports__,"u",function(){return utils_log}),__webpack_require__.d(__webpack_exports__,"D",function(){return uid})},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(431)},function(module,__webpack_exports__,__webpack_require__){"use strict";var globals=__webpack_require__(83),utils_log=new(__webpack_require__(539).a)({id:"deck"}).enable();if(globals.a.deck&&"7.0.6"!==globals.a.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(globals.a.deck.VERSION," vs ").concat("7.0.6"));globals.a.deck||(utils_log.log(0,"deck.gl ".concat("7.0.6"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),globals.a.deck=globals.a.deck||{VERSION:"7.0.6",version:"7.0.6",log:utils_log}),console.table||(console.table=function(){});var esm=__webpack_require__(8),PROJECT_COORDINATE_SYSTEM={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0},COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(PROJECT_COORDINATE_SYSTEM).map(function(key){return"const float COORDINATE_SYSTEM_".concat(key," = ").concat(PROJECT_COORDINATE_SYSTEM[key],".;")}).join(""),project_glsl="".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec2 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_size(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    float X = position.x - project_uCoordinateOrigin.x;\n    float Y = position.y - project_uCoordinateOrigin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters);\n}\nfloat project_pixel_size(float pixels) {\n  return pixels;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels;\n}\nfloat project_scale(float meters) {\n  return project_size(meters);\n}\nvec2 project_scale(vec2 meters) {\n  return project_size(meters);\n}\nvec3 project_scale(vec3 meters) {\n  return project_size(meters);\n}\nvec4 project_scale(vec4 meters) {\n  return project_size(meters);\n}\nvec4 project_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position);\n}\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\n}\n"),mat4=__webpack_require__(13),vec4=__webpack_require__(36),COORDINATE_SYSTEM={LNGLAT:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function isEqual(a,b){if(a===b)return!0;if(Array.isArray(a)){var len=a.length;if(!b||b.length!==len)return!1;for(var i=0;i<len;i++)if(a[i]!==b[i])return!1;return!0}return!1}function memoize(compute){var cachedResult,cachedArgs={};return function(args){for(var key in args)if(!isEqual(args[key],cachedArgs[key])){cachedResult=compute(args),cachedArgs=args;break}return cachedResult}}function assert(condition,message){if(!condition)throw new Error(message||"deck.gl: assertion failed.")}var ZERO_VECTOR=[0,0,0,0],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN=[0,0,0],LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=12,getMemoizedViewportUniforms=memoize(function calculateViewportUniforms(_ref3){var viewport=_ref3.viewport,devicePixelRatio=_ref3.devicePixelRatio,coordinateSystem=_ref3.coordinateSystem,coordinateOrigin=_ref3.coordinateOrigin,wrapLongitude=_ref3.wrapLongitude,coordinateZoom=viewport.zoom,_calculateMatrixAndOf=function calculateMatrixAndOffset(_ref){var projectionCenter,viewport=_ref.viewport,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,coordinateZoom=_ref.coordinateZoom,viewMatrixUncentered=viewport.viewMatrixUncentered,viewMatrix=viewport.viewMatrix,projectionMatrix=viewport.projectionMatrix,viewProjectionMatrix=viewport.viewProjectionMatrix,cameraPos=viewport.cameraPosition,shaderCoordinateSystem=function getShaderCoordinateSystem(coordinateSystem){switch(coordinateSystem){case COORDINATE_SYSTEM.LNGLAT:case COORDINATE_SYSTEM.LNGLAT_EXPERIMENTAL:default:return PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET;case COORDINATE_SYSTEM.LNGLAT_DEPRECATED:return PROJECT_COORDINATE_SYSTEM.LNG_LAT;case COORDINATE_SYSTEM.METER_OFFSETS:case COORDINATE_SYSTEM.METERS:return PROJECT_COORDINATE_SYSTEM.METER_OFFSETS;case COORDINATE_SYSTEM.LNGLAT_OFFSETS:return PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS;case COORDINATE_SYSTEM.IDENTITY:return PROJECT_COORDINATE_SYSTEM.IDENTITY}}(coordinateSystem),shaderCoordinateOrigin=coordinateOrigin;if(shaderCoordinateSystem===PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET)if(coordinateZoom<LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD)shaderCoordinateSystem=PROJECT_COORDINATE_SYSTEM.LNG_LAT;else{var lng=Math.fround(viewport.longitude),lat=Math.fround(viewport.latitude);shaderCoordinateOrigin=[lng,lat]}switch(shaderCoordinateSystem){case PROJECT_COORDINATE_SYSTEM.IDENTITY:case PROJECT_COORDINATE_SYSTEM.LNG_LAT:projectionCenter=ZERO_VECTOR;break;case PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS:case PROJECT_COORDINATE_SYSTEM.METER_OFFSETS:case PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET:var positionPixels=viewport.projectFlat(shaderCoordinateOrigin,Math.pow(2,coordinateZoom));cameraPos=[cameraPos[0]-positionPixels[0],cameraPos[1]-positionPixels[1],cameraPos[2]],projectionCenter=vec4.c([],[positionPixels[0],positionPixels[1],0,1],viewProjectionMatrix),viewMatrix=viewMatrixUncentered||viewMatrix,viewProjectionMatrix=mat4.g([],projectionMatrix,viewMatrix),viewProjectionMatrix=mat4.g([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:viewMatrix,viewProjectionMatrix:viewProjectionMatrix,projectionCenter:projectionCenter,cameraPos:cameraPos,shaderCoordinateSystem:shaderCoordinateSystem,shaderCoordinateOrigin:shaderCoordinateOrigin}}({coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,coordinateZoom:coordinateZoom,viewport:viewport}),projectionCenter=_calculateMatrixAndOf.projectionCenter,viewProjectionMatrix=_calculateMatrixAndOf.viewProjectionMatrix,cameraPos=_calculateMatrixAndOf.cameraPos,shaderCoordinateSystem=_calculateMatrixAndOf.shaderCoordinateSystem,shaderCoordinateOrigin=_calculateMatrixAndOf.shaderCoordinateOrigin;assert(viewProjectionMatrix,"Viewport missing modelViewProjectionMatrix");var distanceScales=viewport.getDistanceScales(),viewportSize=[viewport.width*devicePixelRatio,viewport.height*devicePixelRatio],uniforms={project_uCoordinateSystem:shaderCoordinateSystem,project_uCenter:projectionCenter,project_uWrapLongitude:wrapLongitude,project_uAntimeridian:(viewport.longitude||0)-180,project_uViewportSize:viewportSize,project_uDevicePixelRatio:devicePixelRatio,project_uFocalDistance:viewport.focalDistance||1,project_uCommonUnitsPerMeter:distanceScales.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:distanceScales.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:viewport.scale,project_uViewProjectionMatrix:viewProjectionMatrix,project_uCameraPosition:cameraPos},distanceScalesAtOrigin=viewport.getDistanceScales(shaderCoordinateOrigin);switch(shaderCoordinateSystem){case PROJECT_COORDINATE_SYSTEM.METER_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.pixelsPerMeter,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.pixelsPerMeter2;break;case PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET:uniforms.project_uCoordinateOrigin=shaderCoordinateOrigin;case PROJECT_COORDINATE_SYSTEM.LNG_LAT:case PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.pixelsPerDegree,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.pixelsPerDegree2}return uniforms});function getUniformsFromViewport(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},viewport=_ref2.viewport,_ref2$devicePixelRati=_ref2.devicePixelRatio,devicePixelRatio=void 0===_ref2$devicePixelRati?1:_ref2$devicePixelRati,_ref2$modelMatrix=_ref2.modelMatrix,modelMatrix=void 0===_ref2$modelMatrix?null:_ref2$modelMatrix,_ref2$coordinateSyste=_ref2.coordinateSystem,coordinateSystem=void 0===_ref2$coordinateSyste?COORDINATE_SYSTEM.LNGLAT:_ref2$coordinateSyste,_ref2$coordinateOrigi=_ref2.coordinateOrigin,coordinateOrigin=void 0===_ref2$coordinateOrigi?DEFAULT_COORDINATE_ORIGIN:_ref2$coordinateOrigi,_ref2$wrapLongitude=_ref2.wrapLongitude,wrapLongitude=void 0!==_ref2$wrapLongitude&&_ref2$wrapLongitude,projectionMode=_ref2.projectionMode,positionOrigin=_ref2.positionOrigin;return assert(viewport),void 0!==projectionMode&&utils_log.removed("projectionMode","coordinateSystem")(),void 0!==positionOrigin&&utils_log.removed("positionOrigin","coordinateOrigin")(),Object.assign({project_uModelMatrix:modelMatrix||IDENTITY_MATRIX},getMemoizedViewportUniforms({viewport:viewport,devicePixelRatio:devicePixelRatio,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude}))}var INITIAL_MODULE_OPTIONS={};var project_project={name:"project",dependencies:[esm.q],vs:project_glsl,getUniforms:function getUniforms(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;return opts.viewport?getUniformsFromViewport(opts):{}},deprecations:[{type:"function",old:"project_scale",new:"project_size"},{type:"function",old:"project_to_clipspace",new:"project_common_position_to_clipspace"},{type:"function",old:"project_pixel_to_clipspace",new:"project_pixel_size_to_clipspace"}]},project32={name:"project32",dependencies:[project_project],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\n}\n"},fp64ify=esm.r.fp64ify,fp64ifyMatrix4=esm.r.fp64ifyMatrix4,project64={name:"project64",dependencies:[project_project,esm.r],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_size(position.z);\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 commonPosition64[4];\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  commonPosition64[3] = vec2(1.0, 0.0);\n\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_common_position_to_clipspace_fp64(commonPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, commonPosition\n  );\n}\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  return project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",getUniforms:function project64_getUniforms(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},project_uViewProjectionMatrix=context.project_uViewProjectionMatrix,project_uScale=context.project_uScale;if(project_uViewProjectionMatrix&&project_uScale)return getMemoizedUniforms({project_uViewProjectionMatrix:project_uViewProjectionMatrix,project_uScale:project_uScale});return{}},deprecations:[{type:"function",old:"project_to_clipspace_fp64",new:"project_common_position_to_clipspace_fp64"}]},getMemoizedUniforms=memoize(function calculateUniforms(_ref){var project_uViewProjectionMatrix=_ref.project_uViewProjectionMatrix,project_uScale=_ref.project_uScale,glViewProjectionMatrixFP64=fp64ifyMatrix4(project_uViewProjectionMatrix),scaleFP64=fp64ify(project_uScale);return{project_uViewProjectionMatrixFP64:glViewProjectionMatrixFP64,project64_uViewProjectionMatrix:glViewProjectionMatrixFP64,project64_uScale:scaleFP64}});!function initializeShaderModules(){Object(esm.z)([esm.q,esm.r,project_project,project32,project64,esm.s,esm.v,esm.w]),Object(esm.A)([project_project])}();var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(5),directional_light_DirectionalLight=function(_BaseDirectionalLight){function DirectionalLight(){return Object(classCallCheck.a)(this,DirectionalLight),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DirectionalLight).apply(this,arguments))}return Object(inherits.a)(DirectionalLight,_BaseDirectionalLight),Object(createClass.a)(DirectionalLight,[{key:"getProjectedLight",value:function getProjectedLight(){return this}}]),DirectionalLight}(esm.e),effect_Effect=function(){function Effect(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Effect);var _props$id=props.id,id=void 0===_props$id?"effect":_props$id;this.id=id,this.props={},Object.assign(this.props,props)}return Object(createClass.a)(Effect,[{key:"prepare",value:function prepare(){}},{key:"getParameters",value:function getParameters(){}}]),Effect}(),DefaultAmbientLightProps={color:[255,255,255],intensity:1},DefaultDirectionalLightProps=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],lighting_effect_LightingEffect=function(_Effect){function LightingEffect(props){var _this;for(var key in Object(classCallCheck.a)(this,LightingEffect),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LightingEffect).call(this,props))).ambientLight=null,_this.directionalLights=[],_this.pointLights=[],props){var lightSource=props[key];switch(lightSource.type){case"ambient":_this.ambientLight=lightSource;break;case"directional":_this.directionalLights.push(lightSource);break;case"point":_this.pointLights.push(lightSource)}}return _this.applyDefaultLights(),_this}return Object(inherits.a)(LightingEffect,_Effect),Object(createClass.a)(LightingEffect,[{key:"getParameters",value:function getParameters(layer){var ambientLight=this.ambientLight,pointLights=this.getProjectedPointLights(layer);return{lightSources:{ambientLight:ambientLight,directionalLights:this.getProjectedDirectionalLights(layer),pointLights:pointLights}}}},{key:"applyDefaultLights",value:function applyDefaultLights(){var ambientLight=this.ambientLight,pointLights=this.pointLights,directionalLights=this.directionalLights;ambientLight||0!==pointLights.length||0!==directionalLights.length||(this.ambientLight=new esm.a(DefaultAmbientLightProps),this.directionalLights.push(new directional_light_DirectionalLight(DefaultDirectionalLightProps[0])),this.directionalLights.push(new directional_light_DirectionalLight(DefaultDirectionalLightProps[1])))}},{key:"getProjectedPointLights",value:function getProjectedPointLights(layer){for(var projectedPointLights=[],i=0;i<this.pointLights.length;i++){var pointLight=this.pointLights[i];projectedPointLights.push(pointLight.getProjectedLight({layer:layer}))}return projectedPointLights}},{key:"getProjectedDirectionalLights",value:function getProjectedDirectionalLights(layer){for(var projectedDirectionalLights=[],i=0;i<this.directionalLights.length;i++){var directionalLight=this.directionalLights[i];projectedDirectionalLights.push(directionalLight.getProjectedLight({layer:layer}))}return projectedDirectionalLights}}]),LightingEffect}(effect_Effect),slicedToArray=__webpack_require__(11),vec3=__webpack_require__(40),web_mercator_utils=__webpack_require__(25);function lngLatZToWorldPosition(lngLatZ,viewport){var offsetMode=arguments.length>2&&void 0!==arguments[2]&&arguments[2],_lngLatZ=Object(slicedToArray.a)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],_lngLatZ$=_lngLatZ[2],z=void 0===_lngLatZ$?0:_lngLatZ$,_viewport$projectFlat=viewport.projectFlat(lngLatZ),_viewport$projectFlat2=Object(slicedToArray.a)(_viewport$projectFlat,2);return[_viewport$projectFlat2[0],_viewport$projectFlat2[1],z*(offsetMode?Object(web_mercator_utils.b)({longitude:longitude,latitude:latitude,scale:viewport.scale}):viewport.getDistanceScales()).pixelsPerMeter[2]]}function getWorldPosition(position,_ref){var viewport=_ref.viewport,modelMatrix=_ref.modelMatrix,coordinateSystem=_ref.coordinateSystem,coordinateOrigin=_ref.coordinateOrigin,offsetMode=_ref.offsetMode,_position=Object(slicedToArray.a)(position,3),x=_position[0],y=_position[1],z=_position[2];if(modelMatrix){var _vec4$transformMat=vec4.c([],[x,y,z,1],modelMatrix),_vec4$transformMat2=Object(slicedToArray.a)(_vec4$transformMat,3);x=_vec4$transformMat2[0],y=_vec4$transformMat2[1],z=_vec4$transformMat2[2]}switch(coordinateSystem){case COORDINATE_SYSTEM.LNGLAT:case COORDINATE_SYSTEM.LNGLAT_DEPRECATED:return lngLatZToWorldPosition([x,y,z],viewport,offsetMode);case COORDINATE_SYSTEM.LNGLAT_OFFSETS:return lngLatZToWorldPosition([x+coordinateOrigin[0],y+coordinateOrigin[1],z+(coordinateOrigin[2]||0)],viewport,offsetMode);case COORDINATE_SYSTEM.METER_OFFSETS:return lngLatZToWorldPosition(Object(web_mercator_utils.a)(coordinateOrigin,[x,y,z]),viewport,offsetMode);case COORDINATE_SYSTEM.IDENTITY:default:return viewport.projectPosition([x,y,z])}}function project_functions_projectPosition(position,params){var _normalizeParameters=function normalizeParameters(opts){var normalizedParams=Object.assign({},opts),viewport=opts.viewport,coordinateSystem=opts.coordinateSystem,coordinateOrigin=opts.coordinateOrigin,fromCoordinateSystem=opts.fromCoordinateSystem,fromCoordinateOrigin=opts.fromCoordinateOrigin;return void 0===fromCoordinateSystem&&(normalizedParams.fromCoordinateSystem=coordinateSystem),void 0===fromCoordinateOrigin&&(normalizedParams.fromCoordinateOrigin=coordinateOrigin),coordinateSystem===COORDINATE_SYSTEM.LNGLAT&&viewport.zoom>=LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD&&(normalizedParams.coordinateSystem=COORDINATE_SYSTEM.LNGLAT_OFFSETS,normalizedParams.coordinateOrigin=[Math.fround(viewport.longitude),Math.fround(viewport.latitude)]),normalizedParams}(params),viewport=_normalizeParameters.viewport,coordinateSystem=_normalizeParameters.coordinateSystem,coordinateOrigin=_normalizeParameters.coordinateOrigin,modelMatrix=_normalizeParameters.modelMatrix,fromCoordinateSystem=_normalizeParameters.fromCoordinateSystem,fromCoordinateOrigin=_normalizeParameters.fromCoordinateOrigin;switch(coordinateSystem){case COORDINATE_SYSTEM.LNGLAT_OFFSETS:case COORDINATE_SYSTEM.METER_OFFSETS:var worldPosition=getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:!0}),originWorld=lngLatZToWorldPosition(coordinateOrigin,viewport,!0);return vec3.h(worldPosition,worldPosition,originWorld),worldPosition;case COORDINATE_SYSTEM.LNGLAT:case COORDINATE_SYSTEM.LNGLAT_DEPRECATED:case COORDINATE_SYSTEM.IDENTITY:default:return getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:!1})}}var esm_get=__webpack_require__(17),EMPTY_ARRAY=[],placeholderArray=[];function createIterable(data){var iterable=EMPTY_ARRAY,objectInfo={index:-1,data:data,target:[]};return data?"function"==typeof data[Symbol.iterator]?iterable=data:data.length>0&&(placeholderArray.length=data.length,iterable=placeholderArray):iterable=EMPTY_ARRAY,{iterable:iterable,objectInfo:objectInfo}}var objectSpread=__webpack_require__(19),base_attribute_BaseAttribute=function(){function BaseAttribute(gl){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,BaseAttribute);var _opts$id=opts.id,id=void 0===_opts$id?Object(esm.D)("attribute"):_opts$id,type=opts.type,_opts$isIndexed=opts.isIndexed,isIndexed=void 0!==_opts$isIndexed&&_opts$isIndexed;this.gl=gl,this.id=id,this.isIndexed=isIndexed,this.target=isIndexed?34963:34962,this.type=type,isIndexed&&!type&&(this.type=gl&&Object(esm.t)(gl,esm.f.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(opts),this._validateAttributeDefinition()}return Object(createClass.a)(BaseAttribute,[{key:"delete",value:function _delete(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function update(opts){var value=opts.value,buffer=opts.buffer,_opts$constant=opts.constant,constant=void 0===_opts$constant?this.constant||!1:_opts$constant;if(this.constant=constant,buffer)this.externalBuffer=buffer,this.constant=!1,this.type=opts.type||buffer.accessor.type,void 0!==buffer.accessor.divisor&&(this.divisor=buffer.accessor.divisor),void 0!==opts.divisor&&(this.divisor=opts.divisor);else if(value){this.externalBuffer=null;var size=this.size||opts.size||0;if(constant&&value.length!==size){this.value=new Float32Array(size);for(var index=this.offset/4,i=0;i<this.size;++i)this.value[i]=value[index+i]}else this.value=value;if(!constant&&this.gl){var props=Object(objectSpread.a)({},opts,{id:this.id,target:this.target,accessor:{type:this.type}});Number.isFinite(props.divisor)&&(props.accessor.divisor=props.divisor),delete props.divisor,Number.isFinite(props.size)&&(props.accessor.size=props.size),delete props.size,this.buffer=this.buffer||new esm.c(this.gl,props),this.buffer.setData({data:value}),this.type=this.buffer.accessor.type}}this._setAccessor(opts)}},{key:"getBuffer",value:function getBuffer(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function getValue(){if(this.constant)return this.value;var buffer=this.externalBuffer||this.buffer;return buffer?[buffer,this]:null}},{key:"_setAccessor",value:function _setAccessor(opts){var _opts$size=opts.size,size=void 0===_opts$size?this.size:_opts$size,_opts$offset=opts.offset,offset=void 0===_opts$offset?this.offset||0:_opts$offset,_opts$stride=opts.stride,stride=void 0===_opts$stride?this.stride||0:_opts$stride,_opts$normalized=opts.normalized,normalized=void 0===_opts$normalized?this.normalized||!1:_opts$normalized,_opts$integer=opts.integer,integer=void 0===_opts$integer?this.integer||!1:_opts$integer,_opts$divisor=opts.divisor,divisor=void 0===_opts$divisor?this.divisor||0:_opts$divisor,instanced=opts.instanced,isInstanced=opts.isInstanced;this.size=size,this.offset=offset,this.stride=stride,this.normalized=normalized,this.integer=integer,this.divisor=divisor,void 0!==isInstanced&&(esm.u.deprecated("Attribute.isInstanced")(),this.divisor=isInstanced?1:0),void 0!==instanced&&(esm.u.deprecated("Attribute.instanced")(),this.divisor=instanced?1:0)}},{key:"_validateAttributeDefinition",value:function _validateAttributeDefinition(){}}]),BaseAttribute}(),DEFAULT_STATE={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,allocedInstances:-1},attribute_Attribute=function(_BaseAttribute){function Attribute(gl){var _this,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Attribute),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Attribute).call(this,gl,opts));var _opts$transition=opts.transition,transition=void 0!==_opts$transition&&_opts$transition,_opts$noAlloc=opts.noAlloc,noAlloc=void 0!==_opts$noAlloc&&_opts$noAlloc,_opts$update=opts.update,update=void 0===_opts$update?null:_opts$update,_opts$accessor=opts.accessor,accessor=void 0===_opts$accessor?null:_opts$accessor,_opts$bufferLayout=opts.bufferLayout,bufferLayout=void 0===_opts$bufferLayout?null:_opts$bufferLayout,_opts$defaultValue=opts.defaultValue,defaultValue=void 0===_opts$defaultValue?[0,0,0,0]:_opts$defaultValue;if(defaultValue=Array.isArray(defaultValue)?defaultValue:[defaultValue],_this.shaderAttributes={},_this.hasShaderAttributes=!1,opts.shaderAttributes){var shaderAttributes=opts.shaderAttributes;for(var shaderAttributeName in shaderAttributes){var shaderAttribute=shaderAttributes[shaderAttributeName];_this.shaderAttributes[shaderAttributeName]=new Attribute(_this.gl,Object.assign({},shaderAttribute,{id:shaderAttributeName,constant:shaderAttribute.constant||!1,isIndexed:shaderAttribute.isIndexed||shaderAttribute.elements,size:(shaderAttribute.elements?1:shaderAttribute.size)||_this.size,value:shaderAttribute.value||null,divisor:shaderAttribute.instanced||shaderAttribute.divisor||_this.divisor,buffer:_this.getBuffer(),noAlloc:!0})),_this.hasShaderAttributes=!0}}return Object.assign(_this.userData,DEFAULT_STATE,opts,{transition:transition,noAlloc:noAlloc,update:update,accessor:accessor,defaultValue:defaultValue,bufferLayout:bufferLayout}),Object.seal(_this.userData),_this._validateAttributeUpdaters(),_this}return Object(inherits.a)(Attribute,_BaseAttribute),Object(createClass.a)(Attribute,[{key:"needsUpdate",value:function needsUpdate(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function needsRedraw(){var _ref$clearChangedFlag=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,clearChangedFlags=void 0!==_ref$clearChangedFlag&&_ref$clearChangedFlag,needsRedraw=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!clearChangedFlags,needsRedraw}},{key:"getInstanceCount",value:function getInstanceCount(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var accessor=this.userData.accessor;return[this.id].concat(accessor||[])}},{key:"getAccessor",value:function getAccessor(){return this.userData.accessor}},{key:"getShaderAttributes",value:function getShaderAttributes(){var shaderAttributes={};return this.hasShaderAttributes?Object.assign(shaderAttributes,this.shaderAttributes):shaderAttributes[this.id]=this,shaderAttributes}},{key:"supportsTransition",value:function supportsTransition(){return this.userData.transition}},{key:"getTransitionSetting",value:function getTransitionSetting(opts){var _this$userData=this.userData,transition=_this$userData.transition,accessor=_this$userData.accessor;if(!transition)return null;var settings=Array.isArray(accessor)?opts[accessor.find(function(a){return opts[a]})]:opts[accessor];return Number.isFinite(settings)&&(settings={duration:settings}),settings&&settings.duration>0?Object.assign({},transition,settings):null}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsUpdate=this.userData.needsUpdate||reason}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var reason=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||reason}},{key:"allocate",value:function allocate(numInstances){var state=this.userData;if(state.isExternalBuffer||state.noAlloc)return!1;var instanceCount=this.getInstanceCount();if((0===instanceCount||instanceCount<numInstances)&&(state.update||state.accessor)){assert(Number.isFinite(numInstances));var allocCount=Math.max(numInstances,1),ArrayType=glArrayFromType(this.type||5126);return this.constant=!1,this.value=new ArrayType(this.size*allocCount),state.needsUpdate=!0,state.allocedInstances=allocCount,!0}return!1}},{key:"updateBuffer",value:function updateBuffer(_ref2){var numInstances=_ref2.numInstances,data=_ref2.data,props=_ref2.props,context=_ref2.context;if(!this.needsUpdate())return!1;var state=this.userData,update=state.update,accessor=state.accessor,updated=!0;return update?(update.call(context,this,{data:data,props:props,numInstances:numInstances}),this.update({value:this.value,constant:this.constant}),this._checkAttributeArray()):accessor?(this._updateBufferViaStandardAccessor(data,props),this._checkAttributeArray()):updated=!1,this._updateShaderAttributes(),state.needsUpdate=!1,state.needsRedraw=!0,updated}},{key:"update",value:function update(props){Object(esm_get.a)(Object(getPrototypeOf.a)(Attribute.prototype),"update",this).call(this,props),this._updateShaderAttributes()}},{key:"setGenericValue",value:function setGenericValue(value){var state=this.userData;if(void 0===value||"function"==typeof value)return state.isExternalBuffer=!1,!1;value=this._normalizeValue(value);var hasChanged=!this.constant||!this._areValuesEqual(value,this.value);return hasChanged&&this.update({constant:!0,value:value}),state.needsRedraw=state.needsUpdate||hasChanged,state.needsUpdate=!1,state.isExternalBuffer=!0,this._updateShaderAttributes(),!0}},{key:"setExternalBuffer",value:function setExternalBuffer(buffer,numInstances){var state=this.userData;if(buffer){if(state.isExternalBuffer=!0,state.needsUpdate=!1,buffer instanceof esm.c)this.externalBuffer!==buffer&&(this.update({constant:!1,buffer:buffer}),state.needsRedraw=!0);else if(this.value!==buffer){if(!ArrayBuffer.isView(buffer))throw new Error("Attribute prop must be typed array");if(state.auto&&buffer.length<=numInstances*this.size)throw new Error("Attribute prop array must match length and size");var ArrayType=glArrayFromType(this.type||5126);buffer instanceof ArrayType?this.update({constant:!1,value:buffer}):(utils_log.warn("Attribute prop ".concat(this.id," is casted to ").concat(ArrayType.name))(),this.update({constant:!1,value:new ArrayType(buffer)})),this.value=buffer,state.needsRedraw=!0}return this._updateShaderAttributes(),!0}return state.isExternalBuffer=!1,!1}},{key:"_normalizeValue",value:function _normalizeValue(value){var out=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],start=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,defaultValue=this.userData.defaultValue;if(!Array.isArray(value)&&!ArrayBuffer.isView(value))return out[start]=Number.isFinite(value)?value:defaultValue[0],out;switch(this.size){case 4:out[start+3]=Number.isFinite(value[3])?value[3]:defaultValue[3];case 3:out[start+2]=Number.isFinite(value[2])?value[2]:defaultValue[2];case 2:out[start+1]=Number.isFinite(value[1])?value[1]:defaultValue[1];case 1:out[start+0]=Number.isFinite(value[0])?value[0]:defaultValue[0]}return out}},{key:"_areValuesEqual",value:function _areValuesEqual(value1,value2){for(var size=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,i=0;i<size;i++)if(value1[i]!==value2[i])return!1;return!0}},{key:"_updateBufferViaStandardAccessor",value:function _updateBufferViaStandardAccessor(data,props){var accessor=this.userData.accessor,value=this.value,size=this.size,accessorFunc=props[accessor];assert("function"==typeof accessorFunc,'accessor "'.concat(accessor,'" is not a function'));var i=0,_createIterable=createIterable(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var objectValue=accessorFunc(object,objectInfo);this._normalizeValue(objectValue,value,i),i+=size}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.update({value:value})}},{key:"_validateAttributeUpdaters",value:function _validateAttributeUpdaters(){var state=this.userData;if(!(state.noAlloc||"function"==typeof state.update||"string"==typeof state.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function _checkAttributeArray(){var value=this.value;if(value&&value.length>=4&&!(Number.isFinite(value[0])&&Number.isFinite(value[1])&&Number.isFinite(value[2])&&Number.isFinite(value[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"_updateShaderAttributes",value:function _updateShaderAttributes(){var shaderAttributes=this.shaderAttributes;for(var shaderAttributeName in shaderAttributes){shaderAttributes[shaderAttributeName].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:"bufferLayout",get:function get(){return this.userData.bufferLayout},set:function set(layout){this.userData.bufferLayout=layout}}]),Attribute}(base_attribute_BaseAttribute);function glArrayFromType(glType){var _ref3$clamped=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,clamped=void 0===_ref3$clamped||_ref3$clamped;switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function padArrayChunk(_ref){var source=_ref.source,target=_ref.target,_ref$start=_ref.start,start=void 0===_ref$start?0:_ref$start,end=_ref.end,getData=_ref.getData;end=end||target.length;var sourceLength=source.length,targetLength=end-start;if(sourceLength>targetLength)target.set(source.subarray(0,targetLength),start);else if(target.set(source,start),getData)for(var i=sourceLength;i<targetLength;)for(var datum=getData(i,source),j=0;j<datum.length;j++)target[start+i]=datum[j],i++}var ATTRIBUTE_MAPPING={1:"float",2:"vec2",3:"vec3",4:"vec4"};function getBuffers(transitions){var sourceBuffers={},feedbackBuffers={};for(var attributeName in transitions){var _transitions$attribut=transitions[attributeName],fromState=_transitions$attribut.fromState,toState=_transitions$attribut.toState,buffer=_transitions$attribut.buffer;sourceBuffers["".concat(attributeName,"From")]=fromState instanceof esm.c?[fromState,{divisor:0}]:fromState,sourceBuffers["".concat(attributeName,"To")]=toState,feedbackBuffers["".concat(attributeName)]=buffer}return{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}}function padBuffer(_ref){var fromState=_ref.fromState,toState=_ref.toState,fromLength=_ref.fromLength,toLength=_ref.toLength,fromBufferLayout=_ref.fromBufferLayout,toBufferLayout=_ref.toBufferLayout,_ref$getData=_ref.getData,getData=void 0===_ref$getData?function(x){return x}:_ref$getData;if((fromBufferLayout&&toBufferLayout||!(fromLength>=toLength))&&fromState instanceof esm.c){var data=new Float32Array(toLength),fromData=fromState.getData({}),size=toState.size,constant=toState.constant,toData=constant?toState.getValue():toState.getBuffer().getData({}),getMissingData=constant?function(i,chunk){return getData(toData,chunk)}:function(i,chunk){return getData(toData.subarray(i,i+size),chunk)};!function padArray(_ref2){var source=_ref2.source,target=_ref2.target,size=_ref2.size,getData=_ref2.getData,sourceLayout=_ref2.sourceLayout,targetLayout=_ref2.targetLayout;if(!Array.isArray(targetLayout))return padArrayChunk({source:source,target:target,getData:getData}),target;for(var sourceIndex=0,targetIndex=0,getChunkData=getData&&function(i,chunk){return getData(i+targetIndex,chunk)},n=Math.min(sourceLayout.length,targetLayout.length),i=0;i<n;i++){var sourceChunkLength=sourceLayout[i]*size,targetChunkLength=targetLayout[i]*size;padArrayChunk({source:source.subarray(sourceIndex,sourceIndex+sourceChunkLength),target:target,start:targetIndex,end:targetIndex+targetChunkLength,getData:getChunkData}),sourceIndex+=sourceChunkLength,targetIndex+=targetChunkLength}return targetIndex<target.length&&padArrayChunk({source:[],target:target,start:targetIndex,getData:getChunkData}),target}({source:fromData,target:data,sourceLayout:fromBufferLayout,targetLayout:toBufferLayout,size:toState.size,getData:getMissingData}),fromState.setData({data:data})}}var TRANSITION_STATE={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function noop(){}var transition_Transition=function(){function Transition(props){Object(classCallCheck.a)(this,Transition),this._startTime=null,this._state=TRANSITION_STATE.NONE,this.duration=1,this.easing=function(t){return t},this.onStart=noop,this.onUpdate=noop,this.onInterrupt=noop,this.onEnd=noop,Object.assign(this,props)}return Object(createClass.a)(Transition,[{key:"start",value:function start(props){this.inProgress&&this.onInterrupt(this),Object.assign(this,props),this._setState(TRANSITION_STATE.PENDING)}},{key:"cancel",value:function cancel(){this.inProgress&&(this.onInterrupt(this),this._setState(TRANSITION_STATE.NONE))}},{key:"update",value:function update(currentTime){if(this.state===TRANSITION_STATE.PENDING&&(this._startTime=currentTime,this._setState(TRANSITION_STATE.IN_PROGRESS)),this.state===TRANSITION_STATE.IN_PROGRESS){var shouldEnd=!1,time=(currentTime-this._startTime)/this.duration;return time>=1&&(time=1,shouldEnd=!0),this.time=this.easing(time),this.onUpdate(this),shouldEnd&&this._setState(TRANSITION_STATE.ENDED),!0}return!1}},{key:"_setState",value:function _setState(newState){if(this._state!==newState)switch(this._state=newState,newState){case TRANSITION_STATE.PENDING:this.onStart(this);break;case TRANSITION_STATE.ENDED:this.onEnd(this)}}},{key:"state",get:function get(){return this._state}},{key:"inProgress",get:function get(){return this._state===TRANSITION_STATE.PENDING||this._state===TRANSITION_STATE.IN_PROGRESS}}]),Transition}(),attribute_transition_manager_noop=function noop(){},DEFAULT_TRANSITION_SETTINGS={duration:0,easing:function easing(t){return t},onStart:attribute_transition_manager_noop,onEnd:attribute_transition_manager_noop,onInterrupt:attribute_transition_manager_noop},attribute_transition_manager_AttributeTransitionManager=function(){function AttributeTransitionManager(gl,_ref){var id=_ref.id;Object(classCallCheck.a)(this,AttributeTransitionManager),this.id=id,this.gl=gl,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,esm.m.isSupported(gl)?this.isSupported=!0:gl&&utils_log.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(createClass.a)(AttributeTransitionManager,[{key:"finalize",value:function finalize(){for(var attributeName in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(attributeName)}},{key:"update",value:function update(_ref2){var attributes=_ref2.attributes,_ref2$transitions=_ref2.transitions,transitions=void 0===_ref2$transitions?{}:_ref2$transitions,numInstances=_ref2.numInstances;if(this.opts=transitions,this.numInstances=numInstances||1,this.isSupported){var attributeTransitions=this.attributeTransitions,changedTransitions={};for(var attributeName in attributes){this._updateAttribute(attributeName,attributes[attributeName])&&(changedTransitions[attributeName]=attributeTransitions[attributeName])}for(var _attributeName in attributeTransitions){var attribute=attributes[_attributeName];attribute&&attribute.supportsTransition()||this._removeTransition(_attributeName)}if(this.transform){if(this.transform){var _getBuffers=getBuffers(changedTransitions),sourceBuffers=_getBuffers.sourceBuffers,feedbackBuffers=_getBuffers.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}}else this._createModel()}}},{key:"hasAttribute",value:function hasAttribute(attributeName){return attributeName in this.attributeTransitions}},{key:"getAttributes",value:function getAttributes(){var animatedAttributes={};for(var attributeName in this.attributeTransitions){var transition=this.attributeTransitions[attributeName];transition.buffer&&(animatedAttributes[attributeName]=transition.attributeInTransition)}return animatedAttributes}},{key:"setCurrentTime",value:function setCurrentTime(currentTime){if(!this.transform||0===this.numInstances)return!1;var uniforms={},needsRedraw=this.needsRedraw;for(var attributeName in this.needsRedraw=!1,this.attributeTransitions){var transition=this.attributeTransitions[attributeName];transition.update(currentTime)&&(uniforms["".concat(attributeName,"Time")]=transition.time,needsRedraw=!0)}return needsRedraw&&this.transform.run({uniforms:uniforms}),needsRedraw}},{key:"_createTransition",value:function _createTransition(attributeName,attribute){var transition=this.attributeTransitions[attributeName];return transition?null:(transition=new transition_Transition({name:attributeName,attribute:attribute,attributeInTransition:new attribute_Attribute(this.gl,attribute),bufferLayout:attribute.bufferLayout}),this.attributeTransitions[attributeName]=transition,this._invalidateModel(),transition)}},{key:"_removeTransition",value:function _removeTransition(attributeName){var transition=this.attributeTransitions[attributeName];transition&&(transition.buffer&&transition.buffer.delete(),transition._swapBuffer&&transition._swapBuffer.delete(),delete this.attributeTransitions[attributeName],this._invalidateModel())}},{key:"_updateAttribute",value:function _updateAttribute(attributeName,attribute){var settings=attribute.getTransitionSetting(this.opts);if(settings){var hasChanged,transition=this.attributeTransitions[attributeName];if(transition?hasChanged=attribute.needsRedraw():(transition=this._createTransition(attributeName,attribute),hasChanged=!0),hasChanged)return this._triggerTransition(transition,settings),!0}return!1}},{key:"_invalidateModel",value:function _invalidateModel(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function _createModel(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new esm.m(this.gl,Object.assign({elementCount:this.numInstances},getBuffers(this.attributeTransitions),function getShaders(transitions){var varyings=[],attributeDeclarations=[],uniformsDeclarations=[],varyingDeclarations=[],calculations=[];for(var attributeName in transitions){var transition=transitions[attributeName],attributeType=ATTRIBUTE_MAPPING[transition.attribute.size];attributeType&&(transition.bufferIndex=varyings.length,varyings.push(attributeName),attributeDeclarations.push("attribute ".concat(attributeType," ").concat(attributeName,"From;")),attributeDeclarations.push("attribute ".concat(attributeType," ").concat(attributeName,"To;")),uniformsDeclarations.push("uniform float ".concat(attributeName,"Time;")),varyingDeclarations.push("varying ".concat(attributeType," ").concat(attributeName,";")),calculations.push("".concat(attributeName," = mix(").concat(attributeName,"From, ").concat(attributeName,"To,\n        ").concat(attributeName,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(attributeDeclarations.join("\n"),"\n").concat(uniformsDeclarations.join("\n"),"\n").concat(varyingDeclarations.join("\n"),"\n\nvoid main(void) {\n  ").concat(calculations.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(varyingDeclarations.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:varyings}}(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function _getNextTransitionStates(transition,settings){var toState,attribute=transition.attribute,size=attribute.size;toState=attribute.constant?new base_attribute_BaseAttribute(this.gl,{constant:!0,value:attribute.value,size:size}):new base_attribute_BaseAttribute(this.gl,{constant:!1,buffer:attribute.getBuffer(),divisor:0,size:size,value:attribute.externalBuffer?null:attribute.value});var fromState=transition.buffer||toState,toLength=this.numInstances*size,fromLength=fromState instanceof esm.c&&fromState.getElementCount()||toLength,buffer=transition._swapBuffer;return transition._swapBuffer=transition.buffer,buffer?buffer.getElementCount()<toLength&&buffer.setData({data:new Float32Array(toLength)}):buffer=new esm.c(this.gl,{data:new Float32Array(toLength),usage:35050}),transition.attributeInTransition.update({buffer:buffer}),padBuffer({fromState:fromState,toState:toState,fromLength:fromLength,toLength:toLength,fromBufferLayout:transition.bufferLayout,toBufferLayout:attribute.bufferLayout,getData:settings.enter}),transition.bufferLayout=attribute.bufferLayout,{fromState:fromState,toState:toState,buffer:buffer}}},{key:"_triggerTransition",value:function _triggerTransition(transition,settings){assert(settings&&settings.duration>0),this.needsRedraw=!0;var transitionSettings=Object.assign({},DEFAULT_TRANSITION_SETTINGS,settings);transition.start(Object.assign({},this._getNextTransitionStates(transition,settings),transitionSettings))}}]),AttributeTransitionManager}();function attribute_manager_noop(){}var logFunctions={savedMessages:null,timeStart:null,onLog:function onLog(_ref){var level=_ref.level,message=_ref.message;utils_log.log(level,message)()},onUpdateStart:function onUpdateStart(_ref2){_ref2.level,_ref2.numInstances;logFunctions.savedMessages=[],logFunctions.timeStart=new Date},onUpdate:function onUpdate(_ref3){_ref3.level;var message=_ref3.message;logFunctions.savedMessages&&logFunctions.savedMessages.push(message)},onUpdateEnd:function onUpdateEnd(_ref4){var level=_ref4.level,id=_ref4.id,numInstances=_ref4.numInstances,timeMs=Math.round(new Date-logFunctions.timeStart),time="".concat(timeMs,"ms");utils_log.group(level,"Updated attributes for ".concat(numInstances," instances in ").concat(id," in ").concat(time),{collapsed:!0})();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=logFunctions.savedMessages[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var message=_step.value;utils_log.log(level,message)()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}utils_log.groupEnd(level,"Updated attributes for ".concat(numInstances," instances in ").concat(id," in ").concat(time))(),logFunctions.savedMessages=null}},attribute_manager_AttributeManager=function(){function AttributeManager(gl){var _ref6=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref6$id=_ref6.id,id=void 0===_ref6$id?"attribute-manager":_ref6$id,stats=_ref6.stats;Object(classCallCheck.a)(this,AttributeManager),this.id=id,this.gl=gl,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=stats,this.attributeTransitionManager=new attribute_transition_manager_AttributeTransitionManager(gl,{id:"".concat(id,"-transitions")}),Object.seal(this)}return Object(createClass.a)(AttributeManager,null,[{key:"setDefaultLogFunctions",value:function setDefaultLogFunctions(){var _ref5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},onLog=_ref5.onLog,onUpdateStart=_ref5.onUpdateStart,onUpdate=_ref5.onUpdate,onUpdateEnd=_ref5.onUpdateEnd;void 0!==onLog&&(logFunctions.onLog=onLog||attribute_manager_noop),void 0!==onUpdateStart&&(logFunctions.onUpdateStart=onUpdateStart||attribute_manager_noop),void 0!==onUpdate&&(logFunctions.onUpdate=onUpdate||attribute_manager_noop),void 0!==onUpdateEnd&&(logFunctions.onUpdateEnd=onUpdateEnd||attribute_manager_noop)}}]),Object(createClass.a)(AttributeManager,[{key:"finalize",value:function finalize(){for(var attributeName in this.attributes)this.attributes[attributeName].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!opts.clearRedrawFlags,redraw&&this.id}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function add(attributes,updaters){this._add(attributes,updaters)}},{key:"addInstanced",value:function addInstanced(attributes,updaters){this._add(attributes,updaters,{instanced:1})}},{key:"remove",value:function remove(attributeNameArray){for(var i=0;i<attributeNameArray.length;i++){var name=attributeNameArray[i];void 0!==this.attributes[name]&&(this.attributes[name].delete(),delete this.attributes[name])}}},{key:"invalidate",value:function invalidate(triggerName){var invalidatedAttributes=this._invalidateTrigger(triggerName);logFunctions.onLog({level:3,message:"invalidated attributes ".concat(invalidatedAttributes," (").concat(triggerName,") for ").concat(this.id)})}},{key:"invalidateAll",value:function invalidateAll(){for(var attributeName in this.attributes)this.attributes[attributeName].setNeedsUpdate();logFunctions.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function update(){var _ref7=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=_ref7.data,numInstances=_ref7.numInstances,transitions=_ref7.transitions,_ref7$props=_ref7.props,props=void 0===_ref7$props?{}:_ref7$props,_ref7$buffers=_ref7.buffers,buffers=void 0===_ref7$buffers?{}:_ref7$buffers,_ref7$context=_ref7.context,context=void 0===_ref7$context?{}:_ref7$context,updated=!1;for(var attributeName in logFunctions.onUpdateStart({level:2,id:this.id,numInstances:numInstances}),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var attribute=this.attributes[attributeName];attribute.setExternalBuffer(buffers[attributeName],this.numInstances)||attribute.setGenericValue(props[attribute.getAccessor()])||attribute.needsUpdate()&&(updated=!0,this._updateAttribute({attribute:attribute,numInstances:numInstances,data:data,props:props,context:context})),this.needsRedraw|=attribute.needsRedraw()}updated&&logFunctions.onUpdateEnd({level:2,id:this.id,numInstances:numInstances}),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:numInstances,transitions:transitions})}},{key:"updateTransition",value:function updateTransition(timestamp){var transitionUpdated=this.attributeTransitionManager.setCurrentTime(timestamp);return this.needsRedraw=this.needsRedraw||transitionUpdated,transitionUpdated}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getChangedAttributes",value:function getChangedAttributes(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},attributes=this.attributes,attributeTransitionManager=this.attributeTransitionManager,changedAttributes=Object.assign({},attributeTransitionManager.getAttributes());for(var attributeName in attributes){var attribute=attributes[attributeName];attribute.needsRedraw(opts)&&!attributeTransitionManager.hasAttribute(attributeName)&&(changedAttributes[attributeName]=attribute)}return changedAttributes}},{key:"getAccessors",value:function getAccessors(){return this.updateTriggers}},{key:"_add",value:function _add(attributes,updaters){var extraProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};updaters&&utils_log.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var newAttributes={};for(var attributeName in attributes){var attribute=attributes[attributeName],newAttribute=this._createAttribute(attributeName,attribute,extraProps);newAttributes[attributeName]=newAttribute}Object.assign(this.attributes,newAttributes),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function _createAttribute(name,attribute,extraProps){var props={id:name,constant:attribute.constant||!1,isIndexed:attribute.isIndexed||attribute.elements,size:attribute.elements?1:attribute.size,value:attribute.value||null,divisor:attribute.instanced||extraProps.instanced?1:attribute.divisor};return new attribute_Attribute(this.gl,Object.assign({},attribute,props))}},{key:"_mapUpdateTriggersToAttributes",value:function _mapUpdateTriggersToAttributes(){var _this=this,triggers={},_loop=function _loop(attributeName){_this.attributes[attributeName].getUpdateTriggers().forEach(function(triggerName){triggers[triggerName]||(triggers[triggerName]=[]),triggers[triggerName].push(attributeName)})};for(var attributeName in this.attributes)_loop(attributeName);this.updateTriggers=triggers}},{key:"_invalidateTrigger",value:function _invalidateTrigger(triggerName){var attributes=this.attributes,invalidatedAttributes=this.updateTriggers[triggerName];if(invalidatedAttributes)invalidatedAttributes.forEach(function(name){var attribute=attributes[name];attribute&&attribute.setNeedsUpdate()});else{var message="invalidating non-existent trigger ".concat(triggerName," for ").concat(this.id,"\n");message+="Valid triggers: ".concat(Object.keys(attributes).join(", ")),utils_log.warn(message,invalidatedAttributes)()}return invalidatedAttributes}},{key:"_updateAttribute",value:function _updateAttribute(_ref8){var attribute=_ref8.attribute,numInstances=_ref8.numInstances,data=_ref8.data,props=_ref8.props,context=_ref8.context;attribute.allocate(numInstances)&&logFunctions.onUpdate({level:3,message:"".concat(attribute.id," allocated ").concat(numInstances),id:this.id});var timeStart=Date.now();if(attribute.updateBuffer({numInstances:numInstances,data:data,props:props,context:context})){this.needsRedraw=!0;var timeMs=Math.round(Date.now()-timeStart);logFunctions.onUpdate({level:3,message:"".concat(attribute.id," updated ").concat(numInstances," in ").concat(timeMs,"ms")})}}}]),AttributeManager}(),toConsumableArray=__webpack_require__(15),dist=__webpack_require__(22),dist_default=__webpack_require__.n(dist),overrides=new Map,seer_integration_applyPropOverrides=function applyPropOverrides(props){if(dist_default.a.isReady()&&props.id){var overs=overrides.get(props.id);overs&&overs.forEach(function(value,valuePath){!function recursiveSet(obj,path,value){obj&&(path.length>1?recursiveSet(obj[path[0]],path.slice(1),value):obj[path[0]]=value)}(props,valuePath,value),"data"===valuePath[0]&&(props.data=Object(toConsumableArray.a)(props.data))})}},seer_integration_layerEditListener=function layerEditListener(cb){dist_default.a.isReady()&&dist_default.a.listenFor("deck.gl",cb)},seer_integration_seerInitListener=function seerInitListener(cb){dist_default.a.isReady()&&dist_default.a.listenFor("init",cb)},seer_integration_initLayerInSeer=function initLayerInSeer(layer){if(dist_default.a.isReady()&&layer){var badges=[layer.constructor.layerName];dist_default.a.listItem("deck.gl",layer.id,{badges:badges,links:layer.state&&layer.state.model?["luma.gl:".concat(layer.state.model.id)]:void 0,parent:layer.parent?layer.parent.id:void 0})}},seer_integration_updateLayerInSeer=function updateLayerInSeer(layer){if(dist_default.a.isReady()&&!dist_default.a.throttle("deck.gl:".concat(layer.id),1e3)){var data=function logPayload(layer){var data=[{path:"objects.props",data:layer.props}],badges=[layer.constructor.layerName];if(layer.state){if(layer.getAttributeManager()){var attrs=layer.getAttributeManager().getAttributes();data.push({path:"objects.attributes",data:attrs})}if(layer.state.model){layer.state.model.setProps({timerQueryEnabled:!0});var lastFrameTime=layer.state.model.stats.lastFrameTime;lastFrameTime&&badges.push("".concat((1e3*lastFrameTime).toFixed(0),"s"))}}return data.push({path:"badges",data:badges}),data}(layer);dist_default.a.multiUpdate("deck.gl",layer.id,data)}};var esm_typeof=__webpack_require__(14);function props_diffProps(props,oldProps){var propsChangedReason=compareProps({newProps:props,oldProps:oldProps,propTypes:getPropTypes(props),ignoreProps:{data:null,updateTriggers:null}}),dataChangedReason=function diffDataProps(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";var dataComparator=props.dataComparator;if(dataComparator){if(!dataComparator(props.data,oldProps.data))return"Data comparator detected a change"}else if(props.data!==oldProps.data)return"A new data container was supplied";return null}(props,oldProps),updateTriggersChangedReason=!1;return dataChangedReason||(updateTriggersChangedReason=function diffUpdateTriggers(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";if("all"in props.updateTriggers){var diffReason=diffUpdateTrigger(props,oldProps,"all");if(diffReason)return{all:!0}}var triggerChanged={},reason=!1;for(var triggerName in props.updateTriggers)if("all"!==triggerName){var _diffReason=diffUpdateTrigger(props,oldProps,triggerName);_diffReason&&(triggerChanged[triggerName]=!0,reason=triggerChanged)}return reason}(props,oldProps)),{dataChanged:dataChangedReason,propsChanged:propsChangedReason,updateTriggersChanged:updateTriggersChangedReason}}function compareProps(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},newProps=_ref.newProps,oldProps=_ref.oldProps,_ref$ignoreProps=_ref.ignoreProps,ignoreProps=void 0===_ref$ignoreProps?{}:_ref$ignoreProps,_ref$propTypes=_ref.propTypes,propTypes=void 0===_ref$propTypes?{}:_ref$propTypes,_ref$triggerName=_ref.triggerName,triggerName=void 0===_ref$triggerName?"props":_ref$triggerName;if(assert(void 0!==oldProps&&void 0!==newProps,"compareProps args"),oldProps===newProps)return null;if("object"!==Object(esm_typeof.a)(newProps)||null===newProps)return"".concat(triggerName," changed shallowly");if("object"!==Object(esm_typeof.a)(oldProps)||null===oldProps)return"".concat(triggerName," changed shallowly");for(var key in oldProps)if(!(key in ignoreProps)){if(!(key in newProps))return"".concat(triggerName,".").concat(key," dropped");var newProp=newProps[key],oldProp=oldProps[key],propType=propTypes[key],equal=propType&&propType.equal;if(equal&&!equal(newProp,oldProp,propType))return"".concat(triggerName,".").concat(key," changed deeply");if(!equal&&(equal=newProp&&oldProp&&newProp.equals)&&!equal.call(newProp,oldProp))return"".concat(triggerName,".").concat(key," changed deeply");if(!equal&&oldProp!==newProp)return"".concat(triggerName,".").concat(key," changed shallowly")}for(var _key in newProps)if(!(_key in ignoreProps||_key in oldProps))return"".concat(triggerName,".").concat(_key," added: undefined -> ").concat(newProps[_key]);return null}function diffUpdateTrigger(props,oldProps,triggerName){var newTriggers=props.updateTriggers[triggerName];newTriggers=null==newTriggers?{}:newTriggers;var oldTriggers=oldProps.updateTriggers[triggerName];return compareProps({oldProps:oldTriggers=null==oldTriggers?{}:oldTriggers,newProps:newTriggers,triggerName:triggerName})}function getPropTypes(props){var layer=props._component,LayerType=layer&&layer.constructor;return LayerType?LayerType._propTypes:{}}var ERR_NOT_OBJECT="count(): argument not an object",ERR_NOT_CONTAINER="count(): argument not a container";function count(container){if(!function isObject(value){return null!==value&&"object"===Object(esm_typeof.a)(value)}(container))throw new Error(ERR_NOT_OBJECT);if("function"==typeof container.count)return container.count();if(Number.isFinite(container.size))return container.size;if(Number.isFinite(container.length))return container.length;if(function isPlainObject(value){return null!==value&&"object"===Object(esm_typeof.a)(value)&&value.constructor===Object}(container))return Object.keys(container).length;throw new Error(ERR_NOT_CONTAINER)}var LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},TYPE_DEFINITIONS={boolean:{validate:function validate(value,propType){return!0},equal:function equal(value1,value2,propType){return Boolean(value1)===Boolean(value2)}},number:{validate:function validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},color:{validate:function validate(value,propType){return isArray(value)&&(3===value.length||4===value.length)},equal:function equal(value1,value2,propType){return arrayEqual(value1,value2)}},accessor:{validate:function validate(value,propType){var valueType=getTypeOf(value);return"function"===valueType||valueType===getTypeOf(propType.value)},equal:function equal(value1,value2,propType){return"function"==typeof value2||arrayEqual(value1,value2)}},array:{validate:function validate(value,propType){return propType.optional&&!value||isArray(value)},equal:function equal(value1,value2,propType){return propType.compare?arrayEqual(value1,value2):value1===value2}},function:{validate:function validate(value,propType){return propType.optional&&!value||"function"==typeof value},equal:function equal(value1,value2,propType){return!propType.compare||value1===value2}}};function arrayEqual(array1,array2){if(array1===array2)return!0;if(!isArray(array1)||!isArray(array2))return!1;var len=array1.length;if(len!==array2.length)return!1;for(var i=0;i<len;i++)if(array1[i]!==array2[i])return!1;return!0}function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return normalizePropDefinition(name,propDef);case"array":return normalizePropDefinition(name,{type:"array",value:propDef,compare:!1});case"boolean":return normalizePropDefinition(name,{type:"boolean",value:propDef});case"number":return normalizePropDefinition(name,{type:"number",value:propDef});case"function":return normalizePropDefinition(name,{type:"function",value:propDef,compare:!0});default:return{name:name,type:"unknown",value:propDef}}}function normalizePropDefinition(name,propDef){return"type"in propDef?Object.assign({name:name},TYPE_DEFINITIONS[propDef.type],propDef):"value"in propDef?Object.assign({name:name,type:getTypeOf(propDef.value)},propDef):{name:name,type:"object",value:propDef}}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function getTypeOf(value){return isArray(value)?"array":null===value?"null":Object(esm_typeof.a)(value)}function checkDeprecatedProps(layerName,propsInstance,deprecatedProps){if(propsInstance)for(var name in deprecatedProps)if(create_props_hasOwnProperty(propsInstance,name)){var nameStr="".concat(layerName||"Layer",": ").concat(name),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=deprecatedProps[name][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var newPropName=_step.value;create_props_hasOwnProperty(propsInstance,newPropName)||(propsInstance[newPropName]=propsInstance[name])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}utils_log.deprecated(nameStr,deprecatedProps[name].join("/"))()}}function getPropsPrototypeAndTypes(componentClass){var props=getOwnProperty(componentClass,"_mergedDefaultProps");return props?{defaultProps:props,propTypes:getOwnProperty(componentClass,"_propTypes"),deprecatedProps:getOwnProperty(componentClass,"_deprecatedProps")}:function createPropsPrototypeAndTypes(componentClass){var parent=componentClass.prototype;if(!parent)return{defaultProps:{}};var parentClass=Object.getPrototypeOf(componentClass),parentPropDefs=parent&&getPropsPrototypeAndTypes(parentClass)||null,componentPropDefs=function parsePropTypes(propDefs){for(var propTypes={},defaultProps={},deprecatedProps={},_arr=Object.entries(propDefs),_i=0;_i<_arr.length;_i++){var _arr$_i=Object(slicedToArray.a)(_arr[_i],2),propName=_arr$_i[0],propDef=_arr$_i[1];if(propDef&&propDef.deprecatedFor)deprecatedProps[propName]=Array.isArray(propDef.deprecatedFor)?propDef.deprecatedFor:[propDef.deprecatedFor];else{var propType=parsePropType(propName,propDef);propTypes[propName]=propType,defaultProps[propName]=propType.value}}return{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(getOwnProperty(componentClass,"defaultProps")||{}),propTypes=Object.assign({},parentPropDefs&&parentPropDefs.propTypes,componentPropDefs.propTypes),defaultProps=function createPropsPrototype(props,parentProps,propTypes,componentClass){var defaultProps=Object.create(null);Object.assign(defaultProps,parentProps,props);var id=function getComponentName(componentClass){var componentName=getOwnProperty(componentClass,"layerName")||getOwnProperty(componentClass,"componentName");componentName||utils_log.once(0,"".concat(componentClass.name,".componentName not specified"))();return componentName||componentClass.name}(componentClass);return delete props.id,Object.defineProperties(defaultProps,{id:{configurable:!1,writable:!0,value:id}}),function addAsyncPropsToPropPrototype(defaultProps,propTypes){var defaultValues={},descriptors={_asyncPropDefaultValues:{enumerable:!1,value:defaultValues},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var propName in propTypes){var propType=propTypes[propName],name=propType.name,value=propType.value;propType.async&&(defaultValues[name]=value,descriptors[name]=getDescriptorForAsyncProp(name))}Object.defineProperties(defaultProps,descriptors)}(defaultProps,propTypes),defaultProps}(componentPropDefs.defaultProps,parentPropDefs&&parentPropDefs.defaultProps,propTypes,componentClass),deprecatedProps=Object.assign({},parentPropDefs&&parentPropDefs.deprecatedProps,componentPropDefs.deprecatedProps);return componentClass._mergedDefaultProps=defaultProps,componentClass._propTypes=propTypes,componentClass._deprecatedProps=deprecatedProps,{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(componentClass)}function getDescriptorForAsyncProp(name){return{configurable:!1,enumerable:!0,set:function set(newValue){"string"==typeof newValue||newValue instanceof Promise?this._asyncPropOriginalValues[name]=newValue:this._asyncPropResolvedValues[name]=newValue},get:function get(){if(this._asyncPropResolvedValues){if(name in this._asyncPropResolvedValues){var value=this._asyncPropResolvedValues[name];return"data"===name?value||this._asyncPropDefaultValues[name]:value}if(name in this._asyncPropOriginalValues){var state=this._component&&this._component.internalState;if(state&&state.hasAsyncProp(name))return state.getAsyncProp(name)}}return this._asyncPropDefaultValues[name]}}}function create_props_hasOwnProperty(object,prop){return Object.prototype.hasOwnProperty.call(object,prop)}function getOwnProperty(object,prop){return create_props_hasOwnProperty(object,prop)&&object[prop]}var EMPTY_PROPS=Object.freeze({}),component_state_ComponentState=function(){function ComponentState(){var component=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(classCallCheck.a)(this,ComponentState),this.component=component,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=EMPTY_PROPS,this.oldAsyncProps=null}return Object(createClass.a)(ComponentState,[{key:"getOldProps",value:function getOldProps(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function freezeAsyncOldProps(){if(!this.oldAsyncProps)for(var propName in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[propName]=this.oldProps[propName]}},{key:"hasAsyncProp",value:function hasAsyncProp(propName){return propName in this.asyncProps}},{key:"getAsyncProp",value:function getAsyncProp(propName){var asyncProp=this.asyncProps[propName];return asyncProp&&asyncProp.resolvedValue}},{key:"isAsyncPropLoading",value:function isAsyncPropLoading(propName){var asyncProp=this.asyncProps[propName];return Boolean(asyncProp&&asyncProp.pendingLoadCount>0&&asyncProp.pendingLoadCount!==asyncProp.resolvedLoadCount)}},{key:"setAsyncProps",value:function setAsyncProps(props){var resolvedValues=props._asyncPropResolvedValues||{},originalValues=props._asyncPropOriginalValues||props,defaultValues=props._asyncPropDefaultValues||{};for(var propName in resolvedValues){var value=resolvedValues[propName];this._createAsyncPropData(propName,value,defaultValues[propName]),this._updateAsyncProp(propName,value)}for(var _propName in originalValues){var _value=originalValues[_propName];this._createAsyncPropData(_propName,_value,defaultValues[_propName]),this._updateAsyncProp(_propName,_value)}}},{key:"_updateAsyncProp",value:function _updateAsyncProp(propName,value){if(this._didAsyncInputValueChange(propName,value)){if("string"==typeof value)value=(0,this.layer.props.fetch)(value,{propName:propName,layer:this.layer});value instanceof Promise?this._watchPromise(propName,value):this._setPropValue(propName,value)}}},{key:"_didAsyncInputValueChange",value:function _didAsyncInputValueChange(propName,value){var asyncProp=this.asyncProps[propName];return value!==asyncProp.lastValue&&(asyncProp.lastValue=value,!0)}},{key:"_setPropValue",value:function _setPropValue(propName,value){var asyncProp=this.asyncProps[propName];asyncProp.value=value,asyncProp.resolvedValue=value,asyncProp.pendingLoadCount++,asyncProp.resolvedLoadCount=asyncProp.pendingLoadCount}},{key:"_setAsyncPropValue",value:function _setAsyncPropValue(propName,value,loadCount){var asyncProp=this.asyncProps[propName];asyncProp&&loadCount>=asyncProp.resolvedLoadCount&&(assert(void 0!==value),this.freezeAsyncOldProps(),value=this._postProcessValue(propName,value),asyncProp.resolvedValue=value,asyncProp.resolvedLoadCount=loadCount,this.onAsyncPropUpdated(propName,value))}},{key:"_watchPromise",value:function _watchPromise(propName,promise){var _this=this,asyncProp=this.asyncProps[propName];asyncProp.pendingLoadCount++;var loadCount=asyncProp.pendingLoadCount;promise.then(function(data){return _this._setAsyncPropValue(propName,data,loadCount)}).catch(function(error){return utils_log.error(error)()})}},{key:"_postProcessValue",value:function _postProcessValue(propName,value){var dataTransform=(this.component?this.component.props:{}).dataTransform;return"data"===propName&&dataTransform&&(value=dataTransform(value)),value}},{key:"_createAsyncPropData",value:function _createAsyncPropData(propName,value,defaultValue){this.asyncProps[propName]||(this.asyncProps[propName]={lastValue:null,resolvedValue:defaultValue,pendingLoadCount:0,resolvedLoadCount:0})}}]),ComponentState}(),counter=0,component_Component=function(){function Component(){Object(classCallCheck.a)(this,Component),this.props=function createProps(){for(var propTypeDefs=getPropsPrototypeAndTypes(this.constructor),propsPrototype=propTypeDefs.defaultProps,propsInstance=Object.create(propsPrototype,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(propsInstance,arguments[i]);var layerName=this.constructor.layerName,deprecatedProps=propTypeDefs.deprecatedProps;return checkDeprecatedProps(layerName,propsInstance,deprecatedProps),checkDeprecatedProps(layerName,propsInstance.updateTriggers,deprecatedProps),checkDeprecatedProps(layerName,propsInstance.transitions,deprecatedProps),seer_integration_applyPropOverrides(propsInstance),Object.freeze(propsInstance),propsInstance}.apply(this,arguments),this.id=this.props.id,this.count=counter++,this.lifecycle=LIFECYCLE.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(createClass.a)(Component,[{key:"clone",value:function clone(newProps){var props=this.props,asyncProps={};for(var key in props._asyncPropDefaultValues)key in props._asyncPropResolvedValues?asyncProps[key]=props._asyncPropResolvedValues[key]:key in props._asyncPropOriginalValues&&(asyncProps[key]=props._asyncPropOriginalValues[key]);return new this.constructor(Object.assign({},props,asyncProps,newProps))}},{key:"_initState",value:function _initState(){this.internalState=new component_state_ComponentState({})}},{key:"stats",get:function get(){return this.internalState.stats}}]),Component}();component_Component.componentName="Component",component_Component.defaultProps={};var layer_state_LayerState=function(_ComponentState){function LayerState(_ref){var _this,attributeManager=_ref.attributeManager,layer=_ref.layer;return Object(classCallCheck.a)(this,LayerState),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LayerState).call(this,layer))).attributeManager=attributeManager,_this.model=null,_this.needsRedraw=!0,_this.subLayers=null,_this}return Object(inherits.a)(LayerState,_ComponentState),Object(createClass.a)(LayerState,[{key:"layer",get:function get(){return this.component},set:function set(layer){this.component=layer}}]),LayerState}(component_state_ComponentState),layer_EMPTY_ARRAY=Object.freeze([]),pickingColorCache=new Uint8ClampedArray(0),layer_defaultProps={data:{type:"data",value:layer_EMPTY_ARRAY,async:!0},dataComparator:null,dataTransform:{type:"function",value:function value(data){return data},compare:!1},fetch:{type:"function",value:function value(url){return fetch(url).then(function(response){return response.json()})},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:COORDINATE_SYSTEM.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function value(_ref){return[0,100*-_ref.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},layer_Layer=function(_Component){function Layer(){return Object(classCallCheck.a)(this,Layer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Layer).apply(this,arguments))}return Object(inherits.a)(Layer,_Component),Object(createClass.a)(Layer,[{key:"toString",value:function toString(){var className=this.constructor.layerName||this.constructor.name;return"".concat(className,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function setState(updateObject){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,updateObject),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var redraw=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=redraw)}},{key:"setLayerNeedsUpdate",value:function setLayerNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(opts)}},{key:"needsUpdate",value:function needsUpdate(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function isPickable(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function getSingleModel(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function getAttributeManager(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function getCurrentLayer(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function getFirstObject(){var data=this.props.data,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=data[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){return _step.value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}},{key:"project",value:function project(xyz){var viewport=this.context.viewport,worldPosition=getWorldPosition(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),_worldToPixels=Object(web_mercator_utils.k)(worldPosition,viewport.pixelProjectionMatrix),_worldToPixels2=Object(slicedToArray.a)(_worldToPixels,3),x=_worldToPixels2[0],y=_worldToPixels2[1],z=_worldToPixels2[2];return 2===xyz.length?[x,y]:[x,y,z]}},{key:"unproject",value:function unproject(xy){var viewport=this.context.viewport;return assert(Array.isArray(xy)),viewport.unproject(xy)}},{key:"projectPosition",value:function projectPosition(xyz){return assert(Array.isArray(xyz)),project_functions_projectPosition(xyz,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function projectFlat(lngLat){utils_log.deprecated("layer.projectFlat","layer.projectPosition")();var viewport=this.context.viewport;return assert(Array.isArray(lngLat)),viewport.projectFlat(lngLat)}},{key:"unprojectFlat",value:function unprojectFlat(xy){utils_log.deprecated("layer.unprojectFlat")();var viewport=this.context.viewport;return assert(Array.isArray(xy)),viewport.unprojectFlat(xy)}},{key:"use64bitProjection",value:function use64bitProjection(){if(this.props.fp64){if(this.props.coordinateSystem===COORDINATE_SYSTEM.LNGLAT_DEPRECATED)return!0;utils_log.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function use64bitPositions(){return this.props.fp64||this.props.coordinateSystem===COORDINATE_SYSTEM.LNGLAT}},{key:"screenToDevicePixels",value:function screenToDevicePixels(screenPixels){return utils_log.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),screenPixels*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function onHover(info,pickingEvent){return!!this.props.onHover&&this.props.onHover(info,pickingEvent)}},{key:"onClick",value:function onClick(info,pickingEvent){return!!this.props.onClick&&this.props.onClick(info,pickingEvent)}},{key:"nullPickingColor",value:function nullPickingColor(){return[0,0,0]}},{key:"encodePickingColor",value:function encodePickingColor(i){var target=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return assert(i<16777215,"index out of picking color range"),target[0]=i+1&255,target[1]=i+1>>8&255,target[2]=i+1>>8>>8&255,target}},{key:"decodePickingColor",value:function decodePickingColor(color){assert(color instanceof Uint8Array);var _color=Object(slicedToArray.a)(color,3);return _color[0]+256*_color[1]+65536*_color[2]-1}},{key:"initializeState",value:function initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function shouldUpdateState(_ref2){_ref2.oldProps,_ref2.props,_ref2.context;return _ref2.changeFlags.propsOrDataChanged}},{key:"updateState",value:function updateState(_ref3){_ref3.oldProps,_ref3.props,_ref3.context;var changeFlags=_ref3.changeFlags,attributeManager=this.getAttributeManager();changeFlags.dataChanged&&attributeManager&&attributeManager.invalidateAll()}},{key:"finalizeState",value:function finalizeState(){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.delete()}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.finalize()}},{key:"draw",value:function draw(opts){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){_step3.value.draw(opts)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"getPickingInfo",value:function getPickingInfo(_ref4){var info=_ref4.info,index=(_ref4.mode,info.index);return index>=0&&Array.isArray(this.props.data)&&(info.object=this.props.data[index]),info}},{key:"invalidateAttribute",value:function invalidateAttribute(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",diffReason=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",attributeManager=this.getAttributeManager();attributeManager&&("all"===name?(utils_log.log(1,"updateTriggers invalidating all attributes: ".concat(diffReason))(),attributeManager.invalidateAll()):(utils_log.log(1,"updateTriggers invalidating attribute ".concat(name,": ").concat(diffReason))(),attributeManager.invalidate(name)))}},{key:"updateAttributes",value:function updateAttributes(props){var attributeManager=this.getAttributeManager();if(attributeManager){var numInstances=this.getNumInstances(props);attributeManager.update({data:props.data,numInstances:numInstances,props:props,transitions:props.transitions,buffers:props,context:this,ignoreUnknownAttributes:!0});var models=this.getModels();if(models.length>0)for(var changedAttributes=attributeManager.getChangedAttributes({clearChangedFlags:!0}),i=0,len=models.length;i<len;++i)this._setModelAttributes(models[i],changedAttributes)}}},{key:"updateTransition",value:function updateTransition(){var attributeManager=this.getAttributeManager();attributeManager&&attributeManager.updateTransition(this.context.time)}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(attribute,_ref5){var numInstances=_ref5.numInstances,value=attribute.value,size=attribute.size;if(1!==value[0]){var cacheSize=pickingColorCache.length/size;if(cacheSize<numInstances){var newPickingColorCache=new Uint8ClampedArray(numInstances*size);newPickingColorCache.set(pickingColorCache);for(var pickingColor=[],i=cacheSize;i<numInstances;i++)this.encodePickingColor(i,pickingColor),newPickingColorCache[i*size+0]=pickingColor[0],newPickingColorCache[i*size+1]=pickingColor[1],newPickingColorCache[i*size+2]=pickingColor[2];pickingColorCache=newPickingColorCache}value.set(numInstances<cacheSize?pickingColorCache.subarray(0,numInstances*size):pickingColorCache)}}},{key:"_setModelAttributes",value:function _setModelAttributes(model,changedAttributes){var shaderAttributes={},excludeAttributes=model.userData.excludeAttributes||{};for(var attributeName in changedAttributes)excludeAttributes[attributeName]||Object.assign(shaderAttributes,changedAttributes[attributeName].getShaderAttributes());model.setAttributes(shaderAttributes)}},{key:"_clearInstancePickingColor",value:function _clearInstancePickingColor(color){var instancePickingColors=this.getAttributeManager().attributes.instancePickingColors,value=instancePickingColors.value,size=instancePickingColors.size,i=this.decodePickingColor(color);value[i*size+0]=0,value[i*size+1]=0,value[i*size+2]=0,instancePickingColors.update({value:value})}},{key:"_clearPickingColor",value:function _clearPickingColor(color){for(var pickingColors=this.getAttributeManager().attributes.pickingColors,value=pickingColors.value,i=0;i<value.length;i+=3)value[i+0]===color[0]&&value[i+1]===color[1]&&value[i+2]===color[2]&&(value[i+0]=0,value[i+1]=0,value[i+2]=0);pickingColors.update({value:value})}},{key:"clearPickingColor",value:function clearPickingColor(color){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(color):this._clearInstancePickingColor(color)}},{key:"copyPickingColors",value:function copyPickingColors(){var _this$getAttributeMan=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan.pickingColors,instancePickingColors=_this$getAttributeMan.instancePickingColors;return new Uint8ClampedArray((pickingColors||instancePickingColors).value)}},{key:"restorePickingColors",value:function restorePickingColors(value){var _this$getAttributeMan2=this.getAttributeManager().attributes,pickingColors=_this$getAttributeMan2.pickingColors,instancePickingColors=_this$getAttributeMan2.instancePickingColors;(pickingColors||instancePickingColors).update({value:value})}},{key:"getNumInstances",value:function getNumInstances(props){return void 0!==(props=props||this.props).numInstances?props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:count(this.props.data)}},{key:"_initialize",value:function _initialize(){this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var model=this.getSingleModel();model&&(model.id=this.props.id,model.program.id="".concat(this.props.id,"-program"))}},{key:"_update",value:function _update(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function _updateState(){var updateParams=this._getUpdateParams();if(this.context.gl)this.updateState(updateParams);else try{this.updateState(updateParams)}catch(error){}this.isComposite?this._renderLayers(updateParams):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function _finalize(){assert(this.internalState&&this.state),this.finalizeState(this.context),function removeLayerInSeer(id){dist_default.a.isReady()&&id&&dist_default.a.deleteItem("deck.gl",id)}(this.id)}},{key:"drawLayer",value:function drawLayer(_ref6){var _this=this,_ref6$moduleParameter=_ref6.moduleParameters,moduleParameters=void 0===_ref6$moduleParameter?null:_ref6$moduleParameter,_ref6$uniforms=_ref6.uniforms,uniforms=void 0===_ref6$uniforms?{}:_ref6$uniforms,_ref6$parameters=_ref6.parameters,parameters=void 0===_ref6$parameters?{}:_ref6$parameters;uniforms.picking_uActive||this.updateTransition(),moduleParameters&&this.setModuleParameters(moduleParameters);var animationProps=this.context.animationProps;if(animationProps){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){_step4.value._setAnimationProps(animationProps)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}var getPolygonOffset=this.props.getPolygonOffset,offsets=getPolygonOffset&&getPolygonOffset(uniforms)||[0,0];parameters.polygonOffset=offsets,Object(esm.E)(this.context.gl,parameters,function(){_this.draw({moduleParameters:moduleParameters,uniforms:uniforms,parameters:parameters,context:_this.context})})}},{key:"pickLayer",value:function pickLayer(opts){return this.getPickingInfo(opts)}},{key:"getChangeFlags",value:function getChangeFlags(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function setChangeFlags(flags){var _this2=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var changeFlags=this.internalState.changeFlags;flags.dataChanged&&!changeFlags.dataChanged&&(changeFlags.dataChanged=flags.dataChanged,utils_log.log(2,function(){return"dataChanged: ".concat(flags.dataChanged," in ").concat(_this2.id)})()),flags.updateTriggersChanged&&!changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged=changeFlags.updateTriggersChanged&&flags.updateTriggersChanged?Object.assign({},flags.updateTriggersChanged,changeFlags.updateTriggersChanged):flags.updateTriggersChanged||changeFlags.updateTriggersChanged,utils_log.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(flags.updateTriggersChanged).join(", ")," in ").concat(_this2.id)})()),flags.propsChanged&&!changeFlags.propsChanged&&(changeFlags.propsChanged=flags.propsChanged,utils_log.log(2,function(){return"propsChanged: ".concat(flags.propsChanged," in ").concat(_this2.id)})()),flags.viewportChanged&&!changeFlags.viewportChanged&&(changeFlags.viewportChanged=flags.viewportChanged,utils_log.log(3,function(){return"viewportChanged: ".concat(flags.viewportChanged," in ").concat(_this2.id)})()),flags.stateChanged&&!changeFlags.stateChanged&&(changeFlags.stateChanged=flags.stateChanged,utils_log.log(2,function(){return"stateChanged: ".concat(flags.stateChanged," in ").concat(_this2.id)})());var propsOrDataChanged=flags.dataChanged||flags.updateTriggersChanged||flags.propsChanged;changeFlags.propsOrDataChanged=changeFlags.propsOrDataChanged||propsOrDataChanged,changeFlags.somethingChanged=changeFlags.somethingChanged||propsOrDataChanged||flags.viewportChanged||flags.stateChanged}},{key:"clearChangeFlags",value:function clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function printChangeFlags(){var flags=this.internalState.changeFlags;return"".concat(flags.dataChanged?"data ":"").concat(flags.propsChanged?"props ":"").concat(flags.updateTriggersChanged?"triggers ":"").concat(flags.viewportChanged?"viewport":"")}},{key:"diffProps",value:function diffProps(newProps,oldProps){var changeFlags=props_diffProps(newProps,oldProps);if(changeFlags.updateTriggersChanged)for(var key in changeFlags.updateTriggersChanged)changeFlags.updateTriggersChanged[key]&&this._activeUpdateTrigger(key);return this.setChangeFlags(changeFlags)}},{key:"validateProps",value:function validateProps(){!function props_validateProps(props){var propTypes=getPropTypes(props);for(var propName in propTypes){var propType=propTypes[propName],validate=propType.validate;if(validate&&!validate(props[propName],propType))throw new Error("Invalid prop ".concat(propName,": ").concat(props[propName]))}}(this.props)}},{key:"setModuleParameters",value:function setModuleParameters(moduleParameters){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_step5.value.updateModuleSettings(moduleParameters)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},{key:"_getUpdateParams",value:function _getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function _getNeedsRedraw(opts){if(!this.internalState)return!1;var redraw=!1;redraw=redraw||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!opts.clearRedrawFlags;var attributeManager=this.getAttributeManager(),attributeManagerNeedsRedraw=attributeManager&&attributeManager.getNeedsRedraw(opts);return redraw=redraw||attributeManagerNeedsRedraw}},{key:"_getAttributeManager",value:function _getAttributeManager(){return new attribute_manager_AttributeManager(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function _initState(){assert(!this.internalState&&!this.state);var attributeManager=this._getAttributeManager();attributeManager&&attributeManager.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new layer_state_LayerState({attributeManager:attributeManager,layer:this}),this.state={},this.state.attributeManager=attributeManager,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function _transferState(oldLayer){var state=oldLayer.state,internalState=oldLayer.internalState;if(assert(state&&internalState),this!==oldLayer){this.internalState=internalState,this.internalState.component=this,this.state=state,state.layer=this,this.internalState.setAsyncProps(this.props);var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){_step6.value.userData.layer=this}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function _onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function _activeUpdateTrigger(propName){this.invalidateAttribute(propName)}},{key:"_updateBaseUniforms",value:function _updateBaseUniforms(){var _this3=this,uniforms={opacity:"function"==typeof this.props.opacity?function(animationProps){return Math.pow(_this3.props.opacity(animationProps),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_step7.value.setUniforms(uniforms)}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}},{key:"setUniforms",value:function setUniforms(uniformMap){var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=this.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){_step8.value.setUniforms(uniformMap)}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{_iteratorNormalCompletion8||null==_iterator8.return||_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}this.setNeedsRedraw(),utils_log.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function is64bitEnabled(){return utils_log.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}]),Layer}(component_Component);function flatten(array){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$filter=_ref.filter,filter=void 0===_ref$filter?function(){return!0}:_ref$filter,_ref$map=_ref.map,map=void 0===_ref$map?function(x){return x}:_ref$map,_ref$result=_ref.result,result=void 0===_ref$result?[]:_ref$result;return Array.isArray(array)?function flattenArray(array,filter,map,result){var index=-1;for(;++index<array.length;){var value=array[index];Array.isArray(value)?flattenArray(value,filter,map,result):filter(value)&&result.push(map(value))}return result}(array,filter,map,result):filter(array)?[map(array)]:[]}function fillArray(_ref3){for(var target=_ref3.target,source=_ref3.source,_ref3$start=_ref3.start,start=void 0===_ref3$start?0:_ref3$start,_ref3$count=_ref3.count,count=void 0===_ref3$count?1:_ref3$count,length=source.length,total=count*length,copied=0,i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}layer_Layer.layerName="Layer",layer_Layer.defaultProps=layer_defaultProps;var composite_layer_CompositeLayer=function(_Layer){function CompositeLayer(){return Object(classCallCheck.a)(this,CompositeLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CompositeLayer).apply(this,arguments))}return Object(inherits.a)(CompositeLayer,_Layer),Object(createClass.a)(CompositeLayer,[{key:"getSubLayers",value:function getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function initializeState(){}},{key:"setState",value:function setState(updateObject){Object(esm_get.a)(Object(getPrototypeOf.a)(CompositeLayer.prototype),"setState",this).call(this,updateObject),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function getPickingInfo(_ref){return _ref.info}},{key:"renderLayers",value:function renderLayers(){return null}},{key:"shouldRenderSubLayer",value:function shouldRenderSubLayer(id,data){var overridingProps=this.props._subLayerProps;return data&&data.length||overridingProps&&overridingProps[id]}},{key:"getSubLayerClass",value:function getSubLayerClass(id,DefaultLayerClass){var overridingProps=this.props._subLayerProps;return overridingProps&&overridingProps[id]&&overridingProps[id].type||DefaultLayerClass}},{key:"getSubLayerProps",value:function getSubLayerProps(sublayerProps){var _this$props=this.props,opacity=_this$props.opacity,pickable=_this$props.pickable,visible=_this$props.visible,parameters=_this$props.parameters,getPolygonOffset=_this$props.getPolygonOffset,highlightedObjectIndex=_this$props.highlightedObjectIndex,autoHighlight=_this$props.autoHighlight,highlightColor=_this$props.highlightColor,coordinateSystem=_this$props.coordinateSystem,coordinateOrigin=_this$props.coordinateOrigin,wrapLongitude=_this$props.wrapLongitude,positionFormat=_this$props.positionFormat,modelMatrix=_this$props.modelMatrix,overridingProps=_this$props._subLayerProps,newProps={opacity:opacity,pickable:pickable,visible:visible,parameters:parameters,getPolygonOffset:getPolygonOffset,highlightedObjectIndex:highlightedObjectIndex,autoHighlight:autoHighlight,highlightColor:highlightColor,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude,positionFormat:positionFormat,modelMatrix:modelMatrix};return sublayerProps&&Object.assign(newProps,sublayerProps,overridingProps&&overridingProps[sublayerProps.id],{id:"".concat(this.props.id,"-").concat(sublayerProps.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},sublayerProps.updateTriggers)}),newProps}},{key:"_getAttributeManager",value:function _getAttributeManager(){return null}},{key:"_renderLayers",value:function _renderLayers(){var subLayers=this.internalState.subLayers;subLayers&&!this.needsUpdate()?utils_log.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(subLayers=flatten(subLayers=this.renderLayers(),{filter:Boolean}),this.internalState.subLayers=subLayers,utils_log.log(2,"Composite layer rendered new subLayers ".concat(this),subLayers)());var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=subLayers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.parent=this}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"isComposite",get:function get(){return!0}}]),CompositeLayer}(layer_Layer);composite_layer_CompositeLayer.layerName="CompositeLayer";var lib_stats=__webpack_require__(541);var common=__webpack_require__(16),matrix4=__webpack_require__(540),vector3=__webpack_require__(113),DEGREES_TO_RADIANS=Math.PI/180,IDENTITY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],viewport_ZERO_VECTOR=[0,0,0],viewport_Viewport=function(){function Viewport(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Viewport);var _opts$id=opts.id,id=void 0===_opts$id?null:_opts$id,_opts$x=opts.x,x=void 0===_opts$x?0:_opts$x,_opts$y=opts.y,y=void 0===_opts$y?0:_opts$y,_opts$width=opts.width,width=void 0===_opts$width?1:_opts$width,_opts$height=opts.height,height=void 0===_opts$height?1:_opts$height;this.id=id||this.constructor.displayName||"viewport",this.x=x,this.y=y,this.width=width||1,this.height=height||1,this._initViewMatrix(opts),this._initProjectionMatrix(opts),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return Object(createClass.a)(Viewport,[{key:"equals",value:function equals(viewport){return viewport instanceof Viewport&&(viewport.width===this.width&&viewport.height===this.height&&viewport.scale===this.scale&&Object(common.e)(viewport.projectionMatrix,this.projectionMatrix)&&Object(common.e)(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(xyz){var _ref$topLeft=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,topLeft=void 0===_ref$topLeft||_ref$topLeft,worldPosition=this.projectPosition(xyz),coord=Object(web_mercator_utils.k)(worldPosition,this.pixelProjectionMatrix),_coord=Object(slicedToArray.a)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function unproject(xyz){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$topLeft=_ref2.topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,targetZ=_ref2.targetZ,_xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.pixelsPerMeter[2],coord=Object(web_mercator_utils.h)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=Object(slicedToArray.a)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function projectPosition(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=Object(slicedToArray.a)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function unprojectPosition(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=Object(slicedToArray.a)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function projectFlat(xyz){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return Object(web_mercator_utils.g)(xyz,scale);var pixelsPerMeter=this.distanceScales.pixelsPerMeter;return[xyz[0]*pixelsPerMeter[0],xyz[1]*pixelsPerMeter[1]]}},{key:"unprojectFlat",value:function unprojectFlat(xyz){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return Object(web_mercator_utils.j)(xyz,scale);var metersPerPixel=this.distanceScales.metersPerPixel;return[xyz[0]*metersPerPixel[0],xyz[1]*metersPerPixel[1]]}},{key:"getDistanceScales",value:function getDistanceScales(){var coordinateOrigin=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return coordinateOrigin?Object(web_mercator_utils.b)({longitude:coordinateOrigin[0],latitude:coordinateOrigin[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function getMatrices(){var _ref3$modelMatrix=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,modelMatrix=void 0===_ref3$modelMatrix?null:_ref3$modelMatrix,modelViewProjectionMatrix=this.viewProjectionMatrix,pixelProjectionMatrix=this.pixelProjectionMatrix,pixelUnprojectionMatrix=this.pixelUnprojectionMatrix;return modelMatrix&&(modelViewProjectionMatrix=mat4.g([],this.viewProjectionMatrix,modelMatrix),pixelProjectionMatrix=mat4.g([],this.pixelProjectionMatrix,modelMatrix),pixelUnprojectionMatrix=mat4.e([],pixelProjectionMatrix)),Object.assign({modelViewProjectionMatrix:modelViewProjectionMatrix,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:pixelProjectionMatrix,pixelUnprojectionMatrix:pixelUnprojectionMatrix,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function containsPixel(_ref4){var x=_ref4.x,y=_ref4.y,_ref4$width=_ref4.width,width=void 0===_ref4$width?1:_ref4$width,_ref4$height=_ref4.height,height=void 0===_ref4$height?1:_ref4$height;return x<this.x+this.width&&this.x<x+width&&y<this.y+this.height&&this.y<y+height}},{key:"getCameraPosition",value:function getCameraPosition(){return this.cameraPosition}},{key:"getCameraDirection",value:function getCameraDirection(){return this.cameraDirection}},{key:"getCameraUp",value:function getCameraUp(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function _addMetersToLngLat(lngLatZ,xyz){var _lngLatZ=Object(slicedToArray.a)(lngLatZ,3),lng=_lngLatZ[0],lat=_lngLatZ[1],_lngLatZ$=_lngLatZ[2],Z=void 0===_lngLatZ$?0:_lngLatZ$,_this$_metersToLngLat=this._metersToLngLatDelta(xyz),_this$_metersToLngLat2=Object(slicedToArray.a)(_this$_metersToLngLat,3),deltaLng=_this$_metersToLngLat2[0],deltaLat=_this$_metersToLngLat2[1],_this$_metersToLngLat3=_this$_metersToLngLat2[2],deltaZ=void 0===_this$_metersToLngLat3?0:_this$_metersToLngLat3;return 2===lngLatZ.length?[lng+deltaLng,lat+deltaLat]:[lng+deltaLng,lat+deltaLat,Z+deltaZ]}},{key:"_metersToLngLatDelta",value:function _metersToLngLatDelta(xyz){var _xyz2=Object(slicedToArray.a)(xyz,3),x=_xyz2[0],y=_xyz2[1],_xyz2$=_xyz2[2],z=void 0===_xyz2$?0:_xyz2$;assert(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z),"Illegal argument to Viewport");var _this$distanceScales=this.distanceScales,pixelsPerMeter=_this$distanceScales.pixelsPerMeter,degreesPerPixel=_this$distanceScales.degreesPerPixel,deltaLng=x*pixelsPerMeter[0]*degreesPerPixel[0],deltaLat=y*pixelsPerMeter[1]*degreesPerPixel[1];return 2===xyz.length?[deltaLng,deltaLat]:[deltaLng,deltaLat,z]}},{key:"_createProjectionMatrix",value:function _createProjectionMatrix(_ref5){var orthographic=_ref5.orthographic,fovyRadians=_ref5.fovyRadians,aspect=_ref5.aspect,focalDistance=_ref5.focalDistance,near=_ref5.near,far=_ref5.far;return assert(Number.isFinite(fovyRadians)),orthographic?(new matrix4.a).orthographic({fovy:fovyRadians,aspect:aspect,focalDistance:focalDistance,near:near,far:far}):(new matrix4.a).perspective({fovy:fovyRadians,aspect:aspect,near:near,far:far})}},{key:"_initViewMatrix",value:function _initViewMatrix(opts){var _opts$viewMatrix=opts.viewMatrix,viewMatrix=void 0===_opts$viewMatrix?IDENTITY:_opts$viewMatrix,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?null:_opts$longitude,_opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?null:_opts$latitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?null:_opts$zoom,_opts$position=opts.position,position=void 0===_opts$position?null:_opts$position,_opts$modelMatrix=opts.modelMatrix,modelMatrix=void 0===_opts$modelMatrix?null:_opts$modelMatrix,_opts$focalDistance=opts.focalDistance,focalDistance=void 0===_opts$focalDistance?1:_opts$focalDistance,_opts$distanceScales=opts.distanceScales,distanceScales=void 0===_opts$distanceScales?null:_opts$distanceScales;this.isGeospatial=Number.isFinite(latitude)&&Number.isFinite(longitude),this.zoom=zoom,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(web_mercator_utils.c)({latitude:latitude})+Math.log2(focalDistance):0);var scale=Math.pow(2,this.zoom);this.scale=scale,this.distanceScales=this.isGeospatial?Object(web_mercator_utils.b)({latitude:latitude,longitude:longitude,scale:this.scale}):distanceScales||{pixelsPerMeter:[scale,scale,scale],metersPerPixel:[1/scale,1/scale,1/scale]},this.focalDistance=focalDistance,this.distanceScales.metersPerPixel=new vector3.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new vector3.a(this.distanceScales.pixelsPerMeter),this.position=viewport_ZERO_VECTOR,this.meterOffset=viewport_ZERO_VECTOR,position&&(this.position=position,this.modelMatrix=modelMatrix,this.meterOffset=modelMatrix?modelMatrix.transformVector(position):position),this.isGeospatial?(this.longitude=longitude,this.latitude=latitude,this.center=this._getCenterInWorld({longitude:longitude,latitude:latitude}),this.viewMatrixUncentered=mat4.n([],viewMatrix,[1,-1,1])):(this.center=position?this.projectPosition(position):[0,0,0],this.viewMatrixUncentered=viewMatrix),this.viewMatrix=(new matrix4.a).multiplyRight(this.viewMatrixUncentered).translate(new vector3.a(this.center||viewport_ZERO_VECTOR).negate())}},{key:"_getCenterInWorld",value:function _getCenterInWorld(_ref6){var longitude=_ref6.longitude,latitude=_ref6.latitude,meterOffset=this.meterOffset,scale=this.scale,distanceScales=this.distanceScales,center2d=this.projectFlat([longitude,latitude],scale),center=new vector3.a(center2d[0],center2d[1],0);if(meterOffset){var pixelPosition=new vector3.a(meterOffset).scale(distanceScales.pixelsPerMeter);center.add(pixelPosition)}return center}},{key:"_initProjectionMatrix",value:function _initProjectionMatrix(opts){var _opts$projectionMatri=opts.projectionMatrix,projectionMatrix=void 0===_opts$projectionMatri?null:_opts$projectionMatri,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,fovyRadians=opts.fovyRadians,fovyDegrees=opts.fovyDegrees,fovy=opts.fovy,_opts$near=opts.near,near=void 0===_opts$near?.1:_opts$near,_opts$far=opts.far,far=void 0===_opts$far?1e3:_opts$far,_opts$focalDistance2=opts.focalDistance,focalDistance=void 0===_opts$focalDistance2?1:_opts$focalDistance2,orthographicFocalDistance=opts.orthographicFocalDistance,radians=fovyRadians||(fovyDegrees||fovy||75)*DEGREES_TO_RADIANS;this.projectionMatrix=projectionMatrix||this._createProjectionMatrix({orthographic:orthographic,fovyRadians:radians,aspect:this.width/this.height,focalDistance:orthographicFocalDistance||focalDistance,near:near,far:far})}},{key:"_initPixelMatrices",value:function _initPixelMatrices(){var vpm=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.g(vpm,vpm,this.projectionMatrix),mat4.g(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm,this.viewMatrixInverse=mat4.e([],this.viewMatrix)||this.viewMatrix;var _extractCameraVectors=function extractCameraVectors(_ref){var viewMatrix=_ref.viewMatrix,viewMatrixInverse=_ref.viewMatrixInverse;return{eye:[viewMatrixInverse[12],viewMatrixInverse[13],viewMatrixInverse[14]],direction:[viewMatrix[2],viewMatrix[6],viewMatrix[10]],up:[viewMatrix[1],viewMatrix[5],viewMatrix[9]]}}({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),eye=_extractCameraVectors.eye,direction=_extractCameraVectors.direction,up=_extractCameraVectors.up;this.cameraPosition=eye,this.cameraDirection=direction,this.cameraUp=up;var viewportMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pixelProjectionMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.n(viewportMatrix,viewportMatrix,[this.width/2,-this.height/2,1]),mat4.o(viewportMatrix,viewportMatrix,[1,-1,0]),mat4.g(pixelProjectionMatrix,viewportMatrix,this.viewProjectionMatrix),this.pixelProjectionMatrix=pixelProjectionMatrix,this.viewportMatrix=viewportMatrix,this.pixelUnprojectionMatrix=mat4.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||utils_log.warn("Pixel project matrix not invertible")()}}]),Viewport}();viewport_Viewport.displayName="Viewport";var INITIAL_CONTEXT=Object.seal({layerManager:null,deck:null,gl:null,time:-1,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,animationProps:null,userData:{}}),layer_manager_layerName=function layerName(layer){return layer instanceof layer_Layer?"".concat(layer):layer?"invalid":"null"},layer_manager_LayerManager=function(){function LayerManager(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},deck=_ref.deck,stats=_ref.stats,_ref$viewport=_ref.viewport,viewport=void 0===_ref$viewport?null:_ref$viewport;Object(classCallCheck.a)(this,LayerManager),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},INITIAL_CONTEXT,{layerManager:this,deck:deck,gl:gl,shaderCache:gl&&new esm.n({gl:gl,_cachePrograms:!0}),stats:stats||new lib_stats.a({id:"deck.gl"}),viewport:viewport||new viewport_Viewport({id:"DEFAULT-INITIAL-VIEWPORT"})}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),seer_integration_seerInitListener(this._initSeer),seer_integration_layerEditListener(this._editSeer)}return Object(createClass.a)(LayerManager,[{key:"finalize",value:function finalize(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var layer=_step.value;this._finalizeLayer(layer)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}dist_default.a.removeListener(this._initSeer),dist_default.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(opts)}},{key:"needsUpdate",value:function needsUpdate(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function setNeedsRedraw(reason){this._needsRedraw=this._needsRedraw||reason}},{key:"setNeedsUpdate",value:function setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason}},{key:"getLayers",value:function getLayers(){var _ref2$layerIds=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;return layerIds?this.layers.filter(function(layer){return layerIds.find(function(layerId){return 0===layer.id.indexOf(layerId)})}):this.layers}},{key:"setProps",value:function setProps(props){"debug"in props&&(this._debug=props.debug),"userData"in props&&(this.context.userData=props.userData),"useDevicePixels"in props&&(this.context.useDevicePixels=props.useDevicePixels),"layers"in props&&this.setLayers(props.layers)}},{key:"setLayers",value:function setLayers(newLayers){if(newLayers===this.lastRenderedLayers)return utils_log.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=newLayers,newLayers=flatten(newLayers,{filter:Boolean});var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){_step2.value.context=this.context}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _this$_updateLayers=this._updateLayers({oldLayers:this.layers,newLayers:newLayers}),error=_this$_updateLayers.error,generatedLayers=_this$_updateLayers.generatedLayers;if(this.layers=generatedLayers,error)throw error;return this}},{key:"updateLayers",value:function updateLayers(){var animationProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"time"in animationProps&&(this.context.time=animationProps.time);var reason=this.needsUpdate();reason&&(this.setNeedsRedraw("updating layers: ".concat(reason)),this.setLayers(Object(toConsumableArray.a)(this.lastRenderedLayers)))}},{key:"_checkIfNeedsRedraw",value:function _checkIfNeedsRedraw(opts){var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var layerNeedsRedraw=_step3.value.getNeedsRedraw(opts);redraw=redraw||layerNeedsRedraw}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return redraw}},{key:"activateViewport",value:function activateViewport(viewport){var oldViewport=this.context.viewport;if(!oldViewport||!viewport.equals(oldViewport)){utils_log.log(4,"Viewport changed",viewport)(),this.context.viewport=viewport;var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.layers[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var layer=_step4.value;layer.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(layer)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}return assert(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_updateLayers",value:function _updateLayers(_ref3){var oldLayers=_ref3.oldLayers,newLayers=_ref3.newLayers,oldLayerMap={},_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=oldLayers[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var oldLayer=_step5.value;oldLayerMap[oldLayer.id]?utils_log.warn("Multiple old layers with same id ".concat(layer_manager_layerName(oldLayer)))():oldLayerMap[oldLayer.id]=oldLayer}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}var generatedLayers=[],error=this._updateSublayersRecursively({newLayers:newLayers,oldLayerMap:oldLayerMap,generatedLayers:generatedLayers}),error2=this._finalizeOldLayers(oldLayerMap);return this._needsUpdate=!1,{error:error||error2,generatedLayers:generatedLayers}}},{key:"_updateSublayersRecursively",value:function _updateSublayersRecursively(_ref4){var newLayers=_ref4.newLayers,oldLayerMap=_ref4.oldLayerMap,generatedLayers=_ref4.generatedLayers,error=null,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=newLayers[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var newLayer=_step6.value;newLayer.context=this.context;var oldLayer=oldLayerMap[newLayer.id];null===oldLayer&&utils_log.warn("Multiple new layers with same id ".concat(layer_manager_layerName(newLayer)))(),oldLayerMap[newLayer.id]=null;var sublayers=null;try{if(this._debug&&oldLayer!==newLayer&&newLayer.validateProps(),oldLayer){this._transferLayerState(oldLayer,newLayer);var _err=this._updateLayer(newLayer);error=error||_err,seer_integration_updateLayerInSeer(newLayer)}else{var err=this._initializeLayer(newLayer);error=error||err,seer_integration_initLayerInSeer(newLayer)}generatedLayers.push(newLayer),sublayers=newLayer.isComposite&&newLayer.getSubLayers()}catch(err){utils_log.warn("error during matching of ".concat(layer_manager_layerName(newLayer)),err)(),error=error||err}if(sublayers){var _err2=this._updateSublayersRecursively({newLayers:sublayers,oldLayerMap:oldLayerMap,generatedLayers:generatedLayers});error=error||_err2}}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return error}},{key:"_finalizeOldLayers",value:function _finalizeOldLayers(oldLayerMap){var error=null;for(var layerId in oldLayerMap){var layer=oldLayerMap[layerId];layer&&(error=error||this._finalizeLayer(layer))}return error}},{key:"_initializeLayer",value:function _initializeLayer(layer){utils_log.log(2,"initializing ".concat(layer_manager_layerName(layer)))();var error=null;try{layer._initialize(),layer.lifecycle=LIFECYCLE.INITIALIZED}catch(err){utils_log.warn("error while initializing ".concat(layer_manager_layerName(layer),"\n"),err)(),error=error||err}layer.internalState.layer=layer;var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=layer.getModels()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_step7.value.userData.layer=layer}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}return error}},{key:"_transferLayerState",value:function _transferLayerState(oldLayer,newLayer){newLayer._transferState(oldLayer),newLayer.lifecycle=LIFECYCLE.MATCHED,newLayer!==oldLayer?(utils_log.log(4,"matched ".concat(layer_manager_layerName(newLayer)),oldLayer,"->",newLayer)(),oldLayer.lifecycle=LIFECYCLE.AWAITING_GC):utils_log.log(4,"Matching layer is unchanged ".concat(newLayer.id))()}},{key:"_updateLayer",value:function _updateLayer(layer){utils_log.log(4,"updating ".concat(layer," because: ").concat(layer.printChangeFlags()))();var error=null;try{layer._update()}catch(err){utils_log.warn("error during update of ".concat(layer_manager_layerName(layer)),err)(),error=err}return error}},{key:"_finalizeLayer",value:function _finalizeLayer(layer){assert(layer.lifecycle!==LIFECYCLE.AWAITING_FINALIZATION),layer.lifecycle=LIFECYCLE.AWAITING_FINALIZATION;var error=null;this.setNeedsRedraw("finalized ".concat(layer_manager_layerName(layer)));try{layer._finalize()}catch(err){utils_log.warn("error during finalization of ".concat(layer_manager_layerName(layer)),err)(),error=err}return layer.lifecycle=LIFECYCLE.FINALIZED,utils_log.log(2,"finalizing ".concat(layer_manager_layerName(layer)))(),error}},{key:"_initSeer",value:function _initSeer(){this.layers.forEach(function(layer){seer_integration_initLayerInSeer(layer),seer_integration_updateLayerInSeer(layer)})}},{key:"_editSeer",value:function _editSeer(payload){"edit"===payload.type&&"props"===payload.valuePath[0]&&(!function setPropOverrides(id,valuePath,value){dist_default.a.isReady()&&(overrides.has(id)||overrides.set(id,new Map),overrides.get(id).set(valuePath,value))}(payload.itemKey,payload.valuePath.slice(1),payload.value),this.updateLayers())}}]),LayerManager}(),point_light_PointLight=function(_BasePointLight){function PointLight(props){var _this;return Object(classCallCheck.a)(this,PointLight),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PointLight).call(this,props))).projectedLight=new esm.k(props),_this}return Object(inherits.a)(PointLight,_BasePointLight),Object(createClass.a)(PointLight,[{key:"getProjectedLight",value:function getProjectedLight(_ref){var layer=_ref.layer,viewport=layer.context.viewport,_layer$props=layer.props,coordinateSystem=_layer$props.coordinateSystem,coordinateOrigin=_layer$props.coordinateOrigin,position=project_functions_projectPosition(this.position,{viewport:viewport,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,fromCoordinateSystem:viewport.isGeospatial?COORDINATE_SYSTEM.LNGLAT:COORDINATE_SYSTEM.IDENTITY,fromCoordinateOrigin:[0,0,0]});return this.projectedLight.color=this.color,this.projectedLight.intensity=this.intensity,this.projectedLight.position=position,this.projectedLight}}]),PointLight}(esm.k);!function(_PointLight){function CameraLight(){return Object(classCallCheck.a)(this,CameraLight),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CameraLight).apply(this,arguments))}Object(inherits.a)(CameraLight,_PointLight),Object(createClass.a)(CameraLight,[{key:"getProjectedLight",value:function getProjectedLight(_ref){var layer=_ref.layer,viewport=layer.context.viewport,_layer$props=layer.props,coordinateSystem=_layer$props.coordinateSystem,coordinateOrigin=_layer$props.coordinateOrigin,project_uCameraPosition=getUniformsFromViewport({viewport:viewport,modelMatrix:_layer$props.modelMatrix,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin}).project_uCameraPosition;return this.projectedLight.color=this.color,this.projectedLight.intensity=this.intensity,this.projectedLight.position=project_uCameraPosition,this.projectedLight}}])}(point_light_PointLight);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var suncalc_DEGREES_TO_RADIANS=Math.PI/180,DAY_IN_MS=864e5,JD1970=2440588,JD2000=2451545,e=23.4397*suncalc_DEGREES_TO_RADIANS,M0=357.5291,M1=.98560028,THETA0=280.147,THETA1=360.9856235;function getSolarPosition(timestamp,latitude,longitude){var longitudeWestInRadians=suncalc_DEGREES_TO_RADIANS*-longitude,phi=suncalc_DEGREES_TO_RADIANS*latitude,d=function toDays(timestamp){return function toJulianDay(timestamp){return timestamp/DAY_IN_MS-.5+JD1970}(timestamp)-JD2000}(timestamp),c=function getSunCoords(dates){var L=function getEclipticLongitude(meanAnomaly){var M=meanAnomaly,C=suncalc_DEGREES_TO_RADIANS*(1.9148*Math.sin(M)+.02*Math.sin(2*M)+3e-4*Math.sin(3*M));return M+C+102.9372*suncalc_DEGREES_TO_RADIANS+Math.PI}(function getSolarMeanAnomaly(days){return suncalc_DEGREES_TO_RADIANS*(M0+M1*days)}(dates));return{declination:(eclipticLongitude=L,b=0,lambda=eclipticLongitude,Math.asin(Math.sin(b)*Math.cos(e)+Math.cos(b)*Math.sin(e)*Math.sin(lambda))),rightAscension:getRightAscension(L,0)};var eclipticLongitude,b,lambda}(d),H=function getSiderealTime(dates,longitudeWestInRadians){return suncalc_DEGREES_TO_RADIANS*(THETA0+THETA1*dates)-longitudeWestInRadians}(d,longitudeWestInRadians)-c.rightAscension;return{azimuth:getAzimuth(H,phi,c.declination),altitude:getAltitude(H,phi,c.declination)}}function getRightAscension(eclipticLongitude,b){var lambda=eclipticLongitude;return Math.atan2(Math.sin(lambda)*Math.cos(e)-Math.tan(b)*Math.sin(e),Math.cos(lambda))}function getAzimuth(hourAngle,latitudeInRadians,declination){var H=hourAngle,phi=latitudeInRadians,delta=declination;return Math.atan2(Math.sin(H),Math.cos(H)*Math.sin(phi)-Math.tan(delta)*Math.cos(phi))}function getAltitude(hourAngle,latitudeInRadians,declination){var H=hourAngle,phi=latitudeInRadians,delta=declination;return Math.asin(Math.sin(phi)*Math.sin(delta)+Math.cos(phi)*Math.cos(delta)*Math.cos(H))}!function(_DirectionalLight){function SunLight(_ref){var _this,timestamp=_ref.timestamp,others=_objectWithoutProperties(_ref,["timestamp"]);return Object(classCallCheck.a)(this,SunLight),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SunLight).call(this,others))).timestamp=timestamp,_this}Object(inherits.a)(SunLight,_DirectionalLight),Object(createClass.a)(SunLight,[{key:"getProjectedLight",value:function getProjectedLight(_ref2){var _layer$context$viewpo=_ref2.layer.context.viewport,latitude=_layer$context$viewpo.latitude,longitude=_layer$context$viewpo.longitude;return this.direction=function getSunlightDirection(timestamp,latitude,longitude){var _getSolarPosition=getSolarPosition(timestamp,latitude,longitude),azimuth=_getSolarPosition.azimuth,altitude=_getSolarPosition.altitude,azimuthN=azimuth+Math.PI;return[-Math.sin(azimuthN),-Math.cos(azimuthN),-Math.sin(altitude)]}(this.timestamp,latitude,longitude),this}}])}(esm.e);function deepEqual(a,b){return a===b||Object.keys(a).every(function(key){return Array.isArray(a[key])&&Array.isArray(b[key])?deepEqual(a[key],b[key]):a[key]===b[key]})}var PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(value){switch(Object(esm_typeof.a)(value)){case"number":return{position:value,relative:!1};case"string":var match=value.match(PERCENT_OR_PIXELS_REGEX);if(match&&match.length>=3){var relative="%"===match[2],position=parseFloat(match[1]);return{position:relative?position/100:position,relative:relative}}default:throw new Error("Could not parse position string ".concat(value))}}function getPosition(position,extent){return position.relative?Math.round(position.position*extent):position.position}var view_View=function(){function View(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,View);var _props$id=props.id,id=void 0===_props$id?null:_props$id,_props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,_props$width=props.width,width=void 0===_props$width?"100%":_props$width,_props$height=props.height,height=void 0===_props$height?"100%":_props$height,_props$projectionMatr=props.projectionMatrix,projectionMatrix=void 0===_props$projectionMatr?null:_props$projectionMatr,_props$fovy=props.fovy,fovy=void 0===_props$fovy?50:_props$fovy,_props$near=props.near,near=void 0===_props$near?.1:_props$near,_props$far=props.far,far=void 0===_props$far?1e3:_props$far,_props$modelMatrix=props.modelMatrix,modelMatrix=void 0===_props$modelMatrix?null:_props$modelMatrix,_props$viewportInstan=props.viewportInstance,viewportInstance=void 0===_props$viewportInstan?null:_props$viewportInstan,_props$type=props.type,type=void 0===_props$type?viewport_Viewport:_props$type;assert(!viewportInstance||viewportInstance instanceof viewport_Viewport),this.viewportInstance=viewportInstance,this.id=id||this.constructor.displayName||"view",this.type=type,this.props=Object.assign({},props,{projectionMatrix:projectionMatrix,fovy:fovy,near:near,far:far,modelMatrix:modelMatrix}),this._parseDimensions({x:x,y:y,width:width,height:height}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(createClass.a)(View,[{key:"equals",value:function equals(view){return this===view||(this.viewportInstance?view.viewportInstance&&this.viewportInstance.equals(view.viewportInstance):deepEqual(this.props,view.props))}},{key:"makeViewport",value:function makeViewport(_ref){var width=_ref.width,height=_ref.height,viewState=_ref.viewState;if(this.viewportInstance)return this.viewportInstance;viewState=this.filterViewState(viewState);var viewportDimensions=this.getDimensions({width:width,height:height}),props=Object.assign({viewState:viewState},viewState,this.props,viewportDimensions);return this._getViewport(props)}},{key:"getViewStateId",value:function getViewStateId(){switch(Object(esm_typeof.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function filterViewState(viewState){if(this.props.viewState&&"object"===Object(esm_typeof.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var newViewState=Object.assign({},viewState);for(var key in this.props.viewState)"id"!==key&&(newViewState[key]=this.props.viewState[key]);return newViewState}return viewState}},{key:"getDimensions",value:function getDimensions(_ref2){var width=_ref2.width,height=_ref2.height;return{x:getPosition(this._x,width),y:getPosition(this._y,height),width:getPosition(this._width,width),height:getPosition(this._height,height)}}},{key:"_getControllerProps",value:function _getControllerProps(defaultOpts){var opts=this.props.controller;return opts?!0===opts?defaultOpts:("function"==typeof opts&&(opts={type:opts}),Object.assign({},defaultOpts,opts)):null}},{key:"_getViewport",value:function _getViewport(props){return new(0,this.type)(props)}},{key:"_parseDimensions",value:function _parseDimensions(_ref3){var x=_ref3.x,y=_ref3.y,width=_ref3.width,height=_ref3.height;this._x=parsePosition(x),this._y=parsePosition(y),this._width=parsePosition(width),this._height=parsePosition(height)}}]),View}(),view_manager_ViewManager=function(){function ViewManager(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,ViewManager),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=props.eventManager,this._eventCallbacks={onViewStateChange:props.onViewStateChange,onInteractiveStateChange:props.onInteractiveStateChange},Object.seal(this),this.setProps(props)}return Object(createClass.a)(ViewManager,[{key:"finalize",value:function finalize(){for(var key in this.controllers)this.controllers[key]&&this.controllers[key].finalize();this.controllers={}}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"setNeedsUpdate",value:function setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason,this._needsRedraw=this._needsRedraw||reason}},{key:"updateViewStates",value:function updateViewStates(){var animationProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("time"in animationProps)for(var viewId in this.controllers){var controller=this.controllers[viewId];controller&&controller.updateTransition(animationProps.time)}}},{key:"getViewports",value:function getViewports(rect){return rect?this._viewports.filter(function(viewport){return viewport.containsPixel(rect)}):this._viewports}},{key:"getViews",value:function getViews(){var viewMap={};return this.views.forEach(function(view){viewMap[view.id]=view}),viewMap}},{key:"getView",value:function getView(viewOrViewId){return"string"==typeof viewOrViewId?this.views.find(function(view){return view.id===viewOrViewId}):viewOrViewId}},{key:"getViewState",value:function getViewState(viewId){var view=this.getView(viewId),viewState=view&&this.viewState[view.getViewStateId()]||this.viewState;return view?view.filterViewState(viewState):viewState}},{key:"getViewport",value:function getViewport(viewId){return this._viewportMap[viewId]}},{key:"project",value:function project(xyz){for(var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},viewports=this.getViewports(),i=viewports.length-1;i>=0;--i){var viewport=viewports[i];if(viewport.contains(xyz,opts))return viewport.project(xyz,opts)}return null}},{key:"unproject",value:function unproject(xyz,opts){for(var viewports=this.getViewports(),i=viewports.length-1;i>=0;--i){var viewport=viewports[i];if(viewport.containsPixel(xyz,opts))return viewport.unproject(xyz)}return null}},{key:"setProps",value:function setProps(props){"views"in props&&this._setViews(props.views),"viewState"in props&&this._setViewState(props.viewState),("width"in props||"height"in props)&&this._setSize(props.width,props.height),this._isUpdating||this._update()}},{key:"_update",value:function _update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function _setSize(width,height){assert(Number.isFinite(width)&&Number.isFinite(height)),width===this.width&&height===this.height||(this.width=width,this.height=height,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function _setViews(views){views=flatten(views,{filter:Boolean}).map(function(view){return view instanceof viewport_Viewport?new view_View({viewportInstance:view}):view}),this._diffViews(views,this.views)&&this.setNeedsUpdate("views changed"),this.views=views}},{key:"_setViewState",value:function _setViewState(viewState){viewState?(!deepEqual(viewState,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=viewState):utils_log.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function _onViewStateChange(viewId,event){event.viewId=viewId,this._eventCallbacks.onViewStateChange(event)}},{key:"_createController",value:function _createController(props){return new(0,props.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,props.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},props))}},{key:"_updateController",value:function _updateController(view,viewState,viewport,controller){if(view.controller){var controllerProps=Object.assign({},view.controller,viewState,{id:view.id,x:viewport.x,y:viewport.y,width:viewport.width,height:viewport.height});return controller?controller.setProps(controllerProps):controller=this._createController(controllerProps),controller}return null}},{key:"_rebuildViewports",value:function _rebuildViewports(){var _this=this,width=this.width,height=this.height,views=this.views,oldControllers=this.controllers;for(var id in this.controllers={},this._viewports=views.map(function(view){var viewState=_this.getViewState(view),viewport=view.makeViewport({width:width,height:height,viewState:viewState});return _this.controllers[view.id]=_this._updateController(view,viewState,viewport,oldControllers[view.id]),viewport}),oldControllers)oldControllers[id]&&!this.controllers[id]&&oldControllers[id].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function _buildViewportMap(){var _this2=this;this._viewportMap={},this._viewports.forEach(function(viewport){viewport.id&&(_this2._viewportMap[viewport.id]=_this2._viewportMap[viewport.id]||viewport)})}},{key:"_diffViews",value:function _diffViews(newViews,oldViews){return newViews.length!==oldViews.length||newViews.some(function(_,i){return!newViews[i].equals(oldViews[i])})}}]),ViewManager}(),assertThisInitialized=__webpack_require__(6),fit_bounds=__webpack_require__(268),vec2=__webpack_require__(26),web_mercator_viewport_WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,WebMercatorViewport);var _opts$latitude=opts.latitude,latitude=void 0===_opts$latitude?0:_opts$latitude,_opts$longitude=opts.longitude,longitude=void 0===_opts$longitude?0:_opts$longitude,_opts$zoom=opts.zoom,zoom=void 0===_opts$zoom?11:_opts$zoom,_opts$pitch=opts.pitch,pitch=void 0===_opts$pitch?0:_opts$pitch,_opts$bearing=opts.bearing,bearing=void 0===_opts$bearing?0:_opts$bearing,_opts$nearZMultiplier=opts.nearZMultiplier,nearZMultiplier=void 0===_opts$nearZMultiplier?.1:_opts$nearZMultiplier,_opts$farZMultiplier=opts.farZMultiplier,farZMultiplier=void 0===_opts$farZMultiplier?10:_opts$farZMultiplier,_opts$orthographic=opts.orthographic,orthographic=void 0!==_opts$orthographic&&_opts$orthographic,width=opts.width,height=opts.height,_opts$altitude=opts.altitude,altitude=void 0===_opts$altitude?1.5:_opts$altitude;width=width||1,height=height||1,altitude=Math.max(.75,altitude);var _getProjectionParamet=Object(web_mercator_utils.e)({width:width,height:height,pitch:pitch,altitude:altitude,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,focalDistance=_getProjectionParamet.focalDistance,near=_getProjectionParamet.near,far=_getProjectionParamet.far,viewMatrixUncentered=Object(web_mercator_utils.f)({height:height,pitch:pitch,bearing:bearing,altitude:altitude}),position=opts.position&&[opts.position[0],opts.position[1],0],viewportOpts=Object.assign({},opts,{width:width,height:height,viewMatrix:viewMatrixUncentered,longitude:longitude,latitude:latitude,zoom:zoom,position:position,orthographic:orthographic,fovyRadians:fov,aspect:aspect,orthographicFocalDistance:focalDistance,near:near,far:far});return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(WebMercatorViewport).call(this,viewportOpts))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.orthographic=orthographic,_this.metersToLngLatDelta=_this.metersToLngLatDelta.bind(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),_this.lngLatDeltaToMeters=_this.lngLatDeltaToMeters.bind(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),_this.addMetersToLngLat=_this.addMetersToLngLat.bind(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),Object.freeze(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),_this}return Object(inherits.a)(WebMercatorViewport,_Viewport),Object(createClass.a)(WebMercatorViewport,[{key:"metersToLngLatDelta",value:function metersToLngLatDelta(xyz){var _xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],_xyz$=_xyz[2],z=void 0===_xyz$?0:_xyz$;assert(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z),"Illegal argument to WebMercatorViewport");var _this$distanceScales=this.distanceScales,pixelsPerMeter=_this$distanceScales.pixelsPerMeter,degreesPerPixel=_this$distanceScales.degreesPerPixel,deltaLng=x*pixelsPerMeter[0]*degreesPerPixel[0],deltaLat=y*pixelsPerMeter[1]*degreesPerPixel[1];return 2===xyz.length?[deltaLng,deltaLat]:[deltaLng,deltaLat,z]}},{key:"lngLatDeltaToMeters",value:function lngLatDeltaToMeters(deltaLngLatZ){var _deltaLngLatZ=Object(slicedToArray.a)(deltaLngLatZ,3),deltaLng=_deltaLngLatZ[0],deltaLat=_deltaLngLatZ[1],_deltaLngLatZ$=_deltaLngLatZ[2],deltaZ=void 0===_deltaLngLatZ$?0:_deltaLngLatZ$;assert(Number.isFinite(deltaLng)&&Number.isFinite(deltaLat)&&Number.isFinite(deltaZ),"Illegal argument to WebMercatorViewport");var _this$distanceScales2=this.distanceScales,pixelsPerDegree=_this$distanceScales2.pixelsPerDegree,metersPerPixel=_this$distanceScales2.metersPerPixel,deltaX=deltaLng*pixelsPerDegree[0]*metersPerPixel[0],deltaY=deltaLat*pixelsPerDegree[1]*metersPerPixel[1];return 2===deltaLngLatZ.length?[deltaX,deltaY]:[deltaX,deltaY,deltaZ]}},{key:"addMetersToLngLat",value:function addMetersToLngLat(lngLatZ,xyz){return Object(web_mercator_utils.a)(lngLatZ,xyz)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(_ref){var lngLat=_ref.lngLat,pos=_ref.pos,fromLocation=Object(web_mercator_utils.h)(pos,this.pixelUnprojectionMatrix),toLocation=this.projectFlat(lngLat),translate=vec2.a([],toLocation,vec2.e([],fromLocation)),newCenter=vec2.a([],this.center,translate);return this.unprojectFlat(newCenter)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(_ref2){var lngLat=_ref2.lngLat,pos=_ref2.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function fitBounds(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=Object(fit_bounds.a)(Object.assign({width:width,height:height,bounds:bounds},options));return new WebMercatorViewport({width:width,height:height,longitude:_fitBounds2.longitude,latitude:_fitBounds2.latitude,zoom:_fitBounds2.zoom})}}]),WebMercatorViewport}(viewport_Viewport);web_mercator_viewport_WebMercatorViewport.displayName="WebMercatorViewport";var transition_interpolator_TransitionInterpolator=function(){function TransitionInterpolator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,TransitionInterpolator),Array.isArray(opts)&&(opts={compare:opts,extract:opts,required:opts});var _opts=opts,compare=_opts.compare,extract=_opts.extract,required=_opts.required;this._propsToCompare=compare,this._propsToExtract=extract,this._requiredProps=required}return Object(createClass.a)(TransitionInterpolator,[{key:"arePropsEqual",value:function arePropsEqual(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this._propsToCompare||Object.keys(nextProps))[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!Object(common.e)(currentProps[key],nextProps[key]))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function initializeProps(startProps,endProps){var result;if(this._propsToExtract){var startViewStateProps={},endViewStateProps={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this._propsToExtract[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;startViewStateProps[key]=startProps[key],endViewStateProps[key]=endProps[key]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}result={start:startViewStateProps,end:endViewStateProps}}else result={start:startProps,end:endProps};return this._checkRequiredProps(result.start),this._checkRequiredProps(result.end),result}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){assert(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function _checkRequiredProps(props){this._requiredProps&&this._requiredProps.forEach(function(propName){var value=props[propName];assert(Number.isFinite(value)||Array.isArray(value),"".concat(propName," is required for transition"))})}}]),TransitionInterpolator}(),VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],linear_interpolator_LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(){var transitionProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VIEWPORT_TRANSITION_PROPS;return Object(classCallCheck.a)(this,LinearInterpolator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LinearInterpolator).call(this,transitionProps))}return Object(inherits.a)(LinearInterpolator,_TransitionInterpolat),Object(createClass.a)(LinearInterpolator,[{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var viewport={};for(var key in endProps)viewport[key]=Object(common.g)(startProps[key],endProps[key],t);return viewport}}]),LinearInterpolator}(transition_interpolator_TransitionInterpolator),transition_manager_noop=function noop(){},TRANSITION_EVENTS_BREAK=1,TRANSITION_EVENTS_SNAP_TO_END=2,TRANSITION_EVENTS_IGNORE=3,DEFAULT_PROPS={transitionDuration:0,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS_BREAK,onTransitionStart:transition_manager_noop,onTransitionInterrupt:transition_manager_noop,onTransitionEnd:transition_manager_noop},transition_manager_TransitionManager=function(){function TransitionManager(ControllerState){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,TransitionManager),assert(ControllerState),this.ControllerState=ControllerState,this.props=Object.assign({},DEFAULT_PROPS,props),this.propsInTransition=null,this.time=0,this.transition=new transition_Transition,this.onViewStateChange=props.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(createClass.a)(TransitionManager,[{key:"finalize",value:function finalize(){}},{key:"getViewportInTransition",value:function getViewportInTransition(){return this.propsInTransition}},{key:"processViewStateChange",value:function processViewStateChange(nextProps){var transitionTriggered=!1,currentProps=this.props;if(nextProps=Object.assign({},DEFAULT_PROPS,nextProps),this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return transitionTriggered;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps,this.transition.interruption===TRANSITION_EVENTS_SNAP_TO_END?this.transition.endProps:this.propsInTransition||currentProps);this._triggerTransition(startProps,nextProps),transitionTriggered=!0}else this.transition.cancel();return transitionTriggered}},{key:"updateTransition",value:function updateTransition(timestamp){this.time=timestamp,this._updateTransition()}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(props){return props.transitionDuration>0&&props.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(props){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(props,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(currentProps,nextProps){return this.transition.inProgress?this.transition.interruption===TRANSITION_EVENTS_IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps)}},{key:"_triggerTransition",value:function _triggerTransition(startProps,endProps){assert(this._isTransitionEnabled(endProps),"Transition is not enabled");var startViewstate=new this.ControllerState(startProps),endViewStateProps=new this.ControllerState(endProps).shortestPathFrom(startViewstate),initialProps=endProps.transitionInterpolator.initializeProps(startProps,endViewStateProps);this.propsInTransition={},this.transition.start({duration:endProps.transitionDuration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startProps:initialProps.start,endProps:initialProps.end,onStart:endProps.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(endProps.onTransitionInterrupt),onEnd:this._onTransitionEnd(endProps.onTransitionEnd)}),this._updateTransition()}},{key:"_updateTransition",value:function _updateTransition(){this.transition.update(this.time)}},{key:"_onTransitionEnd",value:function _onTransitionEnd(callback){var _this=this;return function(transition){_this.propsInTransition=null,callback(transition)}}},{key:"_onTransitionUpdate",value:function _onTransitionUpdate(transition){var interpolator=transition.interpolator,startProps=transition.startProps,endProps=transition.endProps,time=transition.time,viewport=interpolator.interpolateProps(startProps,endProps,time);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,viewport)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}]),TransitionManager}();transition_manager_TransitionManager.defaultProps=DEFAULT_PROPS;var NO_TRANSITION_PROPS={transitionDuration:0},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],controller_Controller=function(){function Controller(ControllerState){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Controller),assert(ControllerState),this.ControllerState=ControllerState,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new transition_manager_TransitionManager(ControllerState,options),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(options)}return Object(createClass.a)(Controller,[{key:"finalize",value:function finalize(){for(var eventName in this._events)this._events[eventName]&&this.eventManager.off(eventName,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function handleEvent(event){var ControllerState=this.ControllerState;switch(this.controllerState=new ControllerState(Object.assign({},this.controllerStateProps,this._state)),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function getCenter(event){var _this$controllerState=this.controllerStateProps,x=_this$controllerState.x,y=_this$controllerState.y,offsetCenter=event.offsetCenter;return[offsetCenter.x-x,offsetCenter.y-y]}},{key:"isPointInBounds",value:function isPointInBounds(pos){var _this$controllerState2=this.controllerStateProps,width=_this$controllerState2.width,height=_this$controllerState2.height;return pos[0]>=0&&pos[0]<=width&&pos[1]>=0&&pos[1]<=height}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"isDragging",value:function isDragging(){return this._state.isDragging}},{key:"setProps",value:function setProps(props){"onViewportChange"in props&&utils_log.removed("onViewportChange")(),"onViewStateChange"in props&&(this.onViewStateChange=props.onViewStateChange),"onStateChange"in props&&(this.onStateChange=props.onStateChange),this.controllerStateProps=props,"eventManager"in props&&this.eventManager!==props.eventManager&&(this.eventManager=props.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var _props$scrollZoom=props.scrollZoom,scrollZoom=void 0===_props$scrollZoom||_props$scrollZoom,_props$dragPan=props.dragPan,dragPan=void 0===_props$dragPan||_props$dragPan,_props$dragRotate=props.dragRotate,dragRotate=void 0===_props$dragRotate||_props$dragRotate,_props$doubleClickZoo=props.doubleClickZoom,doubleClickZoom=void 0===_props$doubleClickZoo||_props$doubleClickZoo,_props$touchZoom=props.touchZoom,touchZoom=void 0===_props$touchZoom||_props$touchZoom,_props$touchRotate=props.touchRotate,touchRotate=void 0!==_props$touchRotate&&_props$touchRotate,_props$keyboard=props.keyboard,keyboard=void 0===_props$keyboard||_props$keyboard,isInteractive=Boolean(this.onViewStateChange);this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"updateTransition",value:function updateTransition(timestamp){this.transitionManager.updateTransition(timestamp)}},{key:"toggleEvents",value:function toggleEvents(eventNames,enabled){var _this=this;this.eventManager&&eventNames.forEach(function(eventName){_this._events[eventName]!==enabled&&(_this._events[eventName]=enabled,enabled?_this.eventManager.on(eventName,_this.handleEvent):_this.eventManager.off(eventName,_this.handleEvent))})}},{key:"setOptions",value:function setOptions(props){return this.setProps(props)}},{key:"updateViewport",value:function updateViewport(newControllerState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},interactionState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},viewState=Object.assign({},newControllerState.getViewportProps(),extraProps);if(this.controllerState!==newControllerState){var oldViewState=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState})}Object.assign(this._state,Object.assign({},newControllerState.getInteractiveState(),interactionState)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function _onPanStart(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var newControllerState=this.controllerState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPan",value:function _onPan(event){var alternateMode=this.isFunctionKeyPressed(event)||event.rightButton;return(alternateMode=this.invertPan?!alternateMode:alternateMode)?this._onPanMove(event):this._onPanRotate(event)}},{key:"_onPanEnd",value:function _onPanEnd(event){var newControllerState=this.controllerState.panEnd().rotateEnd();return this.updateViewport(newControllerState,null,{isDragging:!1})}},{key:"_onPanMove",value:function _onPanMove(event){if(!this.dragPan)return!1;var pos=this.getCenter(event);if(!this.isDragging())return!1;var newControllerState=this.controllerState.pan({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$controllerState3=this.controllerState.getViewportProps(),deltaScaleX=deltaX/_this$controllerState3.width,deltaScaleY=deltaY/_this$controllerState3.height,newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onWheel",value:function _onWheel(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newControllerState=this.controllerState.zoom({pos:pos,scale:scale});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS)}},{key:"_onPinchStart",value:function _onPinchStart(event){var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var newControllerState=this.controllerState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPinch",value:function _onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;var newControllerState=this.controllerState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newControllerState=newControllerState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newControllerState=newControllerState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0})}},{key:"_onPinchEnd",value:function _onPinchEnd(event){var newControllerState=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newControllerState,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function _onDoubleTap(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event);if(!this.isPointInBounds(pos))return!1;var isZoomOut=this.isFunctionKeyPressed(event),newControllerState=this.controllerState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newControllerState,this._getTransitionProps())}},{key:"_onKeyDown",value:function _onKeyDown(event){if(!this.keyboard)return!1;var newControllerState,funcKey=this.isFunctionKeyPressed(event),controllerState=this.controllerState;switch(event.srcEvent.keyCode){case 189:newControllerState=funcKey?controllerState.zoomOut().zoomOut():controllerState.zoomOut();break;case 187:newControllerState=funcKey?controllerState.zoomIn().zoomIn():controllerState.zoomIn();break;case 37:newControllerState=funcKey?controllerState.rotateLeft():controllerState.moveLeft();break;case 39:newControllerState=funcKey?controllerState.rotateRight():controllerState.moveRight();break;case 38:newControllerState=funcKey?controllerState.rotateUp():controllerState.moveUp();break;case 40:newControllerState=funcKey?controllerState.rotateDown():controllerState.moveDown();break;default:return!1}return this.updateViewport(newControllerState,this._getTransitionProps())}},{key:"_getTransitionProps",value:function _getTransitionProps(){return NO_TRANSITION_PROPS}}]),Controller}(),EARTH_RADIUS_METERS=6371e3,spherical_coordinates_SphericalCoordinates=function(){function SphericalCoordinates(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},phi=_ref.phi,theta=_ref.theta,radius=_ref.radius,bearing=_ref.bearing,pitch=_ref.pitch,_ref$radiusScale=(_ref.altitude,_ref.radiusScale),radiusScale=void 0===_ref$radiusScale?EARTH_RADIUS_METERS:_ref$radiusScale;Object(classCallCheck.a)(this,SphericalCoordinates),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(phi)||Number.isFinite(theta)?(this.phi=phi||0,this.theta=theta||0):(Number.isFinite(bearing)||Number.isFinite(pitch))&&(this.bearing=bearing||0,this.pitch=pitch||0),this.radius=radius||1,this.radiusScale=radiusScale||1,this.check()}return Object(createClass.a)(SphericalCoordinates,[{key:"toString",value:function toString(){return this.formatString(common.c)}},{key:"formatString",value:function formatString(_ref2){var printTypes=_ref2.printTypes,f=(_ref2.printDegrees,common.f);return"".concat(printTypes?"Spherical":"","[rho:").concat(f(this.radius),",theta:").concat(f(this.theta),",phi:").concat(f(this.phi),"]")}},{key:"equals",value:function equals(other){return Object(common.e)(this.radius,other.radius)&&Object(common.e)(this.theta,other.theta)&&Object(common.e)(this.phi,other.phi)}},{key:"exactEquals",value:function exactEquals(other){return this.radius===other.radius&&this.theta===other.theta&&this.phi===other.phi}},{key:"set",value:function set(radius,phi,theta){return this.radius=radius,this.phi=phi,this.theta=theta,this.check()}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(other){return this.radius=other.radius,this.phi=other.phi,this.theta=other.theta,this.check()}},{key:"fromLngLatZ",value:function fromLngLatZ(_ref3){var _ref4=Object(slicedToArray.a)(_ref3,3),lng=_ref4[0],lat=_ref4[1],z=_ref4[2];this.radius=1+z/this.radiusScale,this.phi=Object(common.h)(lat),this.theta=Object(common.h)(lng)}},{key:"fromVector3",value:function fromVector3(v){return this.radius=vec3.c(v),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(v[0],v[1]),this.phi=Math.acos(Object(common.b)(v[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function toVector3(){return new vector3.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function makeSafe(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function get(){return 180-Object(common.d)(this.phi)},set:function set(v){this.phi=Math.PI-Object(common.h)(v)}},{key:"pitch",get:function get(){return Object(common.d)(this.theta)},set:function set(v){this.theta=Object(common.h)(v)}},{key:"longitude",get:function get(){return Object(common.d)(this.phi)}},{key:"latitude",get:function get(){return Object(common.d)(this.theta)}},{key:"lng",get:function get(){return Object(common.d)(this.phi)}},{key:"lat",get:function get(){return Object(common.d)(this.theta)}},{key:"z",get:function get(){return(this.radius-1)*this.radiusScale}}]),SphericalCoordinates}(),defaultState={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},view_state_ViewState=function(){function ViewState(opts){Object(classCallCheck.a)(this,ViewState);var width=opts.width,height=opts.height,_opts$position=opts.position,position=void 0===_opts$position?defaultState.position:_opts$position;assert(Number.isFinite(width),"`width` must be supplied"),assert(Number.isFinite(height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},opts,{position:new vector3.a(position)}))}return Object(createClass.a)(ViewState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getDirection",value:function getDirection(){return new spherical_coordinates_SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function getDirectionFromBearing(bearing){return new spherical_coordinates_SphericalCoordinates({bearing:bearing,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){return this._viewportProps}},{key:"_applyConstraints",value:function _applyConstraints(props){return props}}]),ViewState}(),web_mercator_viewport=__webpack_require__(115),normalize_viewport_props=__webpack_require__(538),LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS_BREAK},map_controller_NO_TRANSITION_PROPS={transitionDuration:0},MAPBOX_LIMITS={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},map_controller_DEFAULT_STATE={pitch:0,bearing:0,altitude:1.5},map_controller_MapState=function(_ViewState){function MapState(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?map_controller_DEFAULT_STATE.bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?map_controller_DEFAULT_STATE.pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?map_controller_DEFAULT_STATE.altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;return Object(classCallCheck.a)(this,MapState),assert(Number.isFinite(longitude),"`longitude` must be supplied"),assert(Number.isFinite(latitude),"`latitude` must be supplied"),assert(Number.isFinite(zoom),"`zoom` must be supplied"),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapState).call(this,{width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch})))._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom},_this}return Object(inherits.a)(MapState,_ViewState),Object(createClass.a)(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos;return this._getUpdatedState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=Object(slicedToArray.a)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing,startPitch:startPitch}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;assert(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),assert(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),_zoomedViewport$getLo=new web_mercator_viewport.a(Object.assign({},this._viewportProps,{zoom:zoom})).getLocationAtPoint({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getLo2=Object(slicedToArray.a)(_zoomedViewport$getLo,2),longitude=_zoomedViewport$getLo2[0],latitude=_zoomedViewport$getLo2[1];return this._getUpdatedState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function moveRight(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function moveUp(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function moveDown(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function rotateLeft(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function rotateRight(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function rotateUp(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function rotateDown(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){var fromProps=viewState.getViewportProps(),props=Object.assign({},this._viewportProps),bearing=props.bearing,longitude=props.longitude;return Math.abs(bearing-fromProps.bearing)>180&&(props.bearing=bearing<0?bearing+360:bearing-360),Math.abs(longitude-fromProps.longitude)>180&&(props.longitude=longitude<0?longitude+360:longitude-360),props}},{key:"_zoomFromCenter",value:function _zoomFromCenter(scale){var _this$_viewportProps=this._viewportProps,width=_this$_viewportProps.width,height=_this$_viewportProps.height;return this.zoom({pos:[width/2,height/2],scale:scale})}},{key:"_panFromCenter",value:function _panFromCenter(offset){var _this$_viewportProps2=this._viewportProps,width=_this$_viewportProps2.width,height=_this$_viewportProps2.height;return this.pan({startPos:[width/2,height/2],pos:[width/2+offset[0],height/2+offset[1]]})}},{key:"_getUpdatedState",value:function _getUpdatedState(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=Object(common.b)(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=Object(common.b)(pitch,minPitch,maxPitch),Object.assign(props,Object(normalize_viewport_props.a)(props)),props}},{key:"_unproject",value:function _unproject(pos){var viewport=new web_mercator_viewport.a(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new web_mercator_viewport.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps3=this._viewportProps,maxZoom=_this$_viewportProps3.maxZoom,minZoom=_this$_viewportProps3.minZoom,zoom=startZoom+Math.log2(scale);return Object(common.b)(zoom,minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=Object(common.b)(deltaScaleY,-1,1);var _this$_viewportProps4=this._viewportProps,minPitch=_this$_viewportProps4.minPitch,maxPitch=_this$_viewportProps4.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}(view_state_ViewState),map_controller_MapController=function(_Controller){function MapController(props){var _this2;return Object(classCallCheck.a)(this,MapController),(_this2=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapController).call(this,map_controller_MapState,props))).invertPan=!0,_this2}return Object(inherits.a)(MapController,_Controller),Object(createClass.a)(MapController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return LINEAR_TRANSITION_PROPS}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=Object(slicedToArray.a)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$controllerState=this.controllerState.getViewportProps(),width=_this$controllerState.width,height=_this$controllerState.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newControllerState=this.controllerState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newControllerState,map_controller_NO_TRANSITION_PROPS,{isDragging:!0})}}]),MapController}(controller_Controller),map_view_MapView=function(_View){function MapView(props){return Object(classCallCheck.a)(this,MapView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(MapView).call(this,Object.assign({},props,{type:web_mercator_viewport_WebMercatorViewport})))}return Object(inherits.a)(MapView,_View),Object(createClass.a)(MapView,[{key:"controller",get:function get(){return this._getControllerProps({type:map_controller_MapController})}}]),MapView}(view_View);map_view_MapView.displayName="MapView";var effect_manager_EffectManager=function(){function EffectManager(){Object(classCallCheck.a)(this,EffectManager),this.effects=[],this._needsRedraw="Initial render",this.defaultLightingEffect=new lighting_effect_LightingEffect,this.needApplyDefaultLighting=!1}return Object(createClass.a)(EffectManager,[{key:"setProps",value:function setProps(props){"effects"in props&&(props.effects.length===this.effects.length&&deepEqual(props.effects,this.effects)||(this.setEffects(props.effects),this._needsRedraw="effects changed")),this.checkLightingEffect()}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"getEffects",value:function getEffects(){var effects=this.effects;return this.needApplyDefaultLighting&&(effects=this.effects.slice()).push(this.defaultLightingEffect),effects}},{key:"setEffects",value:function setEffects(){var effects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.effects=effects}},{key:"checkLightingEffect",value:function checkLightingEffect(){var hasEffect=!1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){if(_step.value instanceof lighting_effect_LightingEffect){hasEffect=!0;break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.needApplyDefaultLighting=!hasEffect}}]),EffectManager}(),layers_pass_LayersPass=function(_Pass){function LayersPass(){return Object(classCallCheck.a)(this,LayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LayersPass).apply(this,arguments))}return Object(inherits.a)(LayersPass,_Pass),Object(createClass.a)(LayersPass,[{key:"render",value:function render(props){return this.drawLayers(props)}},{key:"drawLayers",value:function drawLayers(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,views=_ref.views,onViewportActive=_ref.onViewportActive,_ref$deviceRect=_ref.deviceRect,deviceRect=void 0===_ref$deviceRect?null:_ref$deviceRect,_ref$parameters=_ref.parameters,parameters=void 0===_ref$parameters?{}:_ref$parameters,_ref$pass=_ref.pass,pass=void 0===_ref$pass?"draw":_ref$pass,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"":_ref$redrawReason,_ref$clearCanvas=_ref.clearCanvas,clearCanvas=void 0===_ref$clearCanvas||_ref$clearCanvas,effects=_ref.effects,effectProps=_ref.effectProps,gl=this.gl;clearCanvas&&this.clearCanvas(gl);var renderStats=[];return viewports.forEach(function(viewportOrDescriptor,i){var viewport=_this.getViewportFromDescriptor(viewportOrDescriptor),view=views&&views[viewport.id];onViewportActive(viewport);var stats=_this.drawLayersInViewport(gl,{layers:layers,viewport:viewport,view:view,deviceRect:deviceRect,parameters:parameters,pass:pass,redrawReason:redrawReason,effects:effects,effectProps:effectProps});renderStats.push(stats)}),renderStats}},{key:"drawLayersInViewport",value:function drawLayersInViewport(gl,_ref2){var _this2=this,layers=_ref2.layers,viewport=_ref2.viewport,view=_ref2.view,_ref2$parameters=(_ref2.deviceRect,_ref2.parameters),parameters=void 0===_ref2$parameters?{}:_ref2$parameters,effects=(_ref2.pass,_ref2.redrawReason,_ref2.effects),effectProps=_ref2.effectProps,glViewport=this.getGLViewport(gl,{viewport:viewport});if(view&&view.props.clear){var clearOpts=!0===view.props.clear?{color:!0,depth:!0}:view.props.clear;Object(esm.E)(gl,{scissorTest:!0,scissor:glViewport},function(){return Object(esm.o)(gl,clearOpts)})}var renderStatus={totalCount:layers.length,visibleCount:0,compositeCount:0,pickableCount:0};return Object(esm.B)(gl,parameters||{}),layers.forEach(function(layer,layerIndex){var shouldDrawLayer=_this2.shouldDrawLayer(layer,viewport);shouldDrawLayer&&layer.props.pickable&&renderStatus.pickableCount++,layer.isComposite&&renderStatus.compositeCount++,shouldDrawLayer&&(renderStatus.visibleCount++,_this2.drawLayerInViewport({gl:gl,layer:layer,layerIndex:layerIndex,glViewport:glViewport,parameters:parameters,effects:effects,effectProps:effectProps}))}),renderStatus}},{key:"drawLayerInViewport",value:function drawLayerInViewport(_ref3){_ref3.gl;var layer=_ref3.layer,layerIndex=_ref3.layerIndex,glViewport=_ref3.glViewport,parameters=_ref3.parameters,effects=_ref3.effects,effectProps=_ref3.effectProps,moduleParameters=this.getModuleParameters(layer,effects,effectProps),uniforms=Object.assign({},layer.context.uniforms,{layerIndex:layerIndex}),layerParameters=this.getLayerParameters(layer,layerIndex,glViewport,parameters);layer.drawLayer({moduleParameters:moduleParameters,uniforms:uniforms,parameters:layerParameters})}},{key:"getViewportFromDescriptor",value:function getViewportFromDescriptor(viewportOrDescriptor){return viewportOrDescriptor.viewport?viewportOrDescriptor.viewport:viewportOrDescriptor}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer,viewport){var layerFilter=this.props.layerFilter,shouldDrawLayer=!layer.isComposite&&layer.props.visible;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:!1})),shouldDrawLayer}},{key:"getModuleParameters",value:function getModuleParameters(layer){return Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,pickingActive:0,devicePixelRatio:this.props.pixelRatio})}},{key:"getLayerParameters",value:function getLayerParameters(layer,layerIndex,glViewport,parameters){var layerParameters=Object.assign({},layer.props.parameters||{},parameters);return Object.assign(layerParameters,{viewport:glViewport}),layerParameters}},{key:"getGLViewport",value:function getGLViewport(gl,_ref4){var viewport=_ref4.viewport,height=gl.canvas?gl.canvas.clientHeight||gl.canvas.height:100,dimensions=viewport,pixelRatio=this.props.pixelRatio;return[dimensions.x*pixelRatio,(height-dimensions.y-dimensions.height)*pixelRatio,dimensions.width*pixelRatio,dimensions.height*pixelRatio]}},{key:"clearCanvas",value:function clearCanvas(gl){var width=gl.drawingBufferWidth,height=gl.drawingBufferHeight;Object(esm.E)(gl,{viewport:[0,0,width,height]},function(){gl.clear(16640)})}}]),LayersPass}(function(){function Pass(gl){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,Pass);var _props$id=props.id,id=void 0===_props$id?"pass":_props$id;this.id=id,this.gl=gl,this.props={},Object.assign(this.props,props)}return Object(createClass.a)(Pass,[{key:"setProps",value:function setProps(props){Object.assign(this.props,props)}},{key:"render",value:function render(){}}]),Pass}()),draw_layers_pass_DrawLayersPass=function(_LayersPass){function DrawLayersPass(){return Object(classCallCheck.a)(this,DrawLayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DrawLayersPass).apply(this,arguments))}return Object(inherits.a)(DrawLayersPass,_LayersPass),Object(createClass.a)(DrawLayersPass,[{key:"getModuleParameters",value:function getModuleParameters(layer,effects,effectProps){var moduleParameters=Object(esm_get.a)(Object(getPrototypeOf.a)(DrawLayersPass.prototype),"getModuleParameters",this).call(this,layer);Object.assign(moduleParameters,this.getObjectHighlightParameters(layer),effectProps);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var effect=_step.value;Object.assign(moduleParameters,effect.getParameters(layer))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return moduleParameters}},{key:"getObjectHighlightParameters",value:function getObjectHighlightParameters(layer){var _layer$props=layer.props,highlightedObjectIndex=_layer$props.highlightedObjectIndex,highlightColor=_layer$props.highlightColor,parameters={pickingHighlightColor:[highlightColor[0],highlightColor[1],highlightColor[2],highlightColor[3]||255]};return Number.isInteger(highlightedObjectIndex)&&(parameters.pickingSelectedColor=highlightedObjectIndex>=0?layer.encodePickingColor(highlightedObjectIndex):null),parameters}}]),DrawLayersPass}(layers_pass_LayersPass),pick_layers_pass_PickLayersPass=function(_LayersPass){function PickLayersPass(){return Object(classCallCheck.a)(this,PickLayersPass),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PickLayersPass).apply(this,arguments))}return Object(inherits.a)(PickLayersPass,_LayersPass),Object(createClass.a)(PickLayersPass,[{key:"render",value:function render(props){props.pickingFBO?this.drawPickingBuffer(props):Object(esm_get.a)(Object(getPrototypeOf.a)(PickLayersPass.prototype),"render",this).call(this,props)}},{key:"drawPickingBuffer",value:function drawPickingBuffer(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,onViewportActive=_ref.onViewportActive,pickingFBO=_ref.pickingFBO,effectProps=_ref.effectProps,_ref$deviceRect=_ref.deviceRect,x=_ref$deviceRect.x,y=_ref$deviceRect.y,width=_ref$deviceRect.width,height=_ref$deviceRect.height,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"":_ref$redrawReason,gl=this.gl;return Object(esm.E)(gl,{framebuffer:pickingFBO,scissorTest:!0,scissor:[x,y,width,height],clearColor:[0,0,0,0]},function(){_this.drawLayers({layers:layers,viewports:viewports,onViewportActive:onViewportActive,pass:"picking",redrawReason:redrawReason,effectProps:effectProps,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})})}},{key:"shouldDrawLayer",value:function shouldDrawLayer(layer,viewport){var layerFilter=this.props.layerFilter,shouldDrawLayer=!layer.isComposite&&layer.props.visible&&layer.props.pickable;return shouldDrawLayer&&layerFilter&&(shouldDrawLayer=layerFilter({layer:layer,viewport:viewport,isPicking:!0})),shouldDrawLayer}},{key:"getModuleParameters",value:function getModuleParameters(layer,effects,effectProps){var moduleParameters=Object.assign(Object.create(layer.props),{viewport:layer.context.viewport,pickingActive:1,devicePixelRatio:this.props.pixelRatio});return Object.assign(moduleParameters,effectProps),moduleParameters}},{key:"getLayerParameters",value:function getLayerParameters(layer,layerIndex,glViewport,parameters){var layerParameters=Object.assign({},layer.props.parameters||{},parameters);return Object.assign(layerParameters,{viewport:glViewport,blendColor:[0,0,0,(layerIndex+1)/255]}),layerParameters}}]),PickLayersPass}(layers_pass_LayersPass);function getPixelRatio(useDevicePixels){return assert("boolean"==typeof useDevicePixels,"Invalid useDevicePixels"),useDevicePixels&&"undefined"!=typeof window?window.devicePixelRatio:1}var deck_renderer_DeckRenderer=function(){function DeckRenderer(gl){Object(classCallCheck.a)(this,DeckRenderer),this.gl=gl,this.pixelRatio=null,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new draw_layers_pass_DrawLayersPass(gl),this.pickLayersPass=new pick_layers_pass_PickLayersPass(gl),this.renderCount=0,this._needsRedraw="Initial render"}return Object(createClass.a)(DeckRenderer,[{key:"setProps",value:function setProps(props){"useDevicePixels"in props&&(this.pixelRatio=getPixelRatio(props.useDevicePixels)),"layerFilter"in props&&this.layerFilter!==props.layerFilter&&(this.layerFilter=props.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in props&&this.drawPickingColors!==props.drawPickingColors&&(this.drawPickingColors=props.drawPickingColors,this._needsRedraw="drawPickingColors changed");var pixelRatio=this.pixelRatio,layerFilter=this.layerFilter;this.drawLayersPass.setProps({pixelRatio:pixelRatio,layerFilter:layerFilter}),this.pickLayersPass.setProps({pixelRatio:pixelRatio,layerFilter:layerFilter})}},{key:"renderLayers",value:function renderLayers(_ref){var _this=this,layers=_ref.layers,viewports=_ref.viewports,activateViewport=_ref.activateViewport,views=_ref.views,_ref$redrawReason=_ref.redrawReason,redrawReason=void 0===_ref$redrawReason?"unknown reason":_ref$redrawReason,_ref$clearCanvas=_ref.clearCanvas,clearCanvas=void 0===_ref$clearCanvas||_ref$clearCanvas,_ref$effects=_ref.effects,effects=void 0===_ref$effects?[]:_ref$effects,pass=_ref.pass,stats=_ref.stats,layerPass=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,effectProps=this.prepareEffects(effects),renderStats=layerPass.render({layers:layers,viewports:viewports,views:views,onViewportActive:activateViewport,redrawReason:redrawReason,clearCanvas:clearCanvas,effects:effects,effectProps:effectProps});this.renderCount++,utils_log.priority>=2&&renderStats.forEach(function(status){_this.logRenderStats({status:status,pass:pass,redrawReason:redrawReason,stats:stats})})}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}},{key:"prepareEffects",value:function prepareEffects(effects){var effectProps={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=effects[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var effect=_step.value;Object.assign(effectProps,effect.prepare())}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return effectProps}},{key:"logRenderStats",value:function logRenderStats(_ref2){var renderStats=_ref2.renderStats,pass=_ref2.pass,redrawReason=_ref2.redrawReason,stats=_ref2.stats,totalCount=renderStats.totalCount,visibleCount=renderStats.visibleCount,compositeCount=renderStats.compositeCount,pickableCount=renderStats.pickableCount,hiddenCount=totalCount-compositeCount-visibleCount,message="";message+="RENDER #".concat(this.renderCount," ").concat(visibleCount," (of ").concat(totalCount," layers) to ").concat(pass," because ").concat(redrawReason," "),utils_log.priority>2&&(message+="(".concat(hiddenCount," hidden, ").concat(compositeCount," composite ").concat(pickableCount," pickable)")),utils_log.log(2,message)(),stats&&stats.get("Redraw Layers").add(visibleCount)}}]),DeckRenderer}(),NO_PICKED_OBJECT={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function getClosestObject(_ref){var pickedColors=_ref.pickedColors,layers=_ref.layers,deviceX=_ref.deviceX,deviceY=_ref.deviceY,deviceRadius=_ref.deviceRadius,deviceRect=_ref.deviceRect;if(pickedColors){for(var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,minSquareDistanceToCenter=deviceRadius*deviceRadius,closestPixelIndex=-1,i=0,row=0;row<height;row++){var dy=row+y-deviceY,dy2=dy*dy;if(dy2>minSquareDistanceToCenter)i+=4*width;else for(var col=0;col<width;col++){if(pickedColors[i+3]-1>=0){var dx=col+x-deviceX,d2=dx*dx+dy2;d2<=minSquareDistanceToCenter&&(minSquareDistanceToCenter=d2,closestPixelIndex=i)}i+=4}}if(closestPixelIndex>=0){var _pickedLayerIndex=pickedColors[closestPixelIndex+3]-1,pickedColor=pickedColors.slice(closestPixelIndex,closestPixelIndex+4),pickedLayer=layers[_pickedLayerIndex];if(pickedLayer){var pickedObjectIndex=pickedLayer.decodePickingColor(pickedColor);return{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedObjectIndex}}utils_log.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return NO_PICKED_OBJECT}function processPickInfo(_ref){var pickInfo=_ref.pickInfo,lastPickedInfo=_ref.lastPickedInfo,mode=_ref.mode,layers=_ref.layers,viewports=_ref.viewports,x=_ref.x,y=_ref.y,deviceX=_ref.deviceX,deviceY=_ref.deviceY,pixelRatio=_ref.pixelRatio,pickedColor=pickInfo.pickedColor,pickedLayer=pickInfo.pickedLayer,pickedObjectIndex=pickInfo.pickedObjectIndex,affectedLayers=pickedLayer?[pickedLayer]:[];if("hover"===mode){var lastPickedObjectIndex=lastPickedInfo.index,lastPickedLayerId=lastPickedInfo.layerId,pickedLayerId=pickedLayer&&pickedLayer.props.id;if(pickedLayerId!==lastPickedLayerId||pickedObjectIndex!==lastPickedObjectIndex){if(pickedLayerId!==lastPickedLayerId){var lastPickedLayer=layers.find(function(layer){return layer.props.id===lastPickedLayerId});lastPickedLayer&&affectedLayers.unshift(lastPickedLayer)}lastPickedInfo.layerId=pickedLayerId,lastPickedInfo.index=pickedObjectIndex,lastPickedInfo.info=null}}var viewport=function getViewportFromCoordinates(_ref3){return _ref3.viewports[0]}({viewports:viewports}),coordinate=viewport&&viewport.unproject([x,y]),baseInfo={color:null,layer:null,index:-1,picked:!1,x:x,y:y,pixel:[x,y],coordinate:coordinate,lngLat:coordinate,devicePixel:[deviceX,deviceY],pixelRatio:pixelRatio},infos=new Map;return infos.set(null,baseInfo),affectedLayers.forEach(function(layer){var info=Object.assign({},baseInfo);if(layer===pickedLayer&&(info.color=pickedColor,info.index=pickedObjectIndex,info.picked=!0),info=getLayerPickingInfo({layer:layer,info:info,mode:mode}),layer===pickedLayer&&"hover"===mode&&(lastPickedInfo.info=info),info&&infos.set(info.layer.id,info),"hover"===mode){var pickingSelectedColor=layer.props.autoHighlight&&pickedLayer===layer?pickedColor:null;layer.setModuleParameters({pickingSelectedColor:pickingSelectedColor}),layer.setNeedsRedraw()}}),infos}function getLayerPickingInfo(_ref2){for(var layer=_ref2.layer,info=_ref2.info,mode=_ref2.mode;layer&&info;){var sourceLayer=info.layer||layer;info.layer=layer,info=layer.pickLayer({info:info,mode:mode,sourceLayer:sourceLayer}),layer=layer.parent}return info}var deck_picker_DeckPicker=function(){function DeckPicker(gl){Object(classCallCheck.a)(this,DeckPicker),this.gl=gl,this.pickingFBO=null,this.pickLayersPass=new pick_layers_pass_PickLayersPass(gl),this.pixelRatio=null,this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return Object(createClass.a)(DeckPicker,[{key:"setProps",value:function setProps(props){"useDevicePixels"in props&&(this.pixelRatio=getPixelRatio(props.useDevicePixels)),"layerFilter"in props&&(this.layerFilter=props.layerFilter),this.pickLayersPass.setProps({pixelRatio:this.pixelRatio,layerFilter:this.layerFilter})}},{key:"pickObject",value:function pickObject(_ref){var x=_ref.x,y=_ref.y,mode=_ref.mode,_ref$radius=_ref.radius,radius=void 0===_ref$radius?0:_ref$radius,layers=_ref.layers,viewports=_ref.viewports,activateViewport=_ref.activateViewport,_ref$depth=_ref.depth,depth=void 0===_ref$depth?1:_ref$depth,_ref$event=_ref.event,event=void 0===_ref$event?null:_ref$event;this.pickingEvent=event;var result=this.pickClosestObject({x:x,y:y,radius:radius,layers:layers,mode:mode,depth:depth,viewports:viewports,onViewportActive:activateViewport});return this.pickingEvent=null,result}},{key:"pickObjects",value:function pickObjects(_ref2){var x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,layers=_ref2.layers,viewports=_ref2.viewports,activateViewport=_ref2.activateViewport;return this.pickVisibleObjects({x:x,y:y,width:width,height:height,layers:layers,mode:"pickObjects",viewports:viewports,onViewportActive:activateViewport})}},{key:"getLastPickedObject",value:function getLastPickedObject(_ref3){var x=_ref3.x,y=_ref3.y,layers=_ref3.layers,viewports=_ref3.viewports,lastPickedInfo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,lastPickedLayerId=lastPickedInfo&&lastPickedInfo.layer&&lastPickedInfo.layer.id,layer=lastPickedLayerId?layers.find(function(l){return l.id===lastPickedLayerId}):null,coordinate=viewports[0]&&viewports[0].unproject([x,y]),info={x:x,y:y,coordinate:coordinate,lngLat:coordinate,layer:layer};return layer?Object.assign({},lastPickedInfo,info):Object.assign(info,{color:null,object:null,index:-1})}},{key:"updatePickingBuffer",value:function updatePickingBuffer(){var gl=this.gl;return this.pickingFBO||(this.pickingFBO=new esm.g(gl)),this.pickingFBO.resize({width:gl.canvas.width,height:gl.canvas.height}),this.pickingFBO}},{key:"pickClosestObject",value:function pickClosestObject(_ref4){var layers=_ref4.layers,viewports=_ref4.viewports,x=_ref4.x,y=_ref4.y,radius=_ref4.radius,_ref4$depth=_ref4.depth,depth=void 0===_ref4$depth?1:_ref4$depth,mode=_ref4.mode,onViewportActive=_ref4.onViewportActive;this.updatePickingBuffer();for(var infos,pixelRatio=this.pixelRatio,deviceX=Math.round(x*pixelRatio),deviceY=Math.round(this.gl.canvas.height-y*pixelRatio),deviceRadius=Math.round(radius*pixelRatio),_this$pickingFBO=this.pickingFBO,width=_this$pickingFBO.width,height=_this$pickingFBO.height,deviceRect=this.getPickingRect({deviceX:deviceX,deviceY:deviceY,deviceRadius:deviceRadius,deviceWidth:width,deviceHeight:height}),result=[],affectedLayers={},i=0;i<depth;i++){var pickInfo=getClosestObject({pickedColors:deviceRect&&this.drawAndSamplePickingBuffer({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,redrawReason:mode}),layers:layers,deviceX:deviceX,deviceY:deviceY,deviceRadius:deviceRadius,deviceRect:deviceRect});if(pickInfo.pickedColor&&i+1<depth){var layerId=pickInfo.pickedColor[3]-1;affectedLayers[layerId]||(affectedLayers[layerId]=layers[layerId].copyPickingColors()),layers[layerId].clearPickingColor(pickInfo.pickedColor)}infos=processPickInfo({pickInfo:pickInfo,lastPickedInfo:this.lastPickedInfo,mode:mode,layers:layers,viewports:viewports,x:x,y:y,deviceX:deviceX,deviceY:deviceY,pixelRatio:pixelRatio});var processedPickInfos=this.callLayerPickingCallbacks(infos,mode);if(processedPickInfos&&processedPickInfos.forEach(function(info){return result.push(info)}),!pickInfo.pickedColor)break}return Object.keys(affectedLayers).forEach(function(layerId){return layers[layerId].restorePickingColors(affectedLayers[layerId])}),{result:result,emptyInfo:infos&&infos.get(null)}}},{key:"pickVisibleObjects",value:function pickVisibleObjects(_ref5){var layers=_ref5.layers,viewports=_ref5.viewports,x=_ref5.x,y=_ref5.y,width=_ref5.width,height=_ref5.height,mode=_ref5.mode,onViewportActive=_ref5.onViewportActive;this.updatePickingBuffer();var pixelRatio=this.pixelRatio,deviceLeft=Math.round(x*pixelRatio),deviceBottom=Math.round(this.gl.canvas.height-y*pixelRatio),deviceRight=Math.round((x+width)*pixelRatio),deviceTop=Math.round(this.gl.canvas.height-(y+height)*pixelRatio),deviceRect={x:deviceLeft,y:deviceTop,width:deviceRight-deviceLeft,height:deviceBottom-deviceTop},pickInfos=function getUniqueObjects(_ref2){var pickedColors=_ref2.pickedColors,layers=_ref2.layers,uniqueColors=new Map;if(pickedColors)for(var i=0;i<pickedColors.length;i+=4){var pickedLayerIndex=pickedColors[i+3]-1;if(pickedLayerIndex>=0){var pickedColor=pickedColors.slice(i,i+4),colorKey=pickedColor.join(",");if(!uniqueColors.has(colorKey)){var pickedLayer=layers[pickedLayerIndex];pickedLayer?uniqueColors.set(colorKey,{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedLayer.decodePickingColor(pickedColor)}):utils_log.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(uniqueColors.values())}({pickedColors:this.drawAndSamplePickingBuffer({layers:layers,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,redrawReason:mode}),layers:layers}),uniqueInfos=new Map;return pickInfos.forEach(function(pickInfo){var info={color:pickInfo.pickedColor,layer:null,index:pickInfo.pickedObjectIndex,picked:!0,x:x,y:y,width:width,height:height,pixelRatio:pixelRatio};info=getLayerPickingInfo({layer:pickInfo.pickedLayer,info:info,mode:mode}),uniqueInfos.has(info.object)||uniqueInfos.set(info.object,info)}),Array.from(uniqueInfos.values())}},{key:"drawAndSamplePickingBuffer",value:function drawAndSamplePickingBuffer(_ref6){var layers=_ref6.layers,viewports=_ref6.viewports,onViewportActive=_ref6.onViewportActive,deviceRect=_ref6.deviceRect,redrawReason=_ref6.redrawReason;if(assert(deviceRect),assert(Number.isFinite(deviceRect.width)&&deviceRect.width>0,"`width` must be > 0"),assert(Number.isFinite(deviceRect.height)&&deviceRect.height>0,"`height` must be > 0"),layers.filter(function(layer){return layer.isPickable()}).length<1)return null;var pickingFBO=this.pickingFBO;this.pickLayersPass.render({layers:layers,viewports:viewports,onViewportActive:onViewportActive,pickingFBO:pickingFBO,deviceRect:deviceRect,redrawReason:redrawReason,effectProps:{lightSources:{}}});var x=deviceRect.x,y=deviceRect.y,width=deviceRect.width,height=deviceRect.height,pickedColors=new Uint8Array(width*height*4);return Object(esm.x)(pickingFBO,{sourceX:x,sourceY:y,sourceWidth:width,sourceHeight:height,target:pickedColors}),pickedColors}},{key:"getPickingRect",value:function getPickingRect(_ref7){var deviceX=_ref7.deviceX,deviceY=_ref7.deviceY,deviceRadius=_ref7.deviceRadius,deviceWidth=_ref7.deviceWidth,deviceHeight=_ref7.deviceHeight;if(!(deviceX>=0&&deviceY>=0&&deviceX<deviceWidth&&deviceY<deviceHeight))return null;var x=Math.max(0,deviceX-deviceRadius),y=Math.max(0,deviceY-deviceRadius);return{x:x,y:y,width:Math.min(deviceWidth,deviceX+deviceRadius)-x+1,height:Math.min(deviceHeight,deviceY+deviceRadius)-y+1}}},{key:"callLayerPickingCallbacks",value:function callLayerPickingCallbacks(infos,mode){var unhandledPickInfos=[],pickingEvent=this.pickingEvent;return infos.forEach(function(info){if(info.layer){var handled=!1;switch(mode){case"hover":handled=info.layer.onHover(info,pickingEvent);break;case"query":break;default:throw new Error("unknown pick type")}handled||unhandledPickInfos.push(info)}}),unhandledPickInfos}}]),DeckPicker}(),dist_esm=__webpack_require__(147);function deck_noop(){}var deck_defaultProps={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,_animate:!1,onWebGLInitialized:deck_noop,onResize:deck_noop,onViewStateChange:deck_noop,onBeforeRender:deck_noop,onAfterRender:deck_noop,onLoad:deck_noop,_onMetrics:null,getCursor:function getCursor(_ref){return _ref.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},deck_Deck=function(){function Deck(props){Object(classCallCheck.a)(this,Deck),props=Object.assign({},deck_defaultProps,props),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=props.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),props.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(props)),this.animationLoop=this._createAnimationLoop(props),this.stats=new lib_stats.a({id:"deck.gl"}),this.setProps(props),this.animationLoop.start()}return Object(createClass.a)(Deck,[{key:"finalize",value:function finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.eventManager&&this.eventManager.destroy(),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function setProps(props){this.stats.get("setProps Time").timeStart(),"onLayerHover"in props&&utils_log.removed("onLayerHover","onHover")(),"onLayerClick"in props&&utils_log.removed("onLayerClick","onClick")(),props=Object.assign({},this.props,props),this.props=props,this._setCanvasSize(props);var newProps=Object.assign({},props,{views:this._getViews(props),width:this.width,height:this.height}),viewState=this._getViewState(props);viewState&&(newProps.viewState=viewState),this.viewManager&&this.viewManager.setProps(newProps),this.layerManager&&this.layerManager.setProps(newProps),this.effectManager&&this.effectManager.setProps(newProps),this.animationLoop&&this.animationLoop.setProps(newProps),this.deckRenderer&&this.deckRenderer.setProps(newProps),this.deckPicker&&this.deckPicker.setProps(newProps),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function needsRedraw(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);var viewManagerNeedsRedraw=this.viewManager.needsRedraw(opts),layerManagerNeedsRedraw=this.layerManager.needsRedraw(opts),effectManagerNeedsRedraw=this.effectManager.needsRedraw(opts),deckRendererNeedsRedraw=this.deckRenderer.needsRedraw(opts);return redraw=redraw||viewManagerNeedsRedraw||layerManagerNeedsRedraw||effectManagerNeedsRedraw||deckRendererNeedsRedraw}},{key:"redraw",value:function redraw(force){if(this.layerManager){var redrawReason=force||this.needsRedraw({clearRedrawFlags:!0});redrawReason&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(redrawReason):this._drawLayers(redrawReason))}}},{key:"getViews",value:function getViews(){return this.viewManager.views}},{key:"getViewports",value:function getViewports(rect){return this.viewManager.getViewports(rect)}},{key:"pickObject",value:function pickObject(_ref2){var x=_ref2.x,y=_ref2.y,_ref2$radius=_ref2.radius,radius=void 0===_ref2$radius?0:_ref2$radius,_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds;this.stats.get("pickObject Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,selectedInfos=this.deckPicker.pickObject({x:x,y:y,radius:radius,layers:layers,viewports:this.getViewports({x:x,y:y}),activateViewport:activateViewport,mode:"query",depth:1}).result;return this.stats.get("pickObject Time").timeEnd(),selectedInfos.length?selectedInfos[0]:null}},{key:"pickMultipleObjects",value:function pickMultipleObjects(_ref3){var x=_ref3.x,y=_ref3.y,_ref3$radius=_ref3.radius,radius=void 0===_ref3$radius?0:_ref3$radius,_ref3$layerIds=_ref3.layerIds,layerIds=void 0===_ref3$layerIds?null:_ref3$layerIds,_ref3$depth=_ref3.depth,depth=void 0===_ref3$depth?10:_ref3$depth;this.stats.get("pickMultipleObjects Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,selectedInfos=this.deckPicker.pickObject({x:x,y:y,radius:radius,layers:layers,viewports:this.getViewports({x:x,y:y}),activateViewport:activateViewport,mode:"query",depth:depth}).result;return this.stats.get("pickMultipleObjects Time").timeEnd(),selectedInfos}},{key:"pickObjects",value:function pickObjects(_ref4){var x=_ref4.x,y=_ref4.y,_ref4$width=_ref4.width,width=void 0===_ref4$width?1:_ref4$width,_ref4$height=_ref4.height,height=void 0===_ref4$height?1:_ref4$height,_ref4$layerIds=_ref4.layerIds,layerIds=void 0===_ref4$layerIds?null:_ref4$layerIds;this.stats.get("pickObjects Time").timeStart();var layers=this.layerManager.getLayers({layerIds:layerIds}),activateViewport=this.layerManager.activateViewport,infos=this.deckPicker.pickObjects({x:x,y:y,width:width,height:height,layers:layers,viewports:this.getViewports({x:x,y:y,width:width,height:height}),activateViewport:activateViewport});return this.stats.get("pickObjects Time").timeEnd(),infos}},{key:"_createCanvas",value:function _createCanvas(props){var canvas=props.canvas;("string"==typeof canvas&&assert(canvas=document.getElementById(canvas)),canvas)||(canvas=document.createElement("canvas"),(props.parent||document.body).appendChild(canvas));var id=props.id,style=props.style;return canvas.id=id,Object.assign(canvas.style,style),canvas}},{key:"_setCanvasSize",value:function _setCanvasSize(props){if(this.canvas){var width=props.width,height=props.height;(width||0===width)&&(width=Number.isFinite(width)?"".concat(width,"px"):width,this.canvas.style.width=width),(height||0===height)&&(height=Number.isFinite(height)?"".concat(height,"px"):height,this.canvas.style.position="absolute",this.canvas.style.height=height)}}},{key:"_updateCanvasSize",value:function _updateCanvasSize(){if(this._checkForCanvasSizeChange()){var width=this.width,height=this.height;this.viewManager.setProps({width:width,height:height}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function _checkForCanvasSizeChange(){var canvas=this.canvas;if(!canvas)return!1;var newWidth=canvas.clientWidth||canvas.width,newHeight=canvas.clientHeight||canvas.height;return(newWidth!==this.width||newHeight!==this.height)&&(this.width=newWidth,this.height=newHeight,!0)}},{key:"_createAnimationLoop",value:function _createAnimationLoop(props){var _this=this,width=props.width,height=props.height,gl=props.gl,glOptions=props.glOptions,debug=props.debug,useDevicePixels=props.useDevicePixels,autoResizeDrawingBuffer=props.autoResizeDrawingBuffer;return new esm.b({width:width,height:height,useDevicePixels:useDevicePixels,autoResizeDrawingBuffer:autoResizeDrawingBuffer,gl:gl,onCreateContext:function onCreateContext(opts){return Object(esm.p)(Object.assign({},glOptions,opts,{canvas:_this.canvas,debug:debug}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:props.onBeforeRender,onAfterRender:props.onAfterRender})}},{key:"_getViewState",value:function _getViewState(props){return props.viewState||this.viewState}},{key:"_getViews",value:function _getViews(props){var views=props.views||[new map_view_MapView({id:"default-view"})];return(views=Array.isArray(views)?views:[views]).length&&props.controller&&(views[0].props.controller=props.controller),views}},{key:"_requestPick",value:function _requestPick(_ref5){var event=_ref5.event,callback=_ref5.callback,mode=_ref5.mode,_pickRequest=this._pickRequest;if("pointerleave"===event.type)_pickRequest.x=-1,_pickRequest.y=-1,_pickRequest.radius=0;else{var pos=event.offsetCenter;if(!pos)return;_pickRequest.x=pos.x,_pickRequest.y=pos.y,_pickRequest.radius=this.props.pickingRadius}_pickRequest.callback=callback,_pickRequest.event=event,_pickRequest.mode=mode}},{key:"_pickAndCallback",value:function _pickAndCallback(){var _pickRequest=this._pickRequest;if(_pickRequest.mode){var _this$deckPicker$pick=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(_pickRequest),activateViewport:this.layerManager.activateViewport,depth:1},_pickRequest)),result=_this$deckPicker$pick.result,emptyInfo=_this$deckPicker$pick.emptyInfo;if(_pickRequest.callback){var pickedInfo=result.find(function(info){return info.index>=0})||emptyInfo;_pickRequest.callback(pickedInfo,_pickRequest.event)}_pickRequest.mode=null}}},{key:"_updateCursor",value:function _updateCursor(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function _updateAnimationProps(animationProps){this.layerManager.context.animationProps=animationProps}},{key:"_setGLContext",value:function _setGLContext(gl){if(!this.layerManager){for(var eventType in this.canvas||(this.canvas=gl.canvas,Object(esm.C)(gl,{enable:!0,copyState:!0})),Object(esm.B)(gl,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(gl),this.eventManager=new dist_esm.a(gl.canvas,{events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),EVENTS)this.eventManager.on(eventType,this._onEvent);this.viewManager=new view_manager_ViewManager({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),assert(this.viewManager);var viewport=this.viewManager.getViewports()[0];this.layerManager=new layer_manager_LayerManager(gl,{deck:this,stats:this.stats,viewport:viewport}),this.effectManager=new effect_manager_EffectManager,this.deckRenderer=new deck_renderer_DeckRenderer(gl),this.deckPicker=new deck_picker_DeckPicker(gl),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function _drawLayers(redrawReason,renderOptions){var gl=this.layerManager.context.gl;Object(esm.B)(gl,this.props.parameters),this.props.onBeforeRender({gl:gl});var layers=this.layerManager.getLayers(),activateViewport=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:layers,viewports:this.viewManager.getViewports(),activateViewport:activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:redrawReason,effects:this.effectManager.getEffects()},renderOptions)),this.props.onAfterRender({gl:gl})}},{key:"_onRendererInitialized",value:function _onRendererInitialized(_ref6){var gl=_ref6.gl;this._setGLContext(gl)}},{key:"_onRenderFrame",value:function _onRenderFrame(animationProps){if(this.stats.get("frameRate").timeEnd(),this.stats.get("frameRate").timeStart(),animationProps.tick%60==0){var table={};this.stats.forEach(function(stat){table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}}),this.stats.reset(),utils_log.table(3,table)(),this.props._onMetrics&&this.props._onMetrics(table)}this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(animationProps),this._updateAnimationProps(animationProps),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates(animationProps)}},{key:"_onViewStateChange",value:function _onViewStateChange(params){var viewState=this.props.onViewStateChange(params)||params.viewState;this.viewState&&(this.viewState[params.viewId]=viewState,this.viewManager.setProps({viewState:viewState}))}},{key:"_onInteractiveStateChange",value:function _onInteractiveStateChange(_ref7){var _ref7$isDragging=_ref7.isDragging,isDragging=void 0!==_ref7$isDragging&&_ref7$isDragging;isDragging!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=isDragging)}},{key:"_onEvent",value:function _onEvent(event){var eventOptions=EVENTS[event.type],pos=event.offsetCenter;if(eventOptions&&pos){var layers=this.layerManager.getLayers(),info=this.deckPicker.getLastPickedObject({x:pos.x,y:pos.y,layers:layers,viewports:this.getViewports(pos)},this._lastPointerDownInfo),layer=info.layer,layerHandler=layer&&(layer[eventOptions.handler]||layer.props[eventOptions.handler]),rootHandler=this.props[eventOptions.handler],handled=!1;layerHandler&&(handled=layerHandler.call(layer,info,event)),!handled&&rootHandler&&rootHandler(info,event)}}},{key:"_onPointerDown",value:function _onPointerDown(event){var pos=event.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:pos.x,y:pos.y})}},{key:"_onPointerMove",value:function _onPointerMove(event){event.leftButton||event.rightButton||this._requestPick({callback:this.props.onHover,event:event,mode:"hover"})}},{key:"_onPointerLeave",value:function _onPointerLeave(event){this._requestPick({callback:this.props.onHover,event:event,mode:"hover"})}}]),Deck}();deck_Deck.getPropTypes=function deck_getPropTypes(PropTypes){return{id:PropTypes.string,width:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),height:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),layers:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),layerFilter:PropTypes.func,views:PropTypes.oneOfType([PropTypes.object,PropTypes.array]),viewState:PropTypes.object,effects:PropTypes.arrayOf(PropTypes.instanceOf(effect_Effect)),controller:PropTypes.oneOfType([PropTypes.func,PropTypes.bool,PropTypes.object]),gl:PropTypes.object,glOptions:PropTypes.object,parameters:PropTypes.object,pickingRadius:PropTypes.number,useDevicePixels:PropTypes.bool,onWebGLInitialized:PropTypes.func,onResize:PropTypes.func,onViewStateChange:PropTypes.func,onBeforeRender:PropTypes.func,onAfterRender:PropTypes.func,onLoad:PropTypes.func,debug:PropTypes.bool,drawPickingColors:PropTypes.bool,_animate:PropTypes.bool}},deck_Deck.defaultProps=deck_defaultProps;function ensureFinite(value,fallbackValue){return Number.isFinite(value)?value:fallbackValue}var first_person_controller_FirstPersonState=function(_ViewState){function FirstPersonState(_ref){var _this,width=_ref.width,height=_ref.height,position=_ref.position,bearing=_ref.bearing,pitch=_ref.pitch,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,startPanEventPosition=(_ref.syncBearing,_ref.bounds,_ref.startPanEventPosition),startPanPosition=_ref.startPanPosition,startRotateCenter=_ref.startRotateCenter,startRotateViewport=_ref.startRotateViewport,startZoomPos=_ref.startZoomPos,startZoom=_ref.startZoom;return Object(classCallCheck.a)(this,FirstPersonState),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FirstPersonState).call(this,{width:width,height:height,position:position,bearing:bearing,pitch:pitch,longitude:longitude,latitude:latitude,zoom:zoom})))._interactiveState={startPanEventPosition:startPanEventPosition,startPanPosition:startPanPosition,startRotateCenter:startRotateCenter,startRotateViewport:startRotateViewport,startZoomPos:startZoomPos,startZoom:startZoom},_this}return Object(inherits.a)(FirstPersonState,_ViewState),Object(createClass.a)(FirstPersonState,[{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos,_this$_viewportProps=this._viewportProps,translationX=_this$_viewportProps.translationX,translationY=_this$_viewportProps.translationY;return this._getUpdatedState({startPanPosition:[translationX,translationY],startPanEventPosition:pos})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanEventPosition=this._interactiveState.startPanEventPosition||startPos;if(!startPanEventPosition)return this;var _ref4=this._interactiveState.startPanPosition||[],_ref5=Object(slicedToArray.a)(_ref4,2),translationX=_ref5[0],translationY=_ref5[1];translationX=ensureFinite(translationX,this._viewportProps.translationX),translationY=ensureFinite(translationY,this._viewportProps.translationY);var deltaX=pos[0]-startPanEventPosition[0],deltaY=pos[1]-startPanEventPosition[1];return this._getUpdatedState({translationX:translationX+deltaX,translationY:translationY-deltaY})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function rotateStart(_ref6){_ref6.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function rotate(_ref7){var deltaScaleX=_ref7.deltaScaleX,deltaScaleY=_ref7.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var _this$_viewportProps2=this._viewportProps,bearing=_this$_viewportProps2.bearing,pitch=_this$_viewportProps2.pitch;return this._getUpdatedState({bearing:bearing+10*deltaScaleX,pitch:pitch-10*deltaScaleY})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function zoomStart(_ref8){var pos=_ref8.pos;return this._getUpdatedState({startZoomPos:pos,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref9){var pos=_ref9.pos,startPos=_ref9.startPos,scale=_ref9.scale,_this$_viewportProps3=this._viewportProps,zoom=_this$_viewportProps3.zoom,minZoom=_this$_viewportProps3.minZoom,maxZoom=_this$_viewportProps3.maxZoom,width=_this$_viewportProps3.width,height=_this$_viewportProps3.height,startZoomPos=(_this$_viewportProps3.translationX,_this$_viewportProps3.translationY,this._interactiveState.startZoomPos||startPos||pos),newZoom=Object(common.b)(zoom*scale,minZoom,maxZoom);pos[0],startZoomPos[0],pos[1],startZoomPos[1],startZoomPos[0],startZoomPos[1];return newZoom/zoom<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function moveLeft(){var newBearing=this._viewportProps.bearing-2;return this._getUpdatedState({bearing:newBearing})}},{key:"moveRight",value:function moveRight(){var newBearing=this._viewportProps.bearing+2;return this._getUpdatedState({bearing:newBearing})}},{key:"moveForward",value:function moveForward(){var position=this._viewportProps.position,direction=this.getDirection(),delta=new vector3.a(direction).normalize().scale(1);return this._getUpdatedState({position:new vector3.a(position).add(delta)})}},{key:"moveBackward",value:function moveBackward(){var position=this._viewportProps.position,direction=this.getDirection(),delta=new vector3.a(direction).normalize().scale(-1);return this._getUpdatedState({position:new vector3.a(position).add(delta)})}},{key:"moveUp",value:function moveUp(){var position=this._viewportProps.position;return this._getUpdatedState({position:new vector3.a(position).add([0,0,1])})}},{key:"moveDown",value:function moveDown(){var position=this._viewportProps.position,delta=position[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new vector3.a(position).add(delta)})}},{key:"zoomIn",value:function zoomIn(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function zoomOut(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function _getUpdatedState(newProps){return new FirstPersonState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}}]),FirstPersonState}(view_state_ViewState),first_person_controller_FirstPersonController=function(_Controller){function FirstPersonController(props){return Object(classCallCheck.a)(this,FirstPersonController),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FirstPersonController).call(this,first_person_controller_FirstPersonState,props))}return Object(inherits.a)(FirstPersonController,_Controller),FirstPersonController}(controller_Controller);(function(_View){function FirstPersonView(){return Object(classCallCheck.a)(this,FirstPersonView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FirstPersonView).apply(this,arguments))}return Object(inherits.a)(FirstPersonView,_View),Object(createClass.a)(FirstPersonView,[{key:"_getViewport",value:function _getViewport(props){var _props$viewState=props.viewState,_props$viewState$mode=_props$viewState.modelMatrix,modelMatrix=void 0===_props$viewState$mode?null:_props$viewState$mode,bearing=_props$viewState.bearing,_props$viewState$up=_props$viewState.up,up=void 0===_props$viewState$up?[0,0,1]:_props$viewState$up,dir=function getDirectionFromBearingAndPitch(_ref){var bearing=_ref.bearing,pitch=_ref.pitch;return new spherical_coordinates_SphericalCoordinates({bearing:bearing,pitch:pitch}).toVector3().normalize()}({bearing:bearing,pitch:89}),center=modelMatrix?modelMatrix.transformDirection(dir):dir,viewMatrix=(new matrix4.a).lookAt({eye:[0,0,0],center:center,up:up});return new viewport_Viewport(Object.assign({},props,{zoom:null,viewMatrix:viewMatrix}))}},{key:"controller",get:function get(){return this._getControllerProps({type:first_person_controller_FirstPersonController})}}]),FirstPersonView}(view_View)).displayName="FirstPersonView",(function(_View){function ThirdPersonView(){return Object(classCallCheck.a)(this,ThirdPersonView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ThirdPersonView).apply(this,arguments))}return Object(inherits.a)(ThirdPersonView,_View),Object(createClass.a)(ThirdPersonView,[{key:"_getViewport",value:function _getViewport(props){var _props$viewState=props.viewState,bearing=_props$viewState.bearing,pitch=_props$viewState.pitch,position=_props$viewState.position,up=_props$viewState.up,distance=50*_props$viewState.zoom,eye=function third_person_view_getDirectionFromBearingAndPitch(_ref){var bearing=_ref.bearing,pitch=_ref.pitch;return new spherical_coordinates_SphericalCoordinates({bearing:bearing,pitch:pitch}).toVector3().normalize()}({bearing:bearing,pitch:pitch}).scale(-distance).multiply(new vector3.a(1,1,-1)),viewMatrix=(new matrix4.a).multiplyRight((new matrix4.a).lookAt({eye:eye,center:position,up:up}));return new viewport_Viewport(Object.assign({},props,{id:this.id,zoom:null,viewMatrix:viewMatrix}))}}]),ThirdPersonView}(view_View)).displayName="ThirdPersonView";var vector2=__webpack_require__(192),orbit_controller_DEFAULT_STATE={orbitAxis:"Z",rotationX:0,rotationOrbit:0,fovy:50,zoom:0,target:[0,0,0],minZoom:-1/0,maxZoom:1/0},orbit_controller_LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:TRANSITION_EVENTS_BREAK},zoom2Scale=function zoom2Scale(zoom){return Math.pow(2,zoom)},orbit_controller_OrbitState=function(_ViewState){function OrbitState(_ref){var _this,ViewportType=_ref.ViewportType,width=_ref.width,height=_ref.height,_ref$orbitAxis=_ref.orbitAxis,orbitAxis=void 0===_ref$orbitAxis?orbit_controller_DEFAULT_STATE.orbitAxis:_ref$orbitAxis,_ref$rotationX=_ref.rotationX,rotationX=void 0===_ref$rotationX?orbit_controller_DEFAULT_STATE.rotationX:_ref$rotationX,_ref$rotationOrbit=_ref.rotationOrbit,rotationOrbit=void 0===_ref$rotationOrbit?orbit_controller_DEFAULT_STATE.rotationOrbit:_ref$rotationOrbit,_ref$target=_ref.target,target=void 0===_ref$target?orbit_controller_DEFAULT_STATE.target:_ref$target,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?orbit_controller_DEFAULT_STATE.zoom:_ref$zoom,_ref$fovy=_ref.fovy,fovy=void 0===_ref$fovy?orbit_controller_DEFAULT_STATE.fovy:_ref$fovy,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?orbit_controller_DEFAULT_STATE.minZoom:_ref$minZoom,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?orbit_controller_DEFAULT_STATE.maxZoom:_ref$maxZoom,startPanPosition=_ref.startPanPosition,startTarget=_ref.startTarget,startRotationX=_ref.startRotationX,startRotationOrbit=_ref.startRotationOrbit,startZoomPosition=_ref.startZoomPosition,startZoom=_ref.startZoom;return Object(classCallCheck.a)(this,OrbitState),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(OrbitState).call(this,{width:width,height:height,orbitAxis:orbitAxis,rotationX:rotationX,rotationOrbit:rotationOrbit,target:target,fovy:fovy,zoom:zoom,minZoom:minZoom,maxZoom:maxZoom})))._interactiveState={startPanPosition:startPanPosition,startTarget:startTarget,startRotationX:startRotationX,startRotationOrbit:startRotationOrbit,startZoomPosition:startZoomPosition,startZoom:startZoom},_this.ViewportType=ViewportType,_this}return Object(inherits.a)(OrbitState,_ViewState),Object(createClass.a)(OrbitState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos,target=this._viewportProps.target;return this._getUpdatedState({startPanPosition:pos,startTarget:target})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,_this$_interactiveSta=(_ref3.startPos,this._interactiveState),startPanPosition=_this$_interactiveSta.startPanPosition,startTarget=_this$_interactiveSta.startTarget,delta=new vector2.a(pos).subtract(startPanPosition);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:startTarget,pixelOffset:delta})})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function rotate(_ref5){var deltaScaleX=_ref5.deltaScaleX,deltaScaleY=_ref5.deltaScaleY,_this$_interactiveSta2=this._interactiveState,startRotationX=_this$_interactiveSta2.startRotationX,startRotationOrbit=_this$_interactiveSta2.startRotationOrbit;if(!Number.isFinite(startRotationX)||!Number.isFinite(startRotationOrbit))return this;var newRotationX=Object(common.b)(startRotationX+180*deltaScaleY,-89.999,89.999),newRotationOrbit=(startRotationOrbit+180*deltaScaleX)%360;return this._getUpdatedState({rotationX:newRotationX,rotationOrbit:newRotationOrbit,isRotating:!0})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function shortestPathFrom(viewState){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedState({startZoomPosition:pos,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale,_this$_viewportProps=this._viewportProps,zoom=_this$_viewportProps.zoom,width=_this$_viewportProps.width,height=_this$_viewportProps.height,target=_this$_viewportProps.target,_this$_interactiveSta3=this._interactiveState,startZoom=_this$_interactiveSta3.startZoom,startZoomPosition=_this$_interactiveSta3.startZoomPosition,startTarget=_this$_interactiveSta3.startTarget;Number.isFinite(startZoom)||(startZoom=zoom,startTarget=target,startZoomPosition=startPos||pos);var newZoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),startScale=zoom2Scale(startZoom),newScale=zoom2Scale(newZoom),dX=(width/2-startZoomPosition[0])*(newScale/startScale-1),dY=(height/2-startZoomPosition[1])*(newScale/startScale-1);return this._getUpdatedState({zoom:newZoom,target:this._calculateNewTarget({startTarget:startTarget,zoom:newZoom,pixelOffset:[dX,dY]})})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function zoomIn(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function zoomOut(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function moveLeft(){var pixelOffset=[-50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"moveRight",value:function moveRight(){var pixelOffset=[50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"moveUp",value:function moveUp(){var pixelOffset=[0,-50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"moveDown",value:function moveDown(){var pixelOffset=[0,50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:pixelOffset})})}},{key:"rotateLeft",value:function rotateLeft(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function rotateRight(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function rotateUp(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function rotateDown(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref8){var scale=_ref8.scale,startZoom=_ref8.startZoom,_this$_viewportProps2=this._viewportProps,maxZoom=_this$_viewportProps2.maxZoom,minZoom=_this$_viewportProps2.minZoom;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom);var zoom=startZoom+Math.log2(scale);return Object(common.b)(zoom,minZoom,maxZoom)}},{key:"_calculateNewTarget",value:function _calculateNewTarget(_ref9){var startTarget=_ref9.startTarget,zoom=_ref9.zoom,pixelOffset=_ref9.pixelOffset,viewportProps=Object.assign({},this._viewportProps);Number.isFinite(zoom)&&(viewportProps.zoom=zoom),startTarget&&(viewportProps.target=startTarget);var viewport=new this.ViewportType(viewportProps),center=viewport.project(viewportProps.target);return viewport.unproject([center[0]-pixelOffset[0],center[1]-pixelOffset[1],center[2]])}},{key:"_getUpdatedState",value:function _getUpdatedState(newProps){return new OrbitState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;return props.zoom=zoom>maxZoom?maxZoom:zoom,props.zoom=zoom<minZoom?minZoom:zoom,props}}]),OrbitState}(view_state_ViewState),orbit_controller_OrbitController=function(_Controller){function OrbitController(props){return Object(classCallCheck.a)(this,OrbitController),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(OrbitController).call(this,orbit_controller_OrbitState,props))}return Object(inherits.a)(OrbitController,_Controller),Object(createClass.a)(OrbitController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return orbit_controller_LINEAR_TRANSITION_PROPS}}]),OrbitController}(controller_Controller),orbit_view_DEGREES_TO_RADIANS=Math.PI/180;function getViewMatrix(_ref){var height=_ref.height,fovy=_ref.fovy,orbitAxis=_ref.orbitAxis,rotationX=_ref.rotationX,rotationOrbit=_ref.rotationOrbit,distance=(_ref.zoom,.5/Math.tan(fovy*orbit_view_DEGREES_TO_RADIANS/2)),viewMatrix=(new matrix4.a).lookAt({eye:[0,0,distance]});viewMatrix.rotateX(rotationX*orbit_view_DEGREES_TO_RADIANS),"Z"===orbitAxis?viewMatrix.rotateZ(rotationOrbit*orbit_view_DEGREES_TO_RADIANS):viewMatrix.rotateY(rotationOrbit*orbit_view_DEGREES_TO_RADIANS);var projectionScale=1/(height||1);return viewMatrix.scale([projectionScale,projectionScale,projectionScale]),viewMatrix}var orbit_view_OrbitViewport=function(_Viewport){function OrbitViewport(props){Object(classCallCheck.a)(this,OrbitViewport);var id=props.id,x=props.x,y=props.y,width=props.width,height=props.height,_props$fovy=props.fovy,fovy=void 0===_props$fovy?50:_props$fovy,near=props.near,far=props.far,_props$orbitAxis=props.orbitAxis,orbitAxis=void 0===_props$orbitAxis?"Z":_props$orbitAxis,_props$target=props.target,target=void 0===_props$target?[0,0,0]:_props$target,_props$rotationX=props.rotationX,rotationX=void 0===_props$rotationX?0:_props$rotationX,_props$rotationOrbit=props.rotationOrbit,rotationOrbit=void 0===_props$rotationOrbit?0:_props$rotationOrbit,_props$zoom=props.zoom,zoom=void 0===_props$zoom?0:_props$zoom;return Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(OrbitViewport).call(this,{id:id,viewMatrix:getViewMatrix({height:height,fovy:fovy,orbitAxis:orbitAxis,rotationX:rotationX,rotationOrbit:rotationOrbit,zoom:zoom}),fovy:fovy,near:near,far:far,x:x,y:y,position:target,width:width,height:height,zoom:zoom}))}return Object(inherits.a)(OrbitViewport,_Viewport),OrbitViewport}(viewport_Viewport);(function(_View){function OrbitView(props){return Object(classCallCheck.a)(this,OrbitView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(OrbitView).call(this,Object.assign({},props,{type:orbit_view_OrbitViewport})))}return Object(inherits.a)(OrbitView,_View),Object(createClass.a)(OrbitView,[{key:"controller",get:function get(){return this._getControllerProps({type:orbit_controller_OrbitController,ViewportType:orbit_view_OrbitViewport})}}]),OrbitView}(view_View)).displayName="OrbitView";var perspective_view_DEGREES_TO_RADIANS=Math.PI/180;(function(_View){function PerspectiveView(){return Object(classCallCheck.a)(this,PerspectiveView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PerspectiveView).apply(this,arguments))}return Object(inherits.a)(PerspectiveView,_View),Object(createClass.a)(PerspectiveView,[{key:"_getViewport",value:function _getViewport(props){var x=props.x,y=props.y,width=props.width,height=props.height,viewState=props.viewState,eye=viewState.eye,_viewState$lookAt=viewState.lookAt,lookAt=void 0===_viewState$lookAt?[0,0,0]:_viewState$lookAt,_viewState$up=viewState.up,up=void 0===_viewState$up?[0,1,0]:_viewState$up,fovy=props.fovy||viewState.fovy||75,near=props.near||viewState.near||1,far=props.far||viewState.far||100,aspect=Number.isFinite(viewState.aspect)?viewState.aspect:width/height,fovyRadians=fovy*perspective_view_DEGREES_TO_RADIANS;return new viewport_Viewport({id:this.id,x:x,y:y,width:width,height:height,viewMatrix:mat4.f([],eye,lookAt,up),projectionMatrix:mat4.i([],fovyRadians,aspect,near,far)})}}]),PerspectiveView}(view_View)).displayName="PerspectiveView";var orthographic_controller_LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator(["target","zoom"]),transitionInterruption:TRANSITION_EVENTS_BREAK},orthographic_controller_OrthographicController=function(_Controller){function OrthographicController(props){var _this;return Object(classCallCheck.a)(this,OrthographicController),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(OrthographicController).call(this,orbit_controller_OrbitState,props))).invertPan=!0,_this}return Object(inherits.a)(OrthographicController,_Controller),Object(createClass.a)(OrthographicController,[{key:"_onPanRotate",value:function _onPanRotate(event){return!1}},{key:"_getTransitionProps",value:function _getTransitionProps(){return orthographic_controller_LINEAR_TRANSITION_PROPS}}]),OrthographicController}(controller_Controller),orthographic_view_viewMatrix=(new matrix4.a).lookAt({eye:[0,0,1]});function getProjectionMatrix(_ref){var width=_ref.width,height=_ref.height,near=_ref.near,far=_ref.far;return width=width||1,height=height||1,(new matrix4.a).ortho({left:-width/2,right:width/2,bottom:height/2,top:-height/2,near:near,far:far})}var orthographic_view_OrthographicViewport=function(_Viewport){function OrthographicViewport(_ref2){var id=_ref2.id,x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,_ref2$near=_ref2.near,near=void 0===_ref2$near?.1:_ref2$near,_ref2$far=_ref2.far,far=void 0===_ref2$far?1e3:_ref2$far,_ref2$zoom=_ref2.zoom,zoom=void 0===_ref2$zoom?0:_ref2$zoom,_ref2$target=_ref2.target,target=void 0===_ref2$target?[0,0,0]:_ref2$target;return Object(classCallCheck.a)(this,OrthographicViewport),Object(possibleConstructorReturn.a)(void 0,new viewport_Viewport({id:id,x:x,y:y,width:width,height:height,position:target,viewMatrix:orthographic_view_viewMatrix,projectionMatrix:getProjectionMatrix({width:width,height:height,near:near,far:far}),zoom:zoom}))}return Object(inherits.a)(OrthographicViewport,_Viewport),OrthographicViewport}(viewport_Viewport);(function(_View){function OrthographicView(props){return Object(classCallCheck.a)(this,OrthographicView),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(OrthographicView).call(this,Object.assign({},props,{type:orthographic_view_OrthographicViewport})))}return Object(inherits.a)(OrthographicView,_View),Object(createClass.a)(OrthographicView,[{key:"controller",get:function get(){return this._getControllerProps({type:orthographic_controller_OrthographicController,ViewportType:orthographic_view_OrthographicViewport})}}]),OrthographicView}(view_View)).displayName="OrthographicView";var fly_to_viewport=__webpack_require__(537),LINEARLY_INTERPOLATED_PROPS=["bearing","pitch"],tesselator_TypedArrayManager=(function(_TransitionInterpolat){function FlyToInterpolator(){return Object(classCallCheck.a)(this,FlyToInterpolator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FlyToInterpolator).call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}))}Object(inherits.a)(FlyToInterpolator,_TransitionInterpolat),Object(createClass.a)(FlyToInterpolator,[{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){for(var viewport=Object(fly_to_viewport.a)(startProps,endProps,t),_i=0;_i<LINEARLY_INTERPOLATED_PROPS.length;_i++){var key=LINEARLY_INTERPOLATED_PROPS[_i];viewport[key]=Object(common.g)(startProps[key]||0,endProps[key]||0,t)}return viewport}}])}(transition_interpolator_TransitionInterpolator),function(){function TypedArrayManager(){var _ref$overAlloc=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overAlloc,overAlloc=void 0===_ref$overAlloc?1:_ref$overAlloc;Object(classCallCheck.a)(this,TypedArrayManager),this.overAlloc=overAlloc}return Object(createClass.a)(TypedArrayManager,[{key:"allocate",value:function allocate(typedArray,count,_ref2){var size=_ref2.size,type=_ref2.type,_ref2$copy=_ref2.copy,copy=void 0!==_ref2$copy&&_ref2$copy,newSize=count*size;if(typedArray&&newSize<=typedArray.length)return typedArray;var allocSize=Math.max(Math.ceil(newSize*this.overAlloc),1),newArray=this._allocate(type,allocSize);return typedArray&&copy&&newArray.set(typedArray),this._release(typedArray),newArray}},{key:"_allocate",value:function _allocate(){return new(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Float32Array)(arguments.length>1?arguments[1]:void 0)}},{key:"_release",value:function _release(typedArray){}}]),TypedArrayManager}()),tesselator_Tesselator=function(){function Tesselator(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(classCallCheck.a)(this,Tesselator);var _opts$attributes=opts.attributes,attributes=void 0===_opts$attributes?{}:_opts$attributes;this.typedArrayManager=new tesselator_TypedArrayManager,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=attributes,this.updateGeometry(opts),Object.seal(this)}return Object(createClass.a)(Tesselator,[{key:"updateGeometry",value:function updateGeometry(_ref3){var data=_ref3.data,getGeometry=_ref3.getGeometry,positionFormat=_ref3.positionFormat,fp64=_ref3.fp64;this.data=data,this.getGeometry=getGeometry,this.fp64=fp64,this.positionSize="XY"===positionFormat?2:3,this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function updatePartialGeometry(_ref4){_ref4.start,_ref4.count,_ref4.objects}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(geometry,startIndex,size){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function getGeometrySize(geometry){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function _forEachGeometry(visitor){var data=this.data,getGeometry=this.getGeometry,_createIterable=createIterable(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++,visitor(getGeometry(object,objectInfo),objectInfo.index)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"_updateAttribute",value:function _updateAttribute(_ref5){var target=_ref5.target,size=_ref5.size,getValue=_ref5.getValue,data=this.data,bufferLayout=this.bufferLayout,i=0,_createIterable2=createIterable(data),iterable=_createIterable2.iterable,objectInfo=_createIterable2.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++;var value=getValue(object,objectInfo),numVertices=bufferLayout[objectInfo.index];fillArray({target:target,source:value,start:i,count:numVertices}),i+=numVertices*size}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return target}},{key:"_rebuildGeometry",value:function _rebuildGeometry(){var _this=this;if(this.data&&this.getGeometry){var indexLayout=[],bufferLayout=[],instanceCount=0;this._forEachGeometry(function(geometry,dataIndex){var count=_this.getGeometrySize(geometry);instanceCount+=count,bufferLayout[dataIndex]=count});var attributes=this.attributes,_attributeDefs=this._attributeDefs,typedArrayManager=this.typedArrayManager,fp64=this.fp64;for(var name in _attributeDefs){var def=_attributeDefs[name];def.fp64Only&&!fp64||(attributes[name]=typedArrayManager.allocate(attributes[name],instanceCount,def))}this.indexLayout=indexLayout,this.bufferLayout=bufferLayout,this.instanceCount=instanceCount;var context={vertexStart:0,indexStart:0};this._forEachGeometry(function(geometry,dataIndex){var geometrySize=bufferLayout[dataIndex];context.geometryIndex=dataIndex,context.geometrySize=geometrySize,_this.updateGeometryAttributes(geometry,context),context.vertexStart+=geometrySize,context.indexStart+=indexLayout[dataIndex]||0}),this.vertexCount=context.indexStart}}}]),Tesselator}();__webpack_require__.d(__webpack_exports__,"i",function(){return experimental}),__webpack_require__.d(__webpack_exports__,"e",function(){return lighting_effect_LightingEffect}),__webpack_require__.d(__webpack_exports__,"f",function(){return point_light_PointLight}),__webpack_require__.d(__webpack_exports__,"c",function(){return deck_Deck}),__webpack_require__.d(__webpack_exports__,"d",function(){return layer_Layer}),__webpack_require__.d(__webpack_exports__,"b",function(){return composite_layer_CompositeLayer}),__webpack_require__.d(__webpack_exports__,"g",function(){return view_View}),__webpack_require__.d(__webpack_exports__,"j",function(){return utils_log}),__webpack_require__.d(__webpack_exports__,"h",function(){return createIterable}),__webpack_require__.d(__webpack_exports__,"a",function(){return esm.a});var experimental={Tesselator:tesselator_Tesselator,flattenVertices:function flattenVertices(nestedArray){for(var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$result=_ref2.result,result=void 0===_ref2$result?[]:_ref2$result,_ref2$dimensions=_ref2.dimensions,dimensions=void 0===_ref2$dimensions?3:_ref2$dimensions,index=-1,vertexLength=0;++index<nestedArray.length;){var value=nestedArray[index];Array.isArray(value)||ArrayBuffer.isView(value)?flattenVertices(value,{result:result,dimensions:dimensions}):vertexLength<dimensions&&(result.push(value),vertexLength++)}return vertexLength>0&&vertexLength<dimensions&&result.push(0),result},fillArray:fillArray,count:count,memoize:memoize}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}__webpack_require__.d(__webpack_exports__,"a",function(){return _slicedToArray})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return EPSILON}),__webpack_require__.d(__webpack_exports__,"a",function(){return ARRAY_TYPE}),__webpack_require__.d(__webpack_exports__,"c",function(){return RANDOM});var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random;Math.PI},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"p",function(){return transpose}),__webpack_require__.d(__webpack_exports__,"e",function(){return invert}),__webpack_require__.d(__webpack_exports__,"a",function(){return determinant}),__webpack_require__.d(__webpack_exports__,"g",function(){return multiply}),__webpack_require__.d(__webpack_exports__,"o",function(){return translate}),__webpack_require__.d(__webpack_exports__,"n",function(){return scale}),__webpack_require__.d(__webpack_exports__,"j",function(){return rotate}),__webpack_require__.d(__webpack_exports__,"k",function(){return rotateX}),__webpack_require__.d(__webpack_exports__,"l",function(){return rotateY}),__webpack_require__.d(__webpack_exports__,"m",function(){return rotateZ}),__webpack_require__.d(__webpack_exports__,"c",function(){return fromQuat}),__webpack_require__.d(__webpack_exports__,"d",function(){return frustum}),__webpack_require__.d(__webpack_exports__,"i",function(){return perspective}),__webpack_require__.d(__webpack_exports__,"h",function(){return ortho}),__webpack_require__.d(__webpack_exports__,"f",function(){return lookAt}),__webpack_require__.d(__webpack_exports__,"b",function(){return equals});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out}function invert(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out):null}function determinant(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return(a00*a11-a01*a10)*(a22*a33-a23*a32)-(a00*a12-a02*a10)*(a21*a33-a23*a31)+(a00*a13-a03*a10)*(a21*a32-a22*a31)+(a01*a12-a02*a11)*(a20*a33-a23*a30)-(a01*a13-a03*a11)*(a20*a32-a22*a30)+(a02*a13-a03*a12)*(a20*a31-a21*a30)}function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out}function translate(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];return a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]),out}function scale(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out}function rotate(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);return len<_common_js__WEBPACK_IMPORTED_MODULE_0__.b?null:(x*=len=1/len,y*=len,z*=len,s=Math.sin(rad),t=1-(c=Math.cos(rad)),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out)}function rotateX(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out}function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out}function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out}function fromQuat(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}function frustum(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out}function perspective(out,fovy,aspect,near,far){var nf,f=1/Math.tan(fovy/2);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[11]=-1,out[12]=0,out[13]=0,out[15]=0,null!=far&&far!==1/0?(nf=1/(near-far),out[10]=(far+near)*nf,out[14]=2*far*near*nf):(out[10]=-1,out[14]=-2*near),out}function ortho(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out}function lookAt(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return Math.abs(eyex-centerx)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b&&Math.abs(eyey-centery)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b&&Math.abs(eyez-centerz)<_common_js__WEBPACK_IMPORTED_MODULE_0__.b?function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}(out):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,x0=upy*(z2*=len=1/Math.sqrt(z0*z0+z1*z1+z2*z2))-upz*(z1*=len),x1=upz*(z0*=len)-upx*z2,x2=upx*z1-upy*z0,(len=Math.sqrt(x0*x0+x1*x1+x2*x2))?(x0*=len=1/len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,(len=Math.sqrt(y0*y0+y1*y1+y2*y2))?(y0*=len=1/len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out)}function equals(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.b*Math.max(1,Math.abs(a15),Math.abs(b15))}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof2(obj){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(obj){return typeof obj}:function _typeof2(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function _typeof(obj){return _typeof2(obj)}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)})(obj)}__webpack_require__.d(__webpack_exports__,"a",function(){return _typeof})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__.d(__webpack_exports__,"a",function(){return _toConsumableArray})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return config}),__webpack_require__.d(__webpack_exports__,"a",function(){return checkNumber}),__webpack_require__.d(__webpack_exports__,"f",function(){return formatValue}),__webpack_require__.d(__webpack_exports__,"h",function(){return radians}),__webpack_require__.d(__webpack_exports__,"d",function(){return degrees}),__webpack_require__.d(__webpack_exports__,"b",function(){return clamp}),__webpack_require__.d(__webpack_exports__,"g",function(){return lerp}),__webpack_require__.d(__webpack_exports__,"e",function(){return equals});var config={};function checkNumber(value){if(!Number.isFinite(value))throw new Error("Invalid number ".concat(value));return value}function round(value){return Math.round(value/config.EPSILON)*config.EPSILON}function formatValue(value){var _ref$precision=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,precision=void 0===_ref$precision?config.precision||4:_ref$precision;return value=round(value),parseFloat(value.toPrecision(precision))}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)&&void 0!==value.length}function map(value,func){if(isArray(value)){for(var result=function clone(array){return array.clone?array.clone():new Array(array)}(value),i=0;i<result.length;++i)result[i]=func(result[i],i,result);return result}return func(value)}function radians(degrees){return map(degrees,function(degrees){return degrees/180*Math.PI})}function degrees(radians){return map(radians,function(radians){return 180*radians/Math.PI})}function clamp(value,min,max){return map(value,function(value){return Math.max(min,Math.min(max,value))})}function lerp(a,b,t){return isArray(a)?a.map(function(ai,i){return lerp(ai,b[i],t)}):t*b+(1-t)*a}function equals(a,b){if(isArray(a)&&isArray(b)){if(a===b)return!0;if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return Math.abs(a-b)<=config.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}config.EPSILON=1e-12,config.debug=!0,config.precision=4,config.printTypes=!1,config.printDegrees=!1,config.printRowMajor=!0},function(module,__webpack_exports__,__webpack_require__){"use strict";var getPrototypeOf=__webpack_require__(3);function get_get(target,property,receiver){return(get_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=Object(getPrototypeOf.a)(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}__webpack_require__.d(__webpack_exports__,"a",function(){return get_get})},function(module,__webpack_exports__,__webpack_require__){"use strict";var define=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor};function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color(format){var m;return format=(format+"").trim().toLowerCase(),(m=reHex3.exec(format))?new Rgb((m=parseInt(m[1],16))>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hsl(h,s,l,opacity){return 1===arguments.length?function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}define(Color,color,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),define(Rgb,rgb,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)},toString:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x=Xn*lab2xyz(x))-1.6168667*(y=Yn*lab2xyz(y))-.4906146*(z=Zn*lab2xyz(z))),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelix(h,s,l,opacity){return 1===arguments.length?function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}})),__webpack_require__.d(__webpack_exports__,"a",function(){return color}),__webpack_require__.d(__webpack_exports__,"f",function(){return rgb}),__webpack_require__.d(__webpack_exports__,"d",function(){return hsl}),__webpack_require__.d(__webpack_exports__,"e",function(){return lab}),__webpack_require__.d(__webpack_exports__,"c",function(){return hcl}),__webpack_require__.d(__webpack_exports__,"b",function(){return cubehelix})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return _objectSpread});var _defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){Object(_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(target,key,source[key])})}return target}},function(module,exports,__webpack_require__){var $export=__webpack_require__(23);$export($export.S+$export.F*!__webpack_require__(37),"Object",{defineProperty:__webpack_require__(42).f})},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isBrowser="undefined"!=typeof window&&window.addEventListener,timers=new Map,isReady=function isReady(){return isBrowser&&window.__SEER_INITIALIZED__},throttle=function throttle(key,delay){var time=timers.get(key),now=Date.now();return!!(time&&now-time<delay)||(timers.set(key,now),!1)},send=function send(type){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isBrowser&&isReady()){var seen=new Set,payload=JSON.stringify(data,function replacer(seen){return function(key,value){if(!value||"object"!==(void 0===value?"undefined":_typeof(value))||!seen.has(value))return seen.add(value),Object.prototype.toString.call(value).slice(8,-1).includes("Array")?Array.prototype.slice.call(value,0,20):value}}(seen));try{window.postMessage({type:type,payload:payload,source:"seer-agent"},"*")}catch(e){if(throttle("seer-log",2e3))return;console.log(e)}}},listeners=new Map,listener=function listener(message){if(message&&message.data&&"seer-core"===message.data.source){var _message$data=message.data,type=_message$data.type,payload=_message$data.payload,typeListeners=listeners.get(type);typeListeners&&typeListeners.forEach(function(cb){return cb(payload)})}},init=function init(){isBrowser&&!window.__SEER_LISTENER__&&(window.addEventListener("message",listener),window.__SEER_LISTENER__=!0)};exports.default={send:send,throttle:throttle,isReady:isReady,list:function list(key,data){return send("LIST",{key:key,data:data})},listItem:function listItem(key,itemKey){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return send("LIST_ITEM",{key:key,itemKey:itemKey,data:data})},updateItem:function updateItem(key,itemKey,path,data){return send("UPDATE_ITEM",{key:key,itemKey:itemKey,path:path,data:data})},multiUpdate:function multiUpdate(key,itemKey,array){return send("MULTI_UPDATE_ITEM",{key:key,itemKey:itemKey,array:array})},deleteItem:function deleteItem(key,itemKey){return send("DELETE_ITEM",{key:key,itemKey:itemKey})},addLog:function addLog(key,itemKey,msg){return send("ADD_LOG",{key:key,itemKey:itemKey,msg:msg})},listeners:listeners,listenFor:function listenFor(type,cb){if(isBrowser){if(!type||!cb)throw new Error("Please provide a type and callback");listeners.has(type)||listeners.set(type,[]),window.__SEER_LISTENER__||init(),listeners.get(type).push(cb)}},removeListener:function removeListener(cb){listeners.forEach(function(typeListeners,key){listeners.set(key,typeListeners.filter(function(l){return l!==cb}))})},init:init,clean:function clean(){isBrowser&&window.__SEER_LISTENER__&&(window.removeEventListener("message",listener),delete window.__SEER_LISTENER__)}}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),core=__webpack_require__(65),hide=__webpack_require__(66),redefine=__webpack_require__(48),ctx=__webpack_require__(67),$export=function(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{}).prototype,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype||(exports.prototype={});for(key in IS_GLOBAL&&(source=name),source)out=((own=!IS_FORCED&&target&&void 0!==target[key])?target:source)[key],exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,target&&redefine(target,key,out,type&$export.U),exports[key]!=out&&hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};global.core=core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",function(){return window_}),__webpack_require__.d(__webpack_exports__,"a",function(){return global_});var globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document},window_=globals.window||globals.self||globals.global,global_=globals.global||globals.self||globals.window}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",function(){return zoomToScale}),__webpack_require__.d(__webpack_exports__,"i",function(){return scaleToZoom}),__webpack_require__.d(__webpack_exports__,"g",function(){return lngLatToWorld}),__webpack_require__.d(__webpack_exports__,"j",function(){return worldToLngLat}),__webpack_require__.d(__webpack_exports__,"c",function(){return getMeterZoom}),__webpack_require__.d(__webpack_exports__,"b",function(){return getDistanceScales}),__webpack_require__.d(__webpack_exports__,"a",function(){return addMetersToLngLat}),__webpack_require__.d(__webpack_exports__,"f",function(){return getViewMatrix}),__webpack_require__.d(__webpack_exports__,"e",function(){return getProjectionParameters}),__webpack_require__.d(__webpack_exports__,"d",function(){return getProjectionMatrix}),__webpack_require__.d(__webpack_exports__,"k",function(){return worldToPixels}),__webpack_require__.d(__webpack_exports__,"h",function(){return pixelsToWorld});var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_math_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26),gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(40),_assert__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(52),PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,DEFAULT_ALTITUDE=1.5;function zoomToScale(zoom){return Math.pow(2,zoom)}function scaleToZoom(scale){return Math.log2(scale)}function lngLatToWorld(_ref,scale){var _ref2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_ref,2),lng=_ref2[0],lat=_ref2[1];Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(lng)&&Number.isFinite(scale)),Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(lat)&&lat>=-90&&lat<=90,"invalid latitude");var phi2=lat*DEGREES_TO_RADIANS;return[(scale*=TILE_SIZE)*(lng*DEGREES_TO_RADIANS+PI)/(2*PI),scale*(PI-Math.log(Math.tan(PI_4+.5*phi2)))/(2*PI)]}function worldToLngLat(_ref3,scale){var _ref4=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_ref3,2),x=_ref4[0],y=_ref4[1],lambda2=x/(scale*=TILE_SIZE)*(2*PI)-PI,phi2=2*(Math.atan(Math.exp(PI-y/scale*(2*PI)))-PI_4);return[lambda2*RADIANS_TO_DEGREES,phi2*RADIANS_TO_DEGREES]}function getMeterZoom(_ref5){var latitude=_ref5.latitude;Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(latitude));var latCosine=Math.cos(latitude*DEGREES_TO_RADIANS);return scaleToZoom(EARTH_CIRCUMFERENCE*latCosine)-9}function getDistanceScales(_ref6){var latitude=_ref6.latitude,longitude=_ref6.longitude,zoom=_ref6.zoom,scale=_ref6.scale,_ref6$highPrecision=_ref6.highPrecision,highPrecision=void 0!==_ref6$highPrecision&&_ref6$highPrecision;scale=void 0!==scale?scale:zoomToScale(zoom),Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(latitude)&&Number.isFinite(longitude)&&Number.isFinite(scale));var result={},worldSize=TILE_SIZE*scale,latCosine=Math.cos(latitude*DEGREES_TO_RADIANS),pixelsPerDegreeX=worldSize/360,pixelsPerDegreeY=pixelsPerDegreeX/latCosine,altPixelsPerMeter=worldSize/EARTH_CIRCUMFERENCE/latCosine;if(result.pixelsPerMeter=[altPixelsPerMeter,-altPixelsPerMeter,altPixelsPerMeter],result.metersPerPixel=[1/altPixelsPerMeter,-1/altPixelsPerMeter,1/altPixelsPerMeter],result.pixelsPerDegree=[pixelsPerDegreeX,-pixelsPerDegreeY,altPixelsPerMeter],result.degreesPerPixel=[1/pixelsPerDegreeX,-1/pixelsPerDegreeY,1/altPixelsPerMeter],highPrecision){var latCosine2=DEGREES_TO_RADIANS*Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,pixelsPerDegreeY2=pixelsPerDegreeX*latCosine2/2,altPixelsPerDegree2=worldSize/EARTH_CIRCUMFERENCE*latCosine2,altPixelsPerMeter2=altPixelsPerDegree2/pixelsPerDegreeY*altPixelsPerMeter;result.pixelsPerDegree2=[0,-pixelsPerDegreeY2,altPixelsPerDegree2],result.pixelsPerMeter2=[altPixelsPerMeter2,0,altPixelsPerMeter2]}return result}function addMetersToLngLat(lngLatZ,xyz){var _lngLatZ=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1],z0=_lngLatZ[2],_xyz=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],_getDistanceScales=getDistanceScales({longitude:longitude,latitude:latitude,scale:1,highPrecision:!0}),pixelsPerMeter=_getDistanceScales.pixelsPerMeter,pixelsPerMeter2=_getDistanceScales.pixelsPerMeter2,worldspace=lngLatToWorld(lngLatZ,1);worldspace[0]+=x*(pixelsPerMeter[0]+pixelsPerMeter2[0]*y),worldspace[1]+=y*(pixelsPerMeter[1]+pixelsPerMeter2[1]*y);var newLngLat=worldToLngLat(worldspace,1),newZ=(z0||0)+(z||0);return Number.isFinite(z0)||Number.isFinite(z)?[newLngLat[0],newLngLat[1],newZ]:newLngLat}function getViewMatrix(_ref7){var height=_ref7.height,pitch=_ref7.pitch,bearing=_ref7.bearing,altitude=_ref7.altitude,_ref7$center=_ref7.center,center=void 0===_ref7$center?null:_ref7$center,_ref7$flipY=_ref7.flipY,flipY=void 0!==_ref7$flipY&&_ref7$flipY,vm=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.a)();return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.o(vm,vm,[0,0,-altitude]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.n(vm,vm,[1,1,1/height]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.k(vm,vm,-pitch*DEGREES_TO_RADIANS),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.m(vm,vm,bearing*DEGREES_TO_RADIANS),flipY&&gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.n(vm,vm,[1,-1,1]),center&&gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.o(vm,vm,gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_4__.d([],center)),vm}function getProjectionParameters(_ref8){var width=_ref8.width,height=_ref8.height,_ref8$altitude=_ref8.altitude,altitude=void 0===_ref8$altitude?DEFAULT_ALTITUDE:_ref8$altitude,_ref8$pitch=_ref8.pitch,pitch=void 0===_ref8$pitch?0:_ref8$pitch,_ref8$nearZMultiplier=_ref8.nearZMultiplier,nearZMultiplier=void 0===_ref8$nearZMultiplier?1:_ref8$nearZMultiplier,_ref8$farZMultiplier=_ref8.farZMultiplier,farZMultiplier=void 0===_ref8$farZMultiplier?1:_ref8$farZMultiplier,pitchRadians=pitch*DEGREES_TO_RADIANS,halfFov=Math.atan(.5/altitude),topHalfSurfaceDistance=Math.sin(halfFov)*altitude/Math.sin(Math.PI/2-pitchRadians-halfFov),farZ=Math.cos(Math.PI/2-pitchRadians)*topHalfSurfaceDistance+altitude;return{fov:2*Math.atan(height/2/altitude),aspect:width/height,focalDistance:altitude,near:nearZMultiplier,far:farZ*farZMultiplier}}function getProjectionMatrix(_ref9){var width=_ref9.width,height=_ref9.height,pitch=_ref9.pitch,_getProjectionParamet=getProjectionParameters({width:width,height:height,altitude:_ref9.altitude,pitch:pitch,nearZMultiplier:_ref9.nearZMultiplier,farZMultiplier:_ref9.farZMultiplier}),fov=_getProjectionParamet.fov,aspect=_getProjectionParamet.aspect,near=_getProjectionParamet.near,far=_getProjectionParamet.far;return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_2__.i([],fov,aspect,near,far)}function worldToPixels(xyz,pixelProjectionMatrix){var _xyz2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz2[0],y=_xyz2[1],_xyz2$=_xyz2[2],z=void 0===_xyz2$?0:_xyz2$;return Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z)),Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelProjectionMatrix,[x,y,z,1])}function pixelsToWorld(xyz,pixelUnprojectionMatrix){var targetZ=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_xyz3=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(xyz,3),x=_xyz3[0],y=_xyz3[1],z=_xyz3[2];if(Object(_assert__WEBPACK_IMPORTED_MODULE_5__.a)(Number.isFinite(x)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(z))return Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelUnprojectionMatrix,[x,y,z,1]);var coord0=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelUnprojectionMatrix,[x,y,0,1]),coord1=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.d)(pixelUnprojectionMatrix,[x,y,1,1]),z0=coord0[2],z1=coord1[2],t=z0===z1?0:((targetZ||0)-z0)/(z1-z0);return gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_3__.d([],coord0,coord1,t)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return add}),__webpack_require__.d(__webpack_exports__,"f",function(){return scale}),__webpack_require__.d(__webpack_exports__,"c",function(){return length}),__webpack_require__.d(__webpack_exports__,"e",function(){return negate}),__webpack_require__.d(__webpack_exports__,"b",function(){return cross}),__webpack_require__.d(__webpack_exports__,"d",function(){return lerp}),__webpack_require__.d(__webpack_exports__,"h",function(){return transformMat4}),__webpack_require__.d(__webpack_exports__,"g",function(){return sub});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out}function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out}function length(a){var x=a[0],y=a[1];return Math.sqrt(x*x+y*y)}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out}function cross(out,a,b){var z=a[0]*b[1]-a[1]*b[0];return out[0]=out[1]=0,out[2]=z,out}function lerp(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out}function transformMat4(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(2);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0),out}()},function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__(152),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,supportsDescriptors=origDefineProperty&&function(){var obj={};try{for(var _ in origDefineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperty=function(object,name,value,predicate){var fn;name in object&&("function"!=typeof(fn=predicate)||"[object Function]"!==toStr.call(fn)||!predicate())||(supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value:value,writable:!0}):object[name]=value)},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},function(module,exports,__webpack_require__){var store=__webpack_require__(119)("wks"),uid=__webpack_require__(103),Symbol=__webpack_require__(29).Symbol,USE_SYMBOL="function"==typeof Symbol;(module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))}).store=store},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){__webpack_require__.d(__webpack_exports__,"b",function(){return window_}),__webpack_require__.d(__webpack_exports__,"a",function(){return process_});var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==global&&global,document:"undefined"!=typeof document&&document,process:"object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&process},window_=globals.window||globals.self||globals.global,process_=globals.process||{};console}).call(this,__webpack_require__(21),__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return createMat4}),__webpack_require__.d(__webpack_exports__,"d",function(){return transformVector}),__webpack_require__.d(__webpack_exports__,"c",function(){return mod}),__webpack_require__.d(__webpack_exports__,"b",function(){return lerp});var gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36);function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector(matrix,vector){var result=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_0__.c([],vector,matrix);return gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_0__.b(result,result,1/result[3]),result}function mod(value,divisor){var modulus=value%divisor;return modulus<0?divisor+modulus:modulus}function lerp(start,end,step){return step*end+(1-step)*start}},,function(module,exports,__webpack_require__){var isObject=__webpack_require__(39);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _DEFAULT_TEXTURE_PARA,classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(17),inherits=__webpack_require__(5),esm=__webpack_require__(10),dist_esm=__webpack_require__(8),defineProperty=__webpack_require__(0),regenerator=__webpack_require__(41),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(59),parse_image_node=__webpack_require__(151);parse_image_node.a;function parseImage(arrayBuffer,options){return parse_image_node.a?Object(parse_image_node.a)(arrayBuffer,options):function parseToImageBitmap(arrayBuffer){if("undefined"==typeof createImageBitmap)throw new Error("parseImage");var blob=new Blob([new Uint8Array(arrayBuffer)]);return createImageBitmap(blob)}(arrayBuffer)}function loadImage(_x,_x2){return _loadImage.apply(this,arguments)}function _loadImage(){return(_loadImage=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(url,options){var response,arrayBuffer;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if("undefined"!=typeof Image){_context.next=8;break}return _context.next=3,fetch(url,options);case 3:return response=_context.sent,_context.next=6,response.arrayBuffer();case 6:return arrayBuffer=_context.sent,_context.abrupt("return",parseImage(arrayBuffer));case 8:return _context.next=10,loadToHTMLImage(url,options);case 10:return _context.abrupt("return",_context.sent);case 11:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}function loadToHTMLImage(_x3,_x4){return _loadToHTMLImage.apply(this,arguments)}function _loadToHTMLImage(){return(_loadToHTMLImage=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee2(url,options){var src,response,xml;return regenerator_default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!/\.svg((\?|#).*)?$/.test(url)){_context2.next=10;break}return _context2.next=3,fetch(url,options);case 3:return response=_context2.sent,_context2.next=6,response.text();case 6:xml=_context2.sent,src="data:image/svg+xml;base64,".concat(btoa(xml)),_context2.next=13;break;case 10:return _context2.next=12,url;case 12:src=_context2.sent;case 13:return _context2.next=15,new Promise(function(resolve,reject){try{var image=new Image;image.onload=function(){return resolve(image)},image.onerror=function(err){return reject(new Error("Could not load image ".concat(url,": ").concat(err)))},image.crossOrigin=options&&options.crossOrigin||"anonymous",image.src=src}catch(error){reject(error)}});case 15:return _context2.abrupt("return",_context2.sent);case 16:case"end":return _context2.stop()}},_callee2)}))).apply(this,arguments)}var DEFAULT_CANVAS_WIDTH=1024,DEFAULT_BUFFER=4,noop=function noop(){},DEFAULT_TEXTURE_PARAMETERS=(_DEFAULT_TEXTURE_PARA={},Object(defineProperty.a)(_DEFAULT_TEXTURE_PARA,10241,9987),Object(defineProperty.a)(_DEFAULT_TEXTURE_PARA,10240,9729),_DEFAULT_TEXTURE_PARA);function getIconId(icon){return icon&&(icon.id||icon.url)}function buildRowMapping(mapping,columns,yOffset){for(var i=0;i<columns.length;i++){var _columns$i=columns[i],icon=_columns$i.icon,xOffset=_columns$i.xOffset;mapping[getIconId(icon)]=Object.assign({},icon,{x:xOffset,y:yOffset})}}var icon_manager_IconManager=function(){function IconManager(gl,_ref2){var _ref2$onUpdate=_ref2.onUpdate,onUpdate=void 0===_ref2$onUpdate?noop:_ref2$onUpdate;Object(classCallCheck.a)(this,IconManager),this.gl=gl,this.onUpdate=onUpdate,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._buffer=DEFAULT_BUFFER,this._canvasWidth=DEFAULT_CANVAS_WIDTH,this._canvasHeight=0,this._canvas=null}return Object(createClass.a)(IconManager,[{key:"finalize",value:function finalize(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function getTexture(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function getIconMapping(object,objectInfo){var icon=this._getIcon(object,objectInfo),id=this._autoPacking?getIconId(icon):icon;return this._mapping[id]||{}}},{key:"setProps",value:function setProps(_ref3){var autoPacking=_ref3.autoPacking,iconAtlas=_ref3.iconAtlas,iconMapping=_ref3.iconMapping,data=_ref3.data,getIcon=_ref3.getIcon;void 0!==autoPacking&&(this._autoPacking=autoPacking),getIcon&&(this._getIcon=getIcon),iconMapping&&(this._mapping=iconMapping),iconAtlas&&this._updateIconAtlas(iconAtlas),this._autoPacking&&(data||getIcon)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(data))}},{key:"_updateIconAtlas",value:function _updateIconAtlas(iconAtlas){var _this=this;this._texture&&(this._texture.delete(),this._texture=null),iconAtlas instanceof dist_esm.l?(iconAtlas.setParameters(DEFAULT_TEXTURE_PARAMETERS),this._externalTexture=iconAtlas,this.onUpdate()):"string"==typeof iconAtlas&&loadImage(iconAtlas).then(function(data){_this._texture=new dist_esm.l(_this.gl,{data:data,parameters:DEFAULT_TEXTURE_PARAMETERS}),_this.onUpdate()})}},{key:"_updateAutoPacking",value:function _updateAutoPacking(data){var icons=Object.values(function getDiffIcons(data,getIcon,cachedIcons){if(!data||!getIcon)return null;cachedIcons=cachedIcons||{};var icons={},_createIterable=Object(esm.h)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var icon=getIcon(object,objectInfo),id=getIconId(icon);if(!icon)throw new Error("Icon is missing.");if(!icon.url)throw new Error("Icon url is missing.");icons[id]||cachedIcons[id]&&icon.url===cachedIcons[id].url||(icons[id]=icon)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return icons}(data,this._getIcon,this._mapping)||{});if(icons.length>0){var _buildMapping=function buildMapping(_ref){for(var number,icons=_ref.icons,buffer=_ref.buffer,_ref$mapping=_ref.mapping,mapping=void 0===_ref$mapping?{}:_ref$mapping,_ref$xOffset=_ref.xOffset,xOffset=void 0===_ref$xOffset?0:_ref$xOffset,_ref$yOffset=_ref.yOffset,yOffset=void 0===_ref$yOffset?0:_ref$yOffset,canvasWidth=_ref.canvasWidth,rowHeight=0,columns=[],i=0;i<icons.length;i++){var icon=icons[i];if(!mapping[getIconId(icon)]){var height=icon.height,width=icon.width;xOffset+width+buffer>canvasWidth&&(buildRowMapping(mapping,columns,yOffset),xOffset=0,yOffset=rowHeight+yOffset+buffer,rowHeight=0,columns=[]),columns.push({icon:icon,xOffset:xOffset}),xOffset=xOffset+width+buffer,rowHeight=Math.max(rowHeight,height)}}return columns.length>0&&buildRowMapping(mapping,columns,yOffset),{mapping:mapping,xOffset:xOffset,yOffset:yOffset,canvasWidth:canvasWidth,canvasHeight:(number=rowHeight+yOffset+buffer,Math.pow(2,Math.ceil(Math.log2(number))))}}({icons:icons,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,xOffset:this._xOffset,yOffset:this._yOffset}),mapping=_buildMapping.mapping,xOffset=_buildMapping.xOffset,yOffset=_buildMapping.yOffset,canvasHeight=_buildMapping.canvasHeight;this._mapping=mapping,this._xOffset=xOffset,this._yOffset=yOffset,this._canvasHeight=canvasHeight,this._texture||(this._texture=new dist_esm.l(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:DEFAULT_TEXTURE_PARAMETERS})),this._texture.height!==this._canvasHeight&&function resizeTexture(texture,width,height){var oldWidth=texture.width,oldHeight=texture.height,oldPixels=Object(dist_esm.y)(texture,{});return texture.resize({width:width,height:height}),texture.setSubImageData({data:oldPixels,x:0,y:height-oldHeight,width:oldWidth,height:oldHeight,parameters:DEFAULT_TEXTURE_PARAMETERS}),texture.generateMipmap(),oldPixels.delete(),texture}(this._texture,this._canvasWidth,this._canvasHeight),this.onUpdate(),this._loadIcons(icons)}}},{key:"_loadIcons",value:function _loadIcons(icons){var _this2=this,ctx=this._canvas.getContext("2d"),canvasHeight=this._texture.height,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_loop=function _loop(){var icon=_step2.value;loadImage(icon.url).then(function(imageData){var id=getIconId(icon),_this2$_mapping$id=_this2._mapping[id],x=_this2$_mapping$id.x,y=_this2$_mapping$id.y,width=_this2$_mapping$id.width,height=_this2$_mapping$id.height,data=function resizeImage(ctx,imageData,width,height){var naturalWidth=imageData.naturalWidth,naturalHeight=imageData.naturalHeight;return width===naturalWidth&&height===naturalHeight?imageData:(ctx.canvas.height=height,ctx.canvas.width=width,ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.drawImage(imageData,0,0,naturalWidth,naturalHeight,0,0,width,height),ctx.canvas)}(ctx,imageData,width,height);_this2._texture.setSubImageData({data:data,x:x,y:canvasHeight-y-height,width:width,height:height,parameters:Object.assign({},DEFAULT_TEXTURE_PARAMETERS,Object(defineProperty.a)({},37440,!0))}),_this2._texture.generateMipmap(),_this2.onUpdate()})},_iterator2=icons[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_loop()}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}]),IconManager}(),fp64LowPart=dist_esm.r.fp64LowPart,DEFAULT_COLOR=[0,0,0,255],defaultProps={iconAtlas:null,iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},fp64:!1,billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function value(x){return x.position}},getIcon:{type:"accessor",value:function value(x){return x.icon}},getColor:{type:"accessor",value:DEFAULT_COLOR},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0}},icon_layer_IconLayer=function(_Layer){function IconLayer(){return Object(classCallCheck.a)(this,IconLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(IconLayer).apply(this,arguments))}return Object(inherits.a)(IconLayer,_Layer),Object(createClass.a)(IconLayer,[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n\n  if (billboard)  {\n    pixelOffset.y *= -1.0;\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0)); \n    gl_Position.xy += project_pixel_size_to_clipspace(pixelOffset);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset_common); \n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){var _this=this;this.state={iconManager:new icon_manager_IconManager(this.context.gl,{onUpdate:function onUpdate(){return _this._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:5121,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR},instanceAngles:{size:1,transition:!0,accessor:"getAngle",defaultValue:0}})}},{key:"updateState",value:function updateState(_ref){var oldProps=_ref.oldProps,props=_ref.props,changeFlags=_ref.changeFlags;Object(get.a)(Object(getPrototypeOf.a)(IconLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags});var attributeManager=this.getAttributeManager(),iconManager=this.state.iconManager,iconAtlas=props.iconAtlas,iconMapping=props.iconMapping,data=props.data,getIcon=props.getIcon,iconMappingChanged=!1;if(iconAtlas?(oldProps.iconAtlas!==props.iconAtlas&&iconManager.setProps({iconAtlas:iconAtlas,autoPacking:!1}),oldProps.iconMapping!==props.iconMapping&&(iconManager.setProps({iconMapping:iconMapping}),iconMappingChanged=!0)):iconManager.setProps({autoPacking:!0}),(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getIcon))&&(iconManager.setProps({data:data,getIcon:getIcon}),iconMappingChanged=!0),iconMappingChanged&&(attributeManager.invalidate("instanceOffsets"),attributeManager.invalidate("instanceIconFrames"),attributeManager.invalidate("instanceColorModes")),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),attributeManager.invalidateAll()}}},{key:"finalizeState",value:function finalizeState(){Object(get.a)(Object(getPrototypeOf.a)(IconLayer.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,_this$props=this.props,sizeScale=_this$props.sizeScale,sizeMinPixels=_this$props.sizeMinPixels,sizeMaxPixels=_this$props.sizeMaxPixels,sizeUnits=_this$props.sizeUnits,billboard=_this$props.billboard,iconManager=this.state.iconManager,viewport=this.context.viewport,iconsTexture=iconManager.getTexture();iconsTexture&&this.state.model.setUniforms(Object.assign({},uniforms,{iconsTexture:iconsTexture,iconsTextureDim:[iconsTexture.width,iconsTexture.height],sizeScale:sizeScale*("pixels"===sizeUnits?viewport.distanceScales.metersPerPixel[2]:1),sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,billboard:billboard})).draw()}},{key:"_getModel",value:function _getModel(gl){return new dist_esm.i(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new dist_esm.h({drawMode:6,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_onUpdate",value:function _onUpdate(){this.setNeedsRedraw()}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=Object(esm.h)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=fp64LowPart(position[0]),value[i++]=fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}},{key:"calculateInstanceOffsets",value:function calculateInstanceOffsets(attribute){var data=this.props.data,iconManager=this.state.iconManager,value=attribute.value,i=0,_createIterable2=Object(esm.h)(data),iterable=_createIterable2.iterable,objectInfo=_createIterable2.objectInfo,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=iterable[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var object=_step2.value;objectInfo.index++;var rect=iconManager.getIconMapping(object,objectInfo);value[i++]=rect.width/2-rect.anchorX||0,value[i++]=rect.height/2-rect.anchorY||0}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"calculateInstanceColorMode",value:function calculateInstanceColorMode(attribute){var data=this.props.data,iconManager=this.state.iconManager,value=attribute.value,i=0,_createIterable3=Object(esm.h)(data),iterable=_createIterable3.iterable,objectInfo=_createIterable3.objectInfo,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=iterable[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var object=_step3.value;objectInfo.index++;var colorMode=iconManager.getIconMapping(object,objectInfo).mask;value[i++]=colorMode?1:0}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"calculateInstanceIconFrames",value:function calculateInstanceIconFrames(attribute){var data=this.props.data,iconManager=this.state.iconManager,value=attribute.value,i=0,_createIterable4=Object(esm.h)(data),iterable=_createIterable4.iterable,objectInfo=_createIterable4.objectInfo,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=iterable[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var object=_step4.value;objectInfo.index++;var rect=iconManager.getIconMapping(object,objectInfo);value[i++]=rect.x||0,value[i++]=rect.y||0,value[i++]=rect.width||0,value[i++]=rect.height||0}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}}]),IconLayer}(esm.d);icon_layer_IconLayer.layerName="IconLayer",icon_layer_IconLayer.defaultProps=defaultProps;var scatterplot_layer_fp64LowPart=dist_esm.r.fp64LowPart,scatterplot_layer_DEFAULT_COLOR=[0,0,0,255],scatterplot_layer_defaultProps={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function value(x){return x.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:scatterplot_layer_DEFAULT_COLOR},getLineColor:{type:"accessor",value:scatterplot_layer_DEFAULT_COLOR},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},scatterplot_layer_ScatterplotLayer=function(_Layer){function ScatterplotLayer(){return Object(classCallCheck.a)(this,ScatterplotLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ScatterplotLayer).apply(this,arguments))}return Object(inherits.a)(ScatterplotLayer,_Layer),Object(createClass.a)(ScatterplotLayer,[{key:"getShaders",value:function getShaders(id){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if(Object(get.a)(Object(getPrototypeOf.a)(ScatterplotLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,radiusScale=_this$props.radiusScale,radiusMinPixels=_this$props.radiusMinPixels,radiusMaxPixels=_this$props.radiusMaxPixels,stroked=_this$props.stroked,filled=_this$props.filled,lineWidthUnits=_this$props.lineWidthUnits,lineWidthScale=_this$props.lineWidthScale,lineWidthMinPixels=_this$props.lineWidthMinPixels,lineWidthMaxPixels=_this$props.lineWidthMaxPixels,widthMultiplier="pixels"===lineWidthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{stroked:stroked?1:0,filled:filled,radiusScale:radiusScale,radiusMinPixels:radiusMinPixels,radiusMaxPixels:radiusMaxPixels,lineWidthScale:lineWidthScale*widthMultiplier,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels})).draw()}},{key:"_getModel",value:function _getModel(gl){return new dist_esm.i(gl,Object.assign(this.getShaders(),{id:this.props.id,geometry:new dist_esm.h({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=Object(esm.h)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=scatterplot_layer_fp64LowPart(position[0]),value[i++]=scatterplot_layer_fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}}]),ScatterplotLayer}(esm.d);scatterplot_layer_ScatterplotLayer.layerName="ScatterplotLayer",scatterplot_layer_ScatterplotLayer.defaultProps=scatterplot_layer_defaultProps;var Tesselator=esm.i.Tesselator,path_tesselator_fp64LowPart=dist_esm.r.fp64LowPart,path_tesselator_PathTesselator=function(_Tesselator){function PathTesselator(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,positionFormat=_ref.positionFormat,fp64=_ref.fp64;return Object(classCallCheck.a)(this,PathTesselator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PathTesselator).call(this,{data:data,getGeometry:getGeometry,fp64:fp64,positionFormat:positionFormat,attributes:{startPositions:{size:3},endPositions:{size:3},leftDeltas:{size:3},rightDeltas:{size:3},startEndPositions64XyLow:{size:4,fp64Only:!0}}}))}return Object(inherits.a)(PathTesselator,_Tesselator),Object(createClass.a)(PathTesselator,[{key:"get",value:function get(attributeName,target,accessor){if(this.attributes[attributeName])return this.attributes[attributeName];switch(attributeName){case"strokeWidths":return this._updateAttribute({target:target,size:1,getValue:function getValue(object,objectInfo){return objectInfo.target[0]=accessor(object,objectInfo),objectInfo.target}});case"dashArrays":return this._updateAttribute({target:target,size:2,getValue:accessor});case"colors":return this._updateAttribute({target:target,size:4,getValue:function getValue(object,objectInfo){var color=accessor(object,objectInfo);if(4===color.length)return color;var value=objectInfo.target;return value[0]=color[0],value[1]=color[1],value[2]=color[2],value[3]=255,value}});case"pickingColors":return this._updateAttribute({target:target,size:3,getValue:function getValue(object,_ref2){var index=_ref2.index,value=_ref2.target;return accessor(index,value)}});default:return null}}},{key:"getGeometrySize",value:function getGeometrySize(path){return Math.max(0,this.getPathLength(path)-1)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(path,context){var _this$attributes=this.attributes,startPositions=_this$attributes.startPositions,endPositions=_this$attributes.endPositions,leftDeltas=_this$attributes.leftDeltas,rightDeltas=_this$attributes.rightDeltas,startEndPositions64XyLow=_this$attributes.startEndPositions64XyLow,fp64=this.fp64,numPoints=context.geometrySize+1;if(!(numPoints<2))for(var nextPoint,isPathClosed=this.isClosed(path),startPoint=this.getPointOnPath(path,0),endPoint=this.getPointOnPath(path,1),prevPoint=isPathClosed?this.getPointOnPath(path,numPoints-2):startPoint,i=context.vertexStart,ptIndex=1;ptIndex<numPoints;i++,ptIndex++)nextPoint=ptIndex+1<numPoints?this.getPointOnPath(path,ptIndex+1):isPathClosed?this.getPointOnPath(path,1):endPoint,startPositions[3*i]=startPoint[0],startPositions[3*i+1]=startPoint[1],startPositions[3*i+2]=startPoint[2]||0,endPositions[3*i]=endPoint[0],endPositions[3*i+1]=endPoint[1],endPositions[3*i+2]=endPoint[2]||0,leftDeltas[3*i]=startPoint[0]-prevPoint[0],leftDeltas[3*i+1]=startPoint[1]-prevPoint[1],leftDeltas[3*i+2]=startPoint[2]-prevPoint[2]||0,rightDeltas[3*i]=nextPoint[0]-endPoint[0],rightDeltas[3*i+1]=nextPoint[1]-endPoint[1],rightDeltas[3*i+2]=nextPoint[2]-endPoint[2]||0,fp64&&(startEndPositions64XyLow[4*i]=path_tesselator_fp64LowPart(startPoint[0]),startEndPositions64XyLow[4*i+1]=path_tesselator_fp64LowPart(startPoint[1]),startEndPositions64XyLow[4*i+2]=path_tesselator_fp64LowPart(endPoint[0]),startEndPositions64XyLow[4*i+3]=path_tesselator_fp64LowPart(endPoint[1])),prevPoint=startPoint,startPoint=endPoint,endPoint=nextPoint}},{key:"getPathLength",value:function getPathLength(path){return Number.isFinite(path[0])?path.length/this.positionSize:path.length}},{key:"getPointOnPath",value:function getPointOnPath(path,index){if(Number.isFinite(path[0])){var positionSize=this.positionSize;return[path[index*positionSize],path[index*positionSize+1],3===positionSize?path[index*positionSize+2]:0]}return path[index]}},{key:"isClosed",value:function isClosed(path){var numPoints=this.getPathLength(path),firstPoint=this.getPointOnPath(path,0),lastPoint=this.getPointOnPath(path,numPoints-1);return firstPoint[0]===lastPoint[0]&&firstPoint[1]===lastPoint[1]&&firstPoint[2]===lastPoint[2]}}]),PathTesselator}(Tesselator),path_layer_fragment_glsl="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    discard;\n  }\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",path_layer_DEFAULT_COLOR=[0,0,0,255],path_layer_defaultProps={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},fp64:!1,dashJustified:!1,getPath:{type:"accessor",value:function value(object){return object.path}},getColor:{type:"accessor",value:path_layer_DEFAULT_COLOR},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},ATTRIBUTE_TRANSITION={enter:function enter(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},path_layer_PathLayer=function(_Layer){function PathLayer(){return Object(classCallCheck.a)(this,PathLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PathLayer).apply(this,arguments))}return Object(inherits.a)(PathLayer,_Layer),Object(createClass.a)(PathLayer,[{key:"getShaders",value:function getShaders(){return this.use64bitProjection()?{vs:"\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n  float width = project_pixel_size(widthPixels);\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n  cornerPosition = isCap * (1.0 - positions.z);\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_size(currPosition.z);\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, instanceStartEndPositions64xyLow.xy, projected_prev_position);\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, instanceStartEndPositions64xyLow.zw, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",fs:path_layer_fragment_glsl,modules:["project64","picking"]}:{vs:"#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    project_pixel_size(widthPixels)\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = instanceStartPositions;\n  vec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    prevPosition64xyLow += mix(-instanceLeftDeltas, vec3(0.0), isEnd).xy;\n  } else {\n    prevPosition += mix(-instanceLeftDeltas, vec3(0.0), isEnd);\n  }\n  prevPosition = project_position(prevPosition, prevPosition64xyLow);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  currPosition = project_position(currPosition, currPosition64xyLow);\n\n  vec3 nextPosition = instanceEndPositions;\n  vec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    nextPosition64xyLow += mix(vec3(0.0), instanceRightDeltas, isEnd).xy;\n  } else {\n    nextPosition += mix(vec3(0.0), instanceRightDeltas, isEnd);\n  }\n  nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_common_position_to_clipspace(vec4(pos, 1.0));\n}\n",fs:path_layer_fragment_glsl,modules:["picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0},instanceEndPositions:{size:3,transition:ATTRIBUTE_TRANSITION,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0},instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow,noAlloc:!0},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas,noAlloc:!0},instanceRightDeltas:{size:3,update:this.calculateRightDeltas,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ATTRIBUTE_TRANSITION,update:this.calculateStrokeWidths,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:5121,accessor:"getColor",transition:ATTRIBUTE_TRANSITION,update:this.calculateColors,defaultValue:path_layer_DEFAULT_COLOR},instancePickingColors:{size:3,type:5121,update:this.calculatePickingColors}}),this.setState({pathTesselator:new path_tesselator_PathTesselator({})})}},{key:"updateState",value:function updateState(_ref){var oldProps=_ref.oldProps,props=_ref.props,changeFlags=_ref.changeFlags;Object(get.a)(Object(getPrototypeOf.a)(PathLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags});var attributeManager=this.getAttributeManager();if((changeFlags.dataChanged||props.fp64!==oldProps.fp64||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPath))&&(this.state.pathTesselator.updateGeometry({data:props.data,getGeometry:props.getPath,positionFormat:props.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:this.state.pathTesselator.instanceCount}),attributeManager.invalidateAll()),props.fp64!==oldProps.fp64){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),attributeManager.invalidateAll()}}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,viewport=this.context.viewport,_this$props=this.props,rounded=_this$props.rounded,miterLimit=_this$props.miterLimit,widthUnits=_this$props.widthUnits,widthScale=_this$props.widthScale,widthMinPixels=_this$props.widthMinPixels,widthMaxPixels=_this$props.widthMaxPixels,dashJustified=_this$props.dashJustified,widthMultiplier="pixels"===widthUnits?viewport.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},uniforms,{jointType:Number(rounded),alignMode:Number(dashJustified),widthScale:widthScale*widthMultiplier,miterLimit:miterLimit,widthMinPixels:widthMinPixels,widthMaxPixels:widthMaxPixels})).draw()}},{key:"_getModel",value:function _getModel(gl){return new dist_esm.i(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new dist_esm.h({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function calculateStartPositions(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("startPositions")}},{key:"calculateEndPositions",value:function calculateEndPositions(attribute){var pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("endPositions")}},{key:"calculateInstanceStartEndPositions64xyLow",value:function calculateInstanceStartEndPositions64xyLow(attribute){var isFP64=this.use64bitPositions();attribute.constant=!isFP64,attribute.value=isFP64?this.state.pathTesselator.get("startEndPositions64XyLow"):new Float32Array(4)}},{key:"calculateLeftDeltas",value:function calculateLeftDeltas(attribute){var pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("leftDeltas")}},{key:"calculateRightDeltas",value:function calculateRightDeltas(attribute){var pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("rightDeltas")}},{key:"calculateStrokeWidths",value:function calculateStrokeWidths(attribute){var getWidth=this.props.getWidth,pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("strokeWidths",attribute.value,getWidth)}},{key:"calculateDashArrays",value:function calculateDashArrays(attribute){var getDashArray=this.props.getDashArray,pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("dashArrays",attribute.value,getDashArray)}},{key:"calculateColors",value:function calculateColors(attribute){var getColor=this.props.getColor,pathTesselator=this.state.pathTesselator;attribute.bufferLayout=pathTesselator.bufferLayout,attribute.value=pathTesselator.get("colors",attribute.value,getColor)}},{key:"calculatePickingColors",value:function calculatePickingColors(attribute){var pathTesselator=this.state.pathTesselator;attribute.value=pathTesselator.get("pickingColors",attribute.value,this.encodePickingColor)}},{key:"clearPickingColor",value:function clearPickingColor(color){for(var pickedPathIndex=this.decodePickingColor(color),bufferLayout=this.state.pathTesselator.bufferLayout,numVertices=bufferLayout[pickedPathIndex],startInstanceIndex=0,pathIndex=0;pathIndex<pickedPathIndex;pathIndex++)startInstanceIndex+=bufferLayout[pathIndex];var instancePickingColors=this.getAttributeManager().attributes.instancePickingColors,value=instancePickingColors.value,endInstanceIndex=startInstanceIndex+numVertices;value.fill(0,3*startInstanceIndex,3*endInstanceIndex),instancePickingColors.update({value:value})}}]),PathLayer}(esm.d);path_layer_PathLayer.layerName="PathLayer",path_layer_PathLayer.defaultProps=path_layer_defaultProps;var earcut=__webpack_require__(274),earcut_default=__webpack_require__.n(earcut);function validate(polygon){if(polygon=polygon&&polygon.positions||polygon,!Array.isArray(polygon)&&!ArrayBuffer.isView(polygon))throw new Error("invalid polygon")}function isSimple(polygon){return polygon.length>=1&&polygon[0].length>=2&&Number.isFinite(polygon[0][0])}function isNestedRingClosed(simplePolygon){var p0=simplePolygon[0],p1=simplePolygon[simplePolygon.length-1];return p0[0]===p1[0]&&p0[1]===p1[1]&&p0[2]===p1[2]}function isFlatRingClosed(positions,size,startIndex,endIndex){for(var i=0;i<size;i++)if(positions[startIndex+i]!==positions[endIndex-size+i])return!1;return!0}function copyNestedRing(target,targetStartIndex,simplePolygon,size){for(var targetIndex=targetStartIndex,len=simplePolygon.length,i=0;i<len;i++)for(var j=0;j<size;j++)target[targetIndex++]=simplePolygon[i][j]||0;if(!isNestedRingClosed(simplePolygon))for(var _j=0;_j<size;_j++)target[targetIndex++]=simplePolygon[0][_j]||0;return targetIndex}function copyFlatRing(target,targetStartIndex,positions,size){var srcStartIndex=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,srcEndIndex=arguments.length>5?arguments[5]:void 0,srcLength=(srcEndIndex=srcEndIndex||positions.length)-srcStartIndex;if(srcLength<=0)return targetStartIndex;for(var targetIndex=targetStartIndex,i=0;i<srcLength;i++)target[targetIndex++]=positions[srcStartIndex+i];if(!isFlatRingClosed(positions,size,srcStartIndex,srcEndIndex))for(var _i=0;_i<size;_i++)target[targetIndex++]=positions[srcStartIndex+_i];return targetIndex}function getNestedVertexCount(simplePolygon){return(isNestedRingClosed(simplePolygon)?0:1)+simplePolygon.length}function getFlatVertexCount(positions,size){var startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,endIndex=arguments.length>3?arguments[3]:void 0;return startIndex>=(endIndex=endIndex||positions.length)?0:(isFlatRingClosed(positions,size,startIndex,endIndex)?0:1)+(endIndex-startIndex)/size}function getVertexCount(polygon,positionSize){if(validate(polygon),polygon.positions){var _polygon=polygon,positions=_polygon.positions,holeIndices=_polygon.holeIndices;if(holeIndices){for(var vertexCount=0,i=0;i<=holeIndices.length;i++)vertexCount+=getFlatVertexCount(polygon.positions,positionSize,holeIndices[i-1],holeIndices[i]);return vertexCount}polygon=positions}if(Number.isFinite(polygon[0]))return getFlatVertexCount(polygon,positionSize);if(!isSimple(polygon)){var _vertexCount=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=polygon[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_vertexCount+=getNestedVertexCount(_step.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return _vertexCount}return getNestedVertexCount(polygon)}var polygon_tesselator_Tesselator=esm.i.Tesselator,polygon_tesselator_fp64LowPart=dist_esm.r.fp64LowPart,polygon_tesselator_PolygonTesselator=function(_Tesselator){function PolygonTesselator(_ref){var data=_ref.data,getGeometry=_ref.getGeometry,fp64=_ref.fp64,positionFormat=_ref.positionFormat,_ref$IndexType=_ref.IndexType,IndexType=void 0===_ref$IndexType?Uint32Array:_ref$IndexType;return Object(classCallCheck.a)(this,PolygonTesselator),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(PolygonTesselator).call(this,{data:data,getGeometry:getGeometry,fp64:fp64,positionFormat:positionFormat,attributes:{positions:{size:3},positions64xyLow:{size:2,fp64Only:!0},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:IndexType,size:1}}}))}return Object(inherits.a)(PolygonTesselator,_Tesselator),Object(createClass.a)(PolygonTesselator,[{key:"get",value:function get(attributeName,target,accessor){if("indices"===attributeName)return this.attributes.indices.subarray(0,this.vertexCount);if(this.attributes[attributeName])return this.attributes[attributeName];switch(attributeName){case"elevations":return this._updateAttribute({target:target,size:1,getValue:function getValue(object,objectInfo){return objectInfo.target[0]=accessor(object,objectInfo),objectInfo.target}});case"colors":return this._updateAttribute({target:target,size:4,getValue:function getValue(object,objectInfo){var color=accessor(object,objectInfo);if(4===color.length)return color;var value=objectInfo.target;return value[0]=color[0],value[1]=color[1],value[2]=color[2],value[3]=255,value}});case"pickingColors":return this._updateAttribute({target:target,size:3,getValue:function getValue(object,_ref2){var index=_ref2.index,value=_ref2.target;return accessor(index,value)}});default:return null}}},{key:"getGeometrySize",value:function getGeometrySize(polygon){return getVertexCount(polygon,this.positionSize)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(polygon,context){polygon=function normalize(polygon,positionSize,vertexCount){validate(polygon),vertexCount=vertexCount||getVertexCount(polygon,positionSize);var positions=new Float64Array(vertexCount*positionSize),holeIndices=[];if(polygon.positions){var _polygon2=polygon,srcPositions=_polygon2.positions,srcHoleIndices=_polygon2.holeIndices;if(srcHoleIndices){for(var targetIndex=0,i=0;i<=srcHoleIndices.length;i++)targetIndex=copyFlatRing(positions,targetIndex,srcPositions,positionSize,srcHoleIndices[i-1],srcHoleIndices[i]),holeIndices.push(targetIndex);return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}polygon=srcPositions}if(Number.isFinite(polygon[0]))return copyFlatRing(positions,0,polygon,positionSize),{positions:positions,holeIndices:null};if(!isSimple(polygon)){var _targetIndex=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=polygon[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_targetIndex=copyNestedRing(positions,_targetIndex,_step2.value,positionSize),holeIndices.push(_targetIndex)}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return holeIndices.pop(),{positions:positions,holeIndices:holeIndices}}return copyNestedRing(positions,0,polygon,positionSize),{positions:positions,holeIndices:null}}(polygon,this.positionSize,context.geometrySize),this._updateIndices(polygon,context),this._updatePositions(polygon,context)}},{key:"_updateIndices",value:function _updateIndices(polygon,_ref3){var geometryIndex=_ref3.geometryIndex,offset=_ref3.vertexStart,indexStart=_ref3.indexStart,attributes=this.attributes,indexLayout=this.indexLayout,typedArrayManager=this.typedArrayManager,target=attributes.indices,currentLength=target.length,i=indexStart,indices=function getSurfaceIndices(normalizedPolygon,positionSize){var holeIndices=null;return normalizedPolygon.holeIndices&&(holeIndices=normalizedPolygon.holeIndices.map(function(positionIndex){return positionIndex/positionSize})),earcut_default()(normalizedPolygon.positions,holeIndices,positionSize)}(polygon,this.positionSize);currentLength<i+indices.length&&(currentLength=2*(i+indices.length),target=typedArrayManager.allocate(target,currentLength,{type:target.constructor,size:1,copy:!0}));for(var j=0;j<indices.length;j++)target[i++]=indices[j]+offset;indexLayout[geometryIndex]=indices.length,attributes.indices=target}},{key:"_updatePositions",value:function _updatePositions(polygon,_ref4){for(var vertexStart=_ref4.vertexStart,geometrySize=_ref4.geometrySize,_this$attributes=this.attributes,positions=_this$attributes.positions,positions64xyLow=_this$attributes.positions64xyLow,vertexValid=_this$attributes.vertexValid,fp64=this.fp64,positionSize=this.positionSize,i=vertexStart,polygonPositions=polygon.positions,holeIndices=polygon.holeIndices,j=0;j<geometrySize;j++){var x=polygonPositions[j*positionSize],y=polygonPositions[j*positionSize+1],z=positionSize>2?polygonPositions[j*positionSize+2]:0;positions[3*i]=x,positions[3*i+1]=y,positions[3*i+2]=z,fp64&&(positions64xyLow[2*i]=polygon_tesselator_fp64LowPart(x),positions64xyLow[2*i+1]=polygon_tesselator_fp64LowPart(y)),vertexValid[i]=1,i++}if(holeIndices)for(var _j=0;_j<holeIndices.length;_j++)vertexValid[vertexStart+holeIndices[_j]/positionSize-1]=0;vertexValid[vertexStart+geometrySize-1]=0}}]),PolygonTesselator}(polygon_tesselator_Tesselator),solid_polygon_layer_vertex_main_glsl="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec2 positions64xyLow;\n  vec2 nextPositions64xyLow;\n  float elevations;\n};\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64xyLow = mix(props.positions64xyLow, props.nextPositions64xyLow, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64xyLow = props.positions64xyLow;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y;\n  }\n  pos.z *= elevationScale;\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_commonspace);\n\n  if (extruded) {\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(props.pickingColors);\n}\n",solid_polygon_layer_vertex_top_glsl="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(solid_polygon_layer_vertex_main_glsl,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64xyLow = positions64xyLow;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),solid_polygon_layer_vertex_side_glsl="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(solid_polygon_layer_vertex_main_glsl,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64xyLow = instancePositions64xyLow;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64xyLow = nextPositions64xyLow;\n\n  calculatePosition(props);\n}\n"),solid_polygon_layer_DEFAULT_COLOR=[0,0,0,255],defaultMaterial=new dist_esm.j,solid_polygon_layer_defaultProps={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function value(f){return f.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:solid_polygon_layer_DEFAULT_COLOR},getLineColor:{type:"accessor",value:solid_polygon_layer_DEFAULT_COLOR},material:defaultMaterial},solid_polygon_layer_ATTRIBUTE_TRANSITION={enter:function enter(value,chunk){return chunk.length?chunk.subarray(chunk.length-value.length):value}},solid_polygon_layer_SolidPolygonLayer=function(_Layer){function SolidPolygonLayer(){return Object(classCallCheck.a)(this,SolidPolygonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SolidPolygonLayer).apply(this,arguments))}return Object(inherits.a)(SolidPolygonLayer,_Layer),Object(createClass.a)(SolidPolygonLayer,[{key:"getShaders",value:function getShaders(vs){return{vs:vs,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","gouraud-lighting","picking"]}}},{key:"initializeState",value:function initializeState(){var gl=this.context.gl;this.setState({numInstances:0,polygonTesselator:new polygon_tesselator_PolygonTesselator({IndexType:!gl||Object(dist_esm.t)(gl,dist_esm.f.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var attributeManager=this.getAttributeManager();attributeManager.remove(["instancePickingColors"]),attributeManager.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getPolygon",update:this.calculatePositions,shaderAttributes:{positions:{offset:0,divisor:0},instancePositions:{offset:0,divisor:1},nextPositions:{offset:12,divisor:1}}},positions64xyLow:{size:2,update:this.calculatePositionsLow,shaderAttributes:{positions64xyLow:{offset:0,divisor:0},instancePositions64xyLow:{offset:0,divisor:1},nextPositions64xyLow:{offset:8,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getElevation",update:this.calculateElevations,shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:4,type:5121,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getFillColor",update:this.calculateFillColors,defaultValue:solid_polygon_layer_DEFAULT_COLOR,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:4,type:5121,transition:solid_polygon_layer_ATTRIBUTE_TRANSITION,accessor:"getLineColor",update:this.calculateLineColors,defaultValue:solid_polygon_layer_DEFAULT_COLOR,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,update:this.calculatePickingColors,shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"draw",value:function draw(_ref){var uniforms=_ref.uniforms,_this$props=this.props,extruded=_this$props.extruded,filled=_this$props.filled,wireframe=_this$props.wireframe,elevationScale=_this$props.elevationScale,_this$state=this.state,topModel=_this$state.topModel,sideModel=_this$state.sideModel,polygonTesselator=_this$state.polygonTesselator,renderUniforms=Object.assign({},uniforms,{extruded:Boolean(extruded),elevationScale:elevationScale});sideModel&&(sideModel.setInstanceCount(polygonTesselator.instanceCount-1),sideModel.setUniforms(renderUniforms),wireframe&&(sideModel.setDrawMode(3),sideModel.setUniforms({isWireframe:!0}).draw()),filled&&(sideModel.setDrawMode(6),sideModel.setUniforms({isWireframe:!1}).draw())),topModel&&(topModel.setVertexCount(polygonTesselator.get("indices").length),topModel.setUniforms(renderUniforms).draw())}},{key:"updateState",value:function updateState(updateParams){Object(get.a)(Object(getPrototypeOf.a)(SolidPolygonLayer.prototype),"updateState",this).call(this,updateParams),this.updateGeometry(updateParams);var props=updateParams.props,oldProps=updateParams.oldProps,attributeManager=this.getAttributeManager();(props.fp64!==oldProps.fp64||props.filled!==oldProps.filled||props.extruded!==oldProps.extruded)&&(this.state.models&&this.state.models.forEach(function(model){return model.delete()}),this.setState(this._getModels(this.context.gl)),attributeManager.invalidateAll())}},{key:"updateGeometry",value:function updateGeometry(_ref2){var props=_ref2.props,oldProps=_ref2.oldProps,changeFlags=_ref2.changeFlags;if(changeFlags.dataChanged||props.fp64!==oldProps.fp64||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getPolygon)){var polygonTesselator=this.state.polygonTesselator;polygonTesselator.updateGeometry({data:props.data,getGeometry:props.getPolygon,positionFormat:props.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:polygonTesselator.instanceCount}),this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function _getModels(gl){var topModel,sideModel,_this$props2=this.props,id=_this$props2.id,filled=_this$props2.filled,extruded=_this$props2.extruded;return filled&&(topModel=new dist_esm.i(gl,Object.assign({},this.getShaders(solid_polygon_layer_vertex_top_glsl),{id:"".concat(id,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))),extruded&&((sideModel=new dist_esm.i(gl,Object.assign({},this.getShaders(solid_polygon_layer_vertex_side_glsl),{id:"".concat(id,"-side"),geometry:new dist_esm.h({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),instanceCount:0,isInstanced:1,shaderCache:this.context.shaderCache}))).userData.excludeAttributes={indices:!0}),{models:[sideModel,topModel].filter(Boolean),topModel:topModel,sideModel:sideModel}}},{key:"calculateIndices",value:function calculateIndices(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.indexLayout,attribute.value=polygonTesselator.get("indices")}},{key:"calculatePositions",value:function calculatePositions(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("positions")}},{key:"calculatePositionsLow",value:function calculatePositionsLow(attribute){var isFP64=this.use64bitPositions();attribute.constant=!isFP64,attribute.value=isFP64?this.state.polygonTesselator.get("positions64xyLow"):new Float32Array(2)}},{key:"calculateVertexValid",value:function calculateVertexValid(attribute){attribute.value=this.state.polygonTesselator.get("vertexValid")}},{key:"calculateElevations",value:function calculateElevations(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout;var _this$props3=this.props,extruded=_this$props3.extruded,getElevation=_this$props3.getElevation;extruded?(attribute.constant=!1,attribute.value=polygonTesselator.get("elevations",attribute.value,getElevation)):(attribute.constant=!0,attribute.value=new Float32Array(1))}},{key:"calculateFillColors",value:function calculateFillColors(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("colors",attribute.value,this.props.getFillColor)}},{key:"calculateLineColors",value:function calculateLineColors(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.bufferLayout=polygonTesselator.bufferLayout,attribute.value=polygonTesselator.get("colors",attribute.value,this.props.getLineColor)}},{key:"calculatePickingColors",value:function calculatePickingColors(attribute){var polygonTesselator=this.state.polygonTesselator;attribute.value=polygonTesselator.get("pickingColors",attribute.value,this.encodePickingColor)}},{key:"clearPickingColor",value:function clearPickingColor(color){for(var pickedPolygonIndex=this.decodePickingColor(color),bufferLayout=this.state.polygonTesselator.bufferLayout,numVertices=bufferLayout[pickedPolygonIndex],startInstanceIndex=0,polygonIndex=0;polygonIndex<pickedPolygonIndex;polygonIndex++)startInstanceIndex+=bufferLayout[polygonIndex];var pickingColors=this.getAttributeManager().attributes.pickingColors,value=pickingColors.value,endInstanceIndex=startInstanceIndex+numVertices;value.fill(0,3*startInstanceIndex,3*endInstanceIndex),pickingColors.update({value:value})}}]),SolidPolygonLayer}(esm.d);function assert(condition,message){if(!condition)throw new Error("deck.gl: ".concat(message))}function separateGeometry(geometry,separated,sourceFeature){var type=geometry.type,coordinates=geometry.coordinates,pointFeatures=separated.pointFeatures,lineFeatures=separated.lineFeatures,polygonFeatures=separated.polygonFeatures,polygonOutlineFeatures=separated.polygonOutlineFeatures;switch(function checkCoordinates(type,coordinates){var nestLevel=COORDINATE_NEST_LEVEL[type];assert(nestLevel,"Unknown GeoJSON type ".concat(type));for(;coordinates&&--nestLevel>0;)coordinates=coordinates[0];assert(coordinates&&Number.isFinite(coordinates[0]),"".concat(type," coordinates are malformed"))}(type,coordinates),type){case"Point":pointFeatures.push({geometry:geometry,sourceFeature:sourceFeature});break;case"MultiPoint":coordinates.forEach(function(point){pointFeatures.push({geometry:{type:"Point",coordinates:point},sourceFeature:sourceFeature})});break;case"LineString":lineFeatures.push({geometry:geometry,sourceFeature:sourceFeature});break;case"MultiLineString":coordinates.forEach(function(path){lineFeatures.push({geometry:{type:"LineString",coordinates:path},sourceFeature:sourceFeature})});break;case"Polygon":polygonFeatures.push({geometry:geometry,sourceFeature:sourceFeature}),coordinates.forEach(function(path){polygonOutlineFeatures.push({geometry:{type:"LineString",coordinates:path},sourceFeature:sourceFeature})});break;case"MultiPolygon":coordinates.forEach(function(polygon){polygonFeatures.push({geometry:{type:"Polygon",coordinates:polygon},sourceFeature:sourceFeature}),polygon.forEach(function(path){polygonOutlineFeatures.push({geometry:{type:"LineString",coordinates:path},sourceFeature:sourceFeature})})})}}function unwrapSourceFeature(wrappedFeature){return wrappedFeature.sourceFeature.feature}solid_polygon_layer_SolidPolygonLayer.layerName="SolidPolygonLayer",solid_polygon_layer_SolidPolygonLayer.defaultProps=solid_polygon_layer_defaultProps;var COORDINATE_NEST_LEVEL={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};var geojson_layer_defaultMaterial=new dist_esm.j,geojson_layer_defaultProps={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,fp64:!1,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},material:geojson_layer_defaultMaterial};function getCoordinates(f){return f.geometry.coordinates}function unwrappingAccessor(accessor){return"function"!=typeof accessor?accessor:function(feature){return accessor(unwrapSourceFeature(feature))}}var geojson_layer_GeoJsonLayer=function(_CompositeLayer){function GeoJsonLayer(){return Object(classCallCheck.a)(this,GeoJsonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(GeoJsonLayer).apply(this,arguments))}return Object(inherits.a)(GeoJsonLayer,_CompositeLayer),Object(createClass.a)(GeoJsonLayer,[{key:"initializeState",value:function initializeState(){this.state={features:{}}}},{key:"updateState",value:function updateState(_ref){_ref.oldProps;var props=_ref.props;if(_ref.changeFlags.dataChanged){var features=function getGeojsonFeatures(geojson){if(Array.isArray(geojson))return geojson;switch(assert(geojson.type,"GeoJSON does not have type"),geojson.type){case"Feature":return[geojson];case"FeatureCollection":return assert(Array.isArray(geojson.features),"GeoJSON does not have features array"),geojson.features;default:return[{geometry:geojson}]}}(props.data);this.state.features=function separateGeojsonFeatures(features){for(var separated={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},featureIndex=0;featureIndex<features.length;featureIndex++){var feature=features[featureIndex];assert(feature&&feature.geometry,"GeoJSON does not have geometry");var geometry=feature.geometry,sourceFeature={feature:feature,index:featureIndex};if("GeometryCollection"===geometry.type){assert(Array.isArray(geometry.geometries),"GeoJSON does not have geometries array");for(var geometries=geometry.geometries,i=0;i<geometries.length;i++)separateGeometry(geometries[i],separated,sourceFeature)}else separateGeometry(geometry,separated,sourceFeature)}return separated}(features)}}},{key:"getPickingInfo",value:function getPickingInfo(_ref2){var wrappedFeature,info=_ref2.info;_ref2.sourceLayer;return Object.assign(info,{object:info.object?unwrapSourceFeature(info.object):info.object,index:info.object?(wrappedFeature=info.object,wrappedFeature.sourceFeature.index):info.index})}},{key:"renderLayers",value:function renderLayers(){var features=this.state.features,pointFeatures=features.pointFeatures,lineFeatures=features.lineFeatures,polygonFeatures=features.polygonFeatures,polygonOutlineFeatures=features.polygonOutlineFeatures,_this$props=this.props,stroked=_this$props.stroked,filled=_this$props.filled,extruded=_this$props.extruded,wireframe=_this$props.wireframe,material=_this$props.material,transitions=_this$props.transitions,_this$props2=this.props,lineWidthUnits=_this$props2.lineWidthUnits,lineWidthScale=_this$props2.lineWidthScale,lineWidthMinPixels=_this$props2.lineWidthMinPixels,lineWidthMaxPixels=_this$props2.lineWidthMaxPixels,lineJointRounded=_this$props2.lineJointRounded,lineMiterLimit=_this$props2.lineMiterLimit,pointRadiusScale=_this$props2.pointRadiusScale,pointRadiusMinPixels=_this$props2.pointRadiusMinPixels,pointRadiusMaxPixels=_this$props2.pointRadiusMaxPixels,elevationScale=_this$props2.elevationScale,lineDashJustified=_this$props2.lineDashJustified,fp64=_this$props2.fp64,_this$props3=this.props,getLineColor=_this$props3.getLineColor,getFillColor=_this$props3.getFillColor,getRadius=_this$props3.getRadius,getLineWidth=_this$props3.getLineWidth,getLineDashArray=_this$props3.getLineDashArray,getElevation=_this$props3.getElevation,updateTriggers=_this$props3.updateTriggers,PolygonFillLayer=this.getSubLayerClass("polygons-fill",solid_polygon_layer_SolidPolygonLayer),PolygonStrokeLayer=this.getSubLayerClass("polygons-stroke",path_layer_PathLayer),LineStringsLayer=this.getSubLayerClass("line-strings",path_layer_PathLayer),PointsLayer=this.getSubLayerClass("points",scatterplot_layer_ScatterplotLayer),polygonFillLayer=this.shouldRenderSubLayer("polygons-fill",polygonFeatures)&&new PolygonFillLayer({fp64:fp64,extruded:extruded,elevationScale:elevationScale,filled:filled,wireframe:wireframe,material:material,getElevation:unwrappingAccessor(getElevation),getFillColor:unwrappingAccessor(getFillColor),getLineColor:unwrappingAccessor(getLineColor),transitions:transitions&&{getPolygon:transitions.geometry,getElevation:transitions.getElevation,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:updateTriggers.getElevation,getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor}}),{data:polygonFeatures,getPolygon:getCoordinates});return[!extruded&&polygonFillLayer,!extruded&&stroked&&this.shouldRenderSubLayer("polygons-stroke",polygonOutlineFeatures)&&new PolygonStrokeLayer({fp64:fp64,widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:unwrappingAccessor(getLineColor),getWidth:unwrappingAccessor(getLineWidth),getDashArray:unwrappingAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:polygonOutlineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("linestrings",lineFeatures)&&new LineStringsLayer({fp64:fp64,widthUnits:lineWidthUnits,widthScale:lineWidthScale,widthMinPixels:lineWidthMinPixels,widthMaxPixels:lineWidthMaxPixels,rounded:lineJointRounded,miterLimit:lineMiterLimit,dashJustified:lineDashJustified,getColor:unwrappingAccessor(getLineColor),getWidth:unwrappingAccessor(getLineWidth),getDashArray:unwrappingAccessor(getLineDashArray),transitions:transitions&&{getPath:transitions.geometry,getColor:transitions.getLineColor,getWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:updateTriggers.getLineColor,getWidth:updateTriggers.getLineWidth,getDashArray:updateTriggers.getLineDashArray}}),{data:lineFeatures,getPath:getCoordinates}),this.shouldRenderSubLayer("points",pointFeatures)&&new PointsLayer({fp64:fp64,stroked:stroked,filled:filled,radiusScale:pointRadiusScale,radiusMinPixels:pointRadiusMinPixels,radiusMaxPixels:pointRadiusMaxPixels,lineWidthUnits:lineWidthUnits,lineWidthScale:lineWidthScale,lineWidthMinPixels:lineWidthMinPixels,lineWidthMaxPixels:lineWidthMaxPixels,getFillColor:unwrappingAccessor(getFillColor),getLineColor:unwrappingAccessor(getLineColor),getRadius:unwrappingAccessor(getRadius),getLineWidth:unwrappingAccessor(getLineWidth),transitions:transitions&&{getPosition:transitions.geometry,getFillColor:transitions.getFillColor,getLineColor:transitions.getLineColor,getRadius:transitions.getRadius,getLineWidth:transitions.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:updateTriggers.getFillColor,getLineColor:updateTriggers.getLineColor,getRadius:updateTriggers.getRadius,getLineWidth:updateTriggers.getLineWidth}}),{data:pointFeatures,getPosition:getCoordinates}),extruded&&polygonFillLayer]}}]),GeoJsonLayer}(esm.b);geojson_layer_GeoJsonLayer.layerName="GeoJsonLayer",geojson_layer_GeoJsonLayer.defaultProps=geojson_layer_defaultProps,__webpack_require__.d(__webpack_exports__,"b",function(){return icon_layer_IconLayer}),__webpack_require__.d(__webpack_exports__,"a",function(){return geojson_layer_GeoJsonLayer})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return experimental});var _utils_bin_sorter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(114),_utils_scale_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72),_utils_color_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(145),experimental={BinSorter:_utils_bin_sorter__WEBPACK_IMPORTED_MODULE_0__.a,linearScale:_utils_scale_utils__WEBPACK_IMPORTED_MODULE_1__.c,getLinearScale:_utils_scale_utils__WEBPACK_IMPORTED_MODULE_1__.a,quantizeScale:_utils_scale_utils__WEBPACK_IMPORTED_MODULE_1__.d,getQuantizeScale:_utils_scale_utils__WEBPACK_IMPORTED_MODULE_1__.b,defaultColorRange:_utils_color_utils__WEBPACK_IMPORTED_MODULE_2__.a}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return multiply}),__webpack_require__.d(__webpack_exports__,"b",function(){return scale}),__webpack_require__.d(__webpack_exports__,"c",function(){return transformMat4});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function multiply(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out[3]=a[3]*b[3],out}function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out}var vec;vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(4);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0,out[3]=0),out}()},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return length}),__webpack_require__.d(__webpack_exports__,"d",function(){return negate}),__webpack_require__.d(__webpack_exports__,"b",function(){return cross}),__webpack_require__.d(__webpack_exports__,"i",function(){return transformMat4}),__webpack_require__.d(__webpack_exports__,"e",function(){return rotateX}),__webpack_require__.d(__webpack_exports__,"f",function(){return rotateY}),__webpack_require__.d(__webpack_exports__,"g",function(){return rotateZ}),__webpack_require__.d(__webpack_exports__,"a",function(){return angle}),__webpack_require__.d(__webpack_exports__,"h",function(){return sub});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function length(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)}function fromValues(x,y,z){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(3);return out[0]=x,out[1]=y,out[2]=z,out}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out}function normalize(out,a){var x=a[0],y=a[1],z=a[2],len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len)),out[0]=a[0]*len,out[1]=a[1]*len,out[2]=a[2]*len,out}function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out}function rotateX(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(c)-p[2]*Math.sin(c),r[2]=p[1]*Math.sin(c)+p[2]*Math.cos(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateY(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(c)+p[0]*Math.cos(c),r[1]=p[1],r[2]=p[2]*Math.cos(c)-p[0]*Math.sin(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateZ(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(c)-p[1]*Math.sin(c),r[1]=p[0]*Math.sin(c)+p[1]*Math.cos(c),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function angle(a,b){var tempA=fromValues(a[0],a[1],a[2]),tempB=fromValues(b[0],b[1],b[2]);normalize(tempA,tempA),normalize(tempB,tempB);var cosine=function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}(tempA,tempB);return cosine>1?0:cosine<-1?Math.PI:Math.acos(cosine)}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.a(3);return _common_js__WEBPACK_IMPORTED_MODULE_0__.a!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0),out}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(532)},function(module,exports,__webpack_require__){var anObject=__webpack_require__(33),IE8_DOM_DEFINE=__webpack_require__(212),toPrimitive=__webpack_require__(118),dP=Object.defineProperty;exports.f=__webpack_require__(37)?Object.defineProperty:function defineProperty(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",function(){return window_}),__webpack_require__.d(__webpack_exports__,"a",function(){return document_});var window_="undefined"!=typeof window?window:global,document_=(void 0!==global||window,"undefined"!=typeof document?document:{})}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return GL_PARAMETER_DEFAULTS}),__webpack_require__.d(__webpack_exports__,"d",function(){return GL_PARAMETER_SETTERS}),__webpack_require__.d(__webpack_exports__,"a",function(){return GL_COMPOSITE_PARAMETER_SETTERS}),__webpack_require__.d(__webpack_exports__,"c",function(){return GL_PARAMETER_GETTERS});var _GL_PARAMETER_DEFAULT,_GL_PARAMETER_SETTERS,_GL_PARAMETER_GETTERS,_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(46),GL_PARAMETER_DEFAULTS=(_GL_PARAMETER_DEFAULT={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3042,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32773,new Float32Array([0,0,0,0])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32777,32774),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34877,32774),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32969,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32968,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32971,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32970,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3106,new Float32Array([0,0,0,0])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3107,[!0,!0,!0,!0]),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2884,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2885,1029),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2929,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2931,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2932,513),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2928,new Float32Array([0,1])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2930,!0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3024,!0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36006,null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2886,2305),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,33170,4352),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2849,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32823,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32824,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,10752,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32938,1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32939,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3089,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3088,new Int32Array([0,0,1024,1024])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2960,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2961,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2968,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36005,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2962,519),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2967,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2963,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34816,519),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36003,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36004,4294967295),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2964,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2965,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2966,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34817,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34818,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,34819,7680),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,2978,new Int32Array([0,0,1024,1024])),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3333,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3317,4),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,37440,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,37441,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,37443,37444),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,35723,4352),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,36010,null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,35977,!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3330,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3332,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3331,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3314,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32878,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3316,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,3315,0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_DEFAULT,32877,0),_GL_PARAMETER_DEFAULT),enable=function enable(gl,value,key){return value?gl.enable(key):gl.disable(key)},hint=function hint(gl,value,key){return gl.hint(key,value)},pixelStorei=function pixelStorei(gl,value,key){return gl.pixelStorei(key,value)},GL_PARAMETER_SETTERS=(_GL_PARAMETER_SETTERS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3042,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32773,function(gl,value){return gl.blendColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32777,"blendEquation"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34877,"blendEquation"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32969,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32968,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32971,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32970,"blendFunc"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3106,function(gl,value){return gl.clearColor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3107,function(gl,value){return gl.colorMask.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2884,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2885,function(gl,value){return gl.cullFace(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2929,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2931,function(gl,value){return gl.clearDepth(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2932,function(gl,value){return gl.depthFunc(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2928,function(gl,value){return gl.depthRange.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2930,function(gl,value){return gl.depthMask(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3024,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,35723,hint),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36006,function drawFramebuffer(gl,value){var target=Object(_utils__WEBPACK_IMPORTED_MODULE_2__.c)(gl)?36009:36160;return gl.bindFramebuffer(target,value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2886,function(gl,value){return gl.frontFace(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,33170,hint),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2849,function(gl,value){return gl.lineWidth(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32823,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32824,"polygonOffset"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,10752,"polygonOffset"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,35977,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32938,"sampleCoverage"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32939,"sampleCoverage"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3089,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3088,function(gl,value){return gl.scissor.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2960,enable),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2961,function(gl,value){return gl.clearStencil(value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2968,function(gl,value){return gl.stencilMaskSeparate(1028,value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36005,function(gl,value){return gl.stencilMaskSeparate(1029,value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2962,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2967,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2963,"stencilFuncFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34816,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36003,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36004,"stencilFuncBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2964,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2965,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2966,"stencilOpFront"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34817,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34818,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,34819,"stencilOpBack"),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,2978,function(gl,value){return gl.viewport.apply(gl,Object(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(value))}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3333,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3317,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,37440,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,37441,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,37443,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3330,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3332,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3331,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,36010,function readFramebuffer(gl,value){return gl.bindFramebuffer(36008,value)}),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3314,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32878,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3316,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,3315,pixelStorei),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_SETTERS,32877,pixelStorei),_GL_PARAMETER_SETTERS),GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:function blendEquation(gl,values){return gl.blendEquationSeparate(values[32777],values[34877])},blendFunc:function blendFunc(gl,values){return gl.blendFuncSeparate(values[32969],values[32968],values[32971],values[32970])},polygonOffset:function polygonOffset(gl,values){return gl.polygonOffset(values[32824],values[10752])},sampleCoverage:function sampleCoverage(gl,values){return gl.sampleCoverage(values[32938],values[32939])},stencilFuncFront:function stencilFuncFront(gl,values){return gl.stencilFuncSeparate(1028,values[2962],values[2967],values[2963])},stencilFuncBack:function stencilFuncBack(gl,values){return gl.stencilFuncSeparate(1029,values[34816],values[36003],values[36004])},stencilOpFront:function stencilOpFront(gl,values){return gl.stencilOpSeparate(1028,values[2964],values[2965],values[2966])},stencilOpBack:function stencilOpBack(gl,values){return gl.stencilOpSeparate(1029,values[34817],values[34818],values[34819])}},isEnabled=function isEnabled(gl,key){return gl.isEnabled(key)},GL_PARAMETER_GETTERS=(_GL_PARAMETER_GETTERS={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,3042,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,2884,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,2929,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,3024,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,32823,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,32926,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,32928,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,3089,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,2960,isEnabled),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_GL_PARAMETER_GETTERS,35977,isEnabled),_GL_PARAMETER_GETTERS)},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(309);module.exports=Function.prototype.bind||implementation},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}__webpack_require__(139);function isObjectEmpty(object){for(var key in object)return!1;return!0}function isWebGL2(gl){return Boolean(gl&&2===gl._version)}__webpack_require__.d(__webpack_exports__,"a",function(){return assert}),__webpack_require__.d(__webpack_exports__,"c",function(){return isWebGL2}),__webpack_require__.d(__webpack_exports__,"b",function(){return isObjectEmpty})},,function(module,exports,__webpack_require__){var global=__webpack_require__(29),hide=__webpack_require__(66),has=__webpack_require__(64),SRC=__webpack_require__(103)("src"),$toString=__webpack_require__(377),TPL=(""+$toString).split("toString");__webpack_require__(65).inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(has(val,"name")||hide(val,"name",key)),O[key]!==val&&(isFunction&&(has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===global?O[key]=val:safe?O[key]?O[key]=val:hide(O,key,val):(delete O[key],hide(O,key,val)))})(Function.prototype,"toString",function toString(){return"function"==typeof this&&this[SRC]||$toString.call(this)})},function(module,exports,__webpack_require__){(function(global){var win;win="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},module.exports=win}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return setParameters}),__webpack_require__.d(__webpack_exports__,"a",function(){return getParameters}),__webpack_require__.d(__webpack_exports__,"b",function(){return resetParameters});var _webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44);__webpack_require__(139),__webpack_require__(46);function setParameters(gl,values){var compositeSetters={};for(var key in values){var glConstant=Number(key),setter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.d[key];setter&&("string"==typeof setter?compositeSetters[setter]=!0:setter(gl,values[key],glConstant))}var cache=gl.state&&gl.state.cache;if(cache){var mergedValues=Object.assign({},cache,values);for(var _key in compositeSetters){(0,_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.a[_key])(gl,mergedValues)}}}function getParameter(gl,key){var getter=_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.c[key];return getter?getter(gl,Number(key)):gl.getParameter(Number(key))}function getParameters(gl,parameters){parameters=parameters||_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.b;var parameterKeys=Array.isArray(parameters)?parameters:Object.keys(parameters),state={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parameterKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;state[key]=getParameter(gl,key)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return state}function resetParameters(gl){setParameters(gl,function getDefaultParameters(gl){return Object.assign({},_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_0__.b,{})}())}},function(module,__webpack_exports__,__webpack_require__){"use strict";var src=__webpack_require__(18);function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}var constant=function(x){return function(){return x}};function linear(a,d){return function(t){return a+t*d}}function color_hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):constant(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):constant(isNaN(a)?b:a)}var src_rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=Object(src.f)(start)).r,(end=Object(src.f)(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=Object(src.f)(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline(function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}),number=(rgbSpline(function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}),function(a,b){return b-=a=+a,function(t){return a+b*t}}),reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");var cssNode,cssRoot,cssView,svgNode,src_value=function(a,b){var c,t=typeof b;return null==b||"boolean"===t?constant(b):("number"===t?number:"string"===t?(c=Object(src.a)(b))?(b=c,src_rgb):function(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function one(b){return function(t){return b(t)+""}}(q[0].x):function zero(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}:b instanceof src.a?src_rgb:b instanceof Date?function(a,b){var d=new Date;return b-=a=+a,function(t){return d.setTime(a+b*t),d}}:Array.isArray(b)?function(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=src_value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?function(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=src_value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}}:number)(a,b)},round=function(a,b){return b-=a=+a,function(t){return Math.round(a+b*t)}},degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}};function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function rotate(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function skewX(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:number(xa,xb)},{i:i-2,x:number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}interpolateTransform(function parseCss(value){return"none"===value?identity:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),value=value.slice(7,-1).split(","),decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5]))},"px, ","px)","deg)"),interpolateTransform(function parseSvg(value){return null==value?identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?(value=value.matrix,decompose(value.a,value.b,value.c,value.d,value.e,value.f)):identity)},", ",")",")"),Math.SQRT2;function hsl(hue){return function(start,end){var h=hue((start=Object(src.d)(start)).h,(end=Object(src.d)(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}hsl(color_hue),hsl(nogamma);function hcl(hue){return function(start,end){var h=hue((start=Object(src.c)(start)).h,(end=Object(src.c)(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}hcl(color_hue),hcl(nogamma);function cubehelix_cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=Object(src.b)(start)).h,(end=Object(src.b)(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}cubehelix_cubehelix(color_hue);var cubehelixLong=cubehelix_cubehelix(nogamma);__webpack_require__.d(__webpack_exports__,"a",function(){return src_value}),__webpack_require__.d(__webpack_exports__,"c",function(){return number}),__webpack_require__.d(__webpack_exports__,"e",function(){return round}),__webpack_require__.d(__webpack_exports__,"d",function(){return rgbBasis}),__webpack_require__.d(__webpack_exports__,"b",function(){return cubehelixLong})},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"viewport-mercator-project: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",function(){return assert})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return getHiResTimestamp});var _globals__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61),_globals__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30);function getHiResTimestamp(){var timestamp;if(_globals__WEBPACK_IMPORTED_MODULE_0__.b&&_globals__WEBPACK_IMPORTED_MODULE_1__.b.performance)timestamp=_globals__WEBPACK_IMPORTED_MODULE_1__.b.performance.now();else if(_globals__WEBPACK_IMPORTED_MODULE_1__.a.hrtime){var timeParts=_globals__WEBPACK_IMPORTED_MODULE_1__.a.hrtime();timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(123),test={};test[__webpack_require__(28)("toStringTag")]="z",test+""!="[object z]"&&__webpack_require__(48)(Object.prototype,"toString",function toString(){return"[object "+classof(this)+"]"},!0)},function(module,exports,__webpack_require__){for(var $iterators=__webpack_require__(70),getKeys=__webpack_require__(75),redefine=__webpack_require__(48),global=__webpack_require__(29),hide=__webpack_require__(66),Iterators=__webpack_require__(109),wks=__webpack_require__(28),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var key,NAME=collections[i],explicit=DOMIterables[NAME],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto&&(proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues,explicit))for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(247),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"a",function(){return trackContextState}),__webpack_require__.d(__webpack_exports__,"c",function(){return pushContextState}),__webpack_require__.d(__webpack_exports__,"b",function(){return popContextState});var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_webgl_function_to_parameters_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(191),_unified_parameter_api_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(44),_unified_parameter_api_unified_parameter_api__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(50),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(46),deepEqual=function deepEqual(x,y){var isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(var i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return x===y};function installGetterOverride(gl,functionName){var originalGetterFunc=gl[functionName].bind(gl);gl[functionName]=function get(){var pname=arguments.length<=0?void 0:arguments[0];return pname in gl.state.cache||(gl.state.cache[pname]=originalGetterFunc.apply(void 0,arguments)),gl.state.enable?gl.state.cache[pname]:originalGetterFunc.apply(void 0,arguments)},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-from-cache"),configurable:!1})}function installSetterSpy(gl,functionName,setter){var originalSetterFunc=gl[functionName].bind(gl);gl[functionName]=function set(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];var _gl$state,_setter=setter.apply(void 0,[gl.state._updateCache].concat(params)),valueChanged=_setter.valueChanged,oldValue=_setter.oldValue;valueChanged&&((_gl$state=gl.state).log.apply(_gl$state,["gl.".concat(functionName)].concat(params)),originalSetterFunc.apply(void 0,params));return oldValue},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-to-cache"),configurable:!1})}var GLState=function(){function GLState(gl){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$copyState=_ref.copyState,copyState=void 0!==_ref$copyState&&_ref$copyState,_ref$log=_ref.log,log=void 0===_ref$log?function(){}:_ref$log;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,GLState),this.gl=gl,this.stateStack=[],this.enable=!0,this.cache=copyState?Object(_unified_parameter_api_unified_parameter_api__WEBPACK_IMPORTED_MODULE_4__.a)(gl):Object.assign({},_unified_parameter_api_webgl_parameter_tables__WEBPACK_IMPORTED_MODULE_3__.b),this.log=log,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(GLState,[{key:"push",value:function push(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function pop(){Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(this.stateStack.length>0);var oldValues=this.stateStack[this.stateStack.length-1];Object(_unified_parameter_api_unified_parameter_api__WEBPACK_IMPORTED_MODULE_4__.c)(this.gl,oldValues,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function _updateCache(values){var oldValue,valueChanged=!1,oldValues=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var key in values)Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(void 0!==key),deepEqual(values[key],this.cache[key])||(valueChanged=!0,oldValue=this.cache[key],!oldValues||key in oldValues||(oldValues[key]=this.cache[key]),this.cache[key]=values[key]);return{valueChanged:valueChanged,oldValue:oldValue}}}]),GLState}();function trackContextState(gl){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref2$enable=_ref2.enable,enable=void 0===_ref2$enable||_ref2$enable,copyState=_ref2.copyState;if(Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(void 0!==copyState),!gl.state){var global_=void 0!==global?global:window;for(var key in global_.polyfillContext&&global_.polyfillContext(gl),gl.state=new GLState(gl,{copyState:copyState,enable:enable}),_webgl_function_to_parameters_table__WEBPACK_IMPORTED_MODULE_2__.a){installSetterSpy(gl,key,_webgl_function_to_parameters_table__WEBPACK_IMPORTED_MODULE_2__.a[key])}installGetterOverride(gl,"getParameter"),installGetterOverride(gl,"isEnabled")}return gl.state.enable=enable,gl}function pushContextState(gl){gl.state||trackContextState(gl,{copyState:!1}),gl.state.push()}function popContextState(gl){Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)(gl.state),gl.state.pop()}}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}__webpack_require__.d(__webpack_exports__,"a",function(){return _asyncToGenerator})},function(module,__webpack_exports__,__webpack_require__){"use strict";var _deck_gl_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(35),_deck_gl_layers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34);__webpack_require__.d(__webpack_exports__,"b",function(){return _deck_gl_layers__WEBPACK_IMPORTED_MODULE_2__.b}),__webpack_require__.d(__webpack_exports__,"a",function(){return _deck_gl_layers__WEBPACK_IMPORTED_MODULE_2__.a});var _deck_gl_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94);__webpack_require__.d(__webpack_exports__,"c",function(){return _deck_gl_react__WEBPACK_IMPORTED_MODULE_3__.a});__webpack_require__(8);var count=_deck_gl_core__WEBPACK_IMPORTED_MODULE_0__.i.count,flattenVertices=_deck_gl_core__WEBPACK_IMPORTED_MODULE_0__.i.flattenVertices,fillArray=_deck_gl_core__WEBPACK_IMPORTED_MODULE_0__.i.fillArray,BinSorter=_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__.a.BinSorter,linearScale=_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__.a.linearScale,getLinearScale=_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__.a.getLinearScale,quantizeScale=_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__.a.quantizeScale,getQuantizeScale=_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__.a.getQuantizeScale,defaultColorRange=_deck_gl_aggregation_layers__WEBPACK_IMPORTED_MODULE_1__.a.defaultColorRange;Object.assign({},{BinSorter:BinSorter,linearScale:linearScale,getLinearScale:getLinearScale,quantizeScale:quantizeScale,getQuantizeScale:getQuantizeScale,defaultColorRange:defaultColorRange,count:count,flattenVertices:flattenVertices,fillArray:fillArray})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return VERSION}),__webpack_require__.d(__webpack_exports__,"b",function(){return isBrowser});var _env_is_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(142),VERSION="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",isBrowser=Object(_env_is_browser__WEBPACK_IMPORTED_MODULE_0__.a)()},function(module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"webgl2-polyfill: assertion failed.")}__webpack_require__.d(__webpack_exports__,"a",function(){return assert})},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(29),has=__webpack_require__(64),DESCRIPTORS=__webpack_require__(37),$export=__webpack_require__(23),redefine=__webpack_require__(48),META=__webpack_require__(120).KEY,$fails=__webpack_require__(38),shared=__webpack_require__(119),setToStringTag=__webpack_require__(105),uid=__webpack_require__(103),wks=__webpack_require__(28),wksExt=__webpack_require__(213),wksDefine=__webpack_require__(159),enumKeys=__webpack_require__(378),isArray=__webpack_require__(163),anObject=__webpack_require__(33),isObject=__webpack_require__(39),toIObject=__webpack_require__(76),toPrimitive=__webpack_require__(118),createDesc=__webpack_require__(102),_create=__webpack_require__(108),gOPNExt=__webpack_require__(380),$GOPD=__webpack_require__(165),$DP=__webpack_require__(42),$keys=__webpack_require__(75),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object.prototype,USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);return sym._k=tag,sym},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return it instanceof $Symbol},$defineProperty=function defineProperty(it,key,D){return it===ObjectProto&&$defineProperty(OPSymbols,key,D),anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function defineProperties(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return!(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))&&(!(E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key])||E)},$getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){if(it=toIObject(it),key=toPrimitive(key,!0),it!==ObjectProto||!has(AllSymbols,key)||has(OPSymbols,key)){var D=gOPD(it,key);return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D}},$getOwnPropertyNames=function getOwnPropertyNames(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function getOwnPropertySymbols(it){for(var key,IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0;names.length>i;)!has(AllSymbols,key=names[i++])||IS_OP&&!has(ObjectProto,key)||result.push(AllSymbols[key]);return result};USE_NATIVE||(redefine(($Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:void 0),$set=function(value){this===ObjectProto&&$set.call(OPSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:$set}),wrap(tag)}).prototype,"toString",function toString(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,__webpack_require__(164).f=gOPNExt.f=$getOwnPropertyNames,__webpack_require__(107).f=$propertyIsEnumerable,__webpack_require__(162).f=$getOwnPropertySymbols,DESCRIPTORS&&!__webpack_require__(104)&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(name){return wrap(wks(name))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:function create(it,P){return void 0===P?_create(it):$defineProperties(_create(it),P)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))})),"JSON",{stringify:function stringify(it){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);if($replacer=replacer=args[1],(isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,_stringify.apply($JSON,args)}}),$Symbol.prototype[TO_PRIMITIVE]||__webpack_require__(66)($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){var core=module.exports={version:"2.6.5"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var dP=__webpack_require__(42),createDesc=__webpack_require__(102);module.exports=__webpack_require__(37)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(87);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(122),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var defined=__webpack_require__(106);module.exports=function(it){return Object(defined(it))}},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(225),step=__webpack_require__(226),Iterators=__webpack_require__(109),toIObject=__webpack_require__(76);module.exports=__webpack_require__(166)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):step(0,"keys"==kind?index:"values"==kind?O[index]:[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_is_electron__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(269),isBrowser=!("object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&"[object process]"===String(process)&&!process.browser)||_is_electron__WEBPACK_IMPORTED_MODULE_1__.a;__webpack_exports__.a=isBrowser}).call(this,__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return linearScale}),__webpack_require__.d(__webpack_exports__,"d",function(){return quantizeScale}),__webpack_require__.d(__webpack_exports__,"b",function(){return getQuantizeScale}),__webpack_require__.d(__webpack_exports__,"a",function(){return getLinearScale});var _deck_gl_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);function linearScale(domain,range,value){return(value-domain[0])/(domain[1]-domain[0])*(range[1]-range[0])+range[0]}function quantizeScale(domain,range,value){var domainRange=domain[1]-domain[0];if(domainRange<=0)return _deck_gl_core__WEBPACK_IMPORTED_MODULE_0__.j.warn("quantizeScale: invalid domain, returning range[0]")(),range[0];var step=domainRange/range.length,idx=Math.floor((value-domain[0])/step);return range[Math.max(Math.min(idx,range.length-1),0)]}function getQuantizeScale(domain,range){return function(value){return quantizeScale(domain,range,value)}}function getLinearScale(domain,range){return function(value){return(value-domain[0])/(domain[1]-domain[0])*(range[1]-range[0])+range[0]}}},function(module,exports,__webpack_require__){"use strict";(function(global){var origSymbol=global.Symbol,hasSymbolSham=__webpack_require__(318);module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";var ThrowTypeError=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,getProto=Object.getPrototypeOf||function(x){return x.__proto__},asyncGenIterator=void 0,TypedArray="undefined"==typeof Uint8Array?void 0:getProto(Uint8Array),INTRINSICS={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":hasSymbols?Symbol:void 0,"$ %SymbolPrototype%":hasSymbols?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":ThrowTypeError,"$ %TypedArray%":TypedArray,"$ %TypedArrayPrototype%":TypedArray?TypedArray.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};module.exports=function GetIntrinsic(name,allowMissing){if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new TypeError('"allowMissing" argument must be a boolean');var key="$ "+name;if(!(key in INTRINSICS))throw new SyntaxError("intrinsic "+name+" does not exist!");if(void 0===INTRINSICS[key]&&!allowMissing)throw new TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return INTRINSICS[key]}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(214),enumBugKeys=__webpack_require__(161);module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(121),defined=__webpack_require__(106);module.exports=function(it){return IObject(defined(it))}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){__webpack_require__(159)("asyncIterator")},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var $export=__webpack_require__(23);$export($export.S+$export.F,"Object",{assign:__webpack_require__(395)})},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(5),assertThisInitialized=__webpack_require__(6),react=__webpack_require__(9),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(7),prop_types_default=__webpack_require__.n(prop_types),esm=__webpack_require__(10),toConsumableArray=__webpack_require__(15);function inheritsFrom(Type,ParentType){for(;Type;){if(Type===ParentType)return!0;Type=Object.getPrototypeOf(Type)}return!1}function wrapInView(node){return node?"function"==typeof node?Object(react.createElement)(esm.g,{},node):Array.isArray(node)?node.map(wrapInView):(inheritsFrom(node.type,esm.g),node):node}function extractJSXLayers(_ref){var children=_ref.children,layers=_ref.layers,views=_ref.views,reactChildren=[],jsxLayers=[],jsxViews={};return react_default.a.Children.forEach(wrapInView(children),function(reactElement){if(reactElement){var ElementType=reactElement.type;if(inheritsFrom(ElementType,esm.d)){var layer=function createLayer(LayerType,reactProps){var props={},defaultProps=LayerType.defaultProps||{};for(var key in reactProps)defaultProps[key]!==reactProps[key]&&(props[key]=reactProps[key]);return new LayerType(props)}(ElementType,reactElement.props);jsxLayers.push(layer)}else reactChildren.push(reactElement);if(ElementType!==esm.g&&inheritsFrom(ElementType,esm.g)&&reactElement.props.id){var view=new ElementType(reactElement.props);jsxViews[view.id]=view}}}),Object.keys(jsxViews).length>0&&(Array.isArray(views)?views.forEach(function(view){jsxViews[view.id]=view}):views&&(jsxViews[views.id]=views),views=Object.values(jsxViews)),{layers:layers=jsxLayers.length>0?[].concat(jsxLayers,Object(toConsumableArray.a)(layers)):layers,children:reactChildren,views:views}}function positionChildrenUnderViews(_ref){var children=_ref.children,viewManager=(_ref.viewports,(_ref.deck||{}).viewManager);if(!viewManager||!viewManager.views.length)return[];var defaultViewId=viewManager.views[0].id;return children.map(function(child,i){child.props.viewportId&&esm.j.removed("viewportId","<View>")(),child.props.viewId&&esm.j.removed("viewId","<View>")();var viewId=defaultViewId,viewChildren=child;inheritsFrom(child.type,esm.g)&&(viewId=child.props.id||defaultViewId,viewChildren=child.props.children);var viewport=viewManager.getViewport(viewId),viewState=viewManager.getViewState(viewId);if(!viewport)return null;var x=viewport.x,y=viewport.y,width=viewport.width,height=viewport.height;viewChildren=function evaluateChildren(children,childProps){return children?"function"==typeof children?children(childProps):Array.isArray(children)?children.map(function(child){return evaluateChildren(child,childProps)}):Object(react.cloneElement)(children,childProps):children}(viewChildren,{x:x,y:y,width:width,height:height,viewport:viewport,viewState:viewState});var style={position:"absolute",left:x,top:y,width:width,height:height},key="view-child-".concat(viewId,"-").concat(i);return Object(react.createElement)("div",{key:key,id:key,style:style},viewChildren)})}var autobind=__webpack_require__(140);__webpack_require__.d(__webpack_exports__,"a",function(){return deckgl_DeckGL});var memoize=esm.i.memoize,propTypes=esm.c.getPropTypes(prop_types_default.a),defaultProps=esm.c.defaultProps,deckgl_DeckGL=function(_React$Component){function DeckGL(props){var _this;return Object(classCallCheck.a)(this,DeckGL),(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DeckGL).call(this,props))).viewports=null,_this.children=null,_this._needsRedraw=null,Object(autobind.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),_this._extractJSXLayers=memoize(extractJSXLayers),_this._positionChildrenUnderViews=memoize(positionChildrenUnderViews),_this}return Object(inherits.a)(DeckGL,_React$Component),Object(createClass.a)(DeckGL,[{key:"componentDidMount",value:function componentDidMount(){var DeckClass=this.props.Deck||esm.c;this.deck=this.deck||new DeckClass(Object.assign({},this.props,{canvas:this.deckCanvas,_customRender:this._customRender})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){this._updateFromProps(nextProps);var childrenChanged=this.children!==this._parseJSX(nextProps).children,viewsChanged=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return childrenChanged&&!viewsChanged}},{key:"componentDidUpdate",value:function componentDidUpdate(){this._redrawDeck()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.deck.finalize()}},{key:"pickObject",value:function pickObject(_ref){var x=_ref.x,y=_ref.y,_ref$radius=_ref.radius,radius=void 0===_ref$radius?0:_ref$radius,_ref$layerIds=_ref.layerIds,layerIds=void 0===_ref$layerIds?null:_ref$layerIds;return this.deck.pickObject({x:x,y:y,radius:radius,layerIds:layerIds})}},{key:"pickMultipleObjects",value:function pickMultipleObjects(_ref2){var x=_ref2.x,y=_ref2.y,_ref2$radius=_ref2.radius,radius=void 0===_ref2$radius?0:_ref2$radius,_ref2$layerIds=_ref2.layerIds,layerIds=void 0===_ref2$layerIds?null:_ref2$layerIds,_ref2$depth=_ref2.depth,depth=void 0===_ref2$depth?10:_ref2$depth;return this.deck.pickMultipleObjects({x:x,y:y,radius:radius,layerIds:layerIds,depth:depth})}},{key:"pickObjects",value:function pickObjects(_ref3){var x=_ref3.x,y=_ref3.y,_ref3$width=_ref3.width,width=void 0===_ref3$width?1:_ref3$width,_ref3$height=_ref3.height,height=void 0===_ref3$height?1:_ref3$height,_ref3$layerIds=_ref3.layerIds,layerIds=void 0===_ref3$layerIds?null:_ref3$layerIds;return this.deck.pickObjects({x:x,y:y,width:width,height:height,layerIds:layerIds})}},{key:"_redrawDeck",value:function _redrawDeck(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function _customRender(redrawReason){this._needsRedraw=redrawReason,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function _parseJSX(props){return this._extractJSXLayers({layers:props.layers,views:props.views,children:props.children})}},{key:"_updateFromProps",value:function _updateFromProps(props){var _this$_parseJSX=this._parseJSX(props),layers=_this$_parseJSX.layers,views=_this$_parseJSX.views,deckProps=Object.assign({},props,{layers:layers,views:views});this.deck.setProps(deckProps)}},{key:"render",value:function render(){var _this2=this,viewManager=(this.deck||{}).viewManager;this.viewports=viewManager&&viewManager.getViewports(),this.children=this._parseJSX(this.props).children;var children=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck}),style=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),canvas=Object(react.createElement)("canvas",{ref:function ref(c){return _this2.deckCanvas=c},key:"deck-canvas",id:this.props.id,style:style});return Object(react.createElement)("div",{id:"deckgl-wrapper"},[children,canvas])}}]),DeckGL}(react_default.a.Component);deckgl_DeckGL.propTypes=propTypes,deckgl_DeckGL.defaultProps=defaultProps},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"b",function(){return userAgent}),__webpack_require__.d(__webpack_exports__,"c",function(){return window_}),__webpack_require__.d(__webpack_exports__,"a",function(){return passiveSupported});var userAgent="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",window_="undefined"!=typeof window?window:global,passiveSupported=(void 0!==global||window,"undefined"!=typeof document&&document,!1);try{var options={get passive(){passiveSupported=!0}};window_.addEventListener("test",options,options),window_.removeEventListener("test",options,options)}catch(err){}}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,global){__webpack_require__.d(__webpack_exports__,"a",function(){return global_});var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),global_=("object"!==(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))||"[object process]"!==String(process)||process.browser,"undefined"!=typeof window&&window,void 0!==global?global:window);"undefined"!=typeof document&&document}).call(this,__webpack_require__(54),__webpack_require__(21))},,function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(45);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(154)},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(38);module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),$forEach=__webpack_require__(126)(0),STRICT=__webpack_require__(88)([].forEach,!0);$export($export.P+$export.F*!STRICT,"Array",{forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){var $export=__webpack_require__(23);$export($export.S,"Array",{isArray:__webpack_require__(163)})},function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{value:!0});var console=global.console;exports.logger={debug:function(message){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];return console.debug.apply(console,[message].concat(rest))},log:function(message){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];return console.log.apply(console,[message].concat(rest))},info:function(message){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];return console.info.apply(console,[message].concat(rest))},warn:function(message){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];return console.warn.apply(console,[message].concat(rest))},error:function(message){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];return console.error.apply(console,[message].concat(rest))}}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";var events;Object.defineProperty(exports,"__esModule",{value:!0}),function(events){events.CHANNEL_CREATED="channelCreated",events.GET_CURRENT_STORY="getCurrentStory",events.SET_CURRENT_STORY="setCurrentStory",events.GET_STORIES="getStories",events.SET_STORIES="setStories",events.STORIES_CONFIGURED="storiesConfigured",events.SELECT_STORY="selectStory",events.PREVIEW_KEYDOWN="previewKeydown",events.STORY_ADDED="storyAdded",events.STORY_CHANGED="storyChanged",events.STORY_UNCHANGED="storyUnchanged",events.FORCE_RE_RENDER="forceReRender",events.REGISTER_SUBSCRIPTION="registerSubscription",events.STORY_INIT="storyInit",events.STORY_RENDER="storyRender",events.STORY_RENDERED="storyRendered",events.STORY_MISSING="storyMissing",events.STORY_ERRORED="storyErrored",events.STORY_THREW_EXCEPTION="storyThrewException"}(events||(events={})),exports.default=events,exports.CHANNEL_CREATED=events.CHANNEL_CREATED,exports.GET_CURRENT_STORY=events.GET_CURRENT_STORY,exports.SET_CURRENT_STORY=events.SET_CURRENT_STORY,exports.GET_STORIES=events.GET_STORIES,exports.SET_STORIES=events.SET_STORIES,exports.STORIES_CONFIGURED=events.STORIES_CONFIGURED,exports.SELECT_STORY=events.SELECT_STORY,exports.PREVIEW_KEYDOWN=events.PREVIEW_KEYDOWN,exports.FORCE_RE_RENDER=events.FORCE_RE_RENDER,exports.REGISTER_SUBSCRIPTION=events.REGISTER_SUBSCRIPTION,exports.STORY_INIT=events.STORY_INIT,exports.STORY_ADDED=events.STORY_ADDED,exports.STORY_RENDER=events.STORY_RENDER,exports.STORY_RENDERED=events.STORY_RENDERED,exports.STORY_MISSING=events.STORY_MISSING,exports.STORY_ERRORED=events.STORY_ERRORED,exports.STORY_CHANGED=events.STORY_CHANGED,exports.STORY_THREW_EXCEPTION=events.STORY_THREW_EXCEPTION},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(467),getValue=__webpack_require__(470);module.exports=function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _deckgl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(81);__webpack_require__.d(__webpack_exports__,"a",function(){return _deckgl__WEBPACK_IMPORTED_MODULE_0__.a})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Vector});var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_math_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(144),_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16),assert=function assert(x,m){if(!x)throw new Error(m)},Vector=function(_MathArray){function Vector(){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Vector),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Vector).apply(this,arguments))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Vector,_MathArray),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Vector,[{key:"len",value:function len(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function magnitude(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function lengthSquared(){for(var length=0,i=0;i<this.ELEMENTS;++i)length+=this[i]*this[i];return length}},{key:"distance",value:function distance(mathArray){return Math.sqrt(this.distanceSquared(mathArray))}},{key:"distanceSquared",value:function distanceSquared(mathArray){for(var length=0,i=0;i<this.ELEMENTS;++i){var dist=this[i]-mathArray[i];length+=dist*dist}return Object(_common__WEBPACK_IMPORTED_MODULE_6__.a)(length)}},{key:"dot",value:function dot(mathArray){for(var product=0,i=0;i<this.ELEMENTS;++i)product+=this[i]*mathArray[i];return Object(_common__WEBPACK_IMPORTED_MODULE_6__.a)(product)}},{key:"normalize",value:function normalize(){var length=this.magnitude();if(0!==length)for(var i=0;i<this.ELEMENTS;++i)this[i]/=length;return this.check()}},{key:"add",value:function add(){for(var _len=arguments.length,vectors=new Array(_len),_key=0;_key<_len;_key++)vectors[_key]=arguments[_key];for(var _i=0;_i<vectors.length;_i++)for(var vector=vectors[_i],i=0;i<this.ELEMENTS;++i)this[i]+=vector[i];return this.check()}},{key:"subtract",value:function subtract(){for(var _len2=arguments.length,vectors=new Array(_len2),_key2=0;_key2<_len2;_key2++)vectors[_key2]=arguments[_key2];for(var _i2=0;_i2<vectors.length;_i2++)for(var vector=vectors[_i2],i=0;i<this.ELEMENTS;++i)this[i]-=vector[i];return this.check()}},{key:"multiply",value:function multiply(){for(var _len3=arguments.length,vectors=new Array(_len3),_key3=0;_key3<_len3;_key3++)vectors[_key3]=arguments[_key3];for(var _i3=0;_i3<vectors.length;_i3++)for(var vector=vectors[_i3],i=0;i<this.ELEMENTS;++i)this[i]*=vector[i];return this.check()}},{key:"divide",value:function divide(){for(var _len4=arguments.length,vectors=new Array(_len4),_key4=0;_key4<_len4;_key4++)vectors[_key4]=arguments[_key4];for(var _i4=0;_i4<vectors.length;_i4++)for(var vector=vectors[_i4],i=0;i<this.ELEMENTS;++i)this[i]/=vector[i];return this.check()}},{key:"scale",value:function scale(_scale){if(Array.isArray(_scale))return this.multiply(_scale);for(var i=0;i<this.ELEMENTS;++i)this[i]*=_scale;return this.check()}},{key:"scaleAndAdd",value:function scaleAndAdd(vector,scale){for(var i=0;i<this.ELEMENTS;++i)this[i]=this[i]*scale+vector[i];return this.check()}},{key:"lengthSq",value:function lengthSq(){return this.lengthSquared()}},{key:"distanceTo",value:function distanceTo(vector){return this.distance(vector)}},{key:"distanceToSquared",value:function distanceToSquared(vector){return this.distanceSquared(vector)}},{key:"getComponent",value:function getComponent(i){return assert(i>=0&&i<this.ELEMENTS,"index is out of range"),Object(_common__WEBPACK_IMPORTED_MODULE_6__.a)(this[i])}},{key:"setComponent",value:function setComponent(i,value){return assert(i>=0&&i<this.ELEMENTS,"index is out of range"),this[i]=value,this.check()}},{key:"addVectors",value:function addVectors(a,b){return this.copy(a).add(b)}},{key:"subVectors",value:function subVectors(a,b){return this.copy(a).subtract(b)}},{key:"multiplyVectors",value:function multiplyVectors(a,b){return this.copy(a).multiply(b)}},{key:"addScaledVector",value:function addScaledVector(a,b){return this.add(new this.constructor(a).multiplyScalar(b))}},{key:"x",get:function get(){return this[0]},set:function set(value){return this[0]=Object(_common__WEBPACK_IMPORTED_MODULE_6__.a)(value)}},{key:"y",get:function get(){return this[1]},set:function set(value){return this[1]=Object(_common__WEBPACK_IMPORTED_MODULE_6__.a)(value)}}]),Vector}(_math_array__WEBPACK_IMPORTED_MODULE_5__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},bisector=function(compare){return 1===compare.length&&(compare=function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}(compare)),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}};var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisect=(ascendingBisect.left,bisectRight);var array_array=Array.prototype;array_array.slice,array_array.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}__webpack_require__(51);var formatDecimal=function(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]},src_exponent=function(x){return(x=formatDecimal(Math.abs(x)))?x[1]:NaN},re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;this.fill=match[1]||" ",this.align=match[2]||">",this.sign=match[3]||"-",this.symbol=match[4]||"",this.zero=!!match[5],this.width=match[6]&&+match[6],this.comma=!!match[7],this.precision=match[8]&&+match[8].slice(1),this.trim=!!match[9],this.type=match[10]||""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var prefixExponent,defaultLocale_locale,formatTrim=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(i0>0){if(!+s[i])break out;i0=0}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s},formatRounded=function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")},formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},src_identity=function(x){return x},prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],src_locale=function(locale){var grouping,thousands,group=locale.grouping&&locale.thousands?(grouping=locale.grouping,thousands=locale.thousands,function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}):src_identity,currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?function(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}(locale.numerals):src_identity,percent=locale.percent||"%";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(null==precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=formatType(Math.abs(value),precision),trim&&(value=formatTrim(value)),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=null==precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}};!function defaultLocale(definition){return defaultLocale_locale=src_locale(definition),defaultLocale_locale.format,defaultLocale_locale.formatPrefix,defaultLocale_locale}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function threshold_threshold(){var unknown,domain=[.5],range=[0,1],n=1;function scale(x){return x<=x?range[bisect(domain,x,0,n)]:unknown}return scale.domain=function(_){return arguments.length?(domain=Array.from(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return threshold_threshold().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)}var interval_t0=new Date,interval_t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}return interval.floor=interval,interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval(function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););})},count&&(interval.count=function(start,end){return interval_t0.setTime(+start),interval_t1.setTime(+end),floori(interval_t0),floori(interval_t1),Math.floor(count(interval_t0,interval_t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond_millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond_millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k}):millisecond_millisecond:null};millisecond_millisecond.range;var durationMinute=6e4,durationWeek=6048e5,second_second=newInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+1e3*step)},function(start,end){return(end-start)/1e3},function(date){return date.getUTCSeconds()}),minute_minute=(second_second.range,newInterval(function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getMinutes()})),hour_hour=(minute_minute.range,newInterval(function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-date.getMinutes()*durationMinute)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5},function(date){return date.getHours()})),day_day=(hour_hour.range,newInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/864e5},function(date){return date.getDate()-1})),src_day=day_day;day_day.range;function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),month_month=(sunday.range,monday.range,tuesday.range,wednesday.range,thursday.range,friday.range,saturday.range,newInterval(function(date){date.setDate(1),date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())},function(date){return date.getMonth()})),year_year=(month_month.range,newInterval(function(date){date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()}));year_year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)}):null};var src_year=year_year,utcMinute=(year_year.range,newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getUTCMinutes()})),utcHour=(utcMinute.range,newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5},function(date){return date.getUTCHours()})),utcDay=(utcHour.range,newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864e5},function(date){return date.getUTCDate()-1})),src_utcDay=utcDay;utcDay.range;function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcMonth=(utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range,newInterval(function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())},function(date){return date.getUTCMonth()})),utcYear=(utcMonth.range,newInterval(function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)}):null};var src_utcYear=utcYear;utcYear.range;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}var src_defaultLocale_locale,utcFormat,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+src_day.count(src_year(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return pad(sunday.count(src_year(d),d),p,2)}function formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?thursday(d):thursday.ceil(d),pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(monday.count(src_year(d),d),p,2)}function locale_formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return pad(utcSunday.count(src_utcYear(d),d),p,2)}function formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d),pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(utcMonday.count(src_utcYear(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}!function defaultLocale_defaultLocale(definition){return src_defaultLocale_locale=function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]},A:function formatWeekday(d){return locale_weekdays[d.getDay()]},b:function formatShortMonth(d){return locale_shortMonths[d.getMonth()]},B:function formatMonth(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]},A:function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]},b:function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]},B:function formatUTCMonth(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){return function(string){var week,day,d=newYear(1900);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate(newYear(d.y))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=newDate(newYear(d.y))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",localDate);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);return p.toString=function(){return specifier},p}}}(definition),src_defaultLocale_locale.format,src_defaultLocale_locale.parse,utcFormat=src_defaultLocale_locale.utcFormat,utcParse=src_defaultLocale_locale.utcParse,src_defaultLocale_locale}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||utcParse("%Y-%m-%dT%H:%M:%S.%LZ");__webpack_require__.d(__webpack_exports__,"a",function(){return ordinal}),__webpack_require__.d(__webpack_exports__,"b",function(){return threshold_threshold})},function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"storiesOf",{enumerable:!0,get:function get(){return _preview.storiesOf}}),Object.defineProperty(exports,"setAddon",{enumerable:!0,get:function get(){return _preview.setAddon}}),Object.defineProperty(exports,"addDecorator",{enumerable:!0,get:function get(){return _preview.addDecorator}}),Object.defineProperty(exports,"addParameters",{enumerable:!0,get:function get(){return _preview.addParameters}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function get(){return _preview.configure}}),Object.defineProperty(exports,"getStorybook",{enumerable:!0,get:function get(){return _preview.getStorybook}}),Object.defineProperty(exports,"raw",{enumerable:!0,get:function get(){return _preview.raw}}),Object.defineProperty(exports,"forceReRender",{enumerable:!0,get:function get(){return _preview.forceReRender}});var _preview=__webpack_require__(384);module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(79)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";var _WEBGL_PARAMETERS,_WEBGL2_CONTEXT_POLYF,defineProperty=__webpack_require__(0),assert=__webpack_require__(62),getWebGL2ValueOrZero=function getWebGL2ValueOrZero(gl){return isWebGL2(gl)?void 0:0},WEBGL_PARAMETERS=(_WEBGL_PARAMETERS={},Object(defineProperty.a)(_WEBGL_PARAMETERS,3074,function(gl){return isWebGL2(gl)?void 0:36064}),Object(defineProperty.a)(_WEBGL_PARAMETERS,35723,function(gl){return isWebGL2(gl)?void 0:4352}),Object(defineProperty.a)(_WEBGL_PARAMETERS,35977,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,32937,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36795,function(gl,getParameter){var ext=isWebGL2(gl)?gl.getExtension("EXT_disjoint_timer_query_webgl2"):gl.getExtension("EXT_disjoint_timer_query");return ext&&ext.GPU_DISJOINT_EXT?getParameter(ext.GPU_DISJOINT_EXT):0}),Object(defineProperty.a)(_WEBGL_PARAMETERS,37445,function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_VENDOR_WEBGL||7936)}),Object(defineProperty.a)(_WEBGL_PARAMETERS,37446,function(gl,getParameter){var ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_RENDERER_WEBGL||7937)}),Object(defineProperty.a)(_WEBGL_PARAMETERS,34047,function(gl,getParameter){var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;return ext?getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(defineProperty.a)(_WEBGL_PARAMETERS,32883,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35071,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37447,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36063,function(gl,getParameter){if(!isWebGL2(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(defineProperty.a)(_WEBGL_PARAMETERS,35379,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35374,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35377,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,34852,function(gl){if(!isWebGL2(gl)){var ext=gl.getExtension("WEBGL_draw_buffers");return ext?ext.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(defineProperty.a)(_WEBGL_PARAMETERS,36203,function(gl){return gl.getExtension("OES_element_index")?2147483647:65535}),Object(defineProperty.a)(_WEBGL_PARAMETERS,33001,function(gl){return gl.getExtension("OES_element_index")?16777216:65535}),Object(defineProperty.a)(_WEBGL_PARAMETERS,33e3,function(gl){return 16777216}),Object(defineProperty.a)(_WEBGL_PARAMETERS,37157,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35373,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35657,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,36183,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37137,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,34045,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35978,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35979,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35968,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35376,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35375,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35659,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,37154,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35371,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35658,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35076,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35077,getWebGL2ValueOrZero),Object(defineProperty.a)(_WEBGL_PARAMETERS,35380,getWebGL2ValueOrZero),_WEBGL_PARAMETERS);function isWebGL2(gl){return Boolean(gl&&2===gl._version)}__webpack_require__.d(__webpack_exports__,"b",function(){return WEBGL2_CONTEXT_POLYFILLS}),__webpack_require__.d(__webpack_exports__,"a",function(){return WEBGL2_CONTEXT_OVERRIDES});function polyfill_table_isWebGL2(gl){return Boolean(gl&&2===gl._version)}var WEBGL2_CONTEXT_POLYFILLS=(_WEBGL2_CONTEXT_POLYF={},Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function createVertexArray(){Object(assert.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function deleteVertexArray(){},bindVertexArray:function bindVertexArray(){},isVertexArray:function isVertexArray(){return!1}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function vertexAttribDivisor(location,divisor){Object(assert.a)(0===divisor,"WebGL instanced rendering not supported")},drawElementsInstanced:function drawElementsInstanced(){},drawArraysInstanced:function drawArraysInstanced(){}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function drawBuffers(){Object(assert.a)(!1)}}),Object(defineProperty.a)(_WEBGL2_CONTEXT_POLYF,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function createQuery(){Object(assert.a)(!1)},deleteQuery:function deleteQuery(){Object(assert.a)(!1)},beginQuery:function beginQuery(){Object(assert.a)(!1)},endQuery:function endQuery(){},getQuery:function getQuery(handle,pname){return this.getQueryObject(handle,pname)},getQueryParameter:function getQueryParameter(handle,pname){return this.getQueryObject(handle,pname)},getQueryObject:function getQueryObject(){}}),_WEBGL2_CONTEXT_POLYF),WEBGL2_CONTEXT_OVERRIDES={readBuffer:function readBuffer(gl,originalFunc,attachment){polyfill_table_isWebGL2(gl)&&originalFunc(attachment)},getVertexAttrib:function getVertexAttrib(gl,originalFunc,location,pname){var result,_getExtensionData=function getExtensionData(gl,extension){return{webgl2:polyfill_table_isWebGL2(gl),ext:gl.getExtension(extension)}}(gl,"ANGLE_instanced_arrays"),webgl2=_getExtensionData.webgl2,ext=_getExtensionData.ext;switch(pname){case 35069:result=!!webgl2&&void 0;break;case 35070:result=webgl2||ext?void 0:0}return void 0!==result?result:originalFunc(location,pname)},getProgramParameter:function getProgramParameter(gl,originalFunc,program,pname){if(!polyfill_table_isWebGL2(gl))switch(pname){case 35967:return 35981;case 35971:case 35382:return 0}return originalFunc(program,pname)},getInternalformatParameter:function getInternalformatParameter(gl,originalFunc,target,format,pname){if(!polyfill_table_isWebGL2(gl))switch(pname){case 32937:return new Int32Array([0])}return gl.getInternalformatParameter(target,format,pname)},getTexParameter:function getTexParameter(gl,originalFunc,target,pname){switch(pname){case 34046:var ext=gl.luma.extensions.EXT_texture_filter_anisotropic;pname=ext&&ext.TEXTURE_MAX_ANISOTROPY_EXT||34046}return originalFunc(target,pname)},getParameter:function getParameterPolyfill(gl,originalGetParameter,pname){var limit=WEBGL_PARAMETERS[pname],value="function"==typeof limit?limit(gl,originalGetParameter,pname):limit;return void 0!==value?value:originalGetParameter(pname)},hint:function hint(gl,originalFunc,pname,value){return originalFunc(pname,value)}}},,function(module,exports,__webpack_require__){var has=__webpack_require__(45).call(Function.call,Object.prototype.hasOwnProperty),$assign=Object.assign;module.exports=function assign(target,source){if($assign)return $assign(target,source);for(var key in source)has(source,key)&&(target[key]=source[key]);return target}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(45),ES2016=__webpack_require__(154),assign=__webpack_require__(100),forEach=__webpack_require__(206),GetIntrinsic=__webpack_require__(74),$TypeError=GetIntrinsic("%TypeError%"),$isEnumerable=bind.call(Function.call,GetIntrinsic("%ObjectPrototype%").propertyIsEnumerable),$pushApply=bind.call(Function.apply,GetIntrinsic("%ArrayPrototype%").push),ES2017=assign(assign({},ES2016),{ToIndex:function ToIndex(value){if(void 0===value)return 0;var integerIndex=this.ToInteger(value);if(integerIndex<0)throw new RangeError("index must be >= 0");var index=this.ToLength(integerIndex);if(!this.SameValueZero(integerIndex,index))throw new RangeError("index must be >= 0 and < 2 ** 53 - 1");return index},EnumerableOwnProperties:function EnumerableOwnProperties(O,kind){var keys=ES2016.EnumerableOwnNames(O);if("key"===kind)return keys;if("value"===kind||"key+value"===kind){var results=[];return forEach(keys,function(key){$isEnumerable(O,key)&&$pushApply(results,["value"===kind?O[key]:[key,O[key]]])}),results}throw new $TypeError('Assertion failed: "kind" is not "key", "value", or "key+value": '+kind)}});delete ES2017.EnumerableOwnNames,module.exports=ES2017},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports){module.exports=!1},function(module,exports,__webpack_require__){var def=__webpack_require__(42).f,has=__webpack_require__(64),TAG=__webpack_require__(28)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports){exports.f={}.propertyIsEnumerable},function(module,exports,__webpack_require__){var anObject=__webpack_require__(33),dPs=__webpack_require__(216),enumBugKeys=__webpack_require__(161),IE_PROTO=__webpack_require__(160)("IE_PROTO"),Empty=function(){},createDict=function(){var iframeDocument,iframe=__webpack_require__(158)("iframe"),i=enumBugKeys.length;for(iframe.style.display="none",__webpack_require__(217).appendChild(iframe),iframe.src="javascript:",(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict.prototype[enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var dP=__webpack_require__(42).f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/;"name"in FProto||__webpack_require__(37)&&dP(FProto,"name",{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}})},function(module,exports,__webpack_require__){var toObject=__webpack_require__(69),$keys=__webpack_require__(75);__webpack_require__(227)("keys",function(){return function keys(it){return $keys(toObject(it))}})},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(399)),__export(__webpack_require__(230)),__export(__webpack_require__(401));var _1=__webpack_require__(230);exports.default=_1.addons},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Vector3});var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_lib_vector__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(95),_lib_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16),gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(40),ORIGIN=[0,0,0],Vector3=function(_Vector){function Vector3(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Vector3),_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Vector3).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y,z),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Vector3,_Vector),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Vector3,[{key:"angle",value:function angle(vector){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_7__.a(this,vector)}},{key:"cross",value:function cross(vector){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_7__.b(this,this,vector),this.check()}},{key:"rotateX",value:function rotateX(_ref){var radians=_ref.radians,_ref$origin=_ref.origin,origin=void 0===_ref$origin?ORIGIN:_ref$origin;return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_7__.e(this,this,origin,radians),this.check()}},{key:"rotateY",value:function rotateY(_ref2){var radians=_ref2.radians,_ref2$origin=_ref2.origin,origin=void 0===_ref2$origin?ORIGIN:_ref2$origin;return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_7__.f(this,this,origin,radians),this.check()}},{key:"rotateZ",value:function rotateZ(_ref3){var radians=_ref3.radians,_ref3$origin=_ref3.origin,origin=void 0===_ref3$origin?ORIGIN:_ref3$origin;return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_7__.g(this,this,origin,radians),this.check()}},{key:"operation",value:function operation(_operation){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return _operation.apply(void 0,[this,this].concat(args)),this.check()}},{key:"ELEMENTS",get:function get(){return 3}},{key:"z",get:function get(){return this[2]},set:function set(value){return this[2]=Object(_lib_common__WEBPACK_IMPORTED_MODULE_6__.a)(value)}}]),Vector3}(_lib_vector__WEBPACK_IMPORTED_MODULE_5__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return BinSorter});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),defaultGetValue=function defaultGetValue(points){return points.length},BinSorter=function(){function BinSorter(){var bins=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],getValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultGetValue;Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,BinSorter),this.sortedBins=this.getSortedBins(bins,getValue),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(BinSorter,[{key:"getSortedBins",value:function getSortedBins(bins,getValue){return bins.reduce(function(accu,h,i){var value=getValue(h.points);return null!=value&&accu.push({i:Number.isFinite(h.index)?h.index:i,value:value,counts:h.points.length}),accu},[]).sort(function(a,b){return a.value-b.value})}},{key:"getValueRange",value:function getValueRange(_ref){var _ref2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_ref,2),lower=_ref2[0],upper=_ref2[1],len=this.sortedBins.length;if(!len)return[0,0];var lowerIdx=Math.ceil(lower/100*(len-1)),upperIdx=Math.floor(upper/100*(len-1));return[this.sortedBins[lowerIdx].value,this.sortedBins[upperIdx].value]}},{key:"getMaxCount",value:function getMaxCount(){var maxCount=0;return this.sortedBins.forEach(function(x){return maxCount=maxCount>x.counts?maxCount:x.counts}),maxCount}},{key:"getBinMap",value:function getBinMap(){return this.sortedBins.reduce(function(mapper,curr){return Object.assign(mapper,Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},curr.i,curr))},{})}}]),BinSorter}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(5),assertThisInitialized=__webpack_require__(6),slicedToArray=__webpack_require__(11),math_utils=__webpack_require__(31),web_mercator_utils=__webpack_require__(25),mat4=__webpack_require__(13),IDENTITY=Object(math_utils.a)(),viewport_Viewport=function(){function Viewport(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,_ref$viewMatrix=_ref.viewMatrix,viewMatrix=void 0===_ref$viewMatrix?IDENTITY:_ref$viewMatrix,_ref$projectionMatrix=_ref.projectionMatrix,projectionMatrix=void 0===_ref$projectionMatrix?IDENTITY:_ref$projectionMatrix;Object(classCallCheck.a)(this,Viewport),this.width=width||1,this.height=height||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=viewMatrix,this.projectionMatrix=projectionMatrix;var vpm=Object(math_utils.a)();mat4.g(vpm,vpm,this.projectionMatrix),mat4.g(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm;var m=Object(math_utils.a)();mat4.n(m,m,[this.width/2,-this.height/2,1]),mat4.o(m,m,[1,-1,0]),mat4.g(m,m,this.viewProjectionMatrix);var mInverse=mat4.e(Object(math_utils.a)(),m);if(!mInverse)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=mInverse,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(createClass.a)(Viewport,[{key:"equals",value:function equals(viewport){return viewport instanceof Viewport&&(viewport.width===this.width&&viewport.height===this.height&&mat4.b(viewport.projectionMatrix,this.projectionMatrix)&&mat4.b(viewport.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(xyz){var _ref2$topLeft=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,topLeft=void 0===_ref2$topLeft||_ref2$topLeft,worldPosition=this.projectPosition(xyz),coord=Object(web_mercator_utils.k)(worldPosition,this.pixelProjectionMatrix),_coord=Object(slicedToArray.a)(coord,2),x=_coord[0],y=_coord[1],y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}},{key:"unproject",value:function unproject(xyz){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$topLeft=_ref3.topLeft,topLeft=void 0===_ref3$topLeft||_ref3$topLeft,targetZ=_ref3.targetZ,_xyz=Object(slicedToArray.a)(xyz,3),x=_xyz[0],y=_xyz[1],z=_xyz[2],y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.pixelsPerMeter,coord=Object(web_mercator_utils.h)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),_this$unprojectPositi=this.unprojectPosition(coord),_this$unprojectPositi2=Object(slicedToArray.a)(_this$unprojectPositi,3),X=_this$unprojectPositi2[0],Y=_this$unprojectPositi2[1],Z=_this$unprojectPositi2[2];return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}},{key:"projectPosition",value:function projectPosition(xyz){var _this$projectFlat=this.projectFlat(xyz),_this$projectFlat2=Object(slicedToArray.a)(_this$projectFlat,2);return[_this$projectFlat2[0],_this$projectFlat2[1],(xyz[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function unprojectPosition(xyz){var _this$unprojectFlat=this.unprojectFlat(xyz),_this$unprojectFlat2=Object(slicedToArray.a)(_this$unprojectFlat,2);return[_this$unprojectFlat2[0],_this$unprojectFlat2[1],(xyz[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function projectFlat(xyz){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return xyz}},{key:"unprojectFlat",value:function unprojectFlat(xyz){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return xyz}}]),Viewport}(),fit_bounds=__webpack_require__(268),vec2=__webpack_require__(26);__webpack_require__.d(__webpack_exports__,"a",function(){return web_mercator_viewport_WebMercatorViewport});var web_mercator_viewport_WebMercatorViewport=function(_Viewport){function WebMercatorViewport(){var _this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=_ref.width,height=_ref.height,_ref$latitude=_ref.latitude,latitude=void 0===_ref$latitude?0:_ref$latitude,_ref$longitude=_ref.longitude,longitude=void 0===_ref$longitude?0:_ref$longitude,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?0:_ref$zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?1.5:_ref$altitude,nearZMultiplier=_ref.nearZMultiplier,farZMultiplier=_ref.farZMultiplier;Object(classCallCheck.a)(this,WebMercatorViewport),width=width||1,height=height||1;var scale=Object(web_mercator_utils.l)(zoom);altitude=Math.max(.75,altitude);var center=Object(web_mercator_utils.g)([longitude,latitude],scale);center[2]=0;var projectionMatrix=Object(web_mercator_utils.d)({width:width,height:height,pitch:pitch,bearing:bearing,altitude:altitude,nearZMultiplier:nearZMultiplier||1/height,farZMultiplier:farZMultiplier||1.01}),viewMatrix=Object(web_mercator_utils.f)({height:height,center:center,pitch:pitch,bearing:bearing,altitude:altitude,flipY:!0});return(_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(WebMercatorViewport).call(this,{width:width,height:height,viewMatrix:viewMatrix,projectionMatrix:projectionMatrix}))).latitude=latitude,_this.longitude=longitude,_this.zoom=zoom,_this.pitch=pitch,_this.bearing=bearing,_this.altitude=altitude,_this.scale=scale,_this.center=center,_this.pixelsPerMeter=Object(web_mercator_utils.b)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))).pixelsPerMeter[2],Object.freeze(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this))),_this}return Object(inherits.a)(WebMercatorViewport,_Viewport),Object(createClass.a)(WebMercatorViewport,[{key:"projectFlat",value:function projectFlat(lngLat){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(web_mercator_utils.g)(lngLat,scale)}},{key:"unprojectFlat",value:function unprojectFlat(xy){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(web_mercator_utils.j)(xy,scale)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(_ref2){var lngLat=_ref2.lngLat,pos=_ref2.pos,fromLocation=Object(web_mercator_utils.h)(pos,this.pixelUnprojectionMatrix),toLocation=Object(web_mercator_utils.g)(lngLat,this.scale),translate=vec2.a([],toLocation,vec2.e([],fromLocation)),newCenter=vec2.a([],this.center,translate);return Object(web_mercator_utils.j)(newCenter,this.scale)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(_ref3){var lngLat=_ref3.lngLat,pos=_ref3.pos;return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}},{key:"fitBounds",value:function fitBounds(bounds){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height,_fitBounds2=Object(fit_bounds.a)(Object.assign({width:width,height:height,bounds:bounds},options));return new WebMercatorViewport({width:width,height:height,longitude:_fitBounds2.longitude,latitude:_fitBounds2.latitude,zoom:_fitBounds2.zoom})}}]),WebMercatorViewport}(viewport_Viewport)},,function(module,exports,__webpack_require__){"use strict";var fnToStr=Function.prototype.toString,constructorRegex=/^\s*class\b/,isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return function tryFunctionToStr(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){var core=__webpack_require__(65),global=__webpack_require__(29),store=global["__core-js_shared__"]||(global["__core-js_shared__"]={});(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:core.version,mode:__webpack_require__(104)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(module,exports,__webpack_require__){var META=__webpack_require__(103)("meta"),isObject=__webpack_require__(39),has=__webpack_require__(64),setDesc=__webpack_require__(42).f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!__webpack_require__(38)(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},meta=module.exports={KEY:META,NEED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak:function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze:function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it}}},function(module,exports,__webpack_require__){var cof=__webpack_require__(77);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports,__webpack_require__){var cof=__webpack_require__(77),TAG=__webpack_require__(28)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}());module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=function(it,key){try{return it[key]}catch(e){}}(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(220)(!0);__webpack_require__(166)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),$map=__webpack_require__(126)(1);$export($export.P+$export.F*!__webpack_require__(88)([].map,!0),"Array",{map:function map(callbackfn){return $map(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){var ctx=__webpack_require__(67),IObject=__webpack_require__(121),toObject=__webpack_require__(69),toLength=__webpack_require__(68),asc=__webpack_require__(393);module.exports=function(TYPE,$create){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX,create=$create||asc;return function($this,callbackfn,that){for(var val,res,O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(res=f(val=self[index],index,O),TYPE))if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return!0;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(404)},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(123),builtinExec=RegExp.prototype.exec;module.exports=function(R,S){var exec=R.exec;if("function"==typeof exec){var result=exec.call(R,S);if("object"!=typeof result)throw new TypeError("RegExp exec method returned something other than an Object or null");return result}if("RegExp"!==classof(R))throw new TypeError("RegExp#exec called on incompatible receiver");return builtinExec.call(R,S)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(417);var redefine=__webpack_require__(48),hide=__webpack_require__(66),fails=__webpack_require__(38),defined=__webpack_require__(106),wks=__webpack_require__(28),regexpExec=__webpack_require__(182),SPECIES=wks("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var re=/./;return re.exec=function(){var result=[];return result.groups={a:"7"},result},"7"!=="".replace(re,"$<a>")}),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=function(){var re=/(?:)/,originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments)};var result="ab".split(re);return 2===result.length&&"a"===result[0]&&"b"===result[1]}();module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),DELEGATES_TO_SYMBOL=!fails(function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)}),DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL?!fails(function(){var execCalled=!1,re=/a/;return re.exec=function(){return execCalled=!0,null},"split"===KEY&&(re.constructor={},re.constructor[SPECIES]=function(){return re}),re[SYMBOL](""),!execCalled}):void 0;if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||"replace"===KEY&&!REPLACE_SUPPORTS_NAMED_GROUPS||"split"===KEY&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var nativeRegExpMethod=/./[SYMBOL],fns=exec(defined,SYMBOL,""[KEY],function maybeCallNative(nativeMethod,regexp,str,arg2,forceStringMethod){return regexp.exec===regexpExec?DELEGATES_TO_SYMBOL&&!forceStringMethod?{done:!0,value:nativeRegExpMethod.call(regexp,str,arg2)}:{done:!0,value:nativeMethod.call(str,regexp,arg2)}:{done:!1}}),strfn=fns[0],rxfn=fns[1];redefine(String.prototype,KEY,strfn),hide(RegExp.prototype,SYMBOL,2==length?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)})}}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(57).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(130),getRawTag=__webpack_require__(444),objectToString=__webpack_require__(445),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports){module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(457),listCacheDelete=__webpack_require__(458),listCacheGet=__webpack_require__(459),listCacheHas=__webpack_require__(460),listCacheSet=__webpack_require__(461);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(251);module.exports=function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(93)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(479);module.exports=function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62),_polyfill_table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(98);function polyfillExtension(gl,_ref2){var extension=_ref2.extension,target=_ref2.target,target2=_ref2.target2,defaults=_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.b[extension];Object(_assert__WEBPACK_IMPORTED_MODULE_0__.a)(defaults);for(var _defaults$meta=defaults.meta,_meta$suffix=(void 0===_defaults$meta?{}:_defaults$meta).suffix,suffix=void 0===_meta$suffix?"":_meta$suffix,ext=gl.getExtension(extension),_loop=function _loop(){var key=_Object$keys[_i],extKey="".concat(key).concat(suffix),polyfill=null;"meta"===key||"function"==typeof gl[key]||(ext&&"function"==typeof ext[extKey]?polyfill=function polyfill(){return ext[extKey].apply(ext,arguments)}:"function"==typeof defaults[key]&&(polyfill=defaults[key].bind(target))),polyfill&&(target[key]=polyfill,target2[key]=polyfill)},_i=0,_Object$keys=Object.keys(defaults);_i<_Object$keys.length;_i++)_loop()}(void 0!==global?global:window).polyfillContext=function polyfillContext(gl){return gl.luma=gl.luma||{},function initializeExtensions(gl){gl.luma.extensions={};var EXTENSIONS=gl.getSupportedExtensions()||[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EXTENSIONS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var extension=_step.value;gl.luma[extension]=gl.getExtension(extension)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}(gl),gl.luma.polyfilled||(function installPolyfills(gl,polyfills){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Object.getOwnPropertyNames(polyfills)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var extension=_step2.value;"overrides"!==extension&&polyfillExtension(gl,{extension:extension,target:gl.luma,target2:gl})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}(gl,_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.b),function installOverrides(gl,_ref){var target=_ref.target,target2=_ref.target2;Object.keys(_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.a).forEach(function(key){if("function"==typeof _polyfill_table__WEBPACK_IMPORTED_MODULE_1__.a[key]){var originalFunc=gl[key]?gl[key].bind(gl):function(){},polyfill=_polyfill_table__WEBPACK_IMPORTED_MODULE_1__.a[key].bind(null,gl,originalFunc);target[key]=polyfill,target2[key]=polyfill}})}(gl,{target:gl.luma,target2:gl}),gl.luma.polyfilled=!0),gl}}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";function deepArrayEqual(x,y){if(x===y)return!0;var isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(var i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return!1}__webpack_require__.d(__webpack_exports__,"a",function(){return deepArrayEqual})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return autobind});var PREDEFINED=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"];function autobind(obj){var proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function _loop(){var key=_step.value;"function"==typeof obj[key]&&(PREDEFINED.find(function(name){return key===name})||(obj[key]=obj[key].bind(obj)))},_iterator=propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__.d(__webpack_exports__,"a",function(){return _setPrototypeOf})},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",function(){return isBrowser});var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_is_electron__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(143);function isBrowser(){return!("object"===(void 0===process?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process))&&"[object process]"===String(process)&&!process.browser)||Object(_is_electron__WEBPACK_IMPORTED_MODULE_1__.a)()}}).call(this,__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",function(){return isElectron});var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);function isElectron(mockUserAgent){if("undefined"!=typeof window&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process.versions)&&Boolean(process.versions.electron))return!0;var realUserAgent="object"===("undefined"==typeof navigator?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;return!!(userAgent&&userAgent.indexOf("Electron")>=0)}}).call(this,__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MathArray});var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16);var MathArray=function(_extendableBuiltin2){function MathArray(){return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,MathArray),Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(MathArray).apply(this,arguments))}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(MathArray,_extendableBuiltin2),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(MathArray,[{key:"clone",value:function clone(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function copy(array){for(var i=0;i<this.ELEMENTS;++i)this[i]=array[i];return this.check()}},{key:"set",value:function set(){for(var i=0;i<this.ELEMENTS;++i)this[i]=(i<0||arguments.length<=i?void 0:arguments[i])||0;return this.check()}},{key:"fromArray",value:function fromArray(array){for(var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)this[i]=array[i+offset];return this.check()}},{key:"toString",value:function toString(){return this.formatString(_common__WEBPACK_IMPORTED_MODULE_5__.c)}},{key:"formatString",value:function formatString(opts){for(var string="",i=0;i<this.ELEMENTS;++i)string+=(i>0?", ":"")+Object(_common__WEBPACK_IMPORTED_MODULE_5__.f)(this[i],opts);return"".concat(opts.printTypes?this.constructor.name:"","[").concat(string,"]")}},{key:"toArray",value:function toArray(){for(var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<this.ELEMENTS;++i)array[offset+i]=this[i];return array}},{key:"toFloat32Array",value:function toFloat32Array(){return new Float32Array(this)}},{key:"equals",value:function equals(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!Object(_common__WEBPACK_IMPORTED_MODULE_5__.e)(this[i],array[i]))return!1;return!0}},{key:"exactEquals",value:function exactEquals(array){if(!array||this.length!==array.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==array[i])return!1;return!0}},{key:"negate",value:function negate(){for(var i=0;i<this.ELEMENTS;++i)this[i]=-this[i];return this.check()}},{key:"inverse",value:function inverse(){for(var i=0;i<this.ELEMENTS;++i)this[i]=1/this[i];return this.check()}},{key:"lerp",value:function lerp(a,b,t){void 0===t&&(t=b,b=a,a=this);for(var i=0;i<this.ELEMENTS;++i){var ai=a[i];this[i]=ai+t*(b[i]-ai)}return this.check()}},{key:"min",value:function min(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(vector[i],this[i]);return this.check()}},{key:"max",value:function max(vector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(vector[i],this[i]);return this.check()}},{key:"clamp",value:function clamp(minVector,maxVector){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],minVector[i]),maxVector[i]);return this.check()}},{key:"validate",value:function validate(){for(var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,valid=array&&array.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)valid=valid&&Number.isFinite(array[i]);return valid}},{key:"check",value:function check(){var array=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(_common__WEBPACK_IMPORTED_MODULE_5__.c.debug&&!this.validate(array))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function sub(a){return this.subtract(a)}},{key:"setScalar",value:function setScalar(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function addScalar(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function subScalar(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function multiplyScalar(a){return this.scale(a)}},{key:"divideScalar",value:function divideScalar(a){return this.scale(1/a)}},{key:"clampScalar",value:function clampScalar(min,max){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],min),max);return this.check()}}]),MathArray}(function _extendableBuiltin(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));return Object.setPrototypeOf(instance,Object.getPrototypeOf(this)),instance}return ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,cls):ExtendableBuiltin.__proto__=cls,ExtendableBuiltin}(Array))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return defaultColorRange});var defaultColorRange=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]]},function(module,__webpack_exports__,__webpack_require__){"use strict";var colors=function(specifier){for(var n=specifier.length/6|0,colors=new Array(n),i=0;i<n;)colors[i]="#"+specifier.slice(6*i,6*++i);return colors},category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),src=(colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),__webpack_require__(51)),ramp=function(scheme){return Object(src.d)(scheme[scheme.length-1])},d3_color_src=(ramp(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors)),ramp(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors)),ramp(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors)),ramp(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors)),ramp(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors)),ramp(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors)),ramp(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors)),ramp(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors)),ramp(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors)),ramp(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors)),ramp(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors)),ramp(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors)),ramp(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors)),ramp(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors)),ramp(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors)),ramp(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors)),ramp(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors)),ramp(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors)),ramp(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors)),ramp(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors)),ramp(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors)),ramp(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors)),ramp(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors)),ramp(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors)),ramp(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors)),ramp(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors)),ramp(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors)),__webpack_require__(18));Object(src.b)(Object(d3_color_src.b)(300,.5,0),Object(d3_color_src.b)(-240,.5,1)),Object(src.b)(Object(d3_color_src.b)(-100,.75,.35),Object(d3_color_src.b)(80,1.5,.8)),Object(src.b)(Object(d3_color_src.b)(260,.75,.35),Object(d3_color_src.b)(80,1.5,.8)),Object(d3_color_src.b)(),Object(d3_color_src.f)(),Math.PI,Math.PI;function viridis_ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}viridis_ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),viridis_ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),viridis_ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),viridis_ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));__webpack_require__.d(__webpack_exports__,"a",function(){return category10})},function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(11),classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var hammerjs=null;"undefined"!=typeof document&&(function enhancePointerEventInput(PointerEventInput){var oldHandler=PointerEventInput.prototype.handler;PointerEventInput.prototype.handler=function handler(ev){var store=this.store;ev.button>0&&(function some(array,predict){for(var i=0;i<array.length;i++)if(predict(array[i]))return!0;return!1}(store,function(e){return e.pointerId===ev.pointerId})||store.push(ev)),oldHandler.call(this,ev)}}((hammerjs=__webpack_require__(528)).PointerEventInput),function enhanceMouseInput(MouseInput){MouseInput.prototype.handler=function handler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&ev.button>=0&&(this.pressed=!0),eventType&INPUT_MOVE&&0===ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}}(hammerjs.MouseInput));var hammer_browser=hammerjs;var RECOGNIZERS=hammer_browser?[[hammer_browser.Rotate,{enable:!1}],[hammer_browser.Pinch,{enable:!1}],[hammer_browser.Swipe,{enable:!1}],[hammer_browser.Pan,{threshold:0,enable:!1}],[hammer_browser.Press,{enable:!1}],[hammer_browser.Tap,{event:"doubletap",taps:2,enable:!1}],[hammer_browser.Tap,{event:"anytap",enable:!1}],[hammer_browser.Tap,{enable:!1}]]:null,RECOGNIZER_COMPATIBLE_MAP={rotate:["pinch"],doubletap:["anytap"],anytap:["tap"]},RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},INPUT_EVENT_TYPES_KEY_EVENTS=["keydown","keyup"],INPUT_EVENT_TYPES_MOUSE_EVENTS=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],INPUT_EVENT_TYPES_WHEEL_EVENTS=["wheel","mousewheel","DOMMouseScroll"],EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},globals=__webpack_require__(82),firefox=-1!==globals.b.indexOf("firefox"),WHEEL_EVENTS=INPUT_EVENT_TYPES_WHEEL_EVENTS,wheel_input_WheelInput=function(){function WheelInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,WheelInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.events=WHEEL_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(event){return element.addEventListener(event,_this.handleEvent,!!globals.a&&{passive:!1})})}return Object(createClass.a)(WheelInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach(function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)})}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"wheel"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function handleEvent(event){if(this.options.enable){var value=event.deltaY;globals.c.WheelEvent&&(firefox&&event.deltaMode===globals.c.WheelEvent.DOM_DELTA_PIXEL&&(value/=globals.c.devicePixelRatio),event.deltaMode===globals.c.WheelEvent.DOM_DELTA_LINE&&(value*=40));var wheelPosition={x:event.clientX,y:event.clientY};0!==value&&value%4.000244140625==0&&(value=Math.floor(value/4.000244140625)),event.shiftKey&&value&&(value*=.25),this._onWheel(event,-value,wheelPosition)}}},{key:"_onWheel",value:function _onWheel(srcEvent,delta,position){this.callback({type:"wheel",center:position,delta:delta,srcEvent:srcEvent,pointerType:"mouse",target:srcEvent.target})}}]),WheelInput}(),MOUSE_EVENTS=INPUT_EVENT_TYPES_MOUSE_EVENTS,move_input_MoveInput=function(){function MoveInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,MoveInput),this.element=element,this.callback=callback,this.pressed=!1,this.options=Object.assign({enable:!0},options),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=MOUSE_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(event){return element.addEventListener(event,_this.handleEvent)})}return Object(createClass.a)(MoveInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach(function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)})}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"pointermove"===eventType&&(this.enableMoveEvent=enabled),"pointerover"===eventType&&(this.enableOverEvent=enabled),"pointerout"===eventType&&(this.enableOutEvent=enabled),"pointerleave"===eventType&&(this.enableLeaveEvent=enabled)}},{key:"handleEvent",value:function handleEvent(event){this.handleOverEvent(event),this.handleOutEvent(event),this.handleLeaveEvent(event),this.handleMoveEvent(event)}},{key:"handleOverEvent",value:function handleOverEvent(event){this.enableOverEvent&&"mouseover"===event.type&&this.callback({type:"pointerover",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleOutEvent",value:function handleOutEvent(event){this.enableOutEvent&&"mouseout"===event.type&&this.callback({type:"pointerout",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleLeaveEvent",value:function handleLeaveEvent(event){this.enableLeaveEvent&&"mouseleave"===event.type&&this.callback({type:"pointerleave",srcEvent:event,pointerType:"mouse",target:event.target})}},{key:"handleMoveEvent",value:function handleMoveEvent(event){if(this.enableMoveEvent)switch(event.type){case"mousedown":event.button>=0&&(this.pressed=!0);break;case"mousemove":0===event.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:event,pointerType:"mouse",target:event.target});break;case"mouseup":this.pressed=!1}}}]),MoveInput}(),KEY_EVENTS=INPUT_EVENT_TYPES_KEY_EVENTS,key_input_KeyInput=function(){function KeyInput(element,callback){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,KeyInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=KEY_EVENTS.concat(options.events||[]),this.handleEvent=this.handleEvent.bind(this),element.tabIndex=1,element.style.outline="none",this.events.forEach(function(event){return element.addEventListener(event,_this.handleEvent)})}return Object(createClass.a)(KeyInput,[{key:"destroy",value:function destroy(){var _this2=this;this.events.forEach(function(event){return _this2.element.removeEventListener(event,_this2.handleEvent)})}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"keydown"===eventType&&(this.enableDownEvent=enabled),"keyup"===eventType&&(this.enableUpEvent=enabled)}},{key:"handleEvent",value:function handleEvent(event){var targetElement=event.target||event.srcElement;"INPUT"===targetElement.tagName&&"text"===targetElement.type||"TEXTAREA"===targetElement.tagName||(this.enableDownEvent&&"keydown"===event.type&&this.callback({type:"keydown",srcEvent:event,key:event.key,target:event.target}),this.enableUpEvent&&"keyup"===event.type&&this.callback({type:"keyup",srcEvent:event,key:event.key,target:event.target}))}}]),KeyInput}(),contextmenu_input_ContextmenuInput=function(){function ContextmenuInput(element,callback){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(classCallCheck.a)(this,ContextmenuInput),this.element=element,this.callback=callback,this.options=Object.assign({enable:!0},options),this.handleEvent=this.handleEvent.bind(this),element.addEventListener("contextmenu",this.handleEvent)}return Object(createClass.a)(ContextmenuInput,[{key:"destroy",value:function destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function enableEventType(eventType,enabled){"contextmenu"===eventType&&(this.options.enable=enabled)}},{key:"handleEvent",value:function handleEvent(event){this.options.enable&&this.callback({type:"contextmenu",center:{x:event.clientX,y:event.clientY},srcEvent:event,pointerType:"mouse",target:event.target})}}]),ContextmenuInput}(),DOWN_EVENT=1,MOVE_EVENT=2,UP_EVENT=4,event_utils_MOUSE_EVENTS={pointerdown:DOWN_EVENT,pointermove:MOVE_EVENT,pointerup:UP_EVENT,mousedown:DOWN_EVENT,mousemove:MOVE_EVENT,mouseup:UP_EVENT},MOUSE_EVENT_WHICH_LEFT=1,MOUSE_EVENT_WHICH_MIDDLE=2,MOUSE_EVENT_WHICH_RIGHT=3,MOUSE_EVENT_BUTTON_LEFT=0,MOUSE_EVENT_BUTTON_MIDDLE=1,MOUSE_EVENT_BUTTON_RIGHT=2,MOUSE_EVENT_BUTTONS_LEFT_MASK=1,MOUSE_EVENT_BUTTONS_RIGHT_MASK=2,MOUSE_EVENT_BUTTONS_MIDDLE_MASK=4;var event_registrar_EventRegistrar=function(){function EventRegistrar(eventManager){Object(classCallCheck.a)(this,EventRegistrar),this.eventManager=eventManager,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return Object(createClass.a)(EventRegistrar,[{key:"isEmpty",value:function isEmpty(){return 0===this.handlers.length}},{key:"add",value:function add(type,handler){var srcElement=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",handlers=this.handlers,handlersByElement=this.handlersByElement;handlersByElement.has(srcElement)||handlersByElement.set(srcElement,[]);var entry={type:type,handler:handler,srcElement:srcElement};handlers.push(entry),handlersByElement.get(srcElement).push(entry)}},{key:"remove",value:function remove(type,handler){for(var handlers=this.handlers,handlersByElement=this.handlersByElement,i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(entry.type===type&&entry.handler===handler){handlers.splice(i,1);var entries=handlersByElement.get(entry.srcElement);entries.splice(entries.indexOf(entry),1),0===entries.length&&handlersByElement.delete(entry.srcElement)}}}},{key:"handleEvent",value:function handleEvent(event){if(!this.isEmpty()){for(var mjolnirEvent=this._normalizeEvent(event),target=event.srcEvent.target;target&&target!==mjolnirEvent.rootElement;){if(this._emit(mjolnirEvent,target),mjolnirEvent.handled)return;target=target.parentNode}this._emit(mjolnirEvent,"root")}}},{key:"_emit",value:function _emit(event,srcElement){var entries=this.handlersByElement.get(srcElement);if(entries)for(var immediatePropagationStopped=!1,stopPropagation=function stopPropagation(){event.handled=!0},stopImmediatePropagation=function stopImmediatePropagation(){event.handled=!0,immediatePropagationStopped=!0},i=0;i<entries.length;i++){var _entries$i=entries[i],type=_entries$i.type;if((0,_entries$i.handler)(Object.assign({},event,{type:type,stopPropagation:stopPropagation,stopImmediatePropagation:stopImmediatePropagation})),immediatePropagationStopped)break}}},{key:"_normalizeEvent",value:function _normalizeEvent(event){var rootElement=this.eventManager.element;return Object.assign({},event,function whichButtons(event){var eventType=event_utils_MOUSE_EVENTS[event.srcEvent.type];if(!eventType)return null;var _event$srcEvent=event.srcEvent,buttons=_event$srcEvent.buttons,button=_event$srcEvent.button,which=_event$srcEvent.which,leftButton=!1,middleButton=!1,rightButton=!1;return eventType===UP_EVENT||eventType===MOVE_EVENT&&!Number.isFinite(buttons)?(leftButton=which===MOUSE_EVENT_WHICH_LEFT,middleButton=which===MOUSE_EVENT_WHICH_MIDDLE,rightButton=which===MOUSE_EVENT_WHICH_RIGHT):eventType===MOVE_EVENT?(leftButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_LEFT_MASK),middleButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_MIDDLE_MASK),rightButton=Boolean(buttons&MOUSE_EVENT_BUTTONS_RIGHT_MASK)):eventType===DOWN_EVENT&&(leftButton=button===MOUSE_EVENT_BUTTON_LEFT,middleButton=button===MOUSE_EVENT_BUTTON_MIDDLE,rightButton=button===MOUSE_EVENT_BUTTON_RIGHT),{leftButton:leftButton,middleButton:middleButton,rightButton:rightButton}}(event),function getOffsetPosition(event,rootElement){var srcEvent=event.srcEvent;if(!event.center&&!Number.isFinite(srcEvent.clientX))return null;var center=event.center||{x:srcEvent.clientX,y:srcEvent.clientY},rect=rootElement.getBoundingClientRect(),scaleX=rect.width/rootElement.offsetWidth,scaleY=rect.height/rootElement.offsetHeight;return{center:center,offsetCenter:{x:(center.x-rect.left-rootElement.clientLeft)/scaleX,y:(center.y-rect.top-rootElement.clientTop)/scaleY}}}(event,rootElement),{handled:!1,rootElement:rootElement})}}]),EventRegistrar}(),DEFAULT_OPTIONS={events:null,recognizers:null,Manager:hammer_browser?hammer_browser.Manager:function HammerManagerMock(m){var instance={},chainedNoop=function chainedNoop(){return instance};return instance.get=function(){return null},instance.set=chainedNoop,instance.on=chainedNoop,instance.off=chainedNoop,instance.destroy=chainedNoop,instance.emit=chainedNoop,instance},touchAction:"none"},event_manager_EventManager=function(){function EventManager(){var element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(classCallCheck.a)(this,EventManager),this.options=Object.assign({},DEFAULT_OPTIONS,options),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(element);var events=options.events;events&&this.on(events)}return Object(createClass.a)(EventManager,[{key:"setElement",value:function setElement(element){var _this=this;if(this.element&&this.destroy(),this.element=element,element){var options=this.options,ManagerClass=options.Manager;this.manager=new ManagerClass(element,{touchAction:options.touchAction,recognizers:options.recognizers||RECOGNIZERS}).on("hammer.input",this._onBasicInput),options.recognizers||Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(function(name){var recognizer=_this.manager.get(name);recognizer&&RECOGNIZER_COMPATIBLE_MAP[name].forEach(function(otherName){recognizer.recognizeWith(otherName)})}),this.wheelInput=new wheel_input_WheelInput(element,this._onOtherEvent,{enable:!1}),this.moveInput=new move_input_MoveInput(element,this._onOtherEvent,{enable:!1}),this.keyInput=new key_input_KeyInput(element,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new contextmenu_input_ContextmenuInput(element,this._onOtherEvent,{enable:!1});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.events[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(slicedToArray.a)(_step.value,2),eventAlias=_step$value[0],eventRegistrar=_step$value[1];eventRegistrar.isEmpty()||(this._toggleRecognizer(eventRegistrar.recognizerName,!0),this.manager.on(eventAlias,eventRegistrar.handleEvent))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}},{key:"destroy",value:function destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function on(event,handler,srcElement){if("string"==typeof event)this._addEventHandler(event,handler,srcElement);else for(var eventName in srcElement=handler,event)this._addEventHandler(eventName,event[eventName],srcElement)}},{key:"off",value:function off(event,handler){if("string"==typeof event)this._removeEventHandler(event,handler);else for(var eventName in event)this._removeEventHandler(eventName,event[eventName])}},{key:"_toggleRecognizer",value:function _toggleRecognizer(name,enabled){var manager=this.manager;if(manager){var recognizer=manager.get(name);if(recognizer&&recognizer.options.enable!==enabled){recognizer.set({enable:enabled});var fallbackRecognizers=RECOGNIZER_FALLBACK_MAP[name];fallbackRecognizers&&!this.options.recognizers&&fallbackRecognizers.forEach(function(otherName){var otherRecognizer=manager.get(otherName);enabled?(otherRecognizer.requireFailure(name),recognizer.dropRequireFailure(otherName)):otherRecognizer.dropRequireFailure(name)})}this.wheelInput.enableEventType(name,enabled),this.moveInput.enableEventType(name,enabled),this.keyInput.enableEventType(name,enabled),this.contextmenuInput.enableEventType(name,enabled)}}},{key:"_addEventHandler",value:function _addEventHandler(event,handler,srcElement){var manager=this.manager,events=this.events,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);eventRegistrar||(eventRegistrar=new event_registrar_EventRegistrar(this),events.set(eventAlias,eventRegistrar),eventRegistrar.recognizerName=EVENT_RECOGNIZER_MAP[eventAlias]||eventAlias,manager&&manager.on(eventAlias,eventRegistrar.handleEvent)),this._toggleRecognizer(eventRegistrar.recognizerName,!0),eventRegistrar.add(event,handler,srcElement)}},{key:"_removeEventHandler",value:function _removeEventHandler(event,handler){var events=this.events,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);if(eventRegistrar&&(eventRegistrar.remove(event,handler),eventRegistrar.isEmpty())){var recognizerName=eventRegistrar.recognizerName,isRecognizerUsed=!1,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=events.values()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var eh=_step2.value;if(eh.recognizerName===recognizerName&&!eh.isEmpty()){isRecognizerUsed=!0;break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}isRecognizerUsed||this._toggleRecognizer(recognizerName,!1)}}},{key:"_onBasicInput",value:function _onBasicInput(event){var srcEvent=event.srcEvent,alias=BASIC_EVENT_ALIASES[srcEvent.type];alias&&this.manager.emit(alias,event)}},{key:"_onOtherEvent",value:function _onOtherEvent(event){this.manager.emit(event.type,event)}}]),EventManager}();__webpack_require__.d(__webpack_exports__,"a",function(){return event_manager_EventManager})},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(5),esm=__webpack_require__(8),dist_esm=__webpack_require__(10),column_layer=__webpack_require__(264),bin_sorter=__webpack_require__(114),color_utils=__webpack_require__(145),scale_utils=__webpack_require__(72),thirdPi=Math.PI/3,angles=[0,thirdPi,2*thirdPi,3*thirdPi,4*thirdPi,5*thirdPi];function pointX(d){return d[0]}function pointY(d){return d[1]}var hexbin=function(){var r,dx,dy,x0=0,y0=0,x1=1,y1=1,x=pointX,y=pointY;function hexbin(points){var i,binsById={},bins=[],n=points.length;for(i=0;i<n;++i)if(!isNaN(px=+x.call(null,point=points[i],i,points))&&!isNaN(py=+y.call(null,point,i,points))){var point,px,py,pj=Math.round(py/=dy),pi=Math.round(px=px/dx-(1&pj)/2),py1=py-pj;if(3*Math.abs(py1)>1){var px1=px-pi,pi2=pi+(px<pi?-1:1)/2,pj2=pj+(py<pj?-1:1),px2=px-pi2,py2=py-pj2;px1*px1+py1*py1>px2*px2+py2*py2&&(pi=pi2+(1&pj?1:-1)/2,pj=pj2)}var id=pi+"-"+pj,bin=binsById[id];bin?bin.push(point):(bins.push(bin=binsById[id]=[point]),bin.x=(pi+(1&pj)/2)*dx,bin.y=pj*dy)}return bins}function hexagon(radius){var x0=0,y0=0;return angles.map(function(angle){var x1=Math.sin(angle)*radius,y1=-Math.cos(angle)*radius,dx=x1-x0,dy=y1-y0;return x0=x1,y0=y1,[dx,dy]})}return hexbin.hexagon=function(radius){return"m"+hexagon(null==radius?r:+radius).join("l")+"z"},hexbin.centers=function(){for(var centers=[],j=Math.round(y0/dy),i=Math.round(x0/dx),y=j*dy;y<y1+r;y+=dy,++j)for(var x=i*dx+(1&j)*dx/2;x<x1+dx/2;x+=dx)centers.push([x,y]);return centers},hexbin.mesh=function(){var fragment=hexagon(r).slice(0,4).join("l");return hexbin.centers().map(function(p){return"M"+p+"m"+fragment}).join("")},hexbin.x=function(_){return arguments.length?(x=_,hexbin):x},hexbin.y=function(_){return arguments.length?(y=_,hexbin):y},hexbin.radius=function(_){return arguments.length?(dx=2*(r=+_)*Math.sin(thirdPi),dy=1.5*r,hexbin):r},hexbin.size=function(_){return arguments.length?(x0=y0=0,x1=+_[0],y1=+_[1],hexbin):[x1-x0,y1-y0]},hexbin.extent=function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1],hexbin):[[x0,y0],[x1,y1]]},hexbin.radius(1)};function nop(){}__webpack_require__.d(__webpack_exports__,"a",function(){return hexagon_layer_HexagonLayer});var defaultMaterial=new esm.j,defaultProps={colorDomain:null,colorRange:color_utils.a,getColorValue:{type:"accessor",value:function value(points){return points.length}},lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},onSetColorDomain:nop,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:function value(points){return points.length}},elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:nop,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function pointToHexbin(_ref,viewport){var data=_ref.data,radius=_ref.radius,getPosition=_ref.getPosition,radiusInPixel=function getRadiusInPixel(radius,viewport){var pixelsPerMeter=viewport.getDistanceScales().pixelsPerMeter;return radius*pixelsPerMeter[0]}(radius,viewport),screenPoints=[],_createIterable=Object(dist_esm.h)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++,screenPoints.push(Object.assign({screenCoord:viewport.projectFlat(getPosition(object,objectInfo))},object))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{hexagons:hexbin().radius(radiusInPixel).x(function(d){return d.screenCoord[0]}).y(function(d){return d.screenCoord[1]})(screenPoints).map(function(hex,index){return{position:viewport.unprojectFlat([hex.x,hex.y]),points:hex,index:index}})}},getPosition:{type:"accessor",value:function value(x){return x.position}},fp64:!1,material:defaultMaterial},hexagon_layer_HexagonLayer=function(_CompositeLayer){function HexagonLayer(){return Object(classCallCheck.a)(this,HexagonLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(HexagonLayer).apply(this,arguments))}return Object(inherits.a)(HexagonLayer,_CompositeLayer),Object(createClass.a)(HexagonLayer,[{key:"initializeState",value:function initializeState(){this.state={hexagons:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:nop,elevationScaleFunc:nop,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function updateState(_ref){var _this=this,oldProps=_ref.oldProps,props=_ref.props,changeFlags=_ref.changeFlags,dimensionChanges=this.getDimensionChanges(oldProps,props);changeFlags.dataChanged||this.needsReProjectPoints(oldProps,props)?this.getHexagons():dimensionChanges&&dimensionChanges.forEach(function(f){return"function"==typeof f&&f.apply(_this)})}},{key:"needsReProjectPoints",value:function needsReProjectPoints(oldProps,props){return oldProps.radius!==props.radius||oldProps.hexagonAggregator!==props.hexagonAggregator}},{key:"getDimensionUpdaters",value:function getDimensionUpdaters(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function getDimensionChanges(oldProps,props){var dimensionUpdaters=this.state.dimensionUpdaters,updaters=[];for(var dimensionKey in dimensionUpdaters){var needUpdate=dimensionUpdaters[dimensionKey].find(function(item){return item.triggers.some(function(t){return oldProps[t]!==props[t]})});needUpdate&&updaters.push(needUpdate.updater)}return updaters.length?updaters:null}},{key:"getHexagons",value:function getHexagons(){var hexagonAggregator=this.props.hexagonAggregator,viewport=this.context.viewport,_hexagonAggregator=hexagonAggregator(this.props,viewport),hexagons=_hexagonAggregator.hexagons,hexagonVertices=_hexagonAggregator.hexagonVertices;this.updateRadiusAngle(hexagonVertices),this.setState({hexagons:hexagons}),this.getSortedBins()}},{key:"getPickingInfo",value:function getPickingInfo(_ref2){var info=_ref2.info,_this$state=this.state,sortedColorBins=_this$state.sortedColorBins,sortedElevationBins=_this$state.sortedElevationBins,object=null;if(info.picked&&info.index>-1){var cell=this.state.hexagons[info.index],colorValue=sortedColorBins.binMap[cell.index]&&sortedColorBins.binMap[cell.index].value,elevationValue=sortedElevationBins.binMap[cell.index]&&sortedElevationBins.binMap[cell.index].value;object=Object.assign({colorValue:colorValue,elevationValue:elevationValue},cell)}return Object.assign(info,{picked:Boolean(object),object:object})}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var _this2=this,dimensionUpdaters=this.state.dimensionUpdaters,updateTriggers={},_loop=function _loop(dimensionKey){updateTriggers[dimensionKey]={};var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=dimensionUpdaters[dimensionKey][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.triggers.forEach(function(prop){updateTriggers[dimensionKey][prop]=_this2.props[prop]})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}};for(var dimensionKey in dimensionUpdaters)_loop(dimensionKey);return updateTriggers}},{key:"updateRadiusAngle",value:function updateRadiusAngle(vertices){var radius=this.props.radius,angle=90;if(Array.isArray(vertices)){vertices.length<6&&dist_esm.j.error("HexagonCellLayer: hexagonVertices needs to be an array of 6 points")();var vertex0=vertices[0],vertex3=vertices[3],pixelsPerMeter=this.context.viewport.getDistanceScales().pixelsPerMeter,spaceCoord0=this.projectFlat(vertex0),spaceCoord3=this.projectFlat(vertex3),dx=spaceCoord0[0]-spaceCoord3[0],dy=spaceCoord0[1]-spaceCoord3[1],dxy=Math.sqrt(dx*dx+dy*dy);angle=Math.acos(dx/dxy)*-Math.sign(dy)/Math.PI*180+90,radius=dxy/2/pixelsPerMeter[0]}this.setState({angle:angle,radius:radius})}},{key:"getValueDomain",value:function getValueDomain(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function getSortedBins(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function getSortedColorBins(){var getColorValue=this.props.getColorValue,sortedColorBins=new bin_sorter.a(this.state.hexagons||[],getColorValue);this.setState({sortedColorBins:sortedColorBins}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function getSortedElevationBins(){var getElevationValue=this.props.getElevationValue,sortedElevationBins=new bin_sorter.a(this.state.hexagons||[],getElevationValue);this.setState({sortedElevationBins:sortedElevationBins}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function getColorValueDomain(){var _this$props=this.props,lowerPercentile=_this$props.lowerPercentile,upperPercentile=_this$props.upperPercentile,onSetColorDomain=_this$props.onSetColorDomain;lowerPercentile>upperPercentile&&dist_esm.j.warn("HexagonLayer: lowerPercentile is bigger than upperPercentile")(),this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([lowerPercentile,upperPercentile]),"function"==typeof onSetColorDomain&&onSetColorDomain(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function getElevationValueDomain(){var _this$props2=this.props,elevationLowerPercentile=_this$props2.elevationLowerPercentile,elevationUpperPercentile=_this$props2.elevationUpperPercentile,onSetElevationDomain=_this$props2.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([elevationLowerPercentile,elevationUpperPercentile]),"function"==typeof onSetElevationDomain&&onSetElevationDomain(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function getColorScale(){var colorRange=this.props.colorRange,colorDomain=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=Object(scale_utils.b)(colorDomain,colorRange)}},{key:"getElevationScale",value:function getElevationScale(){var elevationRange=this.props.elevationRange,elevationDomain=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=Object(scale_utils.a)(elevationDomain,elevationRange)}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(cell){var _this$state2=this.state,sortedColorBins=_this$state2.sortedColorBins,colorScaleFunc=_this$state2.colorScaleFunc,colorValueDomain=_this$state2.colorValueDomain,cv=sortedColorBins.binMap[cell.index]&&sortedColorBins.binMap[cell.index].value,colorDomain=this.props.colorDomain||colorValueDomain,color=cv>=colorDomain[0]&&cv<=colorDomain[colorDomain.length-1]?colorScaleFunc(cv):[0,0,0,0];return color[3]=Number.isFinite(color[3])?color[3]:255,color}},{key:"_onGetSublayerElevation",value:function _onGetSublayerElevation(cell){var _this$state3=this.state,sortedElevationBins=_this$state3.sortedElevationBins,elevationScaleFunc=_this$state3.elevationScaleFunc,elevationValueDomain=_this$state3.elevationValueDomain,ev=sortedElevationBins.binMap[cell.index]&&sortedElevationBins.binMap[cell.index].value,elevationDomain=this.props.elevationDomain||elevationValueDomain;return ev>=elevationDomain[0]&&ev<=elevationDomain[elevationDomain.length-1]?elevationScaleFunc(ev):-1}},{key:"renderLayers",value:function renderLayers(){var _this$props3=this.props,elevationScale=_this$props3.elevationScale,extruded=_this$props3.extruded,coverage=_this$props3.coverage,material=_this$props3.material,fp64=_this$props3.fp64,transitions=_this$props3.transitions,_this$state4=this.state,angle=_this$state4.angle,radius=_this$state4.radius;return new(this.getSubLayerClass("hexagon-cell",column_layer.a))({fp64:fp64,radius:radius,diskResolution:6,elevationScale:elevationScale,angle:angle,extruded:extruded,coverage:coverage,material:material,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:transitions&&{getColor:transitions.getColorValue,getElevation:transitions.getElevationValue}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:this.getUpdateTriggers()}),{data:this.state.hexagons})}}]),HexagonLayer}(dist_esm.b);hexagon_layer_HexagonLayer.layerName="HexagonLayer",hexagon_layer_HexagonLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){module.exports={Welcome:__webpack_require__(524).default,Button:__webpack_require__(527).default}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",function(){return Mapbox});var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_utils_globals__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43);var propTypes={container:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,gl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,mapboxApiAccessToken:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,attributionControl:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,preserveDrawingBuffer:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,reuseMaps:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,transformRequest:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,mapOptions:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,mapStyle:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object]),visible:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,asyncRender:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.bool,onLoad:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,onError:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,width:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,height:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,viewState:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,longitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,latitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,zoom:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,bearing:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,pitch:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number,altitude:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.number},defaultProps={container:_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.body,mapboxApiAccessToken:function getAccessToken(){var accessToken=null;if("undefined"!=typeof window&&window.location){var match=window.location.search.match(/access_token=([^&\/]*)/);accessToken=match&&match[1]}accessToken||void 0===process||(accessToken=accessToken||Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).MapboxAccessToken||Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).REACT_APP_MAPBOX_ACCESS_TOKEN);return accessToken||"no-token"}(),preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,asyncRender:!1,onLoad:function noop(){},onError:function defaultOnError(event){event&&console.error(event.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0};function checkPropTypes(props){var component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";props.debug&&prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.checkPropTypes(propTypes,props,"prop",component)}var Mapbox=function(){function Mapbox(props){var _this=this;if(Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Mapbox),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"mapboxgl",void 0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"props",defaultProps),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"_map",null),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"width",0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"height",0),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(this,"_fireLoadEvent",function(){_this.props.onLoad({type:"load",target:_this._map})}),!props.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=props.mapboxgl,Mapbox.initialized||(Mapbox.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(props)}return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Mapbox,[{key:"finalize",value:function finalize(){return this._destroy(),this}},{key:"setProps",value:function setProps(props){return this._update(this.props,props),this}},{key:"resize",value:function resize(){return this._map.resize(),this}},{key:"redraw",value:function redraw(){var map=this._map;map.style&&(map._frame&&(map._frame.cancel(),map._frame=null),map._render())}},{key:"getMap",value:function getMap(){return this._map}},{key:"_reuse",value:function _reuse(props){this._map=Mapbox.savedMap;var oldContainer=this._map.getContainer(),newContainer=props.container;for(newContainer.classList.add("mapboxgl-map");oldContainer.childNodes.length>0;)newContainer.appendChild(oldContainer.childNodes[0]);this._map._container=newContainer,Mapbox.savedMap=null,props.mapStyle&&this._map.setStyle(props.mapStyle,{diff:!0}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function _create(props){if(props.reuseMaps&&Mapbox.savedMap)this._reuse(props);else{if(props.gl){var getContext=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=getContext,props.gl}}var mapOptions={container:props.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:props.mapStyle,interactive:!1,trackResize:!1,attributionControl:props.attributionControl,preserveDrawingBuffer:props.preserveDrawingBuffer};props.transformRequest&&(mapOptions.transformRequest=props.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},mapOptions,props.mapOptions)),this._map.once("load",props.onLoad),this._map.on("error",props.onError)}return this}},{key:"_destroy",value:function _destroy(){this._map&&(Mapbox.savedMap?this._map.remove():(Mapbox.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function _initialize(props){var _this2=this;checkPropTypes(props=Object.assign({},defaultProps,props),"Mapbox"),this.mapboxgl.accessToken=props.mapboxApiAccessToken||defaultProps.mapboxApiAccessToken,this._create(props);var container=props.container;Object.defineProperty(container,"offsetWidth",{get:function get(){return _this2.width}}),Object.defineProperty(container,"clientWidth",{get:function get(){return _this2.width}}),Object.defineProperty(container,"offsetHeight",{get:function get(){return _this2.height}}),Object.defineProperty(container,"clientHeight",{get:function get(){return _this2.height}});var canvas=this._map.getCanvas();canvas&&(canvas.style.outline="none"),this._updateMapViewport({},props),this._updateMapSize({},props),this.props=props}},{key:"_update",value:function _update(oldProps,newProps){if(this._map){checkPropTypes(newProps=Object.assign({},this.props,newProps),"Mapbox");var viewportChanged=this._updateMapViewport(oldProps,newProps),sizeChanged=this._updateMapSize(oldProps,newProps);newProps.asyncRender||!viewportChanged&&!sizeChanged||this.redraw(),this.props=newProps}}},{key:"_updateMapSize",value:function _updateMapSize(oldProps,newProps){var sizeChanged=oldProps.width!==newProps.width||oldProps.height!==newProps.height;return sizeChanged&&(this.width=newProps.width,this.height=newProps.height,this.resize()),sizeChanged}},{key:"_updateMapViewport",value:function _updateMapViewport(oldProps,newProps){var oldViewState=this._getViewState(oldProps),newViewState=this._getViewState(newProps),viewportChanged=newViewState.latitude!==oldViewState.latitude||newViewState.longitude!==oldViewState.longitude||newViewState.zoom!==oldViewState.zoom||newViewState.pitch!==oldViewState.pitch||newViewState.bearing!==oldViewState.bearing||newViewState.altitude!==oldViewState.altitude;return viewportChanged&&(this._map.jumpTo(this._viewStateToMapboxProps(newViewState)),newViewState.altitude!==oldViewState.altitude&&(this._map.transform.altitude=newViewState.altitude)),viewportChanged}},{key:"_getViewState",value:function _getViewState(props){var _ref=props.viewState||props,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing,_ref$altitude=_ref.altitude;return{longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing,altitude:void 0===_ref$altitude?1.5:_ref$altitude}}},{key:"_checkStyleSheet",value:function _checkStyleSheet(){var mapboxVersion=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a)try{var testElement=_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.createElement("div");if(testElement.className="mapboxgl-map",testElement.style.display="none",_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.body.append(testElement),!("static"!==window.getComputedStyle(testElement).position)){var link=_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(mapboxVersion,"/mapbox-gl.css")),_utils_globals__WEBPACK_IMPORTED_MODULE_4__.a.head.append(link)}}catch(error){}}},{key:"_viewStateToMapboxProps",value:function _viewStateToMapboxProps(viewState){return{center:[viewState.longitude,viewState.latitude],zoom:viewState.zoom,bearing:viewState.bearing,pitch:viewState.pitch}}}]),Mapbox}();Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"initialized",!1),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"propTypes",propTypes),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"defaultProps",defaultProps),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)(Mapbox,"savedMap",null)}).call(this,__webpack_require__(54))},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){__webpack_require__.d(__webpack_exports__,"a",function(){return parseImageNode});var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59),get_pixels__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(271),get_pixels__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(get_pixels__WEBPACK_IMPORTED_MODULE_2__),util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(272),util__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_3__),_lib_get_image_metadata__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(273);function parseImageNode(_x,_x2){return _parseImageNode.apply(this,arguments)}function _parseImageNode(){return(_parseImageNode=Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(arrayBuffer,options){var getPixelsAsync,_getImageMetadata,mimeType,buffer,ndarray;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return getPixelsAsync=util__WEBPACK_IMPORTED_MODULE_3___default.a.promisify(get_pixels__WEBPACK_IMPORTED_MODULE_2___default.a),_getImageMetadata=Object(_lib_get_image_metadata__WEBPACK_IMPORTED_MODULE_4__.a)(arrayBuffer),mimeType=_getImageMetadata.mimeType,buffer=arrayBuffer instanceof Buffer?arrayBuffer:Buffer.from(arrayBuffer),_context.next=5,getPixelsAsync(buffer,mimeType);case 5:return ndarray=_context.sent,_context.abrupt("return",{width:ndarray.shape[0],height:ndarray.shape[1],data:ndarray.data});case 7:case"end":return _context.stop()}},_callee)}))).apply(this,arguments)}}).call(this,__webpack_require__(263).Buffer)},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__(195),origKeys=Object.keys,keysShim=origKeys?function keys(o){return origKeys(o)}:__webpack_require__(306),originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){Object.keys?function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2)||(Object.keys=function keys(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(85),toPrimitive=__webpack_require__(315),keys=__webpack_require__(152),GetIntrinsic=__webpack_require__(74),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),$Array=GetIntrinsic("%Array%"),$String=GetIntrinsic("%String%"),$Object=GetIntrinsic("%Object%"),$Number=GetIntrinsic("%Number%"),$Symbol=GetIntrinsic("%Symbol%",!0),$RegExp=GetIntrinsic("%RegExp%"),hasSymbols=!!$Symbol,assertRecord=__webpack_require__(199),$isNaN=__webpack_require__(200),$isFinite=__webpack_require__(201),MAX_SAFE_INTEGER=$Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,assign=__webpack_require__(100),sign=__webpack_require__(202),mod=__webpack_require__(203),isPrimitive=__webpack_require__(319),parseInteger=parseInt,bind=__webpack_require__(45),arraySlice=bind.call(Function.call,$Array.prototype.slice),strSlice=bind.call(Function.call,$String.prototype.slice),isBinary=bind.call(Function.call,$RegExp.prototype.test,/^0b[01]+$/i),isOctal=bind.call(Function.call,$RegExp.prototype.test,/^0o[0-7]+$/i),regexExec=bind.call(Function.call,$RegExp.prototype.exec),nonWSregex=new $RegExp("["+["","",""].join("")+"]","g"),hasNonWS=bind.call(Function.call,$RegExp.prototype.test,nonWSregex),isInvalidHexLiteral=bind.call(Function.call,$RegExp.prototype.test,/^[-+]0x[0-9a-f]+$/i),$charCodeAt=bind.call(Function.call,$String.prototype.charCodeAt),toStr=bind.call(Function.call,Object.prototype.toString),$NumberValueOf=bind.call(Function.call,GetIntrinsic("%NumberPrototype%").valueOf),$BooleanValueOf=bind.call(Function.call,GetIntrinsic("%BooleanPrototype%").valueOf),$StringValueOf=bind.call(Function.call,GetIntrinsic("%StringPrototype%").valueOf),$DateValueOf=bind.call(Function.call,GetIntrinsic("%DatePrototype%").valueOf),$floor=Math.floor,$abs=Math.abs,$ObjectCreate=Object.create,$gOPD=$Object.getOwnPropertyDescriptor,$isExtensible=$Object.isExtensible,$defineProperty=$Object.defineProperty,ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegex=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),replace=bind.call(Function.call,$String.prototype.replace),ES5=__webpack_require__(204),hasRegExpMatcher=__webpack_require__(205),ES6=assign(assign({},ES5),{Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!this.IsCallable(F))throw new $TypeError(F+" is not a function");return F.apply(V,args)},ToPrimitive:toPrimitive,ToNumber:function ToNumber(argument){var value=isPrimitive(argument)?argument:toPrimitive(argument,$Number);if("symbol"==typeof value)throw new $TypeError("Cannot convert a Symbol value to a number");if("string"==typeof value){if(isBinary(value))return this.ToNumber(parseInteger(strSlice(value,2),2));if(isOctal(value))return this.ToNumber(parseInteger(strSlice(value,2),8));if(hasNonWS(value)||isInvalidHexLiteral(value))return NaN;var trimmed=function(value){return replace(value,trimRegex,"")}(value);if(trimmed!==value)return this.ToNumber(trimmed)}return $Number(value)},ToInt16:function ToInt16(argument){var int16bit=this.ToUint16(argument);return int16bit>=32768?int16bit-65536:int16bit},ToInt8:function ToInt8(argument){var int8bit=this.ToUint8(argument);return int8bit>=128?int8bit-256:int8bit},ToUint8:function ToUint8(argument){var number=this.ToNumber(argument);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*$floor($abs(number));return mod(posInt,256)},ToUint8Clamp:function ToUint8Clamp(argument){var number=this.ToNumber(argument);if($isNaN(number)||number<=0)return 0;if(number>=255)return 255;var f=$floor(argument);return f+.5<number?f+1:number<f+.5?f:f%2!=0?f+1:f},ToString:function ToString(argument){if("symbol"==typeof argument)throw new $TypeError("Cannot convert a Symbol value to a string");return $String(argument)},ToObject:function ToObject(value){return this.RequireObjectCoercible(value),$Object(value)},ToPropertyKey:function ToPropertyKey(argument){var key=this.ToPrimitive(argument,$String);return"symbol"==typeof key?key:this.ToString(key)},ToLength:function ToLength(argument){var len=this.ToInteger(argument);return len<=0?0:len>MAX_SAFE_INTEGER?MAX_SAFE_INTEGER:len},CanonicalNumericIndexString:function CanonicalNumericIndexString(argument){if("[object String]"!==toStr(argument))throw new $TypeError("must be a string");if("-0"===argument)return-0;var n=this.ToNumber(argument);return this.SameValue(this.ToString(n),argument)?n:void 0},RequireObjectCoercible:ES5.CheckObjectCoercible,IsArray:$Array.isArray||function IsArray(argument){return"[object Array]"===toStr(argument)},IsConstructor:function IsConstructor(argument){return"function"==typeof argument&&!!argument.prototype},IsExtensible:Object.preventExtensions?function IsExtensible(obj){return!isPrimitive(obj)&&$isExtensible(obj)}:function isExtensible(obj){return!0},IsInteger:function IsInteger(argument){if("number"!=typeof argument||$isNaN(argument)||!$isFinite(argument))return!1;var abs=$abs(argument);return $floor(abs)===abs},IsPropertyKey:function IsPropertyKey(argument){return"string"==typeof argument||"symbol"==typeof argument},IsRegExp:function IsRegExp(argument){if(!argument||"object"!=typeof argument)return!1;if(hasSymbols){var isRegExp=argument[$Symbol.match];if(void 0!==isRegExp)return ES5.ToBoolean(isRegExp)}return hasRegExpMatcher(argument)},SameValueZero:function SameValueZero(x,y){return x===y||$isNaN(x)&&$isNaN(y)},GetV:function GetV(V,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(V)[P]},GetMethod:function GetMethod(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var func=this.GetV(O,P);if(null!=func){if(!this.IsCallable(func))throw new $TypeError(P+"is not a function");return func}},Get:function Get(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return O[P]},Type:function Type(x){return"symbol"==typeof x?"Symbol":ES5.Type(x)},SpeciesConstructor:function SpeciesConstructor(O,defaultConstructor){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");var C=O.constructor;if(void 0===C)return defaultConstructor;if("Object"!==this.Type(C))throw new $TypeError("O.constructor is not an Object");var S=hasSymbols&&$Symbol.species?C[$Symbol.species]:void 0;if(null==S)return defaultConstructor;if(this.IsConstructor(S))return S;throw new $TypeError("no constructor found")},CompletePropertyDescriptor:function CompletePropertyDescriptor(Desc){return assertRecord(this,"Property Descriptor","Desc",Desc),this.IsGenericDescriptor(Desc)||this.IsDataDescriptor(Desc)?(has(Desc,"[[Value]]")||(Desc["[[Value]]"]=void 0),has(Desc,"[[Writable]]")||(Desc["[[Writable]]"]=!1)):(has(Desc,"[[Get]]")||(Desc["[[Get]]"]=void 0),has(Desc,"[[Set]]")||(Desc["[[Set]]"]=void 0)),has(Desc,"[[Enumerable]]")||(Desc["[[Enumerable]]"]=!1),has(Desc,"[[Configurable]]")||(Desc["[[Configurable]]"]=!1),Desc},Set:function Set(O,P,V,Throw){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");if("Boolean"!==this.Type(Throw))throw new $TypeError("Throw must be a Boolean");if(Throw)return O[P]=V,!0;try{O[P]=V}catch(e){return!1}},HasOwnProperty:function HasOwnProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return has(O,P)},HasProperty:function HasProperty(O,P){if("Object"!==this.Type(O))throw new $TypeError("O must be an Object");if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");return P in O},IsConcatSpreadable:function IsConcatSpreadable(O){if("Object"!==this.Type(O))return!1;if(hasSymbols&&"symbol"==typeof $Symbol.isConcatSpreadable){var spreadable=this.Get(O,Symbol.isConcatSpreadable);if(void 0!==spreadable)return this.ToBoolean(spreadable)}return this.IsArray(O)},Invoke:function Invoke(O,P){if(!this.IsPropertyKey(P))throw new $TypeError("P must be a Property Key");var argumentsList=arraySlice(arguments,2),func=this.GetV(O,P);return this.Call(func,O,argumentsList)},GetIterator:function GetIterator(obj,method){if(!hasSymbols)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var actualMethod=method;arguments.length<2&&(actualMethod=this.GetMethod(obj,$Symbol.iterator));var iterator=this.Call(actualMethod,obj);if("Object"!==this.Type(iterator))throw new $TypeError("iterator must return an object");return iterator},IteratorNext:function IteratorNext(iterator,value){var result=this.Invoke(iterator,"next",arguments.length<2?[]:[value]);if("Object"!==this.Type(result))throw new $TypeError("iterator next must return an object");return result},IteratorComplete:function IteratorComplete(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(iterResult,"done"))},IteratorValue:function IteratorValue(iterResult){if("Object"!==this.Type(iterResult))throw new $TypeError("Assertion failed: Type(iterResult) is not Object");return this.Get(iterResult,"value")},IteratorStep:function IteratorStep(iterator){var result=this.IteratorNext(iterator);return!0!==this.IteratorComplete(result)&&result},IteratorClose:function IteratorClose(iterator,completion){if("Object"!==this.Type(iterator))throw new $TypeError("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(completion))throw new $TypeError("Assertion failed: completion is not a thunk for a Completion Record");var completionRecord,completionThunk=completion,iteratorReturn=this.GetMethod(iterator,"return");if(void 0===iteratorReturn)return completionThunk();try{var innerResult=this.Call(iteratorReturn,iterator,[])}catch(e){throw completionRecord=completionThunk(),completionThunk=null,e}if(completionRecord=completionThunk(),completionThunk=null,"Object"!==this.Type(innerResult))throw new $TypeError("iterator .return must return an object");return completionRecord},CreateIterResultObject:function CreateIterResultObject(value,done){if("Boolean"!==this.Type(done))throw new $TypeError("Assertion failed: Type(done) is not Boolean");return{value:value,done:done}},RegExpExec:function RegExpExec(R,S){if("Object"!==this.Type(R))throw new $TypeError("R must be an Object");if("String"!==this.Type(S))throw new $TypeError("S must be a String");var exec=this.Get(R,"exec");if(this.IsCallable(exec)){var result=this.Call(exec,R,[S]);if(null===result||"Object"===this.Type(result))return result;throw new $TypeError('"exec" method must return `null` or an Object')}return regexExec(R,S)},ArraySpeciesCreate:function ArraySpeciesCreate(originalArray,length){if(!this.IsInteger(length)||length<0)throw new $TypeError("Assertion failed: length must be an integer >= 0");var C,len=0===length?0:length;if(this.IsArray(originalArray)&&(C=this.Get(originalArray,"constructor"),"Object"===this.Type(C)&&hasSymbols&&$Symbol.species&&null===(C=this.Get(C,$Symbol.species))&&(C=void 0)),void 0===C)return $Array(len);if(!this.IsConstructor(C))throw new $TypeError("C must be a constructor");return new C(len)},CreateDataProperty:function CreateDataProperty(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var oldDesc=$gOPD(O,P),extensible=oldDesc||"function"!=typeof $isExtensible||$isExtensible(O);return!(!(!oldDesc||oldDesc.writable&&oldDesc.configurable)||!extensible)&&($defineProperty(O,P,{configurable:!0,enumerable:!0,value:V,writable:!0}),!0)},CreateDataPropertyOrThrow:function CreateDataPropertyOrThrow(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=this.CreateDataProperty(O,P,V);if(!success)throw new $TypeError("unable to create data property");return success},ObjectCreate:function ObjectCreate(proto,internalSlotsList){if(null!==proto&&"Object"!==this.Type(proto))throw new $TypeError("Assertion failed: proto must be null or an object");if((arguments.length<2?[]:internalSlotsList).length>0)throw new $SyntaxError("es-abstract does not yet support internal slots");if(null===proto&&!$ObjectCreate)throw new $SyntaxError("native Object.create support is required to create null objects");return $ObjectCreate(proto)},AdvanceStringIndex:function AdvanceStringIndex(S,index,unicode){if("String"!==this.Type(S))throw new $TypeError("S must be a String");if(!this.IsInteger(index)||index<0||index>MAX_SAFE_INTEGER)throw new $TypeError("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(unicode))throw new $TypeError("Assertion failed: unicode must be a Boolean");if(!unicode)return index+1;if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2},CreateMethodProperty:function CreateMethodProperty(O,P,V){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return!!$defineProperty(O,P,{configurable:!0,enumerable:!1,value:V,writable:!0})},DefinePropertyOrThrow:function DefinePropertyOrThrow(O,P,desc){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");return!!$defineProperty(O,P,desc)},DeletePropertyOrThrow:function DeletePropertyOrThrow(O,P){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(P))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var success=delete O[P];if(!success)throw new TypeError("Attempt to delete property failed.");return success},EnumerableOwnNames:function EnumerableOwnNames(O){if("Object"!==this.Type(O))throw new $TypeError("Assertion failed: Type(O) is not Object");return keys(O)},thisNumberValue:function thisNumberValue(value){return"Number"===this.Type(value)?value:$NumberValueOf(value)},thisBooleanValue:function thisBooleanValue(value){return"Boolean"===this.Type(value)?value:$BooleanValueOf(value)},thisStringValue:function thisStringValue(value){return"String"===this.Type(value)?value:$StringValueOf(value)},thisTimeValue:function thisTimeValue(value){return $DateValueOf(value)}});delete ES6.CheckObjectCoercible,module.exports=ES6},function(module,exports,__webpack_require__){"use strict";var ES2015=__webpack_require__(153),assign=__webpack_require__(100),ES2016=assign(assign({},ES2015),{SameValueNonNumber:function SameValueNonNumber(x,y){if("number"==typeof x||typeof x!=typeof y)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(x,y)}});module.exports=ES2016},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(100),ES5=__webpack_require__(204),ES2015=__webpack_require__(153),ES2016=__webpack_require__(154),ES={ES5:ES5,ES6:ES2015,ES2015:ES2015,ES7:ES2016,ES2016:ES2016,ES2017:__webpack_require__(101),ES2018:__webpack_require__(208)};assign(ES,ES5),delete ES.CheckObjectCoercible,assign(ES,ES2015),module.exports=ES},function(module,exports,__webpack_require__){"use strict";module.exports=function requirePromise(){if("function"!=typeof Promise)throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.");if("function"!=typeof Array.from)throw new TypeError("`Promise.allSettled` requires `Array.from` be available.")}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39),document=__webpack_require__(29).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),core=__webpack_require__(65),LIBRARY=__webpack_require__(104),wksExt=__webpack_require__(213),defineProperty=__webpack_require__(42).f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==name.charAt(0)||name in $Symbol||defineProperty($Symbol,name,{value:wksExt.f(name)})}},function(module,exports,__webpack_require__){var shared=__webpack_require__(119)("keys"),uid=__webpack_require__(103);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports,__webpack_require__){var cof=__webpack_require__(77);module.exports=Array.isArray||function isArray(arg){return"Array"==cof(arg)}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(214),hiddenKeys=__webpack_require__(161).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},function(module,exports,__webpack_require__){var pIE=__webpack_require__(107),createDesc=__webpack_require__(102),toIObject=__webpack_require__(76),toPrimitive=__webpack_require__(118),has=__webpack_require__(64),IE8_DOM_DEFINE=__webpack_require__(212),gOPD=Object.getOwnPropertyDescriptor;exports.f=__webpack_require__(37)?gOPD:function getOwnPropertyDescriptor(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(104),$export=__webpack_require__(23),redefine=__webpack_require__(48),hide=__webpack_require__(66),Iterators=__webpack_require__(109),$iterCreate=__webpack_require__(389),setToStringTag=__webpack_require__(105),getPrototypeOf=__webpack_require__(390),ITERATOR=__webpack_require__(28)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case"keys":return function keys(){return new Constructor(this,kind)};case"values":return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES="values"==DEFAULT,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto["@@iterator"]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME&&proto.entries||$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)))!==Object.prototype&&IteratorPrototype.next&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||"function"==typeof IteratorPrototype[ITERATOR]||hide(IteratorPrototype,ITERATOR,returnThis)),DEF_VALUES&&$native&&"values"!==$native.name&&(VALUES_BUG=!0,$default=function values(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod("values"),keys:IS_SET?$default:getMethod("keys"),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports,__webpack_require__){"use strict";var ctx=__webpack_require__(67),$export=__webpack_require__(23),toObject=__webpack_require__(69),call=__webpack_require__(221),isArrayIter=__webpack_require__(222),toLength=__webpack_require__(68),createProperty=__webpack_require__(391),getIterFn=__webpack_require__(223);$export($export.S+$export.F*!__webpack_require__(168)(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var length,result,step,iterator,O=toObject(arrayLike),C="function"==typeof this?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:void 0,mapping=void 0!==mapfn,index=0,iterFn=getIterFn(O);if(mapping&&(mapfn=ctx(mapfn,aLen>2?arguments[2]:void 0,2)),null==iterFn||C==Array&&isArrayIter(iterFn))for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);else for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++)createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],!0):step.value);return result.length=index,result}})},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(28)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(392);var anObject=__webpack_require__(33),$flags=__webpack_require__(170),DESCRIPTORS=__webpack_require__(37),$toString=/./.toString,define=function(fn){__webpack_require__(48)(RegExp.prototype,"toString",fn,!0)};__webpack_require__(38)(function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})})?define(function toString(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):void 0)}):"toString"!=$toString.name&&define(function toString(){return $toString.call(this)})},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(33);module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){var DateProto=Date.prototype,$toString=DateProto.toString,getTime=DateProto.getTime;new Date(NaN)+""!="Invalid Date"&&__webpack_require__(48)(DateProto,"toString",function toString(){var value=getTime.call(this);return value==value?$toString.call(this):"Invalid Date"})},function(module,exports,__webpack_require__){var $export=__webpack_require__(23),$entries=__webpack_require__(224)(!0);$export($export.S,"Object",{entries:function entries(it){return $entries(it)}})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),$reduce=__webpack_require__(396);$export($export.P+$export.F*!__webpack_require__(88)([].reduce,!0),"Array",{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!1)}})},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(405),parse=__webpack_require__(406),formats=__webpack_require__(233);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){var require;module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=function(forceSimilar){if("function"!=typeof Map||forceSimilar){var Similar=_dereq_("./similar");return new Similar}return new Map}},{"./similar":2}],2:[function(_dereq_,module,exports){function Similar(){return this.list=[],this.lastItem=void 0,this.size=0,this}Similar.prototype.get=function(key){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?this.lastItem.val:(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val):void 0},Similar.prototype.set=function(key,val){var index;return this.lastItem&&this.isEqual(this.lastItem.key,key)?(this.lastItem.val=val,this):(index=this.indexOf(key))>=0?(this.lastItem=this.list[index],this.list[index].val=val,this):(this.lastItem={key:key,val:val},this.list.push(this.lastItem),this.size++,this)},Similar.prototype.delete=function(key){var index;if(this.lastItem&&this.isEqual(this.lastItem.key,key)&&(this.lastItem=void 0),(index=this.indexOf(key))>=0)return this.size--,this.list.splice(index,1)[0]},Similar.prototype.has=function(key){var index;return!(!this.lastItem||!this.isEqual(this.lastItem.key,key))||(index=this.indexOf(key))>=0&&(this.lastItem=this.list[index],!0)},Similar.prototype.forEach=function(callback,thisArg){var i;for(i=0;i<this.size;i++)callback.call(thisArg||this,this.list[i].val,this.list[i].key,this)},Similar.prototype.indexOf=function(key){var i;for(i=0;i<this.size;i++)if(this.isEqual(this.list[i].key,key))return i;return-1},Similar.prototype.isEqual=function(val1,val2){return val1===val2||val1!=val1&&val2!=val2},module.exports=Similar},{}],3:[function(_dereq_,module,exports){var MapOrSimilar=_dereq_("map-or-similar");module.exports=function(limit){var cache=new MapOrSimilar(!1),lru=[];return function(fn){var memoizerific=function(){var newMap,fnResult,i,currentCache=cache,argsLengthMinusOne=arguments.length-1,lruPath=Array(argsLengthMinusOne+1),isMemoized=!0;if((memoizerific.numArgs||0===memoizerific.numArgs)&&memoizerific.numArgs!==argsLengthMinusOne+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(i=0;i<argsLengthMinusOne;i++)lruPath[i]={cacheItem:currentCache,arg:arguments[i]},currentCache.has(arguments[i])?currentCache=currentCache.get(arguments[i]):(isMemoized=!1,newMap=new MapOrSimilar(!1),currentCache.set(arguments[i],newMap),currentCache=newMap);return isMemoized&&(currentCache.has(arguments[argsLengthMinusOne])?fnResult=currentCache.get(arguments[argsLengthMinusOne]):isMemoized=!1),isMemoized||(fnResult=fn.apply(null,arguments),currentCache.set(arguments[argsLengthMinusOne],fnResult)),limit>0&&(lruPath[argsLengthMinusOne]={cacheItem:currentCache,arg:arguments[argsLengthMinusOne]},isMemoized?function moveToMostRecentLru(lru,lruPath){var isMatch,i,ii,val1,val2,lruLen=lru.length,lruPathLen=lruPath.length;for(i=0;i<lruLen;i++){for(isMatch=!0,ii=0;ii<lruPathLen;ii++)if(val1=lru[i][ii].arg,val2=lruPath[ii].arg,val1!==val2&&(val1==val1||val2==val2)){isMatch=!1;break}if(isMatch)break}lru.push(lru.splice(i,1)[0])}(lru,lruPath):lru.push(lruPath),lru.length>limit&&function removeCachedResult(removedLru){var tmp,i,removedLruLen=removedLru.length,currentLru=removedLru[removedLruLen-1];for(currentLru.cacheItem.delete(currentLru.arg),i=removedLruLen-2;i>=0&&(currentLru=removedLru[i],!(tmp=currentLru.cacheItem.get(currentLru.arg))||!tmp.size);i--)currentLru.cacheItem.delete(currentLru.arg)}(lru.shift())),memoizerific.wasMemoized=isMemoized,memoizerific.numArgs=argsLengthMinusOne+1,fnResult};return memoizerific.limit=limit,memoizerific.wasMemoized=!1,memoizerific.cache=cache,memoizerific.lru=lru,memoizerific}}},{"map-or-similar":1}]},{},[3])(3)},function(module,exports,__webpack_require__){var redefine=__webpack_require__(48);module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(67),call=__webpack_require__(221),isArrayIter=__webpack_require__(222),anObject=__webpack_require__(33),toLength=__webpack_require__(68),getIterFn=__webpack_require__(223),BREAK={},RETURN={};(exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if((result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]))===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if((result=call(iterator,f,step.value,entries))===BREAK||result===RETURN)return result}).BREAK=BREAK,exports.RETURN=RETURN},function(module,exports,__webpack_require__){var $export=__webpack_require__(23);$export($export.S+$export.F*!__webpack_require__(37),"Object",{defineProperties:__webpack_require__(216)})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39),meta=__webpack_require__(120).onFreeze;__webpack_require__(227)("freeze",function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),$indexOf=__webpack_require__(215)(!1),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!__webpack_require__(88)($native)),"Array",{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}})},function(module,exports,__webpack_require__){"use strict";var re1,re2,regexpFlags=__webpack_require__(170),nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,UPDATES_LAST_INDEX_WRONG=(re1=/a/,re2=/b*/g,nativeExec.call(re1,"a"),nativeExec.call(re2,"a"),0!==re1.lastIndex||0!==re2.lastIndex),NPCG_INCLUDED=void 0!==/()??/.exec("")[1];(UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED)&&(patchedExec=function exec(str){var lastIndex,reCopy,match,i,re=this;return NPCG_INCLUDED&&(reCopy=new RegExp("^"+re.source+"$(?!\\s)",regexpFlags.call(re))),UPDATES_LAST_INDEX_WRONG&&(lastIndex=re.lastIndex),match=nativeExec.call(re,str),UPDATES_LAST_INDEX_WRONG&&match&&(re.lastIndex=re.global?match.index+match[0].length:lastIndex),NPCG_INCLUDED&&match&&match.length>1&&nativeReplace.call(match[0],reCopy,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match}),module.exports=patchedExec},function(module,exports,__webpack_require__){"use strict";var at=__webpack_require__(220)(!0);module.exports=function(S,index,unicode){return index+(unicode?at(S,index).length:1)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function action(name){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},actionOptions=Object.assign({},options);return function action(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var channel=_addons.default.getChannel(),id=(0,_v.default)();channel.emit(_constants.EVENT_ID,{id:id,data:{name:name,args:args},options:actionOptions})}},__webpack_require__(80);var _v=_interopRequireDefault(__webpack_require__(448)),_addons=_interopRequireDefault(__webpack_require__(112)),_constants=__webpack_require__(249);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function actions(){for(var options={},_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var names=args;1!==names.length&&"string"!=typeof args[args.length-1]&&(options=names.pop());var namesObject=names[0];1===names.length&&"string"!=typeof namesObject||(namesObject={},names.forEach(function(name){namesObject[name]=name}));var actionsObject={};return Object.keys(namesObject).forEach(function(name){actionsObject[name]=(0,_action.default)(namesObject[name],options)}),actionsObject},__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(111),__webpack_require__(110),__webpack_require__(89);var _action=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(184))},function(module,exports,__webpack_require__){var Map=__webpack_require__(93)(__webpack_require__(57),"Map");module.exports=Map},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_templateObject=function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["",""],["",""]);var TemplateTag_TemplateTag=function(){function TemplateTag(){for(var _this=this,_len=arguments.length,transformers=Array(_len),_key=0;_key<_len;_key++)transformers[_key]=arguments[_key];return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TemplateTag),this.tag=function(strings){for(var _len2=arguments.length,expressions=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)expressions[_key2-1]=arguments[_key2];return"function"==typeof strings?_this.interimTag.bind(_this,strings):"string"==typeof strings?_this.transformEndResult(strings):(strings=strings.map(_this.transformString.bind(_this)),_this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this,expressions))))},transformers.length>0&&Array.isArray(transformers[0])&&(transformers=transformers[0]),this.transformers=transformers.map(function(transformer){return"function"==typeof transformer?transformer():transformer}),this.tag}return _createClass(TemplateTag,[{key:"interimTag",value:function interimTag(previousTag,template){for(var _len3=arguments.length,substitutions=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)substitutions[_key3-2]=arguments[_key3];return this.tag(_templateObject,previousTag.apply(void 0,[template].concat(substitutions)))}},{key:"processSubstitutions",value:function processSubstitutions(substitutions,resultSoFar,remainingPart){var substitution=this.transformSubstitution(substitutions.shift(),resultSoFar);return"".concat(resultSoFar,substitution,remainingPart)}},{key:"transformString",value:function transformString(str){return this.transformers.reduce(function cb(res,transform){return transform.onString?transform.onString(res):res},str)}},{key:"transformSubstitution",value:function transformSubstitution(substitution,resultSoFar){return this.transformers.reduce(function cb(res,transform){return transform.onSubstitution?transform.onSubstitution(res,resultSoFar):res},substitution)}},{key:"transformEndResult",value:function transformEndResult(endResult){return this.transformers.reduce(function cb(res,transform){return transform.onEndResult?transform.onEndResult(res):res},endResult)}}]),TemplateTag}(),trimResultTransformer_trimResultTransformer=function trimResultTransformer(){var side=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function onEndResult(endResult){if(""===side)return endResult.trim();if("start"===(side=side.toLowerCase())||"left"===side)return endResult.replace(/^\s*/,"");if("end"===side||"right"===side)return endResult.replace(/\s*$/,"");throw new Error("Side not supported: "+side)}}};var stripIndentTransformer_stripIndentTransformer=function stripIndentTransformer(){var type=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function onEndResult(endResult){if("initial"===type){var match=endResult.match(/^[^\S\n]*(?=\S)/gm),indent=match&&Math.min.apply(Math,function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(match.map(function(el){return el.length})));if(indent){var regexp=new RegExp("^.{"+indent+"}","gm");return endResult.replace(regexp,"")}return endResult}if("all"===type)return endResult.replace(/^[^\S\n]+/gm,"");throw new Error("Unknown type: "+type)}}},replaceResultTransformer_replaceResultTransformer=function replaceResultTransformer(replaceWhat,replaceWith){return{onEndResult:function onEndResult(endResult){if(null==replaceWhat||null==replaceWith)throw new Error("replaceResultTransformer requires at least 2 arguments.");return endResult.replace(replaceWhat,replaceWith)}}},replaceSubstitutionTransformer_replaceSubstitutionTransformer=function replaceSubstitutionTransformer(replaceWhat,replaceWith){return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(null==replaceWhat||null==replaceWith)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==substitution?substitution:substitution.toString().replace(replaceWhat,replaceWith)}}},replaceStringTransformer_replaceStringTransformer=function replaceStringTransformer(replaceWhat,replaceWith){return{onString:function onString(str){if(null==replaceWhat||null==replaceWith)throw new Error("replaceStringTransformer requires at least 2 arguments.");return str.replace(replaceWhat,replaceWith)}}},defaults={separator:"",conjunction:"",serial:!1},inlineArrayTransformer_inlineArrayTransformer=function inlineArrayTransformer(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:defaults;return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(Array.isArray(substitution)){var arrayLength=substitution.length,separator=opts.separator,conjunction=opts.conjunction,serial=opts.serial,indent=resultSoFar.match(/(\n?[^\S\n]+)$/);if(substitution=indent?substitution.join(separator+indent[1]):substitution.join(separator+" "),conjunction&&arrayLength>1){var separatorIndex=substitution.lastIndexOf(separator);substitution=substitution.slice(0,separatorIndex)+(serial?separator:"")+" "+conjunction+substitution.slice(separatorIndex+1)}}return substitution}}},splitStringTransformer_splitStringTransformer=function splitStringTransformer(splitBy){return{onSubstitution:function onSubstitution(substitution,resultSoFar){if(null==splitBy||"string"!=typeof splitBy)throw new Error("You need to specify a string character to split by.");return"string"==typeof substitution&&substitution.includes(splitBy)&&(substitution=substitution.split(splitBy)),substitution}}},isValidValue=function isValidValue(x){return null!=x&&!Number.isNaN(x)&&"boolean"!=typeof x},removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer=function removeNonPrintingValuesTransformer(){return{onSubstitution:function onSubstitution(substitution){return Array.isArray(substitution)?substitution.filter(isValidValue):isValidValue(substitution)?substitution:""}}},commaLists_commaLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:","}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),commaListsAnd_commaListsAnd=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"and"}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),commaListsOr_commaListsOr=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"or"}),stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),html_html=new TemplateTag_TemplateTag(splitStringTransformer_splitStringTransformer("\n"),removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer,inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),safeHtml_safeHtml=new TemplateTag_TemplateTag(splitStringTransformer_splitStringTransformer("\n"),inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer,replaceSubstitutionTransformer_replaceSubstitutionTransformer(/&/g,"&amp;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/</g,"&lt;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/>/g,"&gt;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/"/g,"&quot;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/'/g,"&#x27;"),replaceSubstitutionTransformer_replaceSubstitutionTransformer(/`/g,"&#x60;")),oneLine_oneLine=new TemplateTag_TemplateTag(replaceResultTransformer_replaceResultTransformer(/(?:\n(?:\s*))+/g," "),trimResultTransformer_trimResultTransformer),oneLineTrim_oneLineTrim=new TemplateTag_TemplateTag(replaceResultTransformer_replaceResultTransformer(/(?:\n\s*)/g,""),trimResultTransformer_trimResultTransformer),oneLineCommaLists_oneLineCommaLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:","}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),oneLineCommaListsOr_oneLineCommaListsOr=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"or"}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),oneLineCommaListsAnd_oneLineCommaListsAnd=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer({separator:",",conjunction:"and"}),replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),inlineLists_inlineLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer,stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),oneLineInlineLists_oneLineInlineLists=new TemplateTag_TemplateTag(inlineArrayTransformer_inlineArrayTransformer,replaceResultTransformer_replaceResultTransformer(/(?:\s+)/g," "),trimResultTransformer_trimResultTransformer),stripIndent_stripIndent=new TemplateTag_TemplateTag(stripIndentTransformer_stripIndentTransformer,trimResultTransformer_trimResultTransformer),stripIndents_stripIndents=new TemplateTag_TemplateTag(stripIndentTransformer_stripIndentTransformer("all"),trimResultTransformer_trimResultTransformer);__webpack_require__.d(__webpack_exports__,"TemplateTag",function(){return TemplateTag_TemplateTag}),__webpack_require__.d(__webpack_exports__,"trimResultTransformer",function(){return trimResultTransformer_trimResultTransformer}),__webpack_require__.d(__webpack_exports__,"stripIndentTransformer",function(){return stripIndentTransformer_stripIndentTransformer}),__webpack_require__.d(__webpack_exports__,"replaceResultTransformer",function(){return replaceResultTransformer_replaceResultTransformer}),__webpack_require__.d(__webpack_exports__,"replaceSubstitutionTransformer",function(){return replaceSubstitutionTransformer_replaceSubstitutionTransformer}),__webpack_require__.d(__webpack_exports__,"replaceStringTransformer",function(){return replaceStringTransformer_replaceStringTransformer}),__webpack_require__.d(__webpack_exports__,"inlineArrayTransformer",function(){return inlineArrayTransformer_inlineArrayTransformer}),__webpack_require__.d(__webpack_exports__,"splitStringTransformer",function(){return splitStringTransformer_splitStringTransformer}),__webpack_require__.d(__webpack_exports__,"removeNonPrintingValuesTransformer",function(){return removeNonPrintingValuesTransformer_removeNonPrintingValuesTransformer}),__webpack_require__.d(__webpack_exports__,"commaLists",function(){return commaLists_commaLists}),__webpack_require__.d(__webpack_exports__,"commaListsAnd",function(){return commaListsAnd_commaListsAnd}),__webpack_require__.d(__webpack_exports__,"commaListsOr",function(){return commaListsOr_commaListsOr}),__webpack_require__.d(__webpack_exports__,"html",function(){return html_html}),__webpack_require__.d(__webpack_exports__,"codeBlock",function(){return html_html}),__webpack_require__.d(__webpack_exports__,"source",function(){return html_html}),__webpack_require__.d(__webpack_exports__,"safeHtml",function(){return safeHtml_safeHtml}),__webpack_require__.d(__webpack_exports__,"oneLine",function(){return oneLine_oneLine}),__webpack_require__.d(__webpack_exports__,"oneLineTrim",function(){return oneLineTrim_oneLineTrim}),__webpack_require__.d(__webpack_exports__,"oneLineCommaLists",function(){return oneLineCommaLists_oneLineCommaLists}),__webpack_require__.d(__webpack_exports__,"oneLineCommaListsOr",function(){return oneLineCommaListsOr_oneLineCommaListsOr}),__webpack_require__.d(__webpack_exports__,"oneLineCommaListsAnd",function(){return oneLineCommaListsAnd_oneLineCommaListsAnd}),__webpack_require__.d(__webpack_exports__,"inlineLists",function(){return inlineLists_inlineLists}),__webpack_require__.d(__webpack_exports__,"oneLineInlineLists",function(){return oneLineInlineLists_oneLineInlineLists}),__webpack_require__.d(__webpack_exports__,"stripIndent",function(){return stripIndent_stripIndent}),__webpack_require__.d(__webpack_exports__,"stripIndents",function(){return stripIndents_stripIndents})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function Map(){}function map(object,f){var map=new Map;if(object instanceof Map)object.each(function(value,key){map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}Map.prototype=map.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var src_map=map;function Set(){}var proto=src_map.prototype;function set(object,f){var set=new Set;if(object instanceof Set)object.each(function(value){set.add(value)});else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};var noop={value:function(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function dispatch_set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}})}(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=dispatch_set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=dispatch_set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var src_dispatch=dispatch,src_request=function(url,callback){var request,mimeType,response,responseType,event=src_dispatch("beforesend","progress","load","error"),headers=src_map(),xhr=new XMLHttpRequest,user=null,password=null,timeout=0;function respond(o){var result,status=xhr.status;if(!status&&function hasResponse(xhr){var type=xhr.responseType;return type&&"text"!==type?xhr.response:xhr.responseText}(xhr)||status>=200&&status<300||304===status){if(response)try{result=response.call(request,xhr)}catch(e){return void event.call("error",request,e)}else result=xhr;event.call("load",request,result)}else event.call("error",request,o)}if("undefined"==typeof XDomainRequest||"withCredentials"in xhr||!/^(http(s)?:)?\/\//.test(url)||(xhr=new XDomainRequest),"onload"in xhr?xhr.onload=xhr.onerror=xhr.ontimeout=respond:xhr.onreadystatechange=function(o){xhr.readyState>3&&respond(o)},xhr.onprogress=function(e){event.call("progress",request,e)},request={header:function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers.get(name):(null==value?headers.remove(name):headers.set(name,value+""),request)},mimeType:function(value){return arguments.length?(mimeType=null==value?null:value+"",request):mimeType},responseType:function(value){return arguments.length?(responseType=value,request):responseType},timeout:function(value){return arguments.length?(timeout=+value,request):timeout},user:function(value){return arguments.length<1?user:(user=null==value?null:value+"",request)},password:function(value){return arguments.length<1?password:(password=null==value?null:value+"",request)},response:function(value){return response=value,request},get:function(data,callback){return request.send("GET",data,callback)},post:function(data,callback){return request.send("POST",data,callback)},send:function(method,data,callback){return xhr.open(method,url,!0,user,password),null==mimeType||headers.has("accept")||headers.set("accept",mimeType+",*/*"),xhr.setRequestHeader&&headers.each(function(value,name){xhr.setRequestHeader(name,value)}),null!=mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(mimeType),null!=responseType&&(xhr.responseType=responseType),timeout>0&&(xhr.timeout=timeout),null==callback&&"function"==typeof data&&(callback=data,data=null),null!=callback&&1===callback.length&&(callback=function fixCallback(callback){return function(error,xhr){callback(null==error?xhr:null)}}(callback)),null!=callback&&request.on("error",callback).on("load",function(xhr){callback(null,xhr)}),event.call("beforesend",request,xhr),xhr.send(null==data?null:data),request},abort:function(){return xhr.abort(),request},on:function(){var value=event.on.apply(event,arguments);return value===event?request:value}},null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);return request.get(callback)}return request};var type=function(defaultMimeType,response){return function(url,callback){var r=src_request(url).mimeType(defaultMimeType).response(response);if(null!=callback){if("function"!=typeof callback)throw new Error("invalid callback: "+callback);return r.get(callback)}return r}},html=type("text/html",function(xhr){return document.createRange().createContextualFragment(xhr.responseText)}),json=type("application/json",function(xhr){return JSON.parse(xhr.responseText)}),src_text=type("text/plain",function(xhr){return xhr.responseText}),xml=type("application/xml",function(xhr){var xml=xhr.responseXML;if(!xml)throw new Error("parse error");return xml}),EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)}),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":function formatYear(year){return year<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4)}(date.getUTCFullYear())+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var dsv=function(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(text.charCodeAt(j)===QUOTE){for(;I++<N&&text.charCodeAt(I)!==QUOTE||text.charCodeAt(++I)===QUOTE;);return(i=I)>=N?eof=!0:(c=text.charCodeAt(I++))===NEWLINE?eol=!0:c===RETURN&&(eol=!0,text.charCodeAt(I)===NEWLINE&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if((c=text.charCodeAt(i=I++))===NEWLINE)eol=!0;else if(c===RETURN)eol=!0,text.charCodeAt(I)===NEWLINE&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(text.charCodeAt(N-1)===NEWLINE&&--N,text.charCodeAt(N-1)===RETURN&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function parse(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function customConverter(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)});return rows.columns=columns||[],rows},parseRows:parseRows,format:function format(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function formatBody(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function formatRows(rows){return rows.map(formatRow).join("\n")}}},csv=dsv(","),csvParse=csv.parse,tsv=(csv.parseRows,csv.format,csv.formatBody,csv.formatRows,dsv("\t")),tsvParse=tsv.parse;tsv.parseRows,tsv.format,tsv.formatBody,tsv.formatRows;var src_dsv=function(defaultMimeType,parse){return function(url,row,callback){arguments.length<3&&(callback=row,row=null);var r=src_request(url).mimeType(defaultMimeType);return r.row=function(_){return arguments.length?r.response(function responseOf(parse,row){return function(request){return parse(request.responseText,row)}}(parse,row=_)):row},r.row(row),callback?r.get(callback):r}};var src_csv=src_dsv("text/csv",csvParse),src_tsv=src_dsv("text/tab-separated-values",tsvParse);__webpack_require__.d(__webpack_exports__,"request",function(){return src_request}),__webpack_require__.d(__webpack_exports__,"html",function(){return html}),__webpack_require__.d(__webpack_exports__,"json",function(){return json}),__webpack_require__.d(__webpack_exports__,"text",function(){return src_text}),__webpack_require__.d(__webpack_exports__,"xml",function(){return xml}),__webpack_require__.d(__webpack_exports__,"csv",function(){return src_csv}),__webpack_require__.d(__webpack_exports__,"tsv",function(){return src_tsv})},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),createClass=__webpack_require__(2),inherits=__webpack_require__(5),assertThisInitialized=__webpack_require__(6),defineProperty=__webpack_require__(0),react=__webpack_require__(9),prop_types=__webpack_require__(7),prop_types_default=__webpack_require__.n(prop_types);function normalizeStyle(style){if(!style)return null;if("string"==typeof style)return style;style.toJS&&(style=style.toJS());var layerIndex=style.layers.reduce(function(accum,current){return Object.assign(accum,Object(defineProperty.a)({},current.id,current))},{});return style.layers=style.layers.map(function(layer){delete(layer=Object.assign({},layer)).interactive;var layerRef=layerIndex[layer.ref];return layerRef&&(delete layer.ref,void 0!==layerRef.type&&(layer.type=layerRef.type),void 0!==layerRef.source&&(layer.source=layerRef.source),void 0!==layerRef["source-layer"]&&(layer["source-layer"]=layerRef["source-layer"]),void 0!==layerRef.minzoom&&(layer.minzoom=layerRef.minzoom),void 0!==layerRef.maxzoom&&(layer.maxzoom=layerRef.maxzoom),void 0!==layerRef.filter&&(layer.filter=layerRef.filter),void 0!==layerRef.layout&&(layer.layout=layer.layout||{},layer.layout=Object.assign({},layer.layout,layerRef.layout))),layer}),style}var web_mercator_viewport=__webpack_require__(115),index_esm=__webpack_require__(267),mapbox=__webpack_require__(150),mapbox_gl=__webpack_require__(262),mapbox_gl_default=__webpack_require__.n(mapbox_gl),slicedToArray=__webpack_require__(11),normalize_viewport_props=__webpack_require__(538),EPSILON=1e-9;function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function equals(a,b){if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return Math.abs(a-b)<=EPSILON}function clamp(value,min,max){return Math.max(min,Math.min(max,value))}function lerp(a,b,t){return isArray(a)?a.map(function(ai,i){return lerp(ai,b[i],t)}):t*b+(1-t)*a}function assert(condition,message){if(!condition)throw new Error(message||"react-map-gl: assertion failed.")}var transition_interpolator_TransitionInterpolator=function(){function TransitionInterpolator(){Object(classCallCheck.a)(this,TransitionInterpolator),Object(defineProperty.a)(this,"propNames",[])}return Object(createClass.a)(TransitionInterpolator,[{key:"arePropsEqual",value:function arePropsEqual(currentProps,nextProps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=(this.propNames||[])[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(!equals(currentProps[key],nextProps[key]))return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0}},{key:"initializeProps",value:function initializeProps(startProps,endProps){return{start:startProps,end:endProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){assert(!1,"interpolateProps is not implemented")}}]),TransitionInterpolator}(),WRAPPED_ANGULAR_PROPS=(__webpack_require__(537),{longitude:1,bearing:1});function isValid(prop){return Number.isFinite(prop)||Array.isArray(prop)}function getEndValueByShortestPath(propName,startValue,endValue){return function isWrappedAngularProp(propName){return propName in WRAPPED_ANGULAR_PROPS}(propName)&&Math.abs(endValue-startValue)>180&&(endValue=endValue<0?endValue+360:endValue-360),endValue}var linear_interpolator_VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom","bearing","pitch"],linear_interpolator_LinearInterpolator=function(_TransitionInterpolat){function LinearInterpolator(){var _this,opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(classCallCheck.a)(this,LinearInterpolator),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(LinearInterpolator).call(this)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"around",void 0),Array.isArray(opts)&&(opts={transitionProps:opts}),_this.propNames=opts.transitionProps||linear_interpolator_VIEWPORT_TRANSITION_PROPS,opts.around&&(_this.around=opts.around),_this}return Object(inherits.a)(LinearInterpolator,_TransitionInterpolat),Object(createClass.a)(LinearInterpolator,[{key:"initializeProps",value:function initializeProps(startProps,endProps){var startViewportProps={},endViewportProps={};if(this.around){startViewportProps.around=this.around;var aroundLngLat=new web_mercator_viewport.a(startProps).unproject(this.around);Object.assign(endViewportProps,endProps,{around:new web_mercator_viewport.a(endProps).project(aroundLngLat),aroundLngLat:aroundLngLat})}var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,startValue=startProps[key],endValue=endProps[key];assert(isValid(startValue)&&isValid(endValue),"".concat(key," must be supplied for transition")),startViewportProps[key]=startValue,endViewportProps[key]=getEndValueByShortestPath(key,startValue,endValue)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{start:startViewportProps,end:endViewportProps}}},{key:"interpolateProps",value:function interpolateProps(startProps,endProps,t){var viewport={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.propNames[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;viewport[key]=lerp(startProps[key],endProps[key],t)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}if(endProps.around){var _getMapCenterByLngLat=new web_mercator_viewport.a(Object.assign({},endProps,viewport)).getMapCenterByLngLatPosition({lngLat:endProps.aroundLngLat,pos:lerp(startProps.around,endProps.around,t)}),_getMapCenterByLngLat2=Object(slicedToArray.a)(_getMapCenterByLngLat,2),longitude=_getMapCenterByLngLat2[0],latitude=_getMapCenterByLngLat2[1];viewport.longitude=longitude,viewport.latitude=latitude}return viewport}}]),LinearInterpolator}(transition_interpolator_TransitionInterpolator),MAPBOX_LIMITS={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},DEFAULT_STATE={pitch:0,bearing:0,altitude:1.5},map_state_MapState=function(){function MapState(_ref){var width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?DEFAULT_STATE.bearing:_ref$bearing,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?DEFAULT_STATE.pitch:_ref$pitch,_ref$altitude=_ref.altitude,altitude=void 0===_ref$altitude?DEFAULT_STATE.altitude:_ref$altitude,_ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom,_ref$minZoom=_ref.minZoom,minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom,_ref$maxPitch=_ref.maxPitch,maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch,_ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?MAPBOX_LIMITS.minPitch:_ref$minPitch,transitionDuration=_ref.transitionDuration,transitionEasing=_ref.transitionEasing,transitionInterpolator=_ref.transitionInterpolator,transitionInterruption=_ref.transitionInterruption,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoom=_ref.startZoom;Object(classCallCheck.a)(this,MapState),Object(defineProperty.a)(this,"_viewportProps",void 0),Object(defineProperty.a)(this,"_interactiveState",void 0),assert(Number.isFinite(width),"`width` must be supplied"),assert(Number.isFinite(height),"`height` must be supplied"),assert(Number.isFinite(longitude),"`longitude` must be supplied"),assert(Number.isFinite(latitude),"`latitude` must be supplied"),assert(Number.isFinite(zoom),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch,transitionDuration:transitionDuration,transitionEasing:transitionEasing,transitionInterpolator:transitionInterpolator,transitionInterruption:transitionInterruption}),this._interactiveState={startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom}}return Object(createClass.a)(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(_ref2){var pos=_ref2.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(pos)})}},{key:"pan",value:function pan(_ref3){var pos=_ref3.pos,startPos=_ref3.startPos,startPanLngLat=this._interactiveState.startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;var _this$_calculateNewLn=this._calculateNewLngLat({startPanLngLat:startPanLngLat,pos:pos}),_this$_calculateNewLn2=Object(slicedToArray.a)(_this$_calculateNewLn,2),longitude=_this$_calculateNewLn2[0],latitude=_this$_calculateNewLn2[1];return this._getUpdatedMapState({longitude:longitude,latitude:latitude})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(_ref4){_ref4.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(_ref5){var _ref5$deltaScaleX=_ref5.deltaScaleX,deltaScaleX=void 0===_ref5$deltaScaleX?0:_ref5$deltaScaleX,_ref5$deltaScaleY=_ref5.deltaScaleY,deltaScaleY=void 0===_ref5$deltaScaleY?0:_ref5$deltaScaleY,_this$_interactiveSta=this._interactiveState,startBearing=_this$_interactiveSta.startBearing,startPitch=_this$_interactiveSta.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(startPitch))return this;var _this$_calculateNewPi=this._calculateNewPitchAndBearing({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY,startBearing:startBearing||0,startPitch:startPitch||0}),pitch=_this$_calculateNewPi.pitch,bearing=_this$_calculateNewPi.bearing;return this._getUpdatedMapState({bearing:bearing,pitch:pitch})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(_ref6){var pos=_ref6.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale;assert(scale>0,"`scale` must be a positive number");var _this$_interactiveSta2=this._interactiveState,startZoom=_this$_interactiveSta2.startZoom,startZoomLngLat=_this$_interactiveSta2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),assert(startZoomLngLat,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:scale,startZoom:startZoom||0}),_zoomedViewport$getMa=new web_mercator_viewport.a(Object.assign({},this._viewportProps,{zoom:zoom})).getMapCenterByLngLatPosition({lngLat:startZoomLngLat,pos:pos}),_zoomedViewport$getMa2=Object(slicedToArray.a)(_zoomedViewport$getMa,2),longitude=_zoomedViewport$getMa2[0],latitude=_zoomedViewport$getMa2[1];return this._getUpdatedMapState({zoom:zoom,longitude:longitude,latitude:latitude})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function _getUpdatedMapState(newProps){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,newProps))}},{key:"_applyConstraints",value:function _applyConstraints(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=clamp(zoom,minZoom,maxZoom);var maxPitch=props.maxPitch,minPitch=props.minPitch,pitch=props.pitch;return props.pitch=clamp(pitch,minPitch,maxPitch),Object.assign(props,Object(normalize_viewport_props.a)(props)),props}},{key:"_unproject",value:function _unproject(pos){var viewport=new web_mercator_viewport.a(this._viewportProps);return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(_ref8){var startPanLngLat=_ref8.startPanLngLat,pos=_ref8.pos;return new web_mercator_viewport.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:pos})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(_ref9){var scale=_ref9.scale,startZoom=_ref9.startZoom,_this$_viewportProps=this._viewportProps,maxZoom=_this$_viewportProps.maxZoom,minZoom=_this$_viewportProps.minZoom;return clamp(startZoom+Math.log2(scale),minZoom,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing,startPitch=_ref10.startPitch;deltaScaleY=clamp(deltaScaleY,-1,1);var _this$_viewportProps2=this._viewportProps,minPitch=_this$_viewportProps2.minPitch,maxPitch=_this$_viewportProps2.maxPitch,pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}]),MapState}();var map_context=Object(react.createContext)({viewport:null,map:null,mapContainer:null,eventManager:null,isDragging:!1}),NO_TOKEN_WARNING="A valid API access token is required to use Mapbox data";var UNAUTHORIZED_ERROR_CODE=401,CONTAINER_STYLE={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},propTypes=Object.assign({},mapbox.a.propTypes,{width:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),height:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),onResize:prop_types_default.a.func,preventStyleDiffing:prop_types_default.a.bool,disableTokenWarning:prop_types_default.a.bool,visible:prop_types_default.a.bool,className:prop_types_default.a.string,style:prop_types_default.a.object,visibilityConstraints:prop_types_default.a.object}),defaultProps=Object.assign({},mapbox.a.defaultProps,{preventStyleDiffing:!1,disableTokenWarning:!1,visible:!0,onResize:function noop(){},className:"",style:null,visibilityConstraints:MAPBOX_LIMITS}),static_map_StaticMap=function(_PureComponent){function StaticMap(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,StaticMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(StaticMap)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"state",{accessTokenInvalid:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_mapbox",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_map",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_mapboxMapRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_mapContainerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_queryParams",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_width",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_height",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"getMap",function(){return _this._map}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"queryRenderedFeatures",function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _this._map.queryRenderedFeatures(geometry,options)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_mapboxMapError",function(evt){(evt.error&&evt.error.status||evt.status)!==UNAUTHORIZED_ERROR_CODE||_this.state.accessTokenInvalid||(console.error(NO_TOKEN_WARNING),_this.setState({accessTokenInvalid:!0})),_this.props.onError(evt)}),_this}return Object(inherits.a)(StaticMap,_PureComponent),Object(createClass.a)(StaticMap,[{key:"componentDidMount",value:function componentDidMount(){if(StaticMap.supported()){var mapStyle=this.props.mapStyle;this._mapbox=new mapbox.a(Object.assign({},this.props,{mapboxgl:mapbox_gl_default.a,width:this._width,height:this._height,container:this._mapboxMapRef.current,onError:this._mapboxMapError,mapStyle:normalizeStyle(mapStyle)})),this._map=this._mapbox.getMap()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this._mapbox&&(this._updateMapStyle(prevProps,this.props),this._updateMapProps(this.props))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._mapbox&&(this._mapbox.finalize(),this._mapbox=null,this._map=null)}},{key:"_updateMapSize",value:function _updateMapSize(width,height){this._width===width&&this._height===height||(this._width=width,this._height=height,this._updateMapProps(this.props))}},{key:"_updateMapStyle",value:function _updateMapStyle(oldProps,newProps){var mapStyle=newProps.mapStyle;mapStyle!==oldProps.mapStyle&&this._map.setStyle(normalizeStyle(mapStyle),{diff:!this.props.preventStyleDiffing})}},{key:"_updateMapProps",value:function _updateMapProps(props){this._mapbox&&this._mapbox.setProps(Object.assign({},props,{width:this._width,height:this._height}))}},{key:"_renderNoTokenWarning",value:function _renderNoTokenWarning(){if(this.state.accessTokenInvalid&&!this.props.disableTokenWarning){return Object(react.createElement)("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},[Object(react.createElement)("h3",{key:"header"},NO_TOKEN_WARNING),Object(react.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),Object(react.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")])}return null}},{key:"_renderOverlays",value:function _renderOverlays(dimensions){var _this2=this,_dimensions$width=dimensions.width,width=void 0===_dimensions$width?Number(this.props.width):_dimensions$width,_dimensions$height=dimensions.height,height=void 0===_dimensions$height?Number(this.props.height):_dimensions$height;return this._updateMapSize(width,height),Object(react.createElement)(map_context.Consumer,null,function(interactiveContext){var context=Object.assign({},interactiveContext,{viewport:new web_mercator_viewport.a(Object.assign({},_this2.props,_this2.props.viewState,{width:width,height:height})),map:_this2._map,mapContainer:interactiveContext.mapContainer||_this2._mapContainerRef.current});return Object(react.createElement)(map_context.Provider,{value:context},Object(react.createElement)("div",{key:"map-overlays",className:"overlays",style:CONTAINER_STYLE,children:_this2.props.children}))})}},{key:"render",value:function render(){var _this$props=this.props,className=_this$props.className,width=_this$props.width,height=_this$props.height,style=_this$props.style,visibilityConstraints=_this$props.visibilityConstraints,mapContainerStyle=Object.assign({position:"relative"},style,{width:width,height:height}),visible=this.props.visible&&function checkVisibilityConstraints(props){var s,constraints=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MAPBOX_LIMITS;for(var constraintName in constraints){var type=constraintName.slice(0,3),propName=(s=constraintName.slice(3))[0].toLowerCase()+s.slice(1);if("min"===type&&props[propName]<constraints[constraintName])return!1;if("max"===type&&props[propName]>constraints[constraintName])return!1}return!0}(this.props.viewState||this.props,visibilityConstraints),mapStyle=Object.assign({},CONTAINER_STYLE,{visibility:visible?"inherit":"hidden"});return Object(react.createElement)("div",{key:"map-container",style:mapContainerStyle,ref:this._mapContainerRef,children:[Object(react.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapRef,style:mapStyle,className:className}),Object(react.createElement)(index_esm.a,{key:"autosizer",disableWidth:Number.isFinite(width),disableHeight:Number.isFinite(height),onResize:this.props.onResize},this._renderOverlays.bind(this)),this._renderNoTokenWarning()]})}}],[{key:"supported",value:function supported(){return mapbox_gl_default.a&&mapbox_gl_default.a.supported()}}]),StaticMap}(react.PureComponent);Object(defineProperty.a)(static_map_StaticMap,"propTypes",propTypes),Object(defineProperty.a)(static_map_StaticMap,"defaultProps",defaultProps);var transition_manager_noop=function noop(){};var TRANSITION_EVENTS_BREAK=1,TRANSITION_EVENTS_SNAP_TO_END=2,TRANSITION_EVENTS_IGNORE=3,TRANSITION_EVENTS_UPDATE=4,DEFAULT_PROPS={transitionDuration:0,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS_BREAK,onTransitionStart:transition_manager_noop,onTransitionInterrupt:transition_manager_noop,onTransitionEnd:transition_manager_noop,onViewportChange:transition_manager_noop,onStateChange:transition_manager_noop},transition_manager_TransitionManager=function(){function TransitionManager(props){var _this=this;Object(classCallCheck.a)(this,TransitionManager),Object(defineProperty.a)(this,"props",void 0),Object(defineProperty.a)(this,"state",void 0),Object(defineProperty.a)(this,"_animationFrame",null),Object(defineProperty.a)(this,"_onTransitionFrame",function(){_this._animationFrame=requestAnimationFrame(_this._onTransitionFrame),_this._updateViewport()}),props&&(this.props=props)}return Object(createClass.a)(TransitionManager,[{key:"getViewportInTransition",value:function getViewportInTransition(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function processViewportChange(nextProps){var currentProps=this.props;if(this.props=nextProps,this._shouldIgnoreViewportChange(currentProps,nextProps))return!1;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps),endProps=Object.assign({},nextProps);if(this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this.state.interruption===TRANSITION_EVENTS_SNAP_TO_END?Object.assign(startProps,this.state.endProps):Object.assign(startProps,this.state.propsInTransition),this.state.interruption===TRANSITION_EVENTS_UPDATE)){var currentTime=Date.now(),x0=(currentTime-this.state.startTime)/this.state.duration;endProps.transitionDuration=this.state.duration-(currentTime-this.state.startTime),endProps.transitionEasing=function cropEasingFunction(easing,x0){var y0=easing(x0);return function(t){return 1/(1-y0)*(easing(t*(1-x0)+x0)-y0)}}(this.state.easing,x0),endProps.transitionInterpolator=startProps.transitionInterpolator}return endProps.onTransitionStart(),this._triggerTransition(startProps,endProps),!0}return this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function _isTransitionInProgress(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(props){return props.transitionDuration>0&&Boolean(props.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(props){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(props,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(currentProps,nextProps){return!currentProps||(this._isTransitionInProgress()?this.state.interruption===TRANSITION_EVENTS_IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps))}},{key:"_triggerTransition",value:function _triggerTransition(startProps,endProps){assert(this._isTransitionEnabled(endProps),"Transition is not enabled"),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var initialProps=endProps.transitionInterpolator.initializeProps(startProps,endProps),interactionState={inTransition:!0,isZooming:startProps.zoom!==endProps.zoom,isPanning:startProps.longitude!==endProps.longitude||startProps.latitude!==endProps.latitude,isRotating:startProps.bearing!==endProps.bearing||startProps.pitch!==endProps.pitch};this.state={duration:endProps.transitionDuration,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startTime:Date.now(),startProps:initialProps.start,endProps:initialProps.end,animation:null,propsInTransition:{},interactionState:interactionState},this._onTransitionFrame(),this.props.onStateChange(interactionState)}},{key:"_endTransition",value:function _endTransition(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.props.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function _updateViewport(){var currentTime=Date.now(),_this$state=this.state,startTime=_this$state.startTime,duration=_this$state.duration,easing=_this$state.easing,interpolator=_this$state.interpolator,startProps=_this$state.startProps,endProps=_this$state.endProps,shouldEnd=!1,t=(currentTime-startTime)/duration;t>=1&&(t=1,shouldEnd=!0),t=easing(t);var viewport=interpolator.interpolateProps(startProps,endProps,t),mapState=new map_state_MapState(Object.assign({},this.props,viewport));this.state.propsInTransition=mapState.getViewportProps(),this.props.onViewportChange(this.state.propsInTransition,this.state.interactionState,this.props),shouldEnd&&(this._endTransition(),this.props.onTransitionEnd())}}]),TransitionManager}();Object(defineProperty.a)(transition_manager_TransitionManager,"defaultProps",DEFAULT_PROPS);var esm=__webpack_require__(147),NO_TRANSITION_PROPS={transitionDuration:0},LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function transitionEasing(t){return t},transitionInterpolator:new linear_interpolator_LinearInterpolator,transitionInterruption:TRANSITION_EVENTS_BREAK},EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],map_controller_MapController=function(){function MapController(){var _this=this;Object(classCallCheck.a)(this,MapController),Object(defineProperty.a)(this,"events",[]),Object(defineProperty.a)(this,"mapState",void 0),Object(defineProperty.a)(this,"onViewportChange",void 0),Object(defineProperty.a)(this,"onStateChange",void 0),Object(defineProperty.a)(this,"mapStateProps",void 0),Object(defineProperty.a)(this,"eventManager",void 0),Object(defineProperty.a)(this,"scrollZoom",!0),Object(defineProperty.a)(this,"dragPan",!0),Object(defineProperty.a)(this,"dragRotate",!0),Object(defineProperty.a)(this,"doubleClickZoom",!0),Object(defineProperty.a)(this,"touchZoom",!0),Object(defineProperty.a)(this,"touchRotate",!1),Object(defineProperty.a)(this,"keyboard",!0),Object(defineProperty.a)(this,"_state",{isDragging:!1}),Object(defineProperty.a)(this,"_events",{}),Object(defineProperty.a)(this,"_transitionManager",new transition_manager_TransitionManager),Object(defineProperty.a)(this,"setState",function(newState){Object.assign(_this._state,newState),_this.onStateChange&&_this.onStateChange(_this._state)}),this.handleEvent=this.handleEvent.bind(this)}return Object(createClass.a)(MapController,[{key:"handleEvent",value:function handleEvent(event){switch(this.mapState=this.getMapState(),event.type){case"panstart":return this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}},{key:"getCenter",value:function getCenter(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(event){var srcEvent=event.srcEvent;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}},{key:"updateViewport",value:function updateViewport(newMapState){var extraProps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},extraState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},oldViewport=this.mapState?this.mapState.getViewportProps():{},newViewport=Object.assign({},newMapState.getViewportProps(),extraProps);Object.keys(newViewport).some(function(key){return oldViewport[key]!==newViewport[key]})&&this.onViewportChange(newViewport,extraState,oldViewport),this.setState(Object.assign({},newMapState.getInteractiveState(),extraState))}},{key:"getMapState",value:function getMapState(overrides){return new map_state_MapState(Object.assign({},this.mapStateProps,this._state,overrides))}},{key:"setOptions",value:function setOptions(options){var onViewportChange=options.onViewportChange,onStateChange=options.onStateChange,_options$eventManager=options.eventManager,eventManager=void 0===_options$eventManager?this.eventManager:_options$eventManager,_options$isInteractiv=options.isInteractive,isInteractive=void 0===_options$isInteractiv||_options$isInteractiv,_options$scrollZoom=options.scrollZoom,scrollZoom=void 0===_options$scrollZoom?this.scrollZoom:_options$scrollZoom,_options$dragPan=options.dragPan,dragPan=void 0===_options$dragPan?this.dragPan:_options$dragPan,_options$dragRotate=options.dragRotate,dragRotate=void 0===_options$dragRotate?this.dragRotate:_options$dragRotate,_options$doubleClickZ=options.doubleClickZoom,doubleClickZoom=void 0===_options$doubleClickZ?this.doubleClickZoom:_options$doubleClickZ,_options$touchZoom=options.touchZoom,touchZoom=void 0===_options$touchZoom?this.touchZoom:_options$touchZoom,_options$touchRotate=options.touchRotate,touchRotate=void 0===_options$touchRotate?this.touchRotate:_options$touchRotate,_options$keyboard=options.keyboard,keyboard=void 0===_options$keyboard?this.keyboard:_options$keyboard;this.onViewportChange=onViewportChange,this.onStateChange=onStateChange,this.mapStateProps&&this.mapStateProps.height===options.height||this.updateViewport(new map_state_MapState(options)),this.mapStateProps=options,this._transitionManager.processViewportChange(Object.assign({},options,{onStateChange:this.setState})),this.eventManager!==eventManager&&(this.eventManager=eventManager,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive&&(dragPan||dragRotate)),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}},{key:"toggleEvents",value:function toggleEvents(eventNames,enabled){var _this2=this;this.eventManager&&eventNames.forEach(function(eventName){_this2._events[eventName]!==enabled&&(_this2._events[eventName]=enabled,enabled?_this2.eventManager.on(eventName,_this2.handleEvent):_this2.eventManager.off(eventName,_this2.handleEvent))})}},{key:"_onPanStart",value:function _onPanStart(event){var pos=this.getCenter(event),newMapState=this.mapState.panStart({pos:pos}).rotateStart({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPan",value:function _onPan(event){return this.isFunctionKeyPressed(event)||event.rightButton?this._onPanRotate(event):this._onPanMove(event)}},{key:"_onPanEnd",value:function _onPanEnd(event){var newMapState=this.mapState.panEnd().rotateEnd();return this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function _onPanMove(event){if(!this.dragPan)return!1;var pos=this.getCenter(event),newMapState=this.mapState.pan({pos:pos});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isPanning:!0}),!0}},{key:"_onPanRotate",value:function _onPanRotate(event){if(!this.dragRotate)return!1;var deltaX=event.deltaX,deltaY=event.deltaY,_this$getCenter=this.getCenter(event),centerY=Object(slicedToArray.a)(_this$getCenter,2)[1],startY=centerY-deltaY,_this$mapState$getVie=this.mapState.getViewportProps(),width=_this$mapState$getVie.width,height=_this$mapState$getVie.height,deltaScaleX=deltaX/width,deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));var newMapState=this.mapState.rotate({deltaScaleX:deltaScaleX,deltaScaleY:deltaScaleY});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isRotating:!0}),!0}},{key:"_onWheel",value:function _onWheel(event){if(!this.scrollZoom)return!1;event.preventDefault();var pos=this.getCenter(event),delta=event.delta,scale=2/(1+Math.exp(-Math.abs(.01*delta)));delta<0&&0!==scale&&(scale=1/scale);var newMapState=this.mapState.zoom({pos:pos,scale:scale});return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isZooming:!0}),this.setState({isZooming:!1}),!0}},{key:"_onPinchStart",value:function _onPinchStart(event){var pos=this.getCenter(event),newMapState=this.mapState.zoomStart({pos:pos}).rotateStart({pos:pos});return this._state.startPinchRotation=event.rotation,this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}},{key:"_onPinch",value:function _onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;var newMapState=this.mapState;if(this.touchZoom){var scale=event.scale,pos=this.getCenter(event);newMapState=newMapState.zoom({pos:pos,scale:scale})}if(this.touchRotate){var rotation=event.rotation,startPinchRotation=this._state.startPinchRotation;newMapState=newMapState.rotate({deltaScaleX:-(rotation-startPinchRotation)/180})}return this.updateViewport(newMapState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function _onPinchEnd(event){var newMapState=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(newMapState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function _onDoubleTap(event){if(!this.doubleClickZoom)return!1;var pos=this.getCenter(event),isZoomOut=this.isFunctionKeyPressed(event),newMapState=this.mapState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newMapState,Object.assign({},LINEAR_TRANSITION_PROPS,{transitionInterpolator:new linear_interpolator_LinearInterpolator({around:pos})})),!0}},{key:"_onKeyDown",value:function _onKeyDown(event){if(!this.keyboard)return!1;var newMapState,funcKey=this.isFunctionKeyPressed(event),mapStateProps=this.mapStateProps;switch(event.srcEvent.keyCode){case 189:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom-2}):this.getMapState({zoom:mapStateProps.zoom-1});break;case 187:newMapState=funcKey?this.getMapState({zoom:mapStateProps.zoom+2}):this.getMapState({zoom:mapStateProps.zoom+1});break;case 37:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:newMapState=funcKey?this.getMapState({bearing:mapStateProps.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:newMapState=funcKey?this.getMapState({pitch:mapStateProps.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(newMapState,LINEAR_TRANSITION_PROPS)}}]),MapController}(),DEPRECATED_PROPS=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"},{old:"mapControls",new:"controller"}];function checkDeprecatedProps(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};DEPRECATED_PROPS.forEach(function(depProp){if(props.hasOwnProperty(depProp.old)){var warnMessage=function getDeprecatedText(name){return"react-map-gl: `".concat(name,"` is removed.")}(depProp.old);depProp.new&&(warnMessage="".concat(warnMessage," ").concat(function getNewText(name){return"Use `".concat(name,"` instead.")}(depProp.new))),console.warn(warnMessage)}})}var interactive_map_propTypes=Object.assign({},static_map_StaticMap.propTypes,{maxZoom:prop_types_default.a.number,minZoom:prop_types_default.a.number,maxPitch:prop_types_default.a.number,minPitch:prop_types_default.a.number,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,onInteractionStateChange:prop_types_default.a.func,transitionDuration:prop_types_default.a.number,transitionInterpolator:prop_types_default.a.object,transitionInterruption:prop_types_default.a.number,transitionEasing:prop_types_default.a.func,onTransitionStart:prop_types_default.a.func,onTransitionInterrupt:prop_types_default.a.func,onTransitionEnd:prop_types_default.a.func,scrollZoom:prop_types_default.a.bool,dragPan:prop_types_default.a.bool,dragRotate:prop_types_default.a.bool,doubleClickZoom:prop_types_default.a.bool,touchZoom:prop_types_default.a.bool,touchRotate:prop_types_default.a.bool,keyboard:prop_types_default.a.bool,onHover:prop_types_default.a.func,onClick:prop_types_default.a.func,onDblClick:prop_types_default.a.func,onContextMenu:prop_types_default.a.func,onMouseDown:prop_types_default.a.func,onMouseMove:prop_types_default.a.func,onMouseUp:prop_types_default.a.func,onTouchStart:prop_types_default.a.func,onTouchMove:prop_types_default.a.func,onTouchEnd:prop_types_default.a.func,onMouseEnter:prop_types_default.a.func,onMouseLeave:prop_types_default.a.func,onMouseOut:prop_types_default.a.func,onWheel:prop_types_default.a.func,touchAction:prop_types_default.a.string,clickRadius:prop_types_default.a.number,interactiveLayerIds:prop_types_default.a.array,getCursor:prop_types_default.a.func,controller:prop_types_default.a.instanceOf(map_controller_MapController)}),interactive_map_defaultProps=Object.assign({},static_map_StaticMap.defaultProps,MAPBOX_LIMITS,transition_manager_TransitionManager.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function onContextMenu(event){return event.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",clickRadius:0,getCursor:function getDefaultCursor(_ref){var isDragging=_ref.isDragging,isHovering=_ref.isHovering;return isDragging?"grabbing":isHovering?"pointer":"grab"}}),interactive_map_InteractiveMap=function(_PureComponent){function InteractiveMap(props){var _this;return Object(classCallCheck.a)(this,InteractiveMap),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(InteractiveMap).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"state",{isLoaded:!1,isDragging:!1,isHovering:!1}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_controller",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_eventManager",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_interactiveContext",void 0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_width",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_height",0),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_eventCanvasRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_staticMapRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"getMap",function(){return _this._staticMapRef.current?_this._staticMapRef.current.getMap():null}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"queryRenderedFeatures",function(geometry){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},map=_this.getMap();return map&&map.queryRenderedFeatures(geometry,options)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onInteractionStateChange",function(interactionState){var _interactionState$isD=interactionState.isDragging,isDragging=void 0!==_interactionState$isD&&_interactionState$isD;isDragging!==_this.state.isDragging&&_this.setState({isDragging:isDragging});var onInteractionStateChange=_this.props.onInteractionStateChange;onInteractionStateChange&&onInteractionStateChange(interactionState)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onResize",function(_ref2){var width=_ref2.width,height=_ref2.height;_this._width=width,_this._height=height,_this._setControllerProps(_this.props),_this.props.onResize({width:width,height:height})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onViewportChange",function(viewState,interactionState,oldViewState){var _this$props=_this.props,onViewStateChange=_this$props.onViewStateChange,onViewportChange=_this$props.onViewportChange;onViewStateChange&&onViewStateChange({viewState:viewState,interactionState:interactionState,oldViewState:oldViewState}),onViewportChange&&onViewportChange(viewState,interactionState,oldViewState)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onLoad",function(event){_this.setState({isLoaded:!0}),_this.props.onLoad(event)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onEvent",function(callbackName,event){var func=_this.props[callbackName];func&&func(_this._normalizeEvent(event))}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onPointerDown",function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchStart",event);break;default:_this._onEvent("onMouseDown",event)}}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onPointerUp",function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchEnd",event);break;default:_this._onEvent("onMouseUp",event)}}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onPointerMove",function(event){switch(event.pointerType){case"touch":_this._onEvent("onTouchMove",event);break;default:_this._onEvent("onMouseMove",event)}if(!_this.state.isDragging){var features,_this$props2=_this.props,onHover=_this$props2.onHover,interactiveLayerIds=_this$props2.interactiveLayerIds;event=_this._normalizeEvent(event),_this.state.isLoaded&&(interactiveLayerIds||onHover)&&(features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius})),onHover&&(event.features=features,onHover(event));var isHovering=Boolean(interactiveLayerIds&&features&&features.length>0),isEntering=isHovering&&!_this.state.isHovering,isExiting=!isHovering&&_this.state.isHovering;isEntering&&_this._onEvent("onMouseEnter",event),isExiting&&_this._onEvent("onMouseLeave",event),(isEntering||isExiting)&&_this.setState({isHovering:isHovering})}}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onClick",function(event){var _this$props3=_this.props,onClick=_this$props3.onClick,onNativeClick=_this$props3.onNativeClick,onDblClick=_this$props3.onDblClick,doubleClickZoom=_this$props3.doubleClickZoom,callbacks=[],isDoubleClickEnabled=onDblClick||doubleClickZoom;switch(event.type){case"anyclick":callbacks.push(onNativeClick),isDoubleClickEnabled||callbacks.push(onClick);break;case"click":isDoubleClickEnabled&&callbacks.push(onClick)}(callbacks=callbacks.filter(Boolean)).length&&((event=_this._normalizeEvent(event)).features=_this._getFeatures({pos:event.point,radius:_this.props.clickRadius}),callbacks.forEach(function(cb){return cb(event)}))}),checkDeprecatedProps(props),_this._controller=props.controller||new map_controller_MapController,_this._eventManager=new esm.a(null,{touchAction:props.touchAction}),_this._updateInteractiveContext({isDragging:!1,eventManager:_this._eventManager}),_this}return Object(inherits.a)(InteractiveMap,_PureComponent),Object(createClass.a)(InteractiveMap,null,[{key:"supported",value:function supported(){return static_map_StaticMap.supported()}}]),Object(createClass.a)(InteractiveMap,[{key:"componentDidMount",value:function componentDidMount(){var eventManager=this._eventManager,mapContainer=this._eventCanvasRef.current;eventManager.setElement(mapContainer),eventManager.on({pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerup:this._onPointerUp,pointerleave:this._onEvent.bind(this,"onMouseOut"),click:this._onClick,anyclick:this._onClick,dblclick:this._onEvent.bind(this,"onDblClick"),wheel:this._onEvent.bind(this,"onWheel"),contextmenu:this._onEvent.bind(this,"onContextMenu")}),this._setControllerProps(this.props),this._updateInteractiveContext({mapContainer:mapContainer})}},{key:"componentWillUpdate",value:function componentWillUpdate(nextProps,nextState){this._setControllerProps(nextProps),nextState.isDragging!==this.state.isDragging&&this._updateInteractiveContext({isDragging:nextState.isDragging})}},{key:"_setControllerProps",value:function _setControllerProps(props){props=Object.assign({},props,props.viewState,{isInteractive:Boolean(props.onViewStateChange||props.onViewportChange),onViewportChange:this._onViewportChange,onStateChange:this._onInteractionStateChange,eventManager:this._eventManager,width:this._width,height:this._height}),this._controller.setOptions(props)}},{key:"_getFeatures",value:function _getFeatures(_ref3){var features,pos=_ref3.pos,radius=_ref3.radius,queryParams={},map=this.getMap();if(this.props.interactiveLayerIds&&(queryParams.layers=this.props.interactiveLayerIds),radius){var size=radius,bbox=[[pos[0]-size,pos[1]+size],[pos[0]+size,pos[1]-size]];features=map&&map.queryRenderedFeatures(bbox,queryParams)}else features=map&&map.queryRenderedFeatures(pos,queryParams);return features}},{key:"_updateInteractiveContext",value:function _updateInteractiveContext(updatedContext){this._interactiveContext=Object.assign({},this._interactiveContext,updatedContext)}},{key:"_normalizeEvent",value:function _normalizeEvent(event){if(event.lngLat)return event;var _event$offsetCenter=event.offsetCenter,pos=[_event$offsetCenter.x,_event$offsetCenter.y],viewport=new web_mercator_viewport.a(Object.assign({},this.props,{width:this._width,height:this._height}));return event.point=pos,event.lngLat=viewport.unproject(pos),event}},{key:"render",value:function render(){var _this$props4=this.props,width=_this$props4.width,height=_this$props4.height,style=_this$props4.style,getCursor=_this$props4.getCursor,eventCanvasStyle=Object.assign({position:"relative"},style,{width:width,height:height,cursor:getCursor(this.state)});return Object(react.createElement)(map_context.Provider,{value:this._interactiveContext},Object(react.createElement)("div",{key:"event-canvas",ref:this._eventCanvasRef,style:eventCanvasStyle},Object(react.createElement)(static_map_StaticMap,Object.assign({},this.props,{width:"100%",height:"100%",style:null,onResize:this._onResize,onLoad:this._onLoad,ref:this._staticMapRef,children:this.props.children}))))}}]),InteractiveMap}(react.PureComponent);Object(defineProperty.a)(interactive_map_InteractiveMap,"propTypes",interactive_map_propTypes),Object(defineProperty.a)(interactive_map_InteractiveMap,"defaultProps",interactive_map_defaultProps);var base_control_propTypes={captureScroll:prop_types_default.a.bool,captureDrag:prop_types_default.a.bool,captureClick:prop_types_default.a.bool,captureDoubleClick:prop_types_default.a.bool},base_control_BaseControl=function(_PureComponent){function BaseControl(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,BaseControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(BaseControl)).call.apply(_getPrototypeOf2,[this].concat(args))),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_context",{}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_events",null),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_containerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onScroll",function(evt){_this.props.captureScroll&&evt.stopPropagation()}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onDragStart",function(evt){_this.props.captureDrag&&evt.stopPropagation()}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onDblClick",function(evt){_this.props.captureDoubleClick&&evt.stopPropagation()}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onClick",function(evt){_this.props.captureClick&&evt.stopPropagation()}),_this}return Object(inherits.a)(BaseControl,_PureComponent),Object(createClass.a)(BaseControl,[{key:"componentDidMount",value:function componentDidMount(){var ref=this._containerRef.current;if(ref){var eventManager=this._context.eventManager;eventManager&&(this._events={wheel:this._onScroll,panstart:this._onDragStart,anyclick:this._onClick,click:this._onClick,dblclick:this._onDblClick},eventManager.on(this._events,ref))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){var eventManager=this._context.eventManager;eventManager&&this._events&&eventManager.off(this._events)}},{key:"_render",value:function _render(){throw new Error("_render() not implemented")}},{key:"render",value:function render(){var _this2=this;return Object(react.createElement)(map_context.Consumer,null,function(context){return _this2._context=context,_this2._render()})}}]),BaseControl}(react.PureComponent);Object(defineProperty.a)(base_control_BaseControl,"propTypes",base_control_propTypes),Object(defineProperty.a)(base_control_BaseControl,"defaultProps",{captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0});var get=__webpack_require__(17),draggable_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{draggable:prop_types_default.a.bool,onDrag:prop_types_default.a.func,onDragEnd:prop_types_default.a.func,onDragStart:prop_types_default.a.func,offsetLeft:prop_types_default.a.number,offsetTop:prop_types_default.a.number}),draggable_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{draggable:!1}),draggable_control_DraggableControl=function(_BaseControl){function DraggableControl(props){var _this;return Object(classCallCheck.a)(this,DraggableControl),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(DraggableControl).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onDragStart",function(event){var _this$props=_this.props,draggable=_this$props.draggable,captureDrag=_this$props.captureDrag;if((draggable||captureDrag)&&event.stopPropagation(),draggable){var dragPos=_this._getDragEventPosition(event),dragOffset=_this._getDragEventOffset(event);_this.setState({dragPos:dragPos,dragOffset:dragOffset}),_this._setupDragEvents(),_this.props.onDragStart&&(event.lngLat=_this._getDragLngLat(dragPos,dragOffset),_this.props.onDragStart(event))}}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onDrag",function(event){event.stopPropagation();var dragPos=_this._getDragEventPosition(event);_this.setState({dragPos:dragPos}),_this.props.onDrag&&(event.lngLat=_this._getDragLngLat(dragPos,_this.state.dragOffset),_this.props.onDrag(event))}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onDragEnd",function(event){var _this$state=_this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents(),_this.props.onDragEnd&&(event.lngLat=_this._getDragLngLat(dragPos,dragOffset),_this.props.onDragEnd(event))}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onDragCancel",function(event){event.stopPropagation(),_this.setState({dragPos:null,dragOffset:null}),_this._removeDragEvents()}),_this.state={dragPos:null,dragOffset:null},_this}return Object(inherits.a)(DraggableControl,_BaseControl),Object(createClass.a)(DraggableControl,[{key:"componentWillUnmount",value:function componentWillUnmount(){Object(get.a)(Object(getPrototypeOf.a)(DraggableControl.prototype),"componentWillUnmount",this).call(this),this._removeDragEvents()}},{key:"_setupDragEvents",value:function _setupDragEvents(){var eventManager=this._context.eventManager;eventManager&&(this._dragEvents={panmove:this._onDrag,panend:this._onDragEnd,pancancel:this._onDragCancel},eventManager.on(this._dragEvents))}},{key:"_removeDragEvents",value:function _removeDragEvents(){var eventManager=this._context.eventManager;eventManager&&this._dragEvents&&(eventManager.off(this._dragEvents),this._dragEvents=null)}},{key:"_getDragEventPosition",value:function _getDragEventPosition(event){var _event$offsetCenter=event.offsetCenter;return[_event$offsetCenter.x,_event$offsetCenter.y]}},{key:"_getDragEventOffset",value:function _getDragEventOffset(event){var _event$center=event.center,x=_event$center.x,y=_event$center.y,rect=this._containerRef.current.getBoundingClientRect();return[rect.left-x,rect.top-y]}},{key:"_getDraggedPosition",value:function _getDraggedPosition(dragPos,dragOffset){return[dragPos[0]+dragOffset[0],dragPos[1]+dragOffset[1]]}},{key:"_getDragLngLat",value:function _getDragLngLat(dragPos,dragOffset){var _this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,_this$_getDraggedPosi=this._getDraggedPosition(dragPos,dragOffset),_this$_getDraggedPosi2=Object(slicedToArray.a)(_this$_getDraggedPosi,2),x=_this$_getDraggedPosi2[0],y=_this$_getDraggedPosi2[1];return this._context.viewport.unproject([x-offsetLeft,y-offsetTop])}}]),DraggableControl}(base_control_BaseControl);Object(defineProperty.a)(draggable_control_DraggableControl,"propTypes",draggable_control_propTypes),Object(defineProperty.a)(draggable_control_DraggableControl,"defaultProps",draggable_control_defaultProps);var marker_propTypes=Object.assign({},draggable_control_DraggableControl.propTypes,{className:prop_types_default.a.string,longitude:prop_types_default.a.number.isRequired,latitude:prop_types_default.a.number.isRequired}),marker_defaultProps=Object.assign({},draggable_control_DraggableControl.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),marker_Marker=function(_DraggableControl){function Marker(){return Object(classCallCheck.a)(this,Marker),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Marker).apply(this,arguments))}return Object(inherits.a)(Marker,_DraggableControl),Object(createClass.a)(Marker,[{key:"_getPosition",value:function _getPosition(){var _this$props=this.props,longitude=_this$props.longitude,latitude=_this$props.latitude,offsetLeft=_this$props.offsetLeft,offsetTop=_this$props.offsetTop,_this$state=this.state,dragPos=_this$state.dragPos,dragOffset=_this$state.dragOffset;if(dragPos)return this._getDraggedPosition(dragPos,dragOffset);var _this$_context$viewpo=this._context.viewport.project([longitude,latitude]),_this$_context$viewpo2=Object(slicedToArray.a)(_this$_context$viewpo,2),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1];return[x+=offsetLeft,y+=offsetTop]}},{key:"_render",value:function _render(){var _this$props2=this.props,className=_this$props2.className,draggable=_this$props2.draggable,dragPos=this.state.dragPos,_this$_getPosition=this._getPosition(),_this$_getPosition2=Object(slicedToArray.a)(_this$_getPosition,2),containerStyle={position:"absolute",left:_this$_getPosition2[0],top:_this$_getPosition2[1],cursor:draggable?dragPos?"grabbing":"grab":"auto"};return Object(react.createElement)("div",{className:"mapboxgl-marker ".concat(className),ref:this._containerRef,style:containerStyle,children:this.props.children})}}]),Marker}(draggable_control_DraggableControl);Object(defineProperty.a)(marker_Marker,"propTypes",marker_propTypes),Object(defineProperty.a)(marker_Marker,"defaultProps",marker_defaultProps);var ANCHOR_POSITION={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},ANCHOR_TYPES=Object.keys(ANCHOR_POSITION);var popup_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,longitude:prop_types_default.a.number.isRequired,latitude:prop_types_default.a.number.isRequired,altitude:prop_types_default.a.number,offsetLeft:prop_types_default.a.number,offsetTop:prop_types_default.a.number,tipSize:prop_types_default.a.number,closeButton:prop_types_default.a.bool,closeOnClick:prop_types_default.a.bool,anchor:prop_types_default.a.oneOf(Object.keys(ANCHOR_POSITION)),dynamicPosition:prop_types_default.a.bool,sortByDepth:prop_types_default.a.bool,onClose:prop_types_default.a.func}),popup_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function onClose(){}}),popup_Popup=function(_BaseControl){function Popup(props){var _this;return Object(classCallCheck.a)(this,Popup),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Popup).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onClick",function(evt){_this.props.captureClick&&evt.stopPropagation(),"click"!==evt.type||!_this.props.closeOnClick&&"mapboxgl-popup-close-button"!==evt.target.className||_this.props.onClose()}),_this._closeOnClick=!1,_this._contentRef=Object(react.createRef)(),_this}return Object(inherits.a)(Popup,_BaseControl),Object(createClass.a)(Popup,[{key:"componentDidMount",value:function componentDidMount(){Object(get.a)(Object(getPrototypeOf.a)(Popup.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_getPosition",value:function _getPosition(x,y){var viewport=this._context.viewport,_this$props=this.props,anchor=_this$props.anchor,dynamicPosition=_this$props.dynamicPosition,tipSize=_this$props.tipSize,content=this._contentRef.current;return content&&dynamicPosition?function getDynamicPosition(_ref){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,selfWidth=_ref.selfWidth,selfHeight=_ref.selfHeight,anchor=_ref.anchor,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ANCHOR_POSITION$anch=ANCHOR_POSITION[anchor],anchorX=_ANCHOR_POSITION$anch.x,anchorY=_ANCHOR_POSITION$anch.y,top=y-anchorY*selfHeight,bottom=top+selfHeight;if(top<padding)for(;top<padding&&anchorY>=.5;)anchorY-=.5,top+=.5*selfHeight;else if(bottom>height-padding)for(;bottom>height-padding&&anchorY<=.5;)anchorY+=.5,bottom-=.5*selfHeight;var left=x-anchorX*selfWidth,right=left+selfWidth,xStep=.5;if(.5===anchorY&&(anchorX=Math.floor(anchorX),xStep=1),left<padding)for(;left<padding&&anchorX>=xStep;)anchorX-=xStep,left+=xStep*selfWidth;else if(right>width-padding)for(;right>width-padding&&anchorX<=1-xStep;)anchorX+=xStep,right-=xStep*selfWidth;return ANCHOR_TYPES.find(function(positionType){var anchorPosition=ANCHOR_POSITION[positionType];return anchorPosition.x===anchorX&&anchorPosition.y===anchorY})||anchor}({x:x,y:y,anchor:anchor,padding:tipSize,width:viewport.width,height:viewport.height,selfWidth:content.clientWidth,selfHeight:content.clientHeight}):anchor}},{key:"_getContainerStyle",value:function _getContainerStyle(x,y,z,positionType){var viewport=this._context.viewport,_this$props2=this.props,offsetLeft=_this$props2.offsetLeft,offsetTop=_this$props2.offsetTop,sortByDepth=_this$props2.sortByDepth,anchorPosition=ANCHOR_POSITION[positionType],style={position:"absolute",left:x+offsetLeft,top:y+offsetTop,transform:"translate(".concat(100*-anchorPosition.x,"%, ").concat(100*-anchorPosition.y,"%)")};return sortByDepth?(z>1||z<-1||x<0||x>viewport.width||y<0||y>viewport.height?style.display="none":style.zIndex=Math.floor((1-z)/2*1e5),style):style}},{key:"_renderTip",value:function _renderTip(positionType){var tipSize=this.props.tipSize;return Object(react.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:tipSize}})}},{key:"_renderContent",value:function _renderContent(){var _this$props3=this.props,closeButton=_this$props3.closeButton,children=_this$props3.children,onClick=this._context.eventManager?null:this._onClick;return Object(react.createElement)("div",{key:"content",ref:this._contentRef,className:"mapboxgl-popup-content",onClick:onClick},[closeButton&&Object(react.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},""),children])}},{key:"_render",value:function _render(){var _this$props4=this.props,className=_this$props4.className,longitude=_this$props4.longitude,latitude=_this$props4.latitude,altitude=_this$props4.altitude,_this$_context$viewpo=this._context.viewport.project([longitude,latitude,altitude]),_this$_context$viewpo2=Object(slicedToArray.a)(_this$_context$viewpo,3),x=_this$_context$viewpo2[0],y=_this$_context$viewpo2[1],z=_this$_context$viewpo2[2],positionType=this._getPosition(x,y),containerStyle=this._getContainerStyle(x,y,z,positionType);return Object(react.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(positionType," ").concat(className),style:containerStyle,ref:this._containerRef},[this._renderTip(positionType),this._renderContent()])}}]),Popup}(base_control_BaseControl);Object(defineProperty.a)(popup_Popup,"propTypes",popup_propTypes),Object(defineProperty.a)(popup_Popup,"defaultProps",popup_defaultProps);var geolocate_utils_supported,globals=__webpack_require__(43),fullscreen_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,container:prop_types_default.a.object}),fullscreen_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",container:null}),fullscreen_control_FullscreenControl=function(_BaseControl){function FullscreenControl(props){var _this;return Object(classCallCheck.a)(this,FullscreenControl),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(FullscreenControl).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onFullscreenChange",function(){var nextState=!_this._mapboxFullscreenControl._fullscreen;_this._mapboxFullscreenControl._fullscreen=nextState,_this.setState({isFullscreen:nextState})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onClickFullscreen",function(){_this._mapboxFullscreenControl._onClickFullscreen()}),_this._mapboxFullscreenControl=null,_this.state={isFullscreen:!1},_this}return Object(inherits.a)(FullscreenControl,_BaseControl),Object(createClass.a)(FullscreenControl,[{key:"componentDidMount",value:function componentDidMount(){var container=this.props.container||this._context.mapContainer;this._mapboxFullscreenControl=new mapbox_gl_default.a.FullscreenControl({container:container}),this.setState({showButton:this._mapboxFullscreenControl._checkFullscreenSupport()}),globals.a.addEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"componentWillUnmount",value:function componentWillUnmount(){globals.a.removeEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"_renderButton",value:function _renderButton(type,label,callback,children){return Object(react.createElement)("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback,children:children})}},{key:"_render",value:function _render(){if(!this.state.showButton)return null;var className=this.props.className,type=this.state.isFullscreen?"shrink":"fullscreen";return Object(react.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},[this._renderButton(type,"Toggle fullscreen",this._onClickFullscreen)])}}]),FullscreenControl}(base_control_BaseControl);Object(defineProperty.a)(fullscreen_control_FullscreenControl,"propTypes",fullscreen_control_propTypes),Object(defineProperty.a)(fullscreen_control_FullscreenControl,"defaultProps",fullscreen_control_defaultProps);var geolocate_control_LINEAR_TRANSITION_PROPS=Object.assign({},transition_manager_TransitionManager.defaultProps,{transitionDuration:500}),geolocate_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,style:prop_types_default.a.object,positionOptions:prop_types_default.a.object,fitBoundsOptions:prop_types_default.a.object,trackUserLocation:prop_types_default.a.bool,showUserLocation:prop_types_default.a.bool,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func}),geolocate_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",style:{},positionOptions:null,fitBoundsOptions:null,trackUserLocation:!1,showUserLocation:!0,onViewStateChange:function onViewStateChange(){},onViewportChange:function onViewportChange(){}}),geolocate_control_GeolocateControl=function(_BaseControl){function GeolocateControl(props){var _this;return Object(classCallCheck.a)(this,GeolocateControl),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(GeolocateControl).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_containerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_geolocateButtonRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_markerRef",Object(react.createRef)()),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_setupMapboxGeolocateControl",function(supportsGeolocation){if(supportsGeolocation){var controlOptions={};["positionOptions","fitBoundsOptions","trackUserLocation","showUserLocation"].forEach(function(prop){prop in _this.props&&null!==_this.props[prop]&&(controlOptions[prop]=_this.props[prop])}),_this._mapboxGeolocateControl=new mapbox_gl_default.a.GeolocateControl(controlOptions),_this._mapboxGeolocateControl._watchState="OFF",_this._mapboxGeolocateControl._geolocateButton=_this._geolocateButtonRef.current,_this._mapboxGeolocateControl._updateMarker=_this._updateMarker,_this._mapboxGeolocateControl._updateCamera=_this._updateCamera,_this._mapboxGeolocateControl._setup=!0}else console.warn("Geolocation support is not available, the GeolocateControl will not be visible.")}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onClickGeolocate",function(){return _this._mapboxGeolocateControl.trigger()}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_updateMarker",function(position){position&&_this.setState({markerPosition:position.coords})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_getBounds",function(position){var center=new mapbox_gl_default.a.LngLat(position.coords.longitude,position.coords.latitude),radius=position.coords.accuracy,bounds=center.toBounds(radius);return[[bounds._ne.lng,bounds._ne.lat],[bounds._sw.lng,bounds._sw.lat]]}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_updateCamera",function(position){var viewport=_this._context.viewport,bounds=_this._getBounds(position),_fitBounds=new web_mercator_viewport.a(viewport).fitBounds(bounds),longitude=_fitBounds.longitude,latitude=_fitBounds.latitude,zoom=_fitBounds.zoom,newViewState=Object.assign({},viewport,{longitude:longitude,latitude:latitude,zoom:zoom}),mapState=new map_state_MapState(newViewState),viewState=Object.assign({},mapState.getViewportProps(),geolocate_control_LINEAR_TRANSITION_PROPS);_this.props.onViewStateChange({viewState:viewState}),_this.props.onViewportChange(viewState)}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_renderButton",function(type,label,callback,children){return Object(react.createElement)("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),ref:_this._geolocateButtonRef,type:"button",title:label,onClick:callback,children:children})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_renderMarker",function(){var showUserLocation=_this.props.showUserLocation,markerPosition=_this.state.markerPosition;return showUserLocation&&markerPosition?Object(react.createElement)(marker_Marker,{key:"location-maker",ref:_this._markerRef,className:"mapboxgl-user-location-dot",longitude:markerPosition.longitude,latitude:markerPosition.latitude,onContextMenu:function onContextMenu(e){return e.preventDefault()},captureDrag:!1,captureDoubleClick:!1}):null}),_this.state={supportsGeolocation:null,markerPosition:null},_this}return Object(inherits.a)(GeolocateControl,_BaseControl),Object(createClass.a)(GeolocateControl,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;(function isGeolocationSupported(){return void 0!==geolocate_utils_supported?Promise.resolve(geolocate_utils_supported):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(function(p){return geolocate_utils_supported="denied"!==p.state}):(geolocate_utils_supported=Boolean(window.navigator.geolocation),Promise.resolve(geolocate_utils_supported))})().then(function(result){_this2.setState({supportsGeolocation:result}),_this2._setupMapboxGeolocateControl(result)})}},{key:"componentDidUpdate",value:function componentDidUpdate(){var markerRef=this._markerRef.current;this._mapboxGeolocateControl&&markerRef&&(this._mapboxGeolocateControl._dotElement=markerRef._containerRef.current)}},{key:"componentWillUnmount",value:function componentWillUnmount(){var geolocationWatchID=this._mapboxGeolocateControl._geolocationWatchID;void 0!==geolocationWatchID&&(window.navigator.geolocation.clearWatch(geolocationWatchID),this._mapboxGeolocateControl._geolocationWatchID=void 0)}},{key:"_render",value:function _render(){if(!this.state.supportsGeolocation)return null;var _this$props=this.props,className=_this$props.className,style=_this$props.style;return Object(react.createElement)("div",null,[this._renderMarker(),Object(react.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef,style:style,onContextMenu:function onContextMenu(e){return e.preventDefault()}},this._renderButton("geolocate","Geolocate",this._onClickGeolocate))])}}]),GeolocateControl}(base_control_BaseControl);Object(defineProperty.a)(geolocate_control_GeolocateControl,"propTypes",geolocate_control_propTypes),Object(defineProperty.a)(geolocate_control_GeolocateControl,"defaultProps",geolocate_control_defaultProps);var navigation_control_propTypes=Object.assign({},base_control_BaseControl.propTypes,{className:prop_types_default.a.string,onViewStateChange:prop_types_default.a.func,onViewportChange:prop_types_default.a.func,showCompass:prop_types_default.a.bool,showZoom:prop_types_default.a.bool}),navigation_control_defaultProps=Object.assign({},base_control_BaseControl.defaultProps,{className:"",onViewStateChange:function onViewStateChange(){},onViewportChange:function onViewportChange(){},showCompass:!0,showZoom:!0}),navigation_control_NavigationControl=function(_BaseControl){function NavigationControl(props){var _this;return Object(classCallCheck.a)(this,NavigationControl),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(NavigationControl).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onZoomIn",function(){_this._updateViewport({zoom:_this._context.viewport.zoom+1})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onZoomOut",function(){_this._updateViewport({zoom:_this._context.viewport.zoom-1})}),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_onResetNorth",function(){_this._updateViewport({bearing:0,pitch:0})}),checkDeprecatedProps(props),_this}return Object(inherits.a)(NavigationControl,_BaseControl),Object(createClass.a)(NavigationControl,[{key:"_updateViewport",value:function _updateViewport(opts){var viewport=this._context.viewport,mapState=new map_state_MapState(Object.assign({},viewport,opts)),viewState=Object.assign({},mapState.getViewportProps(),LINEAR_TRANSITION_PROPS);this.props.onViewStateChange({viewState:viewState}),this.props.onViewportChange(viewState)}},{key:"_renderCompass",value:function _renderCompass(){var bearing=this._context.viewport.bearing;return Object(react.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(-bearing,"deg)")}})}},{key:"_renderButton",value:function _renderButton(type,label,callback,children){return Object(react.createElement)("button",{key:type,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(type),type:"button",title:label,onClick:callback,children:children})}},{key:"_render",value:function _render(){var _this$props=this.props,className=_this$props.className,showCompass=_this$props.showCompass,showZoom=_this$props.showZoom;return Object(react.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(className),ref:this._containerRef},[showZoom&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),showZoom&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),showCompass&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),NavigationControl}(base_control_BaseControl);Object(defineProperty.a)(navigation_control_NavigationControl,"propTypes",navigation_control_propTypes),Object(defineProperty.a)(navigation_control_NavigationControl,"defaultProps",navigation_control_defaultProps);var canvas_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired}),canvas_overlay_CanvasOverlay=function(_BaseControl){function CanvasOverlay(props){var _this;return Object(classCallCheck.a)(this,CanvasOverlay),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CanvasOverlay).call(this,props)),Object(defineProperty.a)(Object(assertThisInitialized.a)(Object(assertThisInitialized.a)(_this)),"_redraw",function(){var ctx=_this._ctx;if(ctx){var pixelRatio=globals.b.devicePixelRatio||1;ctx.save(),ctx.scale(pixelRatio,pixelRatio);var _this$_context=_this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging;_this.props.redraw({width:viewport.width,height:viewport.height,ctx:ctx,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}),ctx.restore()}}),_this}return Object(inherits.a)(CanvasOverlay,_BaseControl),Object(createClass.a)(CanvasOverlay,[{key:"componentDidMount",value:function componentDidMount(){this._canvas=this._containerRef.current,this._ctx=this._canvas.getContext("2d"),this._redraw()}},{key:"_render",value:function _render(){var pixelRatio=globals.b.devicePixelRatio||1,_this$_context$viewpo=this._context.viewport,width=_this$_context$viewpo.width,height=_this$_context$viewpo.height;return this._redraw(),Object(react.createElement)("canvas",{ref:this._containerRef,width:width*pixelRatio,height:height*pixelRatio,style:{width:"".concat(width,"px"),height:"".concat(height,"px"),position:"absolute",left:0,top:0}})}}]),CanvasOverlay}(base_control_BaseControl);canvas_overlay_CanvasOverlay.displayName="CanvasOverlay",canvas_overlay_CanvasOverlay.propTypes=canvas_overlay_propTypes,canvas_overlay_CanvasOverlay.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1};var html_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired,style:prop_types_default.a.object}),html_overlay_HTMLOverlay=function(_BaseControl){function HTMLOverlay(){return Object(classCallCheck.a)(this,HTMLOverlay),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(HTMLOverlay).apply(this,arguments))}return Object(inherits.a)(HTMLOverlay,_BaseControl),Object(createClass.a)(HTMLOverlay,[{key:"_render",value:function _render(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0,width:viewport.width,height:viewport.height},this.props.style);return Object(react.createElement)("div",{ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),HTMLOverlay}(base_control_BaseControl);html_overlay_HTMLOverlay.displayName="HTMLOverlay",html_overlay_HTMLOverlay.propTypes=html_overlay_propTypes,html_overlay_HTMLOverlay.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1};var svg_overlay_propTypes=Object.assign({},base_control_BaseControl.propTypes,{redraw:prop_types_default.a.func.isRequired,style:prop_types_default.a.object}),svg_overlay_SVGOverlay=function(_BaseControl){function SVGOverlay(){return Object(classCallCheck.a)(this,SVGOverlay),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(SVGOverlay).apply(this,arguments))}return Object(inherits.a)(SVGOverlay,_BaseControl),Object(createClass.a)(SVGOverlay,[{key:"_render",value:function _render(){var _this$_context=this._context,viewport=_this$_context.viewport,isDragging=_this$_context.isDragging,style=Object.assign({position:"absolute",left:0,top:0},this.props.style);return Object(react.createElement)("svg",{width:viewport.width,height:viewport.height,ref:this._containerRef,style:style},this.props.redraw({width:viewport.width,height:viewport.height,isDragging:isDragging,project:viewport.project.bind(viewport),unproject:viewport.unproject.bind(viewport)}))}}]),SVGOverlay}(base_control_BaseControl);svg_overlay_SVGOverlay.displayName="SVGOverlay",svg_overlay_SVGOverlay.propTypes=svg_overlay_propTypes,svg_overlay_SVGOverlay.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},__webpack_require__.d(__webpack_exports__,"a",function(){return static_map_StaticMap})},function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"action",{enumerable:!0,get:function get(){return _preview.action}}),Object.defineProperty(exports,"actions",{enumerable:!0,get:function get(){return _preview.actions}}),Object.defineProperty(exports,"decorate",{enumerable:!0,get:function get(){return _preview.decorate}}),Object.defineProperty(exports,"configureActions",{enumerable:!0,get:function get(){return _preview.configureActions}}),Object.defineProperty(exports,"decorateAction",{enumerable:!0,get:function get(){return _preview.decorateAction}}),Object.defineProperty(exports,"withActions",{enumerable:!0,get:function get(){return _preview.withActions}}),Object.defineProperty(exports,"ADDON_ID",{enumerable:!0,get:function get(){return _constants.ADDON_ID}}),Object.defineProperty(exports,"PANEL_ID",{enumerable:!0,get:function get(){return _constants.PANEL_ID}}),Object.defineProperty(exports,"EVENT_ID",{enumerable:!0,get:function get(){return _constants.EVENT_ID}});var _preview=__webpack_require__(447),_constants=__webpack_require__(249);module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(79)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);__webpack_exports__.a={enable:function enable(update,capability){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},capability,!0))},disable:function disable(update,capability){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},capability,!1))},pixelStorei:function pixelStorei(update,pname,value){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},pname,value))},hint:function hint(update,pname,_hint){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},pname,_hint))},bindFramebuffer:function bindFramebuffer(update,target,framebuffer){var _update5;switch(target){case 36160:return update((_update5={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update5,36006,framebuffer),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update5,36010,framebuffer),_update5));case 36009:return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},36006,framebuffer));case 36008:return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},36010,framebuffer));default:return null}},blendColor:function blendColor(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},32773,new Float32Array([r,g,b,a])))},blendEquation:function blendEquation(update,mode){var _update9;return update((_update9={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update9,32777,mode),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update9,34877,mode),_update9))},blendEquationSeparate:function blendEquationSeparate(update,modeRGB,modeAlpha){var _update10;return update((_update10={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update10,32777,modeRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update10,34877,modeAlpha),_update10))},blendFunc:function blendFunc(update,src,dst){var _update11;return update((_update11={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32969,src),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32968,dst),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32971,src),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update11,32970,dst),_update11))},blendFuncSeparate:function blendFuncSeparate(update,srcRGB,dstRGB,srcAlpha,dstAlpha){var _update12;return update((_update12={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32969,srcRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32968,dstRGB),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32971,srcAlpha),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update12,32970,dstAlpha),_update12))},clearColor:function clearColor(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},3106,new Float32Array([r,g,b,a])))},clearDepth:function clearDepth(update,depth){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2931,depth))},clearStencil:function clearStencil(update,s){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2961,s))},colorMask:function colorMask(update,r,g,b,a){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},3107,[r,g,b,a]))},cullFace:function cullFace(update,mode){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2885,mode))},depthFunc:function depthFunc(update,func){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2932,func))},depthRange:function depthRange(update,zNear,zFar){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2928,new Float32Array([zNear,zFar])))},depthMask:function depthMask(update,mask){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2930,mask))},frontFace:function frontFace(update,face){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2886,face))},lineWidth:function lineWidth(update,width){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2849,width))},polygonOffset:function polygonOffset(update,factor,units){var _update23;return update((_update23={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update23,32824,factor),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update23,10752,units),_update23))},sampleCoverage:function sampleCoverage(update,value,invert){var _update24;return update((_update24={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update24,32938,value),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update24,32939,invert),_update24))},scissor:function scissor(update,x,y,width,height){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},3088,new Int32Array([x,y,width,height])))},stencilMask:function stencilMask(update,mask){var _update26;return update((_update26={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update26,2968,mask),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update26,36005,mask),_update26))},stencilMaskSeparate:function stencilMaskSeparate(update,face,mask){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},1028===face?2968:36005,mask))},stencilFunc:function stencilFunc(update,func,ref,mask){var _update28;return update((_update28={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,2962,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,2967,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,2963,mask),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,34816,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,36003,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update28,36004,mask),_update28))},stencilFuncSeparate:function stencilFuncSeparate(update,face,func,ref,mask){var _update29;return update((_update29={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update29,1028===face?2962:34816,func),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update29,1028===face?2967:36003,ref),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update29,1028===face?2963:36004,mask),_update29))},stencilOp:function stencilOp(update,fail,zfail,zpass){var _update30;return update((_update30={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,2964,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,2965,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,2966,zpass),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,34817,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,34818,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update30,34819,zpass),_update30))},stencilOpSeparate:function stencilOpSeparate(update,face,fail,zfail,zpass){var _update31;return update((_update31={},Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update31,1028===face?2964:34817,fail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update31,1028===face?2965:34818,zfail),Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)(_update31,1028===face?2966:34819,zpass),_update31))},viewport:function viewport(update,x,y,width,height){return update(Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},2978,new Int32Array([x,y,width,height])))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Vector2});var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_lib_vector__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(95),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(26),Vector2=function(_Vector){function Vector2(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Vector2),_this=Object(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Vector2).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y),_this}return Object(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Vector2,_Vector),Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Vector2,[{key:"cross",value:function cross(vector){return gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_6__.b(this,this,vector),this.check()}},{key:"horizontalAngle",value:function horizontalAngle(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function verticalAngle(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function operation(_operation){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return _operation.apply(void 0,[this,this].concat(args)),this.check()}},{key:"ELEMENTS",get:function get(){return 2}}]),Vector2}(_lib_vector__WEBPACK_IMPORTED_MODULE_5__.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){function bufferToArrayBuffer(buffer){return Buffer.isBuffer(buffer)?new Uint8Array(buffer).buffer:buffer}__webpack_require__.d(__webpack_exports__,"a",function(){return bufferToArrayBuffer})}).call(this,__webpack_require__(263).Buffer)},,function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;module.exports=function isArguments(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},function(module,exports){module.exports="string"==typeof function foo(){}.name},function(module,exports){module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString;if(__webpack_require__(73)()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function isSymbol(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function isRealSymbolObject(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function isSymbol(value){return!1}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(74),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=__webpack_require__(85),predicates={"Property Descriptor":function isPropertyDescriptor(ES,Desc){if("Object"!==ES.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function assertRecord(ES,recordType,argumentName,value){var predicate=predicates[recordType];if("function"!=typeof predicate)throw new $SyntaxError("unknown record type: "+recordType);if(!predicate(ES,value))throw new $TypeError(argumentName+" must be a "+recordType);console.log(predicate(ES,value),value)}},function(module,exports){module.exports=Number.isNaN||function isNaN(a){return a!=a}},function(module,exports){var $isNaN=Number.isNaN||function(a){return a!=a};module.exports=Number.isFinite||function(x){return"number"==typeof x&&!$isNaN(x)&&x!==1/0&&x!==-1/0}},function(module,exports){module.exports=function sign(number){return number>=0?1:-1}},function(module,exports){module.exports=function mod(number,modulo){var remain=number%modulo;return Math.floor(remain>=0?remain:remain+modulo)}},function(module,exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(74),$Object=GetIntrinsic("%Object%"),$TypeError=GetIntrinsic("%TypeError%"),$String=GetIntrinsic("%String%"),assertRecord=__webpack_require__(199),$isNaN=__webpack_require__(200),$isFinite=__webpack_require__(201),sign=__webpack_require__(202),mod=__webpack_require__(203),IsCallable=__webpack_require__(117),toPrimitive=__webpack_require__(320),has=__webpack_require__(85),ES5={ToPrimitive:toPrimitive,ToBoolean:function ToBoolean(value){return!!value},ToNumber:function ToNumber(value){return+value},ToInteger:function ToInteger(value){var number=this.ToNumber(value);return $isNaN(number)?0:0!==number&&$isFinite(number)?sign(number)*Math.floor(Math.abs(number)):number},ToInt32:function ToInt32(x){return this.ToNumber(x)>>0},ToUint32:function ToUint32(x){return this.ToNumber(x)>>>0},ToUint16:function ToUint16(value){var number=this.ToNumber(value);if($isNaN(number)||0===number||!$isFinite(number))return 0;var posInt=sign(number)*Math.floor(Math.abs(number));return mod(posInt,65536)},ToString:function ToString(value){return $String(value)},ToObject:function ToObject(value){return this.CheckObjectCoercible(value),$Object(value)},CheckObjectCoercible:function CheckObjectCoercible(value,optMessage){if(null==value)throw new $TypeError(optMessage||"Cannot call method on "+value);return value},IsCallable:IsCallable,SameValue:function SameValue(x,y){return x===y?0!==x||1/x==1/y:$isNaN(x)&&$isNaN(y)},Type:function Type(x){return null===x?"Null":void 0===x?"Undefined":"function"==typeof x||"object"==typeof x?"Object":"number"==typeof x?"Number":"boolean"==typeof x?"Boolean":"string"==typeof x?"String":void 0},IsPropertyDescriptor:function IsPropertyDescriptor(Desc){if("Object"!==this.Type(Desc))return!1;var allowed={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var key in Desc)if(has(Desc,key)&&!allowed[key])return!1;var isData=has(Desc,"[[Value]]"),IsAccessor=has(Desc,"[[Get]]")||has(Desc,"[[Set]]");if(isData&&IsAccessor)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function IsAccessorDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Get]]")&&!has(Desc,"[[Set]]")))},IsDataDescriptor:function IsDataDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!(!has(Desc,"[[Value]]")&&!has(Desc,"[[Writable]]")))},IsGenericDescriptor:function IsGenericDescriptor(Desc){return void 0!==Desc&&(assertRecord(this,"Property Descriptor","Desc",Desc),!this.IsAccessorDescriptor(Desc)&&!this.IsDataDescriptor(Desc))},FromPropertyDescriptor:function FromPropertyDescriptor(Desc){if(void 0===Desc)return Desc;if(assertRecord(this,"Property Descriptor","Desc",Desc),this.IsDataDescriptor(Desc))return{value:Desc["[[Value]]"],writable:!!Desc["[[Writable]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};if(this.IsAccessorDescriptor(Desc))return{get:Desc["[[Get]]"],set:Desc["[[Set]]"],enumerable:!!Desc["[[Enumerable]]"],configurable:!!Desc["[[Configurable]]"]};throw new $TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function ToPropertyDescriptor(Obj){if("Object"!==this.Type(Obj))throw new $TypeError("ToPropertyDescriptor requires an object");var desc={};if(has(Obj,"enumerable")&&(desc["[[Enumerable]]"]=this.ToBoolean(Obj.enumerable)),has(Obj,"configurable")&&(desc["[[Configurable]]"]=this.ToBoolean(Obj.configurable)),has(Obj,"value")&&(desc["[[Value]]"]=Obj.value),has(Obj,"writable")&&(desc["[[Writable]]"]=this.ToBoolean(Obj.writable)),has(Obj,"get")){var getter=Obj.get;if(void 0!==getter&&!this.IsCallable(getter))throw new TypeError("getter must be a function");desc["[[Get]]"]=getter}if(has(Obj,"set")){var setter=Obj.set;if(void 0!==setter&&!this.IsCallable(setter))throw new $TypeError("setter must be a function");desc["[[Set]]"]=setter}if((has(desc,"[[Get]]")||has(desc,"[[Set]]"))&&(has(desc,"[[Value]]")||has(desc,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}};module.exports=ES5},function(module,exports,__webpack_require__){"use strict";var has=__webpack_require__(85),regexExec=RegExp.prototype.exec,gOPD=Object.getOwnPropertyDescriptor,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isRegex(value){if(!value||"object"!=typeof value)return!1;if(!hasToStringTag)return"[object RegExp]"===toStr.call(value);var descriptor=gOPD(value,"lastIndex");return!(!descriptor||!has(descriptor,"value"))&&function tryRegexExec(value){try{var lastIndex=value.lastIndex;return value.lastIndex=0,regexExec.call(value),!0}catch(e){return!1}finally{value.lastIndex=lastIndex}}(value)}},function(module,exports,__webpack_require__){"use strict";module.exports=function forEach(array,callback){for(var i=0;i<array.length;i+=1)callback(array[i],i,array)}},function(module,exports,__webpack_require__){"use strict";var getInferredName;try{getInferredName=Function("s","return { [s]() {} }[s].name;")}catch(e){}module.exports=getInferredName&&"inferred"===function(){}.name?getInferredName:null},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(45),keys=__webpack_require__(152),ES2017=__webpack_require__(101),assign=__webpack_require__(100),forEach=__webpack_require__(206),GetIntrinsic=__webpack_require__(74),$String=GetIntrinsic("%String%"),$Object=GetIntrinsic("%Object%"),$SymbolProto=GetIntrinsic("%SymbolPrototype%",!0),$SymbolValueOf=$SymbolProto?bind.call(Function.call,$SymbolProto.valueOf):null,$StringProto=GetIntrinsic("%StringPrototype%"),$charAt=bind.call(Function.call,$StringProto.charAt),$PromiseResolveOrig=GetIntrinsic("%Promise_resolve%",!0),$PromiseResolve=$PromiseResolveOrig?bind.call(Function.call,$PromiseResolveOrig):null,$isEnumerable=bind.call(Function.call,GetIntrinsic("%ObjectPrototype%").propertyIsEnumerable),$pushApply=bind.call(Function.apply,GetIntrinsic("%ArrayPrototype%").push),$gOPS=$SymbolValueOf?$Object.getOwnPropertySymbols:null,ES2018=assign(assign({},ES2017),{EnumerableOwnPropertyNames:ES2017.EnumerableOwnProperties,thisSymbolValue:function thisSymbolValue(value){if(!$SymbolValueOf)throw new SyntaxError("Symbols are not supported; thisSymbolValue requires that `value` be a Symbol or a Symbol object");return"Symbol"===this.Type(value)?value:$SymbolValueOf(value)},IsStringPrefix:function IsStringPrefix(p,q){if("String"!==this.Type(p))throw new TypeError('Assertion failed: "p" must be a String');if("String"!==this.Type(q))throw new TypeError('Assertion failed: "q" must be a String');if(p===q||""===p)return!0;var pLength=p.length;if(pLength>=q.length)return!1;for(var i=0;i<pLength;i+=1)if($charAt(p,i)!==$charAt(q,i))return!1;return!0},NumberToString:function NumberToString(m){if("Number"!==this.Type(m))throw new TypeError('Assertion failed: "m" must be a String');return $String(m)},CopyDataProperties:function CopyDataProperties(target,source,excludedItems){if("Object"!==this.Type(target))throw new TypeError('Assertion failed: "target" must be an Object');if(!this.IsArray(excludedItems))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');for(var i=0;i<excludedItems.length;i+=1)if(!this.IsPropertyKey(excludedItems[i]))throw new TypeError('Assertion failed: "excludedItems" must be a List of Property Keys');if(null==source)return target;var ES=this,fromObj=ES.ToObject(source),sourceKeys=function OwnPropertyKeys(ES,source){var ownKeys=keys(source);return $gOPS&&$pushApply(ownKeys,$gOPS(source)),ownKeys}(0,fromObj);return forEach(sourceKeys,function(nextKey){var excluded=!1;forEach(excludedItems,function(e){!0===ES.SameValue(e,nextKey)&&(excluded=!0)});var enumerable=$isEnumerable(fromObj,nextKey)||"string"==typeof source&&nextKey>=0&&ES.IsInteger(ES.ToNumber(nextKey));if(!1===excluded&&enumerable){var propValue=ES.Get(fromObj,nextKey);ES.CreateDataProperty(target,nextKey,propValue)}}),target},PromiseResolve:function PromiseResolve(C,x){if(!$PromiseResolve)throw new SyntaxError("This environment does not support Promises.");return $PromiseResolve(C,x)}});delete ES2018.EnumerableOwnProperties,delete ES2018.IsPropertyDescriptor,module.exports=ES2018},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(156),flagsGetter=__webpack_require__(364),RegExpStringIterator=__webpack_require__(366),OrigRegExp=RegExp,regexMatchAll=function SymbolMatchAll(string){var R=this;if("Object"!==ES.Type(R))throw new TypeError('"this" value must be an Object');var S=ES.ToString(string),tmp=function constructRegex(C,R){var matcher,flags=ES.Get(R,"flags");return"string"==typeof flags?matcher=new C(R,flags):C===OrigRegExp?(flags=flagsGetter(R),matcher=new C(R.source,flags)):matcher=new C(R,flags=flagsGetter(R)),{flags:flags,matcher:matcher}}(ES.SpeciesConstructor(R,OrigRegExp),R),flags=tmp.flags,matcher=tmp.matcher,lastIndex=ES.ToLength(ES.Get(R,"lastIndex"));return ES.Set(matcher,"lastIndex",lastIndex,!0),function CreateRegExpStringIterator(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError('"S" value must be a String');if("Boolean"!==ES.Type(global))throw new TypeError('"global" value must be a Boolean');if("Boolean"!==ES.Type(fullUnicode))throw new TypeError('"fullUnicode" value must be a Boolean');return new RegExpStringIterator(R,S,global,fullUnicode)}(matcher,S,flags.indexOf("g")>-1,flags.indexOf("u")>-1)},defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;if(defineP&&gOPD){var desc=gOPD(regexMatchAll,"name");desc&&desc.configurable&&defineP(regexMatchAll,"name",{value:"[Symbol.matchAll]"})}module.exports=regexMatchAll},function(module,exports,__webpack_require__){"use strict";var toObject=Object,TypeErr=TypeError;module.exports=function flags(){if(null!=this&&this!==toObject(this))throw new TypeErr("RegExp.prototype.flags getter called on non-object");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(210),supportsDescriptors=__webpack_require__(27).supportsDescriptors,gOPD=Object.getOwnPropertyDescriptor,TypeErr=TypeError;module.exports=function getPolyfill(){if(!supportsDescriptors)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var descriptor=gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof/a/.dotAll)return descriptor.get}return implementation}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(37)&&!__webpack_require__(38)(function(){return 7!=Object.defineProperty(__webpack_require__(158)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){exports.f=__webpack_require__(28)},function(module,exports,__webpack_require__){var has=__webpack_require__(64),toIObject=__webpack_require__(76),arrayIndexOf=__webpack_require__(215)(!1),IE_PROTO=__webpack_require__(160)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(76),toLength=__webpack_require__(68),toAbsoluteIndex=__webpack_require__(379);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var dP=__webpack_require__(42),anObject=__webpack_require__(33),getKeys=__webpack_require__(75);module.exports=__webpack_require__(37)?Object.defineProperties:function defineProperties(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){var document=__webpack_require__(29).document;module.exports=document&&document.documentElement},function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ClientApi",{enumerable:!0,get:function get(){return _client_api.default}}),Object.defineProperty(exports,"defaultDecorateStory",{enumerable:!0,get:function get(){return _client_api.defaultDecorateStory}}),Object.defineProperty(exports,"StoryStore",{enumerable:!0,get:function get(){return _story_store.default}}),Object.defineProperty(exports,"splitPath",{enumerable:!0,get:function get(){return _story_store.splitPath}}),Object.defineProperty(exports,"ConfigApi",{enumerable:!0,get:function get(){return _config_api.default}}),Object.defineProperty(exports,"subscriptionsStore",{enumerable:!0,get:function get(){return _subscriptions_store.default}}),Object.defineProperty(exports,"pathToId",{enumerable:!0,get:function get(){return _pathToId.default}});var _client_api=_interopRequireWildcard(__webpack_require__(388)),_story_store=_interopRequireWildcard(__webpack_require__(412)),_config_api=_interopRequireDefault(__webpack_require__(423)),_subscriptions_store=_interopRequireDefault(__webpack_require__(234)),_pathToId=_interopRequireDefault(__webpack_require__(243));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,newObj}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(122),defined=__webpack_require__(106);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i))<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):b-56320+(a-55296<<10)+65536}}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(33);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(109),ITERATOR=__webpack_require__(28)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(123),ITERATOR=__webpack_require__(28)("iterator"),Iterators=__webpack_require__(109);module.exports=__webpack_require__(65).getIteratorMethod=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var getKeys=__webpack_require__(75),toIObject=__webpack_require__(76),isEnum=__webpack_require__(107).f;module.exports=function(isEntries){return function(it){for(var key,O=toIObject(it),keys=getKeys(O),length=keys.length,i=0,result=[];length>i;)isEnum.call(O,key=keys[i++])&&result.push(isEntries?[key,O[key]]:O[key]);return result}}},function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(28)("unscopables"),ArrayProto=Array.prototype;null==ArrayProto[UNSCOPABLES]&&__webpack_require__(66)(ArrayProto,UNSCOPABLES,{}),module.exports=function(key){ArrayProto[UNSCOPABLES][key]=!0}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){var $export=__webpack_require__(23),core=__webpack_require__(65),fails=__webpack_require__(38);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */module.exports=function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}},function(module,exports,__webpack_require__){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var global_1=__importDefault(__webpack_require__(49)),client_logger_1=__importDefault(__webpack_require__(91)),types_1=__webpack_require__(400);exports.types=types_1.types,exports.isSupportedType=types_1.isSupportedType;var AddonStore=function(){return function AddonStore(){var _this=this;this.loaders={},this.elements={},this.getChannel=function(){if(!_this.channel)throw new Error("Accessing non-existent addons channel, see https://storybook.js.org/basics/faq/#why-is-there-no-addons-channel");return _this.channel},this.hasChannel=function(){return!!_this.channel},this.setChannel=function(channel){_this.channel=channel},this.getElements=function(type){return _this.elements[type]||(_this.elements[type]={}),_this.elements[type]},this.addPanel=function(name,options){_this.add(name,__assign({type:types_1.types.PANEL},options))},this.add=function(name,addon){var type=addon.type;_this.getElements(type)[name]=__assign({id:name},addon)},this.register=function(name,registerCallback){_this.loaders[name]&&client_logger_1.default.warn(name+" was loaded twice, this could have bad side-effects"),_this.loaders[name]=registerCallback},this.loadAddons=function(api){Object.values(_this.loaders).forEach(function(value){return value(api)})}}}();exports.AddonStore=AddonStore;var KEY="__STORYBOOK_ADDONS";exports.addons=function getAddonsStore(){return global_1.default[KEY]||(global_1.default[KEY]=new AddonStore),global_1.default[KEY]}()},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){Object.defineProperty(exports,"__esModule",{value:!0});var generateRandomId=function(){return Math.random().toString(16).slice(2)},Channel=function(){function Channel(_a){var _b=void 0===_a?{}:_a,transport=_b.transport,_c=_b.async,async=void 0!==_c&&_c,_this=this;this.sender=generateRandomId(),this.events={},this.isAsync=async,transport&&(this.transport=transport,this.transport.setHandler(function(event){return _this.handleEvent(event)}))}return Object.defineProperty(Channel.prototype,"hasTransport",{get:function(){return!!this.transport},enumerable:!0,configurable:!0}),Channel.prototype.addListener=function(eventName,listener){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(listener)},Channel.prototype.addPeerListener=function(eventName,listener){var peerListener=listener;peerListener.ignorePeer=!0,this.addListener(eventName,peerListener)},Channel.prototype.emit=function(eventName){for(var _this=this,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var event={type:eventName,args:args,from:this.sender},handler=function(){_this.transport&&_this.transport.send(event),_this.handleEvent(event,!0)};this.isAsync?setImmediate(handler):handler()},Channel.prototype.eventNames=function(){return Object.keys(this.events)},Channel.prototype.listenerCount=function(eventName){var listeners=this.listeners(eventName);return listeners?listeners.length:0},Channel.prototype.listeners=function(eventName){var listeners=this.events[eventName];return listeners||void 0},Channel.prototype.once=function(eventName,listener){var onceListener=this.onceListener(eventName,listener);this.addListener(eventName,onceListener)},Channel.prototype.removeAllListeners=function(eventName){eventName?this.events[eventName]&&delete this.events[eventName]:this.events={}},Channel.prototype.removeListener=function(eventName,listener){var listeners=this.listeners(eventName);listeners&&(this.events[eventName]=listeners.filter(function(l){return l!==listener}))},Channel.prototype.on=function(eventName,listener){this.addListener(eventName,listener)},Channel.prototype.handleEvent=function(event,isPeer){void 0===isPeer&&(isPeer=!1);var listeners=this.listeners(event.type);listeners&&(isPeer||event.from!==this.sender)&&listeners.forEach(function(fn){return!(isPeer&&fn.ignorePeer)&&fn.apply(void 0,event.args)})},Channel.prototype.onceListener=function(eventName,listener){var _this=this,onceListener=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return _this.removeListener(eventName,onceListener),listener.apply(void 0,args)};return onceListener},Channel}();exports.Channel=Channel,exports.default=Channel}).call(this,__webpack_require__(402).setImmediate)},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function arrayToObject(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function assignSingleSource(target,source){return Object.keys(source).reduce(function(acc,key){return acc[key]=source[key],acc},target)},compact:function compact(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function compactQueue(queue){for(var obj;queue.length;){var item=queue.pop();if(obj=item.obj[item.prop],Array.isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}return obj}(queue)},decode:function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}},encode:function encode(str){if(0===str.length)return str;for(var string="string"==typeof str?str:String(str),out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function isBuffer(obj){return null!=obj&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function isRegExp(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(Array.isArray(target))target.push(source);else{if("object"!=typeof target)return[target,source];(options.plainObjects||options.allowPrototypes||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if("object"!=typeof target)return[target].concat(source);var mergeTarget=target;return Array.isArray(target)&&!Array.isArray(source)&&(mergeTarget=arrayToObject(target,options)),Array.isArray(target)&&Array.isArray(source)?(source.forEach(function(item,i){has.call(target,i)?target[i]&&"object"==typeof target[i]?target[i]=merge(target[i],item,options):target.push(item):target[i]=item}),target):Object.keys(source).reduce(function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc},mergeTarget)}}},function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g;module.exports={default:"RFC3986",formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return value}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.createSubscriptionsStore=void 0,__webpack_require__(89),__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(124),__webpack_require__(409);var createSubscriptionsStore=function createSubscriptionsStore(){var subscripions=new Map;return{register:function register(subscribe){var subscription=subscripions.get(subscribe);subscription||(subscription={unsubscribe:subscribe()},subscripions.set(subscribe,subscription)),subscription.used=!0},markAllAsUnused:function markAllAsUnused(){subscripions.forEach(function(subscription){subscription.used=!1})},clearUnused:function clearUnused(){subscripions.forEach(function(subscripion,key){subscripion.used||(subscripion.unsubscribe(),subscripions.delete(key))})}}};exports.createSubscriptionsStore=createSubscriptionsStore;var _default=createSubscriptionsStore();exports.default=_default},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(29),dP=__webpack_require__(42),DESCRIPTORS=__webpack_require__(37),SPECIES=__webpack_require__(28)("species");module.exports=function(KEY){var C=global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39);module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required!");return it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39),setPrototypeOf=__webpack_require__(238).set;module.exports=function(that,target,C){var P,S=target.constructor;return S!==C&&"function"==typeof S&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf&&setPrototypeOf(that,P),that}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39),anObject=__webpack_require__(33),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{(set=__webpack_require__(67)(Function.call,__webpack_require__(165).f(Object.prototype,"__proto__").set,2))(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function setPrototypeOf(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):void 0),check:check}},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(33),sameValue=__webpack_require__(416),regExpExec=__webpack_require__(128);__webpack_require__(129)("search",1,function(defined,SEARCH,$search,maybeCallNative){return[function search(regexp){var O=defined(this),fn=null==regexp?void 0:regexp[SEARCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},function(regexp){var res=maybeCallNative($search,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),previousLastIndex=rx.lastIndex;sameValue(previousLastIndex,0)||(rx.lastIndex=0);var result=regExpExec(rx,S);return sameValue(rx.lastIndex,previousLastIndex)||(rx.lastIndex=previousLastIndex),null===result?-1:result.index}]})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),$filter=__webpack_require__(126)(2);$export($export.P+$export.F*!__webpack_require__(88)([].filter,!0),"Array",{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){"use strict";var isRegExp=__webpack_require__(419),anObject=__webpack_require__(33),speciesConstructor=__webpack_require__(242),advanceStringIndex=__webpack_require__(183),toLength=__webpack_require__(68),callRegExpExec=__webpack_require__(128),regexpExec=__webpack_require__(182),fails=__webpack_require__(38),$min=Math.min,$push=[].push,SUPPORTS_Y=!fails(function(){RegExp(4294967295,"y")});__webpack_require__(129)("split",2,function(defined,SPLIT,$split,maybeCallNative){var internalSplit;return internalSplit="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegExp(separator))return $split.call(string,separator,limit);for(var match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,splitLimit=void 0===limit?4294967295:limit>>>0,separatorCopy=new RegExp(separator.source,flags+"g");(match=regexpExec.call(separatorCopy,string))&&!((lastIndex=separatorCopy.lastIndex)>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),match.length>1&&match.index<string.length&&$push.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output.length>splitLimit?output.slice(0,splitLimit):output}:"0".split(void 0,0).length?function(separator,limit){return void 0===separator&&0===limit?[]:$split.call(this,separator,limit)}:$split,[function split(separator,limit){var O=defined(this),splitter=null==separator?void 0:separator[SPLIT];return void 0!==splitter?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit)},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==$split);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),splitter=new C(SUPPORTS_Y?rx:"^(?:"+rx.source+")",flags),lim=void 0===limit?4294967295:limit>>>0;if(0===lim)return[];if(0===S.length)return null===callRegExpExec(splitter,S)?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=SUPPORTS_Y?q:0;var e,z=callRegExpExec(splitter,SUPPORTS_Y?S:S.slice(q));if(null===z||(e=$min(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else{if(A.push(S.slice(p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(A.push(z[i]),A.length===lim)return A;q=p=e}}return A.push(S.slice(p)),A}]})},function(module,exports,__webpack_require__){var anObject=__webpack_require__(33),aFunction=__webpack_require__(87),SPECIES=__webpack_require__(28)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function pathToId(path){var match=(path||"").match(/^\/story\/(.+)/);if(!match)throw new Error("Invalid path '".concat(path,"',  must start with '/story/'"));return match[1]},__webpack_require__(244)},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(33),toLength=__webpack_require__(68),advanceStringIndex=__webpack_require__(183),regExpExec=__webpack_require__(128);__webpack_require__(129)("match",1,function(defined,MATCH,$match,maybeCallNative){return[function match(regexp){var O=defined(this),fn=null==regexp?void 0:regexp[MATCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},function(regexp){var res=maybeCallNative($match,regexp,this);if(res.done)return res.value;var rx=anObject(regexp),S=String(this);if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;for(var result,A=[],n=0;null!==(result=regExpExec(rx,S));){var matchStr=String(result[0]);A[n]=matchStr,""===matchStr&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode)),n++}return 0===n?null:A}]})},function(module,exports,__webpack_require__){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map(function(n){return test2[n]}).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports){module.exports=function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(443),isObjectLike=__webpack_require__(132),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CYCLIC_KEY=exports.EVENT_ID=exports.PANEL_ID=exports.ADDON_ID=void 0;var ADDON_ID="storybook/actions";exports.ADDON_ID=ADDON_ID;var PANEL_ID="".concat(ADDON_ID,"/panel");exports.PANEL_ID=PANEL_ID;var EVENT_ID="".concat(ADDON_ID,"/action-event");exports.EVENT_ID=EVENT_ID;exports.CYCLIC_KEY="$___storybook.isCyclic"},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.createDecorator=void 0,__webpack_require__(78),__webpack_require__(63),__webpack_require__(90),__webpack_require__(89),__webpack_require__(244),__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(172),__webpack_require__(125);var lastSubscription,lastArgs,_global=__webpack_require__(49),_isEqual=_interopRequireDefault(__webpack_require__(453)),_addons=_interopRequireDefault(__webpack_require__(112)),_coreEvents=_interopRequireDefault(__webpack_require__(92)),_actions=_interopRequireDefault(__webpack_require__(185));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var delegateEventSplitter=/^(\S+)\s*(.*)$/,matchesMethod=null!=_global.Element&&!_global.Element.prototype.matches?"msMatchesSelector":"matches",root=_global.document&&_global.document.getElementById("root"),createHandlers=function createHandlers(actionsFn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var actionsObject=actionsFn.apply(void 0,args);return Object.entries(actionsObject).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],action=_ref2[1],_key$match2=_slicedToArray(key.match(delegateEventSplitter),3),eventName=(_key$match2[0],_key$match2[1]),selector=_key$match2[2];return{eventName:eventName,handler:function handler(e){selector&&!function hasMatchInAncestry(element,selector){if(element[matchesMethod](selector))return!0;var parent=element.parentElement;return!!parent&&hasMatchInAncestry(parent,selector)}(e.target,selector)||action(e)}}})},createDecorator=function createDecorator(actionsFn){return function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return function(storyFn){return null!=root&&_addons.default.getChannel().emit(_coreEvents.default.REGISTER_SUBSCRIPTION,function actionsSubscription(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];if(!(0,_isEqual.default)(args,lastArgs)){lastArgs=args;var handlers=createHandlers.apply(void 0,args);lastSubscription=function lastSubscription(){return handlers.forEach(function(_ref3){var eventName=_ref3.eventName,handler=_ref3.handler;return root.addEventListener(eventName,handler)}),function(){return handlers.forEach(function(_ref4){var eventName=_ref4.eventName,handler=_ref4.handler;return root.removeEventListener(eventName,handler)})}}}return lastSubscription}.apply(void 0,[actionsFn].concat(args))),storyFn()}}};exports.createDecorator=createDecorator;var _default=createDecorator(_actions.default);exports.default=_default},function(module,exports){module.exports=function eq(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(131),isObject=__webpack_require__(253),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";module.exports=function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}},function(module,exports){module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(471),mapCacheDelete=__webpack_require__(478),mapCacheGet=__webpack_require__(480),mapCacheHas=__webpack_require__(481),mapCacheSet=__webpack_require__(482);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(483),arraySome=__webpack_require__(486),cacheHas=__webpack_require__(487),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;module.exports=function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(57),stubFalse=__webpack_require__(501),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(79)(module))},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(503),baseUnary=__webpack_require__(504),nodeUtil=__webpack_require__(505),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;module.exports=function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(67),invoke=__webpack_require__(518),html=__webpack_require__(217),cel=__webpack_require__(158),global=__webpack_require__(29),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function setImmediate(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function clearImmediate(id){delete queue[id]},"process"==__webpack_require__(77)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(ctx(run,id,1))}:MessageChannel?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(87);function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)}module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var shared,worker,mapboxgl;function define(_,chunk){if(shared)if(worker){var workerBundleString="var sharedChunk = {}; ("+shared+")(sharedChunk); ("+worker+")(sharedChunk);",sharedChunk={};shared(sharedChunk),(mapboxgl=chunk(sharedChunk)).workerUrl=window.URL.createObjectURL(new Blob([workerBundleString],{type:"text/javascript"}))}else worker=chunk;else shared=chunk}return define(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=n;function n(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,n,i,a,o;for(void 0===e&&(e=1e-6),i=t,o=0;o<8;o++){if(a=this.sampleCurveX(i)-t,Math.abs(a)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-t)<e)return i;t>a?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=a;function a(t,e){this.x=t,this.y=e}function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!o(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!o(t[n],e[n]))return!1;return!0}return t===e}function s(t,e,n,i){var a=new r(t,e,n,i);return function(t){return a.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),a=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var u=s(.25,.1,.25,1);function l(t,e,r){return Math.min(r,Math.max(e,t))}function p(t,e,r){var n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function c(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}var h=1;function f(){return h++}function y(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function v(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,r){var n={};for(var i in t)n[i]=e.call(r||this,t[i],i,t);return n}function x(t,e,r){var n={};for(var i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?g(t,b):t}var _={};function w(t){_[t]||("undefined"!=typeof console&&console.warn(t),_[t]=!0)}function A(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function S(t){for(var e=0,r=0,n=t.length,i=n-1,a=void 0,o=void 0;r<n;i=r++)a=t[r],e+=((o=t[i]).x-a.x)*(a.y+o.y);return e}function k(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var z,I,B=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),E=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,P=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,V={now:B,frame:function(t){var e=E(t);return{cancel:function(){return P(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},C={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},M={supported:!1,testSupport:function(t){!T&&I&&(F?L(t):z=t)}},T=!1,F=!1;function L(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,I),t.isContextLost())return;M.supported=!0}catch(t){}t.deleteTexture(e),T=!0}self.document&&((I=self.document.createElement("img")).onload=function(){z&&L(z),z=null,F=!0},I.onerror=function(){T=!0,z=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var O="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function D(t,e){var r=X(C.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!C.REQUIRE_ACCESS_TOKEN)return Z(t);if(!(e=e||C.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+O);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+O);return t.params.push("access_token="+e),Z(t)}function U(t){return 0===t.indexOf("mapbox:")}var j=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function R(t){return j.test(t)}var q=/(\.(png|jpg)\d*)(?=$)/,N=/\.[\w]+$/,K=function(t){var e=X(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(N))return t;var r="mapbox://tiles/";r+=e.path.replace("/v4/","");var n=e.params.filter(function(t){return!t.match(/^access_token=/)});return n.length&&(r+="?"+n.join("&")),r},G=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function X(t){var e=t.match(G);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Z(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function H(t){if(!t)return null;var e,r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((e=r[1],decodeURIComponent(self.atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(t){return null}}var Y=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Y.prototype.getStorageKey=function(t){var e,r=H(C.ACCESS_TOKEN),n="";return r&&r.u?(e=r.u,n=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))):n=C.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+n:"mapbox.eventData:"+n},Y.prototype.fetchEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var i=self.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){w("Unable to read from LocalStorage")}},Y.prototype.saveEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Y.prototype.processRequests=function(){},Y.prototype.postEvent=function(t,e,r){var n=this;if(C.EVENTS_URL){var i=X(C.EVENTS_URL);i.params.push("access_token="+(C.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.1",userId:this.anonId},o=e?c(a,e):a,s={url:Z(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=st(s,function(t){n.pendingRequest=null,r(t),n.saveEventData(),n.processRequests()})}},Y.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var J=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e){C.EVENTS_URL&&C.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return U(t)||R(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),r=e.id,n=e.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(n,{},function(e){e||r&&(t.success[r]=!0)}))}},e}(Y),$=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t){C.EVENTS_URL&&C.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return U(t)||R(t)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=H(C.ACCESS_TOKEN),r=e?e.u:C.ACCESS_TOKEN,n=r!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),n=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),o=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;n=n||s>=1||s<-1||a.getDate()!==o.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=r)})}},e}(Y)),W=$.postTurnstileEvent.bind($),Q=new J,tt=Q.postMapLoadEvent.bind(Q),et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(et);var rt=function(t){function e(e,r,n){401===r&&R(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function nt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var ut,lt,it=nt()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname},at=function(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController)return function(t,e){var r=new self.AbortController,n=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:it(),signal:r.signal});return"json"===t.type&&n.headers.set("Accept","application/json"),self.fetch(n).then(function(r){r.ok?r[t.type||"text"]().then(function(t){e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires"))}).catch(function(t){return e(new Error(t.message))}):e(new rt(r.statusText,r.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))}),{cancel:function(){return r.abort()}}}(t,e);if(nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}return function(t,e){var r=new self.XMLHttpRequest;for(var n in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(n,t.headers[n]);return"json"===t.type&&r.setRequestHeader("Accept","application/json"),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var n=r.response;if("json"===t.type)try{n=JSON.parse(r.response)}catch(t){return e(t)}e(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new rt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},ot=function(t,e){return at(c(t,{type:"arrayBuffer"}),e)},st=function(t,e){return at(c(t,{method:"POST"}),e)};ut=[],lt=0;var pt=function(t,e){if(lt>=C.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return ut.push(r),r}lt++;var n=!1,i=function(){if(!n)for(n=!0,lt--;ut.length&&lt<C.MAX_PARALLEL_IMAGE_REQUESTS;){var t=ut.shift(),e=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=pt(e,r).cancel)}},a=ot(t,function(t,r,n,a){if(i(),t)e(t);else if(r){var o=new self.Image,s=self.URL||self.webkitURL;o.onload=function(){e(null,o),s.revokeObjectURL(o.src)},o.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new self.Blob([new Uint8Array(r)],{type:"image/png"});o.cacheControl=n,o.expires=a,o.src=r.byteLength?s.createObjectURL(u):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){a.cancel(),i()}}};function ct(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function ht(t,e,r){if(r&&r[t]){var n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}var ft=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},yt=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",c({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ft),dt=function(){};dt.prototype.on=function(t,e){return this._listeners=this._listeners||{},ct(t,e,this._listeners),this},dt.prototype.off=function(t,e){return ht(t,e,this._listeners),ht(t,e,this._oneTimeListeners),this},dt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},ct(t,e,this._oneTimeListeners),this},dt.prototype.fire=function(t,e){"string"==typeof t&&(t=new ft(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var n=0,i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];n<i.length;n+=1)i[n].call(this,t);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];a<o.length;a+=1){var s=o[a];ht(r,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof yt&&console.error(t.error);return this},dt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},dt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},vt=function(t,e,r,n){this.message=(t?t+": ":"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function gt(t){var e=t.key,r=t.value;return r?[new vt(e,r,"constants have been deprecated as of v8")]:[]}function xt(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var n=0,i=e;n<i.length;n+=1){var a=i[n];for(var o in a)t[o]=a[o]}return t}function bt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function _t(t){return Array.isArray(t)?t.map(_t):bt(t)}var wt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),At=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i[0],o=i[1];this.bindings[a]=o}};At.prototype.concat=function(t){return new At(this,t)},At.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},At.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var St={kind:"null"},kt={kind:"number"},zt={kind:"string"},It={kind:"boolean"},Bt={kind:"color"},Et={kind:"object"},Pt={kind:"value"},Vt={kind:"collator"},Ct={kind:"formatted"};function Mt(t,e){return{kind:"array",itemType:t,N:e}}function Tt(t){if("array"===t.kind){var e=Tt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Ft=[St,kt,zt,It,Bt,Ct,Et,Mt(Pt)];function Lt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Lt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=Ft;r<n.length;r+=1)if(!Lt(n[r],e))return null}return"Expected "+Tt(t)+" but found "+Tt(e)+" instead."}var Ot=e(function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function a(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var p=i.substr(0,u),c=i.substr(u+1,l-(u+1)).split(","),h=1;switch(p){case"rgba":if(4!==c.length)return null;h=o(c.pop());case"rgb":return 3!==c.length?null:[a(c[0]),a(c[1]),a(c[2]),h];case"hsla":if(4!==c.length)return null;h=o(c.pop());case"hsl":if(3!==c.length)return null;var f=(parseFloat(c[0])%360+360)%360/360,y=o(c[1]),d=o(c[2]),m=d<=.5?d*(y+1):d+y-d*y,v=2*d-m;return[n(255*s(v,m,f+1/3)),n(255*s(v,m,f)),n(255*s(v,m,f-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Dt=function(t,e,r,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n};Dt.parse=function(t){if(t){if(t instanceof Dt)return t;if("string"==typeof t){var e=Ot(t);if(e)return new Dt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Dt.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(n)+","+i+")"},Dt.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]},Dt.black=new Dt(0,0,0,1),Dt.white=new Dt(1,1,1,1),Dt.transparent=new Dt(0,0,0,0),Dt.red=new Dt(1,0,0,1);var Ut=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ut.prototype.compare=function(t,e){return this.collator.compare(t,e)},Ut.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var jt=function(t,e,r){this.text=t,this.scale=e,this.fontStack=r},Rt=function(t){this.sections=t};function qt(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Nt(t){if(null===t)return St;if("string"==typeof t)return zt;if("boolean"==typeof t)return It;if("number"==typeof t)return kt;if(t instanceof Dt)return Bt;if(t instanceof Ut)return Vt;if(t instanceof Rt)return Ct;if(Array.isArray(t)){for(var e,r=t.length,n=0,i=t;n<i.length;n+=1){var a=Nt(i[n]);if(e){if(e===a)continue;e=Pt;break}e=a}return Mt(e||Pt,r)}return Et}function Kt(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Dt||t instanceof Rt?t.toString():JSON.stringify(t)}Rt.fromString=function(t){return new Rt([new jt(t,null,null)])},Rt.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},Rt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),t.push(i)}return t};var Gt=function(t,e){this.type=t,this.value=e};Gt.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Dt)return!0;if(e instanceof Ut)return!0;if(e instanceof Rt)return!0;if(Array.isArray(e)){for(var r=0,n=e;r<n.length;r+=1)if(!t(n[r]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var r=t[1],n=Nt(r),i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Gt(n,r)},Gt.prototype.evaluate=function(){return this.value},Gt.prototype.eachChild=function(){},Gt.prototype.possibleOutputs=function(){return[this.value]},Gt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Dt?["rgba"].concat(this.value.toArray()):this.value instanceof Rt?this.value.serialize():this.value};var Xt=function(t){this.name="ExpressionEvaluationError",this.message=t};Xt.prototype.toJSON=function(){return this.message};var Zt={string:zt,number:kt,boolean:It,object:Et},Ht=function(t,e){this.type=t,this.args=e};Ht.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,n=1,i=t[0];if("array"===i){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Zt)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=Zt[s],n++}else a=Pt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=Mt(a,o)}else r=Zt[i];for(var u=[];n<t.length;n++){var l=e.parse(t[n],n,Pt);if(!l)return null;u.push(l)}return new Ht(r,u)},Ht.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Lt(this.type,Nt(r)))return r;if(e===this.args.length-1)throw new Xt("Expected value to be of type "+Tt(this.type)+", but found "+Tt(Nt(r))+" instead.")}return null},Ht.prototype.eachChild=function(t){this.args.forEach(t)},Ht.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Ht.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Yt=function(t){this.type=Ct,this.sections=t};Yt.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var r=[],n=1;n<t.length-1;n+=2){var i=e.parse(t[n],1,Pt);if(!i)return null;var a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var o=t[n+1];if("object"!=typeof o||Array.isArray(o))return e.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,kt)))return null;var u=null;if(o["text-font"]&&!(u=e.parse(o["text-font"],1,Mt(zt))))return null;r.push({text:i,scale:s,font:u})}return new Yt(r)},Yt.prototype.evaluate=function(t){return new Rt(this.sections.map(function(e){return new jt(Kt(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},Yt.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t(n.text),n.scale&&t(n.scale),n.font&&t(n.font)}},Yt.prototype.possibleOutputs=function(){return[void 0]},Yt.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var n=r[e];t.push(n.text.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),t.push(i)}return t};var Jt={"to-boolean":It,"to-color":Bt,"to-number":kt,"to-string":zt},$t=function(t,e){this.type=t,this.args=e};$t.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var n=Jt[r],i=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,Pt);if(!o)return null;i.push(o)}return new $t(n,i)},$t.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(e=i[n].evaluate(t))instanceof Dt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":qt(e[0],e[1],e[2],e[3])))return new Dt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Xt(r||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(t)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new Xt("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?Rt.fromString(Kt(this.args[0].evaluate(t))):Kt(this.args[0].evaluate(t))},$t.prototype.eachChild=function(t){this.args.forEach(t)},$t.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},$t.prototype.serialize=function(){if("formatted"===this.type.kind)return new Yt([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Wt=["Unknown","Point","LineString","Polygon"],Qt=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};Qt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Qt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Wt[this.feature.type]:this.feature.type:null},Qt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Qt.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Dt.parse(t)),e};var te=function(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n};te.prototype.evaluate=function(t){return this._evaluate(t,this.args)},te.prototype.eachChild=function(t){this.args.forEach(t)},te.prototype.possibleOutputs=function(){return[void 0]},te.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},te.parse=function(t,e){var r,n=t[0],i=te.definitions[n];if(!i)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter(function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}),u=null,l=0,p=s;l<p.length;l+=1){var c=p[l],h=c[0],f=c[1];u=new oe(e.registry,e.path,null,e.scope);for(var y=[],d=!1,m=1;m<t.length;m++){var v=t[m],g=Array.isArray(h)?h[m-1]:h.type,x=u.parse(v,1+y.length,g);if(!x){d=!0;break}y.push(x)}if(!d)if(Array.isArray(h)&&h.length!==y.length)u.error("Expected "+h.length+" arguments, but found "+y.length+" instead.");else{for(var b=0;b<y.length;b++){var _=Array.isArray(h)?h[b]:h.type,w=y[b];u.concat(b+1).checkSubtype(_,w.type)}if(0===u.errors.length)return new te(n,a,f,y)}}if(1===s.length)(r=e.errors).push.apply(r,u.errors);else{for(var A=(s.length?s:o).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Tt).join(", ")+")":"("+Tt(e.type)+"...)"}).join(" | "),S=[],k=1;k<t.length;k++){var z=e.parse(t[k],1+S.length);if(!z)return null;S.push(Tt(z.type))}e.error("Expected arguments of type "+A+", but found ("+S.join(", ")+") instead.")}return null},te.register=function(t,e){for(var r in te.definitions=e,e)t[r]=te};var ee=function(t,e,r){this.type=Vt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function re(t){if(t instanceof te){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!re(t)&&(e=!1)}),e}function ne(t){if(t instanceof te&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!ne(t)&&(e=!1)}),e}function ie(t,e){if(t instanceof te&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(t){r&&!ie(t,e)&&(r=!1)}),r}ee.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,It);if(!n)return null;var i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,It);if(!i)return null;var a=null;return r.locale&&!(a=e.parse(r.locale,1,zt))?null:new ee(n,i,a)},ee.prototype.evaluate=function(t){return new Ut(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ee.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ee.prototype.possibleOutputs=function(){return[void 0]},ee.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ae=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ae.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new ae(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},ae.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ae.prototype.eachChild=function(){},ae.prototype.possibleOutputs=function(){return[void 0]},ae.prototype.serialize=function(){return["var",this.name]};var oe=function(t,e,r,n,i){void 0===e&&(e=[]),void 0===n&&(n=new At),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=i,this.expectedType=r};function se(t,e){for(var r,n,i=0,a=t.length-1,o=0;i<=a;){if(r=t[o=Math.floor((i+a)/2)],n=t[o+1],e===r||e>r&&e<n)return o;if(r<e)i=o+1;else{if(!(r>e))throw new Xt("Input is not a number.");a=o-1}}return Math.max(o-1,0)}oe.prototype.parse=function(t,e,r,n,i){return void 0===i&&(i={}),e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)},oe.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new Ht(e,[t]):"coerce"===r?new $t(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var a=i.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,e.typeAnnotation||"coerce");else a=r(a,o,e.typeAnnotation||"assert")}if(!(a instanceof Gt)&&function t(e){if(e instanceof ae)return t(e.boundExpression);if(e instanceof te&&"error"===e.name)return!1;if(e instanceof ee)return!1;var r=e instanceof $t||e instanceof Ht,n=!0;return e.eachChild(function(e){n=r?n&&t(e):n&&e instanceof Gt}),!!n&&re(e)&&ie(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var u=new Qt;try{a=new Gt(a.type,a.evaluate(u))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},oe.prototype.concat=function(t,e,r){var n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new oe(this.registry,n,e||null,i,this.errors)},oe.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new wt(n,t))},oe.prototype.checkSubtype=function(t,e){var r=Lt(t,e);return r&&this.error(r),r};var ue=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};function le(t,e,r){return t*(1-r)+e*r}ue.parse=function(t,e){var r=t[1],n=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,1,kt)))return null;var i=[],a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType),n.unshift(-1/0);for(var o=0;o<n.length;o+=2){var s=n[o],u=n[o+1],l=o+1,p=o+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(u,p,a);if(!c)return null;a=a||c.type,i.push([s,c])}return new ue(a,r,i)},ue.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[se(e,n)].evaluate(t)},ue.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},ue.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},ue.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var pe=Object.freeze({number:le,color:function(t,e,r){return new Dt(le(t.r,e.r,r),le(t.g,e.g,r),le(t.b,e.b,r),le(t.a,e.a,r))},array:function(t,e,r){return t.map(function(t,n){return le(t,e[n],r)})}}),ce=.95047,he=1,fe=1.08883,ye=4/29,de=6/29,me=3*de*de,ve=de*de*de,ge=Math.PI/180,xe=180/Math.PI;function be(t){return t>ve?Math.pow(t,1/3):t/me+ye}function _e(t){return t>de?t*t*t:me*(t-ye)}function we(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ae(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Se(t){var e=Ae(t.r),r=Ae(t.g),n=Ae(t.b),i=be((.4124564*e+.3575761*r+.1804375*n)/ce),a=be((.2126729*e+.7151522*r+.072175*n)/he);return{l:116*a-16,a:500*(i-a),b:200*(a-be((.0193339*e+.119192*r+.9503041*n)/fe)),alpha:t.a}}function ke(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=he*_e(e),r=ce*_e(r),n=fe*_e(n),new Dt(we(3.2404542*r-1.5371385*e-.4985314*n),we(-.969266*r+1.8760108*e+.041556*n),we(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function ze(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var Ie={forward:Se,reverse:ke,interpolate:function(t,e,r){return{l:le(t.l,e.l,r),a:le(t.a,e.a,r),b:le(t.b,e.b,r),alpha:le(t.alpha,e.alpha,r)}}},Be={forward:function(t){var e=Se(t),r=e.l,n=e.a,i=e.b,a=Math.atan2(i,n)*xe;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},reverse:function(t){var e=t.h*ge,r=t.c;return ke({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:ze(t.h,e.h,r),c:le(t.c,e.c,r),l:le(t.l,e.l,r),alpha:le(t.alpha,e.alpha,r)}}},Ee=Object.freeze({lab:Ie,hcl:Be}),Pe=function(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0,o=i;a<o.length;a+=1){var s=o[a],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Ve(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}Pe.interpolationFactor=function(t,e,n,i){var a=0;if("exponential"===t.name)a=Ve(e,t.base,n,i);else if("linear"===t.name)a=Ve(e,1,n,i);else if("cubic-bezier"===t.name){var o=t.controlPoints;a=new r(o[0],o[1],o[2],o[3]).solve(Ve(e,1,n,i))}return a},Pe.parse=function(t,e){var r=t[0],n=t[1],i=t[2],a=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,kt)))return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=Bt:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var p=0;p<a.length;p+=2){var c=a[p],h=a[p+1],f=p+3,y=p+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var d=e.parse(h,y,l);if(!d)return null;l=l||d.type,u.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Pe(l,r,n,i,u):e.error("Type "+Tt(l)+" is not interpolatable.")},Pe.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);var a=se(e,n),o=e[a],s=e[a+1],u=Pe.interpolationFactor(this.interpolation,n,o,s),l=r[a].evaluate(t),p=r[a+1].evaluate(t);return"interpolate"===this.operator?pe[this.type.kind.toLowerCase()](l,p,u):"interpolate-hcl"===this.operator?Be.reverse(Be.interpolate(Be.forward(l),Be.forward(p),u)):Ie.reverse(Ie.interpolate(Ie.forward(l),Ie.forward(p),u))},Pe.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},Pe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Pe.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Ce=function(t,e){this.type=t,this.args=e};Ce.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,n=e.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=o[a],u=e.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,i.push(u)}var l=n&&i.some(function(t){return Lt(n,t.type)});return new Ce(l?Pt:r,i)},Ce.prototype.evaluate=function(t){for(var e=null,r=0,n=this.args;r<n.length&&null===(e=n[r].evaluate(t));r+=1);return e},Ce.prototype.eachChild=function(t){this.args.forEach(t)},Ce.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Ce.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Me=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Me.prototype.evaluate=function(t){return this.result.evaluate(t)},Me.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},Me.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],n=1;n<t.length-1;n+=2){var i=t[n];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;r.push([i,a])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return o?new Me(r,o):null},Me.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Me.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t.push(i,a.serialize())}return t.push(this.result.serialize()),t};var Te=function(t,e,r){this.type=t,this.index=e,this.input=r};Te.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,kt),n=e.parse(t[2],2,Mt(e.expectedType||Pt));if(!r||!n)return null;var i=n.type;return new Te(i.itemType,r,n)},Te.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Xt("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new Xt("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new Xt("Array index must be an integer, but found "+e+" instead.");return r[e]},Te.prototype.eachChild=function(t){t(this.index),t(this.input)},Te.prototype.possibleOutputs=function(){return[void 0]},Te.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Fe=function(t,e,r,n,i,a){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a};Fe.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],u=t[o+1];Array.isArray(s)||(s=[s]);var l=e.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,c=s;p<c.length;p+=1){var h=c[p];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,Nt(h)))return null}else r=Nt(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=a.length}var f=e.parse(u,o,n);if(!f)return null;n=n||f.type,a.push(f)}var y=e.parse(t[1],1,Pt);if(!y)return null;var d=e.parse(t[t.length-1],t.length-1,n);return d?"value"!==y.type.kind&&e.concat(1).checkSubtype(r,y.type)?null:new Fe(r,n,y,i,a,d):null},Fe.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(Nt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Fe.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Fe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Fe.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i];void 0===(c=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[c][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=r;u<l.length;u+=1){var p=l[u],c=p[0],h=p[1];1===h.length?e.push(s(h[0])):e.push(h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Le=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};function Oe(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function De(t,e,r,n){return 0===n.compare(e,r)}function Ue(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){this.type=It,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],a=e.parse(t[1],1,Pt);if(!a)return null;if(!Oe(r,a.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Tt(a.type)+"'.");var o=e.parse(t[2],2,Pt);if(!o)return null;if(!Oe(r,o.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Tt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+Tt(a.type)+"' and '"+Tt(o.type)+"'.");n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Ht(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Ht(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Vt)))return null}return new i(a,o,s)},i.prototype.evaluate=function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=Nt(a),u=Nt(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Xt('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=Nt(a),p=Nt(o);if("string"!==l.kind||"string"!==p.kind)return e(i,a,o)}return this.collator?r(i,a,o,this.collator.evaluate(i)):e(i,a,o)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}Le.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n=[],i=1;i<t.length-1;i+=2){var a=e.parse(t[i],i,It);if(!a)return null;var o=e.parse(t[i+1],i+1,r);if(!o)return null;n.push([a,o]),r=r||o.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new Le(r,n,s):null},Le.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];if(i.evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},Le.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var n=r[e],i=n[0],a=n[1];t(i),t(a)}t(this.otherwise)},Le.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Le.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var je=Ue("==",function(t,e,r){return e===r},De),Re=Ue("!=",function(t,e,r){return e!==r},function(t,e,r,n){return!De(0,e,r,n)}),qe=Ue("<",function(t,e,r){return e<r},function(t,e,r,n){return n.compare(e,r)<0}),Ne=Ue(">",function(t,e,r){return e>r},function(t,e,r,n){return n.compare(e,r)>0}),Ke=Ue("<=",function(t,e,r){return e<=r},function(t,e,r,n){return n.compare(e,r)<=0}),Ge=Ue(">=",function(t,e,r){return e>=r},function(t,e,r,n){return n.compare(e,r)>=0}),Xe=function(t,e,r,n,i){this.type=zt,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i};Xe.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,kt);if(!r)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var i=null;if(n.locale&&!(i=e.parse(n.locale,1,zt)))return null;var a=null;if(n.currency&&!(a=e.parse(n.currency,1,zt)))return null;var o=null;if(n["min-fraction-digits"]&&!(o=e.parse(n["min-fraction-digits"],1,kt)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,kt))?null:new Xe(r,i,a,o,s)},Xe.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Xe.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Xe.prototype.possibleOutputs=function(){return[void 0]},Xe.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ze=function(t){this.type=kt,this.input=t};Ze.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Tt(r.type)+" instead."):new Ze(r):null},Ze.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Xt("Expected value to be of type string or array, but found "+Tt(Nt(e))+" instead.")},Ze.prototype.eachChild=function(t){t(this.input)},Ze.prototype.possibleOutputs=function(){return[void 0]},Ze.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var He={"==":je,"!=":Re,">":Ne,"<":qe,">=":Ge,"<=":Ke,array:Ht,at:Te,boolean:Ht,case:Le,coalesce:Ce,collator:ee,format:Yt,interpolate:Pe,"interpolate-hcl":Pe,"interpolate-lab":Pe,length:Ze,let:Me,literal:Gt,match:Fe,number:Ht,"number-format":Xe,object:Ht,step:ue,string:Ht,"to-boolean":$t,"to-color":$t,"to-number":$t,"to-string":$t,var:ae};function Ye(t,e){var r=e[0],n=e[1],i=e[2],a=e[3];r=r.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);var o=a?a.evaluate(t):1,s=qt(r,n,i,o);if(s)throw new Xt(s);return new Dt(r/255*o,n/255*o,i/255*o,o)}function Je(t,e){return t in e}function $e(t,e){var r=e[t];return void 0===r?null:r}function We(t){return{type:t}}function Qe(t){return{result:"success",value:t}}function tr(t){return{result:"error",value:t}}function er(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function rr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function nr(t){return!!t.expression&&t.expression.interpolated}function ir(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ar(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function or(t){return t}function sr(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function ur(t,e,r,n,i){return sr(typeof r===i?n[r]:void 0,t.default,e.default)}function lr(t,e,r){if("number"!==ir(r))return sr(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var i=hr(t.stops,r);return t.stops[i][1]}function pr(t,e,r){var n=void 0!==t.base?t.base:1;if("number"!==ir(r))return sr(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var a=hr(t.stops,r),o=function(t,e,r,n){var i=n-r,a=t-r;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],u=t.stops[a+1][1],l=pe[e.type]||or;if(t.colorSpace&&"rgb"!==t.colorSpace){var p=Ee[t.colorSpace];l=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),n=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return l(r,n,o)}}:l(s,u,o)}function cr(t,e,r){return"color"===e.type?r=Dt.parse(r):"formatted"===e.type?r=Rt.fromString(r.toString()):ir(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),sr(r,t.default,e.default)}function hr(t,e){for(var r,n,i=0,a=t.length-1,o=0;i<=a;){if(r=t[o=Math.floor((i+a)/2)][0],n=t[o+1][0],e===r||e>r&&e<n)return o;r<e?i=o+1:r>e&&(a=o-1)}return Math.max(o-1,0)}te.register(He,{error:[{kind:"error"},[zt],function(t,e){var r=e[0];throw new Xt(r.evaluate(t))}],typeof:[zt,[Pt],function(t,e){return Tt(Nt(e[0].evaluate(t)))}],"to-rgba":[Mt(kt,4),[Bt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Bt,[kt,kt,kt],Ye],rgba:[Bt,[kt,kt,kt,kt],Ye],has:{type:It,overloads:[[[zt],function(t,e){return Je(e[0].evaluate(t),t.properties())}],[[zt,Et],function(t,e){var r=e[0],n=e[1];return Je(r.evaluate(t),n.evaluate(t))}]]},get:{type:Pt,overloads:[[[zt],function(t,e){return $e(e[0].evaluate(t),t.properties())}],[[zt,Et],function(t,e){var r=e[0],n=e[1];return $e(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[Pt,[zt],function(t,e){return $e(e[0].evaluate(t),t.featureState||{})}],properties:[Et,[],function(t){return t.properties()}],"geometry-type":[zt,[],function(t){return t.geometryType()}],id:[Pt,[],function(t){return t.id()}],zoom:[kt,[],function(t){return t.globals.zoom}],"heatmap-density":[kt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[kt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Pt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[kt,We(kt),function(t,e){for(var r=0,n=0,i=e;n<i.length;n+=1)r+=i[n].evaluate(t);return r}],"*":[kt,We(kt),function(t,e){for(var r=1,n=0,i=e;n<i.length;n+=1)r*=i[n].evaluate(t);return r}],"-":{type:kt,overloads:[[[kt,kt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[kt],function(t,e){return-e[0].evaluate(t)}]]},"/":[kt,[kt,kt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[kt,[kt,kt],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[kt,[],function(){return Math.LN2}],pi:[kt,[],function(){return Math.PI}],e:[kt,[],function(){return Math.E}],"^":[kt,[kt,kt],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[kt,[kt],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[kt,[kt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[kt,[kt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[kt,[kt],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[kt,[kt],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[kt,[kt],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[kt,[kt],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[kt,[kt],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[kt,[kt],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[kt,[kt],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[kt,We(kt),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[kt,We(kt),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[kt,[kt],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[kt,[kt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[kt,[kt],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[kt,[kt],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[It,[Pt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[It,[zt],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[It,[zt,Pt],function(t,e){var r=e[0],n=e[1],i=t.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[It,[Pt],function(t,e){var r=e[0],n=t.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[It,[Pt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[It,[],function(t){return null!==t.id()}],"filter-type-in":[It,[Mt(zt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[It,[Mt(Pt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[It,[zt,Mt(Pt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[It,[zt,Mt(Pt)],function(t,e){var r=e[0],n=e[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:It,overloads:[[[It,It],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[We(It),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(!n[r].evaluate(t))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[We(It),function(t,e){for(var r=0,n=e;r<n.length;r+=1)if(n[r].evaluate(t))return!0;return!1}]]},"!":[It,[It],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[It,[zt],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[zt,We(Pt),function(t,e){return e.map(function(e){return Kt(e.evaluate(t))}).join("")}],"resolved-locale":[zt,[Vt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var fr=function(t,e){var r;this.expression=t,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=e?"color"===(r=e).type&&ar(r.default)?new Dt(0,0,0,0):"color"===r.type?Dt.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function yr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in He}function dr(t,e){var r=new oe(He,[],e?function(t){var e={color:Bt,string:zt,number:kt,enum:zt,boolean:It,formatted:Ct};return"array"===t.type?Mt(e[t.value]||Pt,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Qe(new fr(n,e)):tr(r.errors)}fr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},fr.prototype.evaluate=function(t,e,r){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new Xt("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var mr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ne(e.expression)};mr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},mr.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)};var vr=function(t,e,r){this.kind=t,this.zoomStops=r.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ne(e.expression),r instanceof Pe&&(this._interpolationType=r.interpolation)};function gr(t,e){if("error"===(t=dr(t,e)).result)return t;var r=t.value.expression,n=re(r);if(!n&&!er(e))return tr([new wt("","data expressions not supported")]);var i=ie(r,["zoom"]);if(!i&&!rr(e))return tr([new wt("","zoom expressions not supported")]);var a=function t(e){var r=null;if(e instanceof Me)r=t(e.result);else if(e instanceof Ce)for(var n=0,i=e.args;n<i.length;n+=1){var a=i[n];if(r=t(a))break}else(e instanceof ue||e instanceof Pe)&&e.input instanceof te&&"zoom"===e.input.name&&(r=e);return r instanceof wt?r:(e.eachChild(function(e){var n=t(e);n instanceof wt?r=n:!r&&n?r=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&n&&r!==n&&(r=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r)}(r);return a||i?a instanceof wt?tr([a]):a instanceof Pe&&!nr(e)?tr([new wt("",'"interpolate" expressions cannot be used with this property')]):Qe(a?new vr(n?"camera":"composite",t.value,a):new mr(n?"constant":"source",t.value)):tr([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vr.prototype.evaluateWithoutErrorHandling=function(t,e,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r)},vr.prototype.evaluate=function(t,e,r){return this._styleExpression.evaluate(t,e,r)},vr.prototype.interpolationFactor=function(t,e,r){return this._interpolationType?Pe.interpolationFactor(this._interpolationType,t,e,r):0};var xr=function(t,e){this._parameters=t,this._specification=e,xt(this,function t(e,r){var n,i,a,o="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,p=e.type||(nr(r)?"exponential":"interval");if(o&&((e=xt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Dt.parse(t[1])]})),e.default?e.default=Dt.parse(e.default):e.default=Dt.parse(r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Ee[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===p)n=pr;else if("interval"===p)n=lr;else if("categorical"===p){n=ur,i=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var f=h[c];i[f[0]]=f[1]}a=typeof e.stops[0][0]}else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');n=cr}if(s){for(var y={},d=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===y[g]&&(y[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},d.push(g)),y[g].stops.push([v[0].value,v[1]])}for(var x=[],b=0,_=d;b<_.length;b+=1){var w=_[b];x.push([y[w].zoom,t(y[w],r)])}return{kind:"composite",interpolationFactor:Pe.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:x.map(function(t){return t[0]}),evaluate:function(t,n){var i=t.zoom;return pr({stops:x,base:e.base},r,i).evaluate(i,n)}}}return l?{kind:"camera",interpolationFactor:"exponential"===p?Pe.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var o=t.zoom;return n(e,r,o,i,a)}}:{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?sr(e.default,r.default):n(e,r,s,i,a)}}}(this._parameters,this._specification))};function br(t,e){if(ar(t))return new xr(t,e);if(yr(t)){var r=gr(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=Dt.parse(t)),{kind:"constant",evaluate:function(){return n}}}function _r(t){var e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],u=ir(r);if("object"!==u)return[new vt(e,r,"object expected, "+u+" found")];for(var l in r){var p=l.split(".")[0],c=n[p]||n["*"],h=void 0;if(i[p])h=i[p];else if(n[p])h=Gr;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new vt(e,r[l],'unknown property "'+l+'"'));continue}h=Gr}s=s.concat(h({key:(e?e+".":e)+l,value:r[l],valueSpec:c,style:a,styleSpec:o,object:r,objectKey:l},r))}for(var f in n)i[f]||n[f].required&&void 0===n[f].default&&void 0===r[f]&&s.push(new vt(e,r,'missing required property "'+f+'"'));return s}function wr(t){var e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||Gr;if("array"!==ir(e))return[new vt(a,e,"array expected, "+ir(e)+" found")];if(r.length&&e.length!==r.length)return[new vt(a,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new vt(a,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value};i.$version<7&&(s.function=r.function),"object"===ir(r.value)&&(s=r.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(o({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:n,styleSpec:i,key:a+"["+l+"]"}));return u}function Ar(t){var e=t.key,r=t.value,n=t.valueSpec,i=ir(r);return"number"!==i?[new vt(e,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new vt(e,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new vt(e,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Sr(t){var e,r,n,i=t.valueSpec,a=bt(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,u=!s,l="array"===ir(t.value.stops)&&"array"===ir(t.value.stops[0])&&"object"===ir(t.value.stops[0][0]),p=_r({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new vt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(wr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===ir(r)&&0===r.length&&e.push(new vt(t.key,r,"array must have at least one stop")),e},default:function(t){return Gr({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&p.push(new vt(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||p.push(new vt(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!nr(t.valueSpec)&&p.push(new vt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!er(t.valueSpec)?p.push(new vt(t.key,t.value,"property functions not supported")):s&&!rr(t.valueSpec)&&p.push(new vt(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==t.value.property||p.push(new vt(t.key,t.value,'"property" property is required')),p;function c(t){var e=[],a=t.value,s=t.key;if("array"!==ir(a))return[new vt(s,a,"array expected, "+ir(a)+" found")];if(2!==a.length)return[new vt(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==ir(a[0]))return[new vt(s,a,"object expected, "+ir(a[0])+" found")];if(void 0===a[0].zoom)return[new vt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new vt(s,a,"object stop key must have value")];if(n&&n>bt(a[0].zoom))return[new vt(s,a[0].zoom,"stop zoom values must appear in ascending order")];bt(a[0].zoom)!==n&&(n=bt(a[0].zoom),r=void 0,o={}),e=e.concat(_r({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ar,value:h}}))}else e=e.concat(h({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return yr(_t(a[1]))?e.concat([new vt(s+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(Gr({key:s+"[1]",value:a[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=ir(t.value),u=bt(t.value),l=null!==t.value?t.value:n;if(e){if(s!==e)return[new vt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new vt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var p="number expected, "+s+" found";return er(i)&&void 0===a&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(t.key,l,p)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==r&&u<r?[new vt(t.key,l,"stop domain values must appear in ascending order")]:(r=u,"categorical"===a&&u in o?[new vt(t.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new vt(t.key,l,"integer expected, found "+u)]}}function kr(t){var e=("property"===t.expressionContext?gr:dr)(_t(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new vt(""+t.key+e.key,t.value,e.message)});var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new vt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ne(r))return[new vt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ne(r))return[new vt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ie(r,["zoom","feature-state"]))return[new vt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!re(r))return[new vt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zr(t){var e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(bt(r))&&i.push(new vt(e,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(bt(r))&&i.push(new vt(e,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Ir(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!Ir(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}xr.deserialize=function(t){return new xr(t._parameters,t._specification)},xr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Br={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Er(t){if(null==t)return function(){return!0};Ir(t)||(t=Vr(t));var e=dr(t,Br);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Pr(t,e){return t<e?-1:t>e?1:0}function Vr(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?Cr(t[1],t[2],"=="):"!="===r?Fr(Cr(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Cr(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Vr))):"all"===r?["all"].concat(t.slice(1).map(Vr)):"none"===r?["all"].concat(t.slice(1).map(Vr).map(Fr)):"in"===r?Mr(t[1],t.slice(2)):"!in"===r?Fr(Mr(t[1],t.slice(2))):"has"===r?Tr(t[1]):"!has"!==r||Fr(Tr(t[1]))}function Cr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Mr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Pr)]]:["filter-in-small",t,["literal",e]]}}function Tr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Fr(t){return["!",t]}function Lr(t){return Ir(_t(t.value))?kr(xt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,n=e.key;if("array"!==ir(r))return[new vt(n,r,"array expected, "+ir(r)+" found")];var a,i=e.styleSpec,o=[];if(r.length<1)return[new vt(n,r,"filter array must have at least 1 element")];switch(o=o.concat(zr({key:n+"[0]",value:r[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),bt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===bt(r[1])&&o.push(new vt(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new vt(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(a=ir(r[1]))&&o.push(new vt(n+"[1]",r[1],"string expected, "+a+" found"));for(var s=2;s<r.length;s++)a=ir(r[s]),"$type"===bt(r[1])?o=o.concat(zr({key:n+"["+s+"]",value:r[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new vt(n+"["+s+"]",r[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var u=1;u<r.length;u++)o=o.concat(t({key:n+"["+u+"]",value:r[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=ir(r[1]),2!==r.length?o.push(new vt(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new vt(n+"[1]",r[1],"string expected, "+a+" found"))}return o}(t)}function Or(t,e){var r=t.key,n=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Gr({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var l,p=t.valueSpec||s[o];if(!p)return[new vt(r,a,'unknown property "'+o+'"')];if("string"===ir(a)&&er(p)&&!p.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new vt(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var c=[];return"symbol"===t.layerType&&("text-field"===o&&n&&!n.glyphs&&c.push(new vt(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&ar(_t(a))&&"identity"===bt(a.type)&&c.push(new vt(r,a,'"text-font" does not support identity functions'))),c.concat(Gr({key:t.key,value:a,valueSpec:p,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function Dr(t){return Or(t,"paint")}function Ur(t){return Or(t,"layout")}function jr(t){var e=[],r=t.value,n=t.key,i=t.style,a=t.styleSpec;r.type||r.ref||e.push(new vt(n,r,'either "type" or "ref" is required'));var o,s=bt(r.type),u=bt(r.ref);if(r.id)for(var l=bt(r.id),p=0;p<t.arrayIndex;p++){var c=i.layers[p];bt(c.id)===l&&e.push(new vt(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new vt(n,r[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){bt(t.id)===u&&(o=t)}),o?o.ref?e.push(new vt(n,r.ref,"ref cannot reference another ref layer")):s=bt(o.type):e.push(new vt(n,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],f=h&&bt(h.type);h?"vector"===f&&"raster"===s?e.push(new vt(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new vt(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new vt(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new vt(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new vt(n,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new vt(n,r.source,'source "'+r.source+'" not found'))}else e.push(new vt(n,r,'missing required property "source"'));return e=e.concat(_r({key:n,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gr({key:n+".type",value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Lr,layout:function(t){return _r({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ur(xt({layerType:s},t))}}})},paint:function(t){return _r({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Dr(xt({layerType:s},t))}}})}}}))}function Rr(t){var e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new vt(r,e,'"type" is required')];var a,o=bt(e.type);switch(o){case"vector":case"raster":case"raster-dem":if(a=_r({key:r,value:e,valueSpec:n["source_"+o.replace("-","_")],style:t.style,styleSpec:n}),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new vt(r+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":if(a=_r({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n}),e.cluster)for(var u in e.clusterProperties){var l=e.clusterProperties[u],p=l[0],c=l[1],h="string"==typeof p?[p,["accumulated"],["get",u]]:p;a.push.apply(a,kr({key:r+"."+u+".map",value:c,expressionContext:"cluster-map"})),a.push.apply(a,kr({key:r+"."+u+".reduce",value:h,expressionContext:"cluster-reduce"}))}return a;case"video":return _r({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return _r({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new vt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zr({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function qr(t){var e=t.value,r=t.styleSpec,n=r.light,i=t.style,a=[],o=ir(e);if(void 0===e)return a;if("object"!==o)return a.concat([new vt("light",e,"object expected, "+o+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);a=u&&n[u[1]]&&n[u[1]].transition?a.concat(Gr({key:s,value:e[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?a.concat(Gr({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):a.concat([new vt(s,e[s],'unknown property "'+s+'"')])}return a}function Nr(t){var e=t.value,r=t.key,n=ir(e);return"string"!==n?[new vt(r,e,"string expected, "+n+" found")]:[]}var Kr={"*":function(){return[]},array:wr,boolean:function(t){var e=t.value,r=t.key,n=ir(e);return"boolean"!==n?[new vt(r,e,"boolean expected, "+n+" found")]:[]},number:Ar,color:function(t){var e=t.key,r=t.value,n=ir(r);return"string"!==n?[new vt(e,r,"color expected, "+n+" found")]:null===Ot(r)?[new vt(e,r,'color expected, "'+r+'" found')]:[]},constants:gt,enum:zr,filter:Lr,function:Sr,layer:jr,object:_r,source:Rr,light:qr,string:Nr,formatted:function(t){return 0===Nr(t).length?[]:kr(t)}};function Gr(t){var e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&ar(bt(e))?Sr(t):r.expression&&yr(_t(e))?kr(t):r.type&&Kr[r.type]?Kr[r.type](t):_r(xt({},t,{valueSpec:r.type?n[r.type]:r}))}function Xr(t){var e=t.value,r=t.key,n=Nr(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new vt(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new vt(r,e,'"glyphs" url must include a "{range}" token')),n)}function Zr(t,e){e=e||mt;var r=[];return r=r.concat(Gr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Xr,"*":function(){return[]}}})),t.constants&&(r=r.concat(gt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Hr(r)}function Hr(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Yr(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Hr(t.apply(this,e))}}Zr.source=Yr(Rr),Zr.light=Yr(qr),Zr.layer=Yr(jr),Zr.filter=Yr(Lr),Zr.paintProperty=Yr(Dr),Zr.layoutProperty=Yr(Ur);var Jr=Zr,$r=Zr.light,Wr=Zr.paintProperty,Qr=Zr.layoutProperty;function tn(t,e){var r=!1;if(e&&e.length)for(var n=0,i=e;n<i.length;n+=1){var a=i[n];t.fire(new yt(new Error(a.message))),r=!0}return r}var en=nn,rn=3;function nn(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],r=i[2],this.d=e+2*r;for(var a=0;a<this.d*this.d;a++){var o=i[rn+a],s=i[rn+a+1];n.push(o===s?null:i.subarray(o,s))}var u=i[rn+n.length],l=i[rn+n.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var p=0;p<this.d*this.d;p++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c}nn.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nn.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a)},nn.prototype.query=function(t,e,r,n,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},nn.prototype._queryCell=function(t,e,r,n,i,a,o,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,p=this.bboxes,c=0;c<u.length;c++){var h=u[c];if(void 0===o[h]){var f=4*h;(s?s(p[f+0],p[f+1],p[f+2],p[f+3]):t<=p[f+2]&&e<=p[f+3]&&r>=p[f+0]&&n>=p[f+1])?(o[h]=!0,a.push(l[h])):o[h]=!1}}},nn.prototype._forEachCell=function(t,e,r,n,i,a,o,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),p=this._convertToCellCoord(r),c=this._convertToCellCoord(n),h=u;h<=p;h++)for(var f=l;f<=c;f++){var y=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,y,a,o,s))return}},nn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},nn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=rn+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[rn+o]=a,i.set(s,a),a+=s.length}return i[rn+t.length]=a,i.set(this.keys,a),a+=this.keys.length,i[rn+t.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var an=self.ImageData,on={};function sn(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),on[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var un in sn("Object",Object),en.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},en.deserialize=function(t){return new en(t.buffer)},sn("Grid",en),sn("Color",Dt),sn("Error",Error),sn("StylePropertyFunction",xr),sn("StyleExpression",fr,{omit:["_evaluator"]}),sn("ZoomDependentExpression",vr),sn("ZoomConstantExpression",mr),sn("CompoundExpression",te,{omit:["_evaluate"]}),He)He[un]._classRegistryKey||sn("Expression_"+un,He[un]);function ln(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof an)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i+=1){var o=a[i];n.push(ln(o,e))}return n}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var p in t)if(t.hasOwnProperty(p)&&!(on[u].omit.indexOf(p)>=0)){var c=t[p];l[p]=on[u].shallow.indexOf(p)>=0?c:ln(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof t)}function pn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof an)return t;if(Array.isArray(t))return t.map(pn);if("object"==typeof t){var e=t.$name||"Object",r=on[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var n=Object.create(r.prototype),i=0,a=Object.keys(t);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=t[o];n[o]=on[e].shallow.indexOf(o)>=0?s:pn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var cn=function(){this.first=!0};cn.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var hn={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function fn(t){for(var e=0,r=t;e<r.length;e+=1)if(dn(r[e].charCodeAt(0)))return!0;return!1}function yn(t){return!(hn.Arabic(t)||hn["Arabic Supplement"](t)||hn["Arabic Extended-A"](t)||hn["Arabic Presentation Forms-A"](t)||hn["Arabic Presentation Forms-B"](t))}function dn(t){return!(746!==t&&747!==t&&(t<4352||!(hn["Bopomofo Extended"](t)||hn.Bopomofo(t)||hn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||hn["CJK Compatibility Ideographs"](t)||hn["CJK Compatibility"](t)||hn["CJK Radicals Supplement"](t)||hn["CJK Strokes"](t)||!(!hn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||hn["CJK Unified Ideographs Extension A"](t)||hn["CJK Unified Ideographs"](t)||hn["Enclosed CJK Letters and Months"](t)||hn["Hangul Compatibility Jamo"](t)||hn["Hangul Jamo Extended-A"](t)||hn["Hangul Jamo Extended-B"](t)||hn["Hangul Jamo"](t)||hn["Hangul Syllables"](t)||hn.Hiragana(t)||hn["Ideographic Description Characters"](t)||hn.Kanbun(t)||hn["Kangxi Radicals"](t)||hn["Katakana Phonetic Extensions"](t)||hn.Katakana(t)&&12540!==t||!(!hn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!hn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||hn["Unified Canadian Aboriginal Syllabics"](t)||hn["Unified Canadian Aboriginal Syllabics Extended"](t)||hn["Vertical Forms"](t)||hn["Yijing Hexagram Symbols"](t)||hn["Yi Syllables"](t)||hn["Yi Radicals"](t))))}function mn(t){return!(dn(t)||function(t){return!!(hn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||hn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||hn["Letterlike Symbols"](t)||hn["Number Forms"](t)||hn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||hn["Control Pictures"](t)&&9251!==t||hn["Optical Character Recognition"](t)||hn["Enclosed Alphanumerics"](t)||hn["Geometric Shapes"](t)||hn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||hn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||hn["CJK Symbols and Punctuation"](t)||hn.Katakana(t)||hn["Private Use Area"](t)||hn["CJK Compatibility Forms"](t)||hn["Small Form Variants"](t)||hn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function vn(t,e){return!(!e&&(t>=1424&&t<=2303||hn["Arabic Presentation Forms-A"](t)||hn["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||hn.Khmer(t))}var gn,xn=!1,bn=null,_n=!1,wn=new dt,An={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return _n||null!=An.applyArabicShaping}},Sn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cn,this.transition={})};Sn.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,n=t;r<n.length;r+=1)if(!vn(n[r].charCodeAt(0),e))return!1;return!0}(t,An.isLoaded())},Sn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var kn=function(t,e){this.property=t,this.value=e,this.expression=br(void 0===e?t.specification.default:e,t.specification)};kn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},kn.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var zn=function(t){this.property=t,this.value=new kn(t,void 0)};zn.prototype.transitioned=function(t,e){return new Bn(this.property,this.value,e,c({},t.transition,this.transition),t.now)},zn.prototype.untransitioned=function(){return new Bn(this.property,this.value,null,{},0)};var In=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};In.prototype.getValue=function(t){return b(this._values[t].value.value)},In.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new zn(this._values[t].property)),this._values[t].value=new kn(this._values[t].property,null===e?void 0:b(e))},In.prototype.getTransition=function(t){return b(this._values[t].transition)},In.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new zn(this._values[t].property)),this._values[t].transition=b(e)||void 0},In.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i);var a=this.getTransition(n);void 0!==a&&(t[n+"-transition"]=a)}return t},In.prototype.transitioned=function(t,e){for(var r=new En(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(t,e._values[a])}return r},In.prototype.untransitioned=function(){for(var t=new En(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e];t._values[n]=this._values[n].untransitioned()}return t};var Bn=function(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Bn.prototype.possiblyEvaluate=function(t){var e=t.now||0,r=this.value.possiblyEvaluate(t),n=this.prior;if(n){if(e>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(e<this.begin)return n.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t),r,function(t){if(i<=0)return 0;if(i>=1)return 1;var e=i*i,r=e*i;return 4*(i<.5?r:3*(i-e)+r-.75)}())}return r};var En=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};En.prototype.possiblyEvaluate=function(t){for(var e=new Cn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},En.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var Pn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Pn.prototype.getValue=function(t){return b(this._values[t].value)},Pn.prototype.setValue=function(t,e){this._values[t]=new kn(this._values[t].property,null===e?void 0:b(e))},Pn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var n=r[e],i=this.getValue(n);void 0!==i&&(t[n]=i)}return t},Pn.prototype.possiblyEvaluate=function(t){for(var e=new Cn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Vn=function(t,e,r){this.property=t,this.value=e,this.parameters=r};Vn.prototype.isConstant=function(){return"constant"===this.value.kind},Vn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Vn.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Cn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Cn.prototype.get=function(t){return this._values[t]};var Mn=function(t){this.specification=t};Mn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Mn.prototype.interpolate=function(t,e,r){var n=pe[this.specification.type];return n?n(t,e,r):t};var Tn=function(t){this.specification=t};Tn.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Vn(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Vn(this,t.expression,e)},Tn.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Vn(this,{kind:"constant",value:void 0},t.parameters);var n=pe[this.specification.type];return n?new Vn(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t},Tn.prototype.evaluate=function(t,e,r,n){return"constant"===t.kind?t.value:t.evaluate(e,r,n)};var Fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Vn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e),n=this._calculate(r,r,r,e);return new Vn(this,{kind:"constant",value:n},e)}if("camera"===t.expression.kind){var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Vn(this,{kind:"constant",value:i},e)}return new Vn(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,n){if("source"===t.kind){var i=t.evaluate(e,r,n);return this._calculate(i,i,i,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value},e.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(Tn),Ln=function(t){this.specification=t};Ln.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new Sn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Sn(Math.floor(e.zoom),e)),t.expression.evaluate(new Sn(Math.floor(e.zoom+1),e)),e)}},Ln.prototype._calculate=function(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},Ln.prototype.interpolate=function(t){return t};var On=function(t){this.specification=t};On.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},On.prototype.interpolate=function(){return!1};var Dn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var r=t[e],n=this.defaultPropertyValues[e]=new kn(r,void 0),i=this.defaultTransitionablePropertyValues[e]=new zn(r);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};sn("DataDrivenProperty",Tn),sn("DataConstantProperty",Mn),sn("CrossFadedDataDrivenProperty",Fn),sn("CrossFadedProperty",Ln),sn("ColorRampProperty",On);var Un=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new Pn(r.layout)),r.paint)){for(var n in this._transitionablePaint=new In(r.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".layout."+t;if(this._validate(Qr,n,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return v(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var n="layers."+this.id+".paint."+t;if(this._validate(Wr,n,t,e,r))return!1}if(v(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],a="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&e,o=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var s=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),s||o||a},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),x(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,r,n,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tn(this,t.call(Jr,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Vn&&er(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(dt),jn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Rn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},qn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Nn(t,e){void 0===e&&(e=1);var r=0,n=0;return{members:t.map(function(t){var i,a=(i=t.type,jn[i].BYTES_PER_ELEMENT),o=r=Kn(r,Math.max(e,a)),s=t.components||1;return n=Math.max(n,a),r+=a*s,{name:t.name,type:t.type,components:s,offset:o}}),size:Kn(r,Math.max(n,e)),alignment:e}}function Kn(t,e){return Math.ceil(t/e)*e}qn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},qn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},qn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qn.prototype.clear=function(){this.length=0},qn.prototype.resize=function(t){this.reserve(t),this.length=t},qn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},qn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t},e}(qn);Gn.prototype.bytesPerElement=4,sn("StructArrayLayout2i4",Gn);var Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,t},e}(qn);Xn.prototype.bytesPerElement=8,sn("StructArrayLayout4i8",Xn);var Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(qn);Zn.prototype.bytesPerElement=12,sn("StructArrayLayout2i4i12",Zn);var Hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=6*t,p=12*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint8[p+8]=a,this.uint8[p+9]=o,this.uint8[p+10]=s,this.uint8[p+11]=u,t},e}(qn);Hn.prototype.bytesPerElement=12,sn("StructArrayLayout4i4ub12",Hn);var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=r,this.uint16[l+2]=n,this.uint16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(qn);Yn.prototype.bytesPerElement=16,sn("StructArrayLayout8ui16",Yn);var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,a,o,s)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(qn);Jn.prototype.bytesPerElement=16,sn("StructArrayLayout4i4ui16",Jn);var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t},e}(qn);$n.prototype.bytesPerElement=12,sn("StructArrayLayout3f12",$n);var Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(qn);Wn.prototype.bytesPerElement=4,sn("StructArrayLayout1ul4",Wn);var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,r,n,i,a,o,s,u,l,p)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=a,this.int16[h+5]=o,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=p,this.int16[h+11]=c,t},e}(qn);Qn.prototype.bytesPerElement=24,sn("StructArrayLayout6i1ul2ui2i24",Qn);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i,a)},e.prototype.emplace=function(t,e,r,n,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(qn);ti.prototype.bytesPerElement=12,sn("StructArrayLayout2i2i2i12",ti);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=4*t;return this.uint8[n+0]=e,this.uint8[n+1]=r,t},e}(qn);ei.prototype.bytesPerElement=4,sn("StructArrayLayout2ub4",ei);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,r,n,i,a,o,s,u,l,p,c,h,f)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y){var d=20*t,m=10*t,v=40*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.uint16[d+2]=n,this.uint16[d+3]=i,this.uint32[m+2]=a,this.uint32[m+3]=o,this.uint32[m+4]=s,this.uint16[d+10]=u,this.uint16[d+11]=l,this.uint16[d+12]=p,this.float32[m+7]=c,this.float32[m+8]=h,this.uint8[v+36]=f,this.uint8[v+37]=y,t},e}(qn);ri.prototype.bytesPerElement=40,sn("StructArrayLayout2i2ui3ul3ui2f2ub40",ri);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,r,n,i,a,o,s,u,l,p,c,h,f)},e.prototype.emplace=function(t,e,r,n,i,a,o,s,u,l,p,c,h,f,y){var d=16*t,m=8*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.int16[d+2]=n,this.int16[d+3]=i,this.uint16[d+4]=a,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=u,this.uint16[d+8]=l,this.uint16[d+9]=p,this.uint16[d+10]=c,this.uint16[d+11]=h,this.uint16[d+12]=f,this.uint32[m+7]=y,t},e}(qn);ni.prototype.bytesPerElement=32,sn("StructArrayLayout4i9ui1ul32",ni);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(qn);ii.prototype.bytesPerElement=4,sn("StructArrayLayout1f4",ii);var ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t},e}(qn);ai.prototype.bytesPerElement=6,sn("StructArrayLayout3i6",ai);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=2*t,a=4*t;return this.uint32[i+0]=e,this.uint16[a+2]=r,this.uint16[a+3]=n,t},e}(qn);oi.prototype.bytesPerElement=8,sn("StructArrayLayout1ul2ui8",oi);var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)},e.prototype.emplace=function(t,e,r,n){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t},e}(qn);si.prototype.bytesPerElement=6,sn("StructArrayLayout3ui6",si);var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t},e}(qn);ui.prototype.bytesPerElement=4,sn("StructArrayLayout2ui4",ui);var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint16[r+0]=e,t},e}(qn);li.prototype.bytesPerElement=2,sn("StructArrayLayout1ui2",li);var pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t},e}(qn);pi.prototype.bytesPerElement=8,sn("StructArrayLayout2f8",pi);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)},e.prototype.emplace=function(t,e,r,n,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,t},e}(qn);ci.prototype.bytesPerElement=16,sn("StructArrayLayout4f16",ci);var hi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(Rn);hi.prototype.size=24;var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new hi(this,t)},e}(Qn);sn("CollisionBoxArray",fi);var yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,r),e}(Rn);yi.prototype.size=40;var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new yi(this,t)},e}(ri);sn("PlacedSymbolArray",di);var mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+4]},r.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},r.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,r),e}(Rn);mi.prototype.size=32;var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new mi(this,t)},e}(ni);sn("SymbolInstanceArray",vi);var gi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(Rn);gi.prototype.size=4;var xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new gi(this,t)},e}(ii);sn("GlyphOffsetArray",xi);var bi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(Rn);bi.prototype.size=6;var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new bi(this,t)},e}(ai);sn("SymbolLineVertexArray",_i);var wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(Rn);wi.prototype.size=8;var Ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new wi(this,t)},e}(oi);sn("FeatureIndexArray",Ai);var Si=Nn([{name:"a_pos",components:2,type:"Int16"}],4),ki=Si.members,zi=(Si.size,Si.alignment,function(t){void 0===t&&(t=[]),this.segments=t});function Ii(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}zi.prototype.prepareSegment=function(t,e,r,n){var i=this.segments[this.segments.length-1];return t>zi.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+zi.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>zi.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i},zi.prototype.get=function(){return this.segments},zi.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var n in r.vaos)r.vaos[n].destroy()}},zi.simpleSegment=function(t,e,r,n){return new zi([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])},zi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sn("SegmentVector",zi);var Bi=function(){this.ids=[],this.positions=[],this.indexed=!1};function Ei(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Bi.prototype.add=function(t,e,r,n){this.ids.push(t),this.positions.push(e,r,n)},Bi.prototype.getPositions=function(t){for(var e=0,r=this.ids.length-1;e<r;){var n=e+r>>1;this.ids[n]>=t?r=n:e=n+1}for(var i=[];this.ids[e]===t;){var a=this.positions[3*e],o=this.positions[3*e+1],s=this.positions[3*e+2];i.push({index:a,start:o,end:s}),e++}return i},Bi.serialize=function(t,e){var r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,r,n,i){if(!(n>=i)){for(var a=e[n+i>>1],o=n-1,s=i+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;Ei(e,o,s),Ei(r,3*o,3*s),Ei(r,3*o+1,3*s+1),Ei(r,3*o+2,3*s+2)}t(e,r,n,s),t(e,r,s+1,i)}}(r,n,0,r.length-1),e.push(r.buffer,n.buffer),{ids:r,positions:n}},Bi.deserialize=function(t){var e=new Bi;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},sn("FeaturePositionMap",Bi);var Pi=function(t,e){this.gl=t.gl,this.location=e},Vi=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Pi),Ci=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Pi),Mi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Pi),Ti=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Pi),Fi=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Pi),Li=function(t){function e(e,r){t.call(this,e,r),this.current=Dt.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Pi),Oi=new Float32Array(16),Di=function(t){function e(e,r){t.call(this,e,r),this.current=Oi}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Pi);function Ui(t){return[Ii(255*t.r,255*t.g),Ii(255*t.b,255*t.a)]}var ji=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0};ji.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ji.prototype.setConstantPatternPositions=function(){},ji.prototype.populatePaintArray=function(){},ji.prototype.updatePaintArray=function(){},ji.prototype.upload=function(){},ji.prototype.destroy=function(){},ji.prototype.setUniforms=function(t,e,r,n){e.set(n.constantOr(this.value))},ji.prototype.getBinding=function(t,e){return"color"===this.type?new Li(t,e):new Ci(t,e)},ji.serialize=function(t){var e=t.value,r=t.names,n=t.type;return{value:ln(e),names:r,type:n}},ji.deserialize=function(t){var e=t.value,r=t.names,n=t.type;return new ji(pn(e),r,n)};var Ri=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Ri.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Ri.prototype.populatePaintArray=function(){},Ri.prototype.updatePaintArray=function(){},Ri.prototype.upload=function(){},Ri.prototype.destroy=function(){},Ri.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},Ri.prototype.setUniforms=function(t,e,r,n,i){var a=this.patternPositions;"u_pattern_to"===i&&a.patternTo&&e.set(a.patternTo),"u_pattern_from"===i&&a.patternFrom&&e.set(a.patternFrom)},Ri.prototype.getBinding=function(t,e){return new Fi(t,e)};var qi=function(t,e,r,n){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}}),this.paintVertexArray=new n};qi.prototype.defines=function(){return[]},qi.prototype.setConstantPatternPositions=function(){},qi.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new Sn(0),e,{});if("color"===this.type)for(var a=Ui(i),o=n;o<t;o++)r.emplaceBack(a[0],a[1]);else{for(var s=n;s<t;s++)r.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},qi.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var o=Ui(a),s=t;s<e;s++)i.emplace(s,o[0],o[1]);else{for(var u=t;u<e;u++)i.emplace(u,a);this.maxValue=Math.max(this.maxValue,a)}},qi.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qi.prototype.setUniforms=function(t,e){e.set(0)},qi.prototype.getBinding=function(t,e){return new Ci(t,e)};var Ni=function(t,e,r,n,i,a){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}}),this.paintVertexArray=new o};Ni.prototype.defines=function(){return[]},Ni.prototype.setConstantPatternPositions=function(){},Ni.prototype.populatePaintArray=function(t,e){var r=this.paintVertexArray,n=r.length;r.reserve(t);var i=this.expression.evaluate(new Sn(this.zoom),e,{}),a=this.expression.evaluate(new Sn(this.zoom+1),e,{});if("color"===this.type)for(var o=Ui(i),s=Ui(a),u=n;u<t;u++)r.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var l=n;l<t;l++)r.emplaceBack(i,a);this.maxValue=Math.max(this.maxValue,i,a)}},Ni.prototype.updatePaintArray=function(t,e,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=Ui(a),u=Ui(o),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var p=t;p<e;p++)i.emplace(p,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},Ni.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ni.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ni.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Ni.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},Ni.prototype.getBinding=function(t,e){return new Ci(t,e)};var Ki=function(t,e,r,n,i,a,o){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};Ki.prototype.defines=function(){return[]},Ki.prototype.setConstantPatternPositions=function(){},Ki.prototype.populatePaintArray=function(t,e,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,a=this.layerId,o=n.length;if(n.reserve(t),i.reserve(t),r&&e.patterns&&e.patterns[a]){var s=e.patterns[a],u=s.min,l=s.mid,p=s.max,c=r[u],h=r[l],f=r[p];if(!c||!h||!f)return;for(var y=o;y<t;y++)n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},Ki.prototype.updatePaintArray=function(t,e,r,n,i){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&r.patterns&&r.patterns[s]){var u=r.patterns[s],l=u.min,p=u.mid,c=u.max,h=i[l],f=i[p],y=i[c];if(!h||!f||!y)return;for(var d=t;d<e;d++)a.emplace(d,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),o.emplace(d,f.tl[0],f.tl[1],f.br[0],f.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1])}},Ki.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ki.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Ki.prototype.setUniforms=function(t,e){e.set(0)},Ki.prototype.getBinding=function(t,e){return new Ci(t,e)};var Gi=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Bi,this._bufferOffset=0};Gi.createDynamic=function(t,e,r){var n=new Gi,i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof Vn&&er(o.property.specification)){var s=Zi(a,t.type),u=o.property.specification.type,l=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)n.binders[a]=new Ri(o.value.value,s,u),i.push("/u_"+a);else{var p=Hi(a,u,"source");n.binders[a]=new Ki(o.value,s,u,l,e,p,t.id),i.push("/a_"+a)}else if("constant"===o.value.kind)n.binders[a]=new ji(o.value.value,s,u),i.push("/u_"+a);else if("source"===o.value.kind){var c=Hi(a,u,"source");n.binders[a]=new qi(o.value,s,u,c),i.push("/a_"+a)}else{var h=Hi(a,u,"composite");n.binders[a]=new Ni(o.value,s,u,l,e,h),i.push("/z_"+a)}}}return n.cacheKey=i.sort().join(""),n},Gi.prototype.populatePaintArrays=function(t,e,r,n){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,n);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t},Gi.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders)this.binders[r].setConstantPatternPositions(t,e)},Gi.prototype.updatePaintArrays=function(t,e,r,n){var i=!1;for(var a in t)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var u=s[o],l=e.feature(u.index);for(var p in this.binders){var c=this.binders[p];if(!(c instanceof ji||c instanceof Ri)&&!0===c.expression.isStateDependent){var h=r.paint.get(p);c.expression=h.value,c.updatePaintArray(u.start,u.end,l,t[a],n),i=!0}}}return i},Gi.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Gi.prototype.getPaintVertexBuffers=function(){return this._buffers},Gi.prototype.getUniforms=function(t,e){var r={};for(var n in this.binders)for(var i=this.binders[n],a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];r[s]=i.getBinding(t,e[s])}return r},Gi.prototype.setUniforms=function(t,e,r,n){for(var i in this.binders)for(var a=this.binders[i],o=0,s=a.uniformNames;o<s.length;o+=1){var u=s[o];a.setUniforms(t,e[u],n,r.get(i),u)}},Gi.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Ki){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&e.push(i)}else(n instanceof qi||n instanceof Ni)&&n.paintVertexBuffer&&e.push(n.paintVertexBuffer)}this._buffers=e},Gi.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof qi||i instanceof Ni)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},Gi.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Xi=function(t,e,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,a=e;i<a.length;i+=1){var o=a[i];this.programConfigurations[o.id]=Gi.createDynamic(o,r,n),this.programConfigurations[o.id].layoutAttributes=t}this.needsUpload=!1};function Zi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Hi(t,e,r){var n={color:{source:pi,composite:ci},number:{source:ii,composite:pi}},i=function(t){return{"line-pattern":{source:Yn,composite:Yn},"fill-pattern":{source:Yn,composite:Yn},"fill-extrusion-pattern":{source:Yn,composite:Yn}}[t]}(t);return i&&i[r]||n[e][r]}Xi.prototype.populatePaintArrays=function(t,e,r,n){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,r,n);this.needsUpload=!0},Xi.prototype.updatePaintArrays=function(t,e,r,n){for(var i=0,a=r;i<a.length;i+=1){var o=a[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o,n)||this.needsUpload}},Xi.prototype.get=function(t){return this.programConfigurations[t]},Xi.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Xi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},sn("ConstantBinder",ji),sn("CrossFadedConstantBinder",Ri),sn("SourceExpressionBinder",qi),sn("CrossFadedCompositeBinder",Ki),sn("CompositeExpressionBinder",Ni),sn("ProgramConfiguration",Gi,{omit:["_buffers"]}),sn("ProgramConfigurationSet",Xi);var Yi=8192,$i={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Wi(t){for(var e=Yi/t.extent,r=t.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],a=0;a<i.length;a++){var o=i[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<$i.min||o.x>$i.max||o.y<$i.min||o.y>$i.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function Qi(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}var ta=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gn,this.indexArray=new si,this.segments=new zi,this.programConfigurations=new Xi(ki,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ea(t,e){for(var r=0;r<t.length;r++)if(pa(e,t[r]))return!0;for(var n=0;n<e.length;n++)if(pa(t,e[n]))return!0;return!!aa(t,e)}function ra(t,e,r){return!!pa(t,e)||!!sa(e,t,r)}function na(t,e){if(1===t.length)return la(e,t[0]);for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)if(pa(t,n[i]))return!0;for(var a=0;a<t.length;a++)if(la(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(aa(t,e[o]))return!0;return!1}function ia(t,e,r){if(t.length>1){if(aa(t,e))return!0;for(var n=0;n<e.length;n++)if(sa(e[n],t,r))return!0}for(var i=0;i<t.length;i++)if(sa(t[i],e,r))return!0;return!1}function aa(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var n=t[r],i=t[r+1],a=0;a<e.length-1;a++)if(oa(n,i,e[a],e[a+1]))return!0;return!1}function oa(t,e,r,n){return A(t,r,n)!==A(e,r,n)&&A(t,e,r)!==A(t,e,n)}function sa(t,e,r){var n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(var i=1;i<e.length;i++)if(ua(t,e[i-1],e[i])<n)return!0;return!1}function ua(t,e,r){var n=e.distSqr(r);if(0===n)return t.distSqr(e);var i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function la(t,e){for(var r,n,i,a=!1,o=0;o<t.length;o++)for(var s=0,u=(r=t[o]).length-1;s<r.length;u=s++)n=r[s],i=r[u],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function pa(t,e){for(var r=!1,n=0,i=t.length-1;n<t.length;i=n++){var a=t[n],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function ca(t,e,r){var n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;var a=A(t,e,r[0]);return a!==A(t,e,r[1])||a!==A(t,e,r[2])||a!==A(t,e,r[3])}function ha(t,e,r){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).binders[t].maxValue}function fa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ya(t,e,r,n,a){if(!e[0]&&!e[1])return t;var o=i.convert(e)._mult(a);"viewport"===r&&o._rotate(-n);for(var s=[],u=0;u<t.length;u++){var l=t[u];s.push(l.sub(o))}return s}ta.prototype.populate=function(t,e){for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a);this.addFeature(a,u,o),e.featureIndex.insert(a,u,o,s,this.index)}}},ta.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ta.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ki),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ta.prototype.addFeature=function(t,e,r){for(var n=0,i=e;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1){var s=o[a],u=s.x,l=s.y;if(!(u<0||u>=Yi||l<0||l>=Yi)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=p.vertexLength;Qi(this.layoutVertexArray,u,l,-1,-1),Qi(this.layoutVertexArray,u,l,1,-1),Qi(this.layoutVertexArray,u,l,1,1),Qi(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(c,c+1,c+2),this.indexArray.emplaceBack(c,c+3,c+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},sn("CircleBucket",ta,{omit:["layers"]});var da={paint:new Dn({"circle-radius":new Tn(mt.paint_circle["circle-radius"]),"circle-color":new Tn(mt.paint_circle["circle-color"]),"circle-blur":new Tn(mt.paint_circle["circle-blur"]),"circle-opacity":new Tn(mt.paint_circle["circle-opacity"]),"circle-translate":new Mn(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Mn(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mn(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mn(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tn(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tn(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tn(mt.paint_circle["circle-stroke-opacity"])})},va="undefined"!=typeof Float32Array?Float32Array:Array;function ga(){var t=new va(9);return va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function xa(){var t=new va(3);return va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ba(t,e,r){var n=new va(3);return n[0]=t,n[1]=e,n[2]=r,n}function Sa(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function ka(){var t=new va(4);return va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Math.PI,xa(),function(){var t;t=new va(4),va!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),xa(),ba(1,0,0),ba(0,1,0),ka(),ka(),ga(),function(){var t;t=new va(2),va!=Float32Array&&(t[0]=0,t[1]=0)}();var Ta=function(t){function e(e){t.call(this,e,da)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new ta(t)},e.prototype.queryRadius=function(t){var e=t;return ha("circle-radius",this,e)+ha("circle-stroke-width",this,e)+fa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o,s){for(var u=ya(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),p="map"===this.paint.get("circle-pitch-alignment"),c=p?u:function(t,e){return u.map(function(t){return Fa(t,e)})}(0,s),h=p?l*o:l,f=0,y=n;f<y.length;f+=1)for(var d=0,m=y[f];d<m.length;d+=1){var v=m[d],g=p?v:Fa(v,s),x=h,b=Sa([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?x*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(x*=a.cameraToCenterDistance/b[3]),ra(c,g,x))return!0}return!1},e}(Un);function Fa(t,e){var r=Sa([],[t.x,t.y,0,1],e);return new i(r[0]/r[3],r[1]/r[3])}var La=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ta);function Oa(t,e,r,n){var i=e.width,a=e.height;if(n){if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return t.width=i,t.height=a,t.data=n,t}function Da(t,e,r){var n=e.width,i=e.height;if(n!==t.width||i!==t.height){var a=Oa({},{width:n,height:i},r);Ua(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=a.data}}function Ua(t,e,r,n,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((r.y+u)*t.width+r.x)*a,p=((n.y+u)*e.width+n.x)*a,c=0;c<i.width*a;c++)s[p+c]=o[l+c];return e}sn("HeatmapBucket",La,{omit:["layers"]});var ja=function(t,e){Oa(this,t,1,e)};ja.prototype.resize=function(t){Da(this,t,1)},ja.prototype.clone=function(){return new ja({width:this.width,height:this.height},new Uint8Array(this.data))},ja.copy=function(t,e,r,n,i){Ua(t,e,r,n,i,1)};var Ra=function(t,e){Oa(this,t,4,e)};Ra.prototype.resize=function(t){Da(this,t,4)},Ra.prototype.clone=function(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))},Ra.copy=function(t,e,r,n,i){Ua(t,e,r,n,i,4)},sn("AlphaImage",ja),sn("RGBAImage",Ra);var qa={paint:new Dn({"heatmap-radius":new Tn(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tn(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mn(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new On(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mn(mt.paint_heatmap["heatmap-opacity"])})};function Na(t,e){for(var r=new Uint8Array(1024),n={},i=0,a=0;i<256;i++,a+=4){n[e]=i/255;var o=t.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a)}return new Ra({width:256,height:1},r)}var Ka=function(t){function e(e){t.call(this,e,qa),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new La(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Na(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Un),Ga={paint:new Dn({"hillshade-illumination-direction":new Mn(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mn(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mn(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mn(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mn(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mn(mt.paint_hillshade["hillshade-accent-color"])})},Xa=function(t){function e(e){t.call(this,e,Ga)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Un),Za=Nn([{name:"a_pos",components:2,type:"Int16"}],4),Ha=Za.members,Ya=(Za.size,Za.alignment,$a),Ja=$a;function $a(t,e,r){r=r||2;var n,i,a,o,s,u,l,p=e&&e.length,c=p?e[0]*r:t.length,h=Wa(t,0,c,r,!0),f=[];if(!h||h.next===h.prev)return f;if(p&&(h=function(t,e,r,n){var i,a,u,l=[];for(i=0,a=e.length;i<a;i++)(u=Wa(t,e[i]*n,i<a-1?e[i+1]*n:t.length,n,!1))===u.next&&(u.steiner=!0),l.push(uo(u));for(l.sort(ao),i=0;i<l.length;i++)oo(l[i],r),r=Qa(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=a=t[0],i=o=t[1];for(var y=r;y<c;y+=r)(s=t[y])<n&&(n=s),(u=t[y+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-n,o-i))?1/l:0}return to(h,f,r,n,i,l),f}function Wa(t,e,r,n,i){var a,o;if(i===bo(t,e,r,n)>0)for(a=e;a<r;a+=n)o=vo(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=vo(a,t[a],t[a+1],o);return o&&ho(o,o.next)&&(go(o),o=o.next),o}function Qa(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!ho(n,n.next)&&0!==co(n.prev,n,n.next))n=n.next;else{if(go(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function to(t,e,r,n,i,a,o){if(t){!o&&a&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=so(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,a,o,s,u,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ);e++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1)}(i)}(t,n,i,a);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?ro(t,n,i,a):eo(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),go(t),t=u.next,l=u.next;else if((t=u)===l){o?1===o?to(t=no(t,e,r),e,r,n,i,a,2):2===o&&io(t,e,r,n,i,a):to(Qa(t),e,r,n,i,a,1);break}}}function eo(t){var e=t.prev,r=t,n=t.next;if(co(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(lo(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&co(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ro(t,e,r,n){var i=t.prev,a=t,o=t.next;if(co(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,p=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,c=so(s,u,e,r,n),h=so(l,p,e,r,n),f=t.prevZ,y=t.nextZ;f&&f.z>=c&&y&&y.z<=h;){if(f!==t.prev&&f!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&co(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=h;){if(y!==t.prev&&y!==t.next&&lo(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&co(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function no(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!ho(i,a)&&fo(i,n,n.next,a)&&yo(i,a)&&yo(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),go(n),go(n.next),n=t=a),n=n.next}while(n!==t);return n}function io(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&po(o,s)){var u=mo(o,s);return o=Qa(o,o.next),u=Qa(u,u.next),to(o,e,r,n,i,a),void to(u,e,r,n,i,a)}s=s.next}o=o.next}while(o!==t)}function ao(t,e){return t.x-e.x}function oo(t,e){if(e=function(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===o)return r.prev;var u,l=r,p=r.x,c=r.y,h=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=p&&i!==n.x&&lo(a<c?i:o,a,p,c,a<c?o:i,a,n.x,n.y)&&((u=Math.abs(a-n.y)/(i-n.x))<h||u===h&&n.x>r.x)&&yo(n,t)&&(r=n,h=u),n=n.next;return r}(t,e)){var r=mo(e,t);Qa(r,r.next)}}function so(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function uo(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function lo(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function po(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&fo(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&yo(t,e)&&yo(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function co(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function ho(t,e){return t.x===e.x&&t.y===e.y}function fo(t,e,r,n){return!!(ho(t,e)&&ho(r,n)||ho(t,n)&&ho(r,e))||co(t,e,r)>0!=co(t,e,n)>0&&co(r,n,t)>0!=co(r,n,e)>0}function yo(t,e){return co(t.prev,t,t.next)<0?co(t,e,t.next)>=0&&co(t,t.prev,e)>=0:co(t,e,t.prev)<0||co(t,t.next,e)<0}function mo(t,e){var r=new xo(t.i,t.x,t.y),n=new xo(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function vo(t,e,r,n){var i=new xo(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function go(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xo(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bo(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function _o(t,e,r,n,i){!function t(e,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,u=Math.log(o),l=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-s*l/o+p)),Math.min(i,Math.floor(r+(o-s)*l/o+p)),a)}var f=e[r],y=n,d=i;for(wo(e,n,r),a(e[i],f)>0&&wo(e,n,i);y<d;){for(wo(e,y,d),y++,d--;a(e[y],f)<0;)y++;for(;a(e[d],f)>0;)d--}0===a(e[n],f)?wo(e,n,d):wo(e,++d,i),d<=r&&(n=d+1),r<=d&&(i=d-1)}}(t,e,r||0,n||t.length-1,i||Ao)}function wo(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Ao(t,e){return t<e?-1:t>e?1:0}function So(t,e){var r=t.length;if(r<=1)return[t];for(var n,i,a=[],o=0;o<r;o++){var s=S(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[t[o]]):n.push(t[o]))}if(n&&a.push(n),e>1)for(var u=0;u<a.length;u++)a[u].length<=e||(_o(a[u],e,1,a[u].length-1,ko),a[u]=a[u].slice(0,e));return a}function ko(t,e){return e.area-t.area}function zo(t,e,r){for(var n=r.patternDependencies,i=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,n[u.to]=!0,n[u.from]=!0)}return i}function Io(t,e,r,n,i){for(var a=i.patternDependencies,o=0,s=e;o<s.length;o+=1){var u=s[o],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var p=l.evaluate({zoom:n-1},r,{}),c=l.evaluate({zoom:n},r,{}),h=l.evaluate({zoom:n+1},r,{});a[p]=!0,a[c]=!0,a[h]=!0,r.patterns[u.id]={min:p,mid:c,max:h}}}return r}$a.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(bo(t,0,a,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,p=s<u-1?e[s+1]*r:t.length;o-=Math.abs(bo(t,l,p,r))}var c=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,f=n[s+1]*r,y=n[s+2]*r;c+=Math.abs((t[h]-t[y])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[y+1]-t[h+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},$a.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},Ya.default=Ja;var Bo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gn,this.indexArray=new si,this.indexArray2=new ui,this.programConfigurations=new Xi(Ha,t.layers,t.zoom),this.segments=new zi,this.segments2=new zi,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Bo.prototype.populate=function(t,e){this.features=[],this.hasPattern=zo("fill",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(Io("fill",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index)}}},Bo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Bo.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},Bo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Bo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ha),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Bo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Bo.prototype.addFeature=function(t,e,r,n){for(var i=0,a=So(e,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),c=p.vertexLength,h=[],f=[],y=0,d=o;y<d.length;y+=1){var m=d[y];if(0!==m.length){m!==o[0]&&f.push(h.length/2);var v=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=v.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var x=1;x<m.length;x++)this.layoutVertexArray.emplaceBack(m[x].x,m[x].y),this.indexArray2.emplaceBack(g+x-1,g+x),h.push(m[x].x),h.push(m[x].y);v.vertexLength+=m.length,v.primitiveLength+=m.length}}for(var b=Ya(h,f),_=0;_<b.length;_+=3)this.indexArray.emplaceBack(c+b[_],c+b[_+1],c+b[_+2]);p.vertexLength+=s,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},sn("FillBucket",Bo,{omit:["layers","features"]});var Eo={paint:new Dn({"fill-antialias":new Mn(mt.paint_fill["fill-antialias"]),"fill-opacity":new Tn(mt.paint_fill["fill-opacity"]),"fill-color":new Tn(mt.paint_fill["fill-color"]),"fill-outline-color":new Tn(mt.paint_fill["fill-outline-color"]),"fill-translate":new Mn(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Mn(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fn(mt.paint_fill["fill-pattern"])})},Po=function(t){function e(e){t.call(this,e,Eo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Bo(t)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,i,a,o){return na(ya(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e}(Un),Vo=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Co=Vo.members,Mo=(Vo.size,Vo.alignment,Math.pow(2,13));function To(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,2*Math.floor(n*Mo)+o,i*Mo*2,a*Mo*2,Math.round(s))}var Fo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Zn,this.indexArray=new si,this.programConfigurations=new Xi(Co,t.layers,t.zoom),this.segments=new zi,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Lo(t,e){return t.x===e.x&&(t.x<0||t.x>Yi)||t.y===e.y&&(t.y<0||t.y>Yi)}function Oo(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Yi})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Yi})}Fo.prototype.populate=function(t,e){this.features=[],this.hasPattern=zo("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(Io("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index,!0)}}},Fo.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},Fo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Fo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Fo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Co),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Fo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fo.prototype.addFeature=function(t,e,r,n){for(var i=0,a=So(e,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=0,h=o;c<h.length;c+=1){var f=h[c];if(0!==f.length&&!Oo(f))for(var y=0,d=0;d<f.length;d++){var m=f[d];if(d>=1){var v=f[d-1];if(!Lo(m,v)){p.vertexLength+4>zi.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(v)._perp()._unit(),x=v.dist(m);y+x>32768&&(y=0),To(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,y),To(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,y),y+=x,To(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,0,y),To(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,1,y);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}}}p.vertexLength+s>zi.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var _=[],w=[],A=p.vertexLength,S=0,k=o;S<k.length;S+=1){var z=k[S];if(0!==z.length){z!==o[0]&&w.push(_.length/2);for(var I=0;I<z.length;I++){var B=z[I];To(this.layoutVertexArray,B.x,B.y,0,0,1,1,0),_.push(B.x),_.push(B.y)}}}for(var E=Ya(_,w),P=0;P<E.length;P+=3)this.indexArray.emplaceBack(A+E[P],A+E[P+2],A+E[P+1]);p.primitiveLength+=E.length/3,p.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n)},sn("FillExtrusionBucket",Fo,{omit:["layers","features"]});var Do={paint:new Dn({"fill-extrusion-opacity":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tn(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fn(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tn(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tn(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mn(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Uo=function(t){function e(e){t.call(this,e,Do)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Fo(t)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s,u){var l=ya(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),p=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),h=function(t,e,r,n){for(var a=[],o=0,s=t;o<s.length;o+=1){var u=s[o],l=[u.x,u.y,0,1];Sa(l,l,e),a.push(new i(l[0]/l[3],l[1]/l[3]))}return a}(l,u),f=function(t,e,r,n){for(var a=[],o=[],s=n[8]*e,u=n[9]*e,l=n[10]*e,p=n[11]*e,c=n[8]*r,h=n[9]*r,f=n[10]*r,y=n[11]*r,d=0,m=t;d<m.length;d+=1){for(var g=[],x=[],b=0,_=m[d];b<_.length;b+=1){var w=_[b],A=w.x,S=w.y,k=n[0]*A+n[4]*S+n[12],z=n[1]*A+n[5]*S+n[13],I=n[2]*A+n[6]*S+n[14],B=n[3]*A+n[7]*S+n[15],V=I+l,C=B+p,M=k+c,T=z+h,F=I+f,L=B+y,O=new i((k+s)/C,(z+u)/C);O.z=V/C,g.push(O);var D=new i(M/L,T/L);D.z=F/L,x.push(D)}a.push(g),o.push(x)}return[a,o]}(n,c,p,u);return function(t,e,r){var n=1/0;na(r,e)&&(n=Ro(r,e[0]));for(var i=0;i<e.length;i++)for(var a=e[i],o=t[i],s=0;s<a.length-1;s++){var u=a[s],l=a[s+1],p=o[s],h=[u,l,o[s+1],p,u];ea(r,h)&&(n=Math.min(n,Ro(r,h)))}return n!==1/0&&n}(f[0],f[1],h)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Un);function jo(t,e){return t.x*e.x+t.y*e.y}function Ro(t,e){if(1===t.length){var r=e[0],n=e[1],i=e[3],a=t[0],o=n.sub(r),s=i.sub(r),u=a.sub(r),l=jo(o,o),p=jo(o,s),c=jo(s,s),h=jo(u,o),f=jo(u,s),y=l*c-p*p,d=(c*h-p*f)/y,m=(l*f-p*h)/y,v=1-d-m;return r.z*v+n.z*d+i.z*m}for(var g=1/0,x=0,b=e;x<b.length;x+=1){var _=b[x];g=Math.min(g,_.z)}return g}var qo=Nn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),No=qo.members,Ko=(qo.size,qo.alignment,Go);function Go(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Xo,this,e)}function Xo(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function Zo(t){for(var e,r,n=0,i=0,a=t.length,o=a-1;i<a;o=i++)e=t[i],n+=((r=t[o]).x-e.x)*(e.y+r.y);return n}Go.types=["Unknown","Point","LineString","Polygon"],Go.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,a=0,o=0,s=0,u=[];t.pos<r;){if(a<=0){var l=t.readVarint();n=7&l,a=l>>3}if(a--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&u.push(e),e=[]),e.push(new i(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Go.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(n<=0){var p=t.readVarint();r=7&p,n=p>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,l]},Go.prototype.toGeoJSON=function(t,e,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Go.types[this.type];function p(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+s)/a;t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(n=0;n<u.length;n++)c[n]=u[n][0];p(u=c);break;case 2:for(n=0;n<u.length;n++)p(u[n]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],a=0;a<e;a++){var o=Zo(t[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[t[a]]):r.push(t[a]))}return r&&i.push(r),i}(u),n=0;n<u.length;n++)for(i=0;i<u[n].length;i++)p(u[n][i])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Ho=Yo;function Yo(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Jo,this,e),this.length=this._features.length}function Jo(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function $o(t,e,r){if(3===t){var n=new Ho(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}Yo.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ko(this._pbf,e,this.extent,this._keys,this._values)};var Wo={VectorTile:function(t,e){this.layers=t.readFields($o,{},e)},VectorTileFeature:Ko,VectorTileLayer:Ho},Qo=Wo.VectorTileFeature.types,ts=63,es=Math.cos(Math.PI/180*37.5),rs=.5,ns=Math.pow(2,14)/rs;function is(t,e,r,n,i,a,o){t.emplaceBack(e.x,e.y,n?1:0,i?1:-1,Math.round(ts*r.x)+128,Math.round(ts*r.y)+128,1+(0===a?0:a<0?-1:1)|(o*rs&63)<<2,o*rs>>6)}var as=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Hn,this.indexArray=new si,this.programConfigurations=new Xi(No,t.layers,t.zoom),this.segments=new zi,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function os(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(ns-1)}as.prototype.populate=function(t,e){this.features=[],this.hasPattern=zo("line",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Sn(this.zoom),a)){var u=Wi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(Io("line",this.layers,l,this.zoom,e)):this.addFeature(l,u,o,{}),e.featureIndex.insert(a,u,o,s,this.index)}}},as.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},as.prototype.addFeatures=function(t,e){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,e)}},as.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},as.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},as.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,No),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},as.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},as.prototype.addFeature=function(t,e,r,n){for(var i=this.layers[0].layout,a=i.get("line-join").evaluate(t,{}),o=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,p=e;l<p.length;l+=1){var c=p[l];this.addLine(c,t,a,o,s,u,r,n)}},as.prototype.addLine=function(t,e,r,n,i,a,o,s){var u=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===Qo[e.type],p=t.length;p>=2&&t[p-1].equals(t[p-2]);)p--;for(var c=0;c<p-1&&t[c].equals(t[c+1]);)c++;if(!(p<(l?3:2))){u&&(u.tileTotal=function(t,e,r){for(var n,i,a=0,o=c;o<r-1;o++)n=t[o],i=t[o+1],a+=n.dist(i);return a}(t,0,p)),"bevel"===r&&(i=1.05);var h=Yi/(512*this.overscaling)*15,f=t[c],y=this.segments.prepareSegment(10*p,this.layoutVertexArray,this.indexArray);this.distance=0;var d,m,v,g=n,x=l?"butt":n,b=!0,_=void 0,w=void 0,A=void 0,S=void 0;this.e1=this.e2=this.e3=-1,l&&(d=t[p-2],S=f.sub(d)._unit()._perp());for(var k=c;k<p;k++)if(!(w=l&&k===p-1?t[c+1]:t[k+1])||!t[k].equals(w)){S&&(A=S),d&&(_=d),d=t[k],S=w?w.sub(d)._unit()._perp():A;var z=(A=A||S).add(S);0===z.x&&0===z.y||z._unit();var I=z.x*S.x+z.y*S.y,B=0!==I?1/I:1/0,E=I<es&&_&&w;if(E&&k>c){var P=d.dist(_);if(P>2*h){var V=d.sub(d.sub(_)._mult(h/P)._round());this.distance+=V.dist(_),this.addCurrentVertex(V,this.distance,A.mult(1),0,0,!1,y,u),_=V}}var C=_&&w,M=C?r:w?g:x;if(C&&"round"===M&&(B<a?M="miter":B<=2&&(M="fakeround")),"miter"===M&&B>i&&(M="bevel"),"bevel"===M&&(B>2&&(M="flipbevel"),B<i&&(M="miter")),_&&(this.distance+=d.dist(_)),"miter"===M)z._mult(B),this.addCurrentVertex(d,this.distance,z,0,0,!1,y,u);else if("flipbevel"===M){if(B>100)z=S.clone().mult(-1);else{var T=A.x*S.y-A.y*S.x>0?-1:1,F=B*A.add(S).mag()/A.sub(S).mag();z._perp()._mult(F*T)}this.addCurrentVertex(d,this.distance,z,0,0,!1,y,u),this.addCurrentVertex(d,this.distance,z.mult(-1),0,0,!1,y,u)}else if("bevel"===M||"fakeround"===M){var L=A.x*S.y-A.y*S.x>0,O=-Math.sqrt(B*B-1);if(L?(v=0,m=O):(m=0,v=O),b||this.addCurrentVertex(d,this.distance,A,m,v,!1,y,u),"fakeround"===M){for(var D=Math.floor(8*(.5-(I-.5))),U=void 0,j=0;j<D;j++)U=S.mult((j+1)/(D+1))._add(A)._unit(),this.addPieSliceVertex(d,this.distance,U,L,y,u);this.addPieSliceVertex(d,this.distance,z,L,y,u);for(var R=D-1;R>=0;R--)U=A.mult((R+1)/(D+1))._add(S)._unit(),this.addPieSliceVertex(d,this.distance,U,L,y,u)}w&&this.addCurrentVertex(d,this.distance,S,-m,-v,!1,y,u)}else"butt"===M?(b||this.addCurrentVertex(d,this.distance,A,0,0,!1,y,u),w&&this.addCurrentVertex(d,this.distance,S,0,0,!1,y,u)):"square"===M?(b||(this.addCurrentVertex(d,this.distance,A,1,1,!1,y,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(d,this.distance,S,-1,-1,!1,y,u)):"round"===M&&(b||(this.addCurrentVertex(d,this.distance,A,0,0,!1,y,u),this.addCurrentVertex(d,this.distance,A,1,1,!0,y,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(d,this.distance,S,-1,-1,!0,y,u),this.addCurrentVertex(d,this.distance,S,0,0,!1,y,u)));if(E&&k<p-1){var q=d.dist(w);if(q>2*h){var N=d.add(w.sub(d)._mult(h/q)._round());this.distance+=N.dist(d),this.addCurrentVertex(N,this.distance,S.mult(1),0,0,!1,y,u),d=N}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,s)}},as.prototype.addCurrentVertex=function(t,e,r,n,i,a,o,s){var u,l=this.layoutVertexArray,p=this.indexArray;s&&(e=os(e,s)),u=r.clone(),n&&u._sub(r.perp()._mult(n)),is(l,t,u,a,!1,n,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=r.mult(-1),i&&u._sub(r.perp()._mult(i)),is(l,t,u,a,!0,-i,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>ns/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,r,n,i,a,o))},as.prototype.addPieSliceVertex=function(t,e,r,n,i,a){r=r.mult(n?-1:1);var o=this.layoutVertexArray,s=this.indexArray;a&&(e=os(e,a)),is(o,t,r,!1,n,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},sn("LineBucket",as,{omit:["layers","features"]});var ss=new Dn({"line-cap":new Mn(mt.layout_line["line-cap"]),"line-join":new Tn(mt.layout_line["line-join"]),"line-miter-limit":new Mn(mt.layout_line["line-miter-limit"]),"line-round-limit":new Mn(mt.layout_line["line-round-limit"])}),us={paint:new Dn({"line-opacity":new Tn(mt.paint_line["line-opacity"]),"line-color":new Tn(mt.paint_line["line-color"]),"line-translate":new Mn(mt.paint_line["line-translate"]),"line-translate-anchor":new Mn(mt.paint_line["line-translate-anchor"]),"line-width":new Tn(mt.paint_line["line-width"]),"line-gap-width":new Tn(mt.paint_line["line-gap-width"]),"line-offset":new Tn(mt.paint_line["line-offset"]),"line-blur":new Tn(mt.paint_line["line-blur"]),"line-dasharray":new Ln(mt.paint_line["line-dasharray"]),"line-pattern":new Fn(mt.paint_line["line-pattern"]),"line-gradient":new On(mt.paint_line["line-gradient"])}),layout:ss},ls=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new Sn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,n,i){return r=c({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,n,i)},e}(Tn))(us.paint.properties["line-width"].specification);ls.useIntegerZoom=!0;var ps=function(t){function e(e){t.call(this,e,us)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Na(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=ls.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new as(t)},e.prototype.queryRadius=function(t){var e=t,r=cs(ha("line-width",this,e),ha("line-gap-width",this,e)),n=ha("line-offset",this,e);return r/2+Math.abs(n)+fa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,n,a,o,s){var u=ya(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*cs(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),p=this.paint.get("line-offset").evaluate(e,r);return p&&(n=function(t,e){for(var r=[],n=new i(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],u=0;u<o.length;u++){var l=o[u-1],p=o[u],c=o[u+1],h=0===u?n:p.sub(l)._unit()._perp(),f=u===o.length-1?n:c.sub(p)._unit()._perp(),y=h._add(f)._unit(),d=y.x*f.x+y.y*f.y;y._mult(1/d),s.push(y._mult(e)._add(p))}r.push(s)}return r}(n,p*s)),function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];if(t.length>=3)for(var a=0;a<i.length;a++)if(pa(t,i[a]))return!0;if(ia(t,i,r))return!0}return!1}(u,n,l)},e}(Un);function cs(t,e){return e>0?e+2*t:t}var hs=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),fs=Nn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ys=(Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Nn([{name:"a_placed",components:2,type:"Uint8"}],4)),ds=(Nn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ms=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function vs(t,e,r){return t.sections.forEach(function(t){t.text=function(t,e,r){var n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),An.applyArabicShaping&&(t=An.applyArabicShaping(t)),t}(t.text,e,r)}),t}Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var gs={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},xs=function(t){function e(e,r,n,i){t.call(this,e,r),this.angle=n,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function _s(t,e){var r=e.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate(new Sn(t+1))};if("source"===r.kind)return{functionType:"source"};for(var n=r.zoomStops,i=0;i<n.length&&n[i]<=t;)i++;for(var a=i=Math.max(0,i-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var o={min:n[i],max:n[a]};return"composite"===r.kind?{functionType:"composite",zoomRange:o,propertyValue:e.value}:{functionType:"camera",layoutSize:r.evaluate(new Sn(t+1)),zoomRange:o,sizeRange:{min:r.evaluate(new Sn(o.min)),max:r.evaluate(new Sn(o.max))},propertyValue:e.value}}sn("Anchor",xs);var ws=Wo.VectorTileFeature.types,As=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ss(t,e,r,n,i,a,o,s){t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),a,o,s?s[0]:0,s?s[1]:0)}function ks(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}var zs=function(t){this.layoutVertexArray=new Jn,this.indexArray=new si,this.programConfigurations=t,this.segments=new zi,this.dynamicLayoutVertexArray=new $n,this.opacityVertexArray=new Wn,this.placedSymbolArray=new di};zs.prototype.upload=function(t,e,r,n){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,fs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,As,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t)},zs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},sn("SymbolBuffers",zs);var Is=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new zi,this.collisionVertexArray=new ei};Is.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ys.members,!0)},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},sn("CollisionBuffers",Is);var Bs=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_s(this.zoom,e["text-size"]),this.iconSizeData=_s(this.zoom,e["icon-size"]);var r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1);var a="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=a&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};Bs.prototype.createArrays=function(){this.text=new zs(new Xi(hs.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new zs(new Xi(hs.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Is(ti,ds.members,ui),this.collisionCircle=new Is(ti,ms.members,si),this.glyphOffsetArray=new xi,this.lineVertexArray=new _i,this.symbolInstances=new vi},Bs.prototype.calculateGlyphDependencies=function(t,e,r,n){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,r&&n){var a=gs[t.charAt(i)];a&&(e[a.charCodeAt(0)]=!0)}},Bs.prototype.populate=function(t,e){var r=this.layers[0],n=r.layout,i=n.get("text-font"),a=n.get("text-field"),o=n.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==o.value.kind||o.value.value&&o.value.value.length>0,l=n.get("symbol-sort-key");if(this.features=[],s||u){for(var p=e.iconDependencies,c=e.glyphDependencies,h=new Sn(this.zoom),f=0,y=t;f<y.length;f+=1){var d=y[f],m=d.feature,v=d.index,g=d.sourceLayerIndex;if(r._featureFilter(h,m)){var x=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",m);x=vs(b instanceof Rt?b:Rt.fromString(b),r,m)}var _=void 0;if(u&&(_=r.getValueAndResolveTokens("icon-image",m)),x||_){var w=this.sortFeaturesByKey?l.evaluate(m,{}):void 0,A={text:x,icon:_,index:v,sourceLayerIndex:g,geometry:Wi(m),properties:m.properties,type:ws[m.type],sortKey:w};if(void 0!==m.id&&(A.id=m.id),this.features.push(A),_&&(p[_]=!0),x)for(var S=i.evaluate(m,{}).join(","),k="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),z=0,I=x.sections;z<I.length;z+=1){var B=I[z],E=fn(x.toString()),P=B.fontStack||S,V=c[P]=c[P]||{};this.calculateGlyphDependencies(B.text,V,k,E)}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},r={},n=[],i=0;function a(e){n.push(t[e]),i++}function o(t,e,i){var a=r[t];return delete r[t],r[e]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function s(t,r,i){var a=e[r];return delete e[r],e[t]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function u(t,e,r){var n=r?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var l=0;l<t.length;l++){var p=t[l],c=p.geometry,h=p.text?p.text.toString():null;if(h){var f=u(h,c),y=u(h,c,!0);if(f in r&&y in e&&r[f]!==e[y]){var d=s(f,y,c),m=o(f,y,n[d].geometry);delete e[f],delete r[y],r[u(h,n[m].geometry,!0)]=m,n[d].geometry=null}else f in r?o(f,y,c):y in e?s(f,y,c):(a(l),e[f]=i-1,r[y]=i-1)}else a(l)}return n.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Bs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},Bs.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Bs.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Bs.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Bs.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Bs.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Bs.prototype.addSymbols=function(t,e,r,n,i,a,o,s,u,l){for(var p=t.indexArray,c=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,a.sortKey),y=this.glyphOffsetArray.length,d=f.vertexLength,m=0,v=e;m<v.length;m+=1){var g=v[m],x=g.tl,b=g.tr,_=g.bl,w=g.br,A=g.tex,S=f.vertexLength,k=g.glyphOffset[1];Ss(c,s.x,s.y,x.x,k+x.y,A.x,A.y,r),Ss(c,s.x,s.y,b.x,k+b.y,A.x+A.w,A.y,r),Ss(c,s.x,s.y,_.x,k+_.y,A.x,A.y+A.h,r),Ss(c,s.x,s.y,w.x,k+w.y,A.x+A.w,A.y+A.h,r),ks(h,s,0),p.emplaceBack(S,S+1,S+2),p.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,y,this.glyphOffsetArray.length-y,d,u,l,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,a,a.index,{})},Bs.prototype._addCollisionDebugVertex=function(t,e,r,n,i,a){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))},Bs.prototype.addCollisionDebugVertices=function(t,e,r,n,a,o,s,u){var l=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),p=l.vertexLength,c=a.layoutVertexArray,h=a.collisionVertexArray,f=s.anchorX,y=s.anchorY;if(this._addCollisionDebugVertex(c,h,o,f,y,new i(t,e)),this._addCollisionDebugVertex(c,h,o,f,y,new i(r,e)),this._addCollisionDebugVertex(c,h,o,f,y,new i(r,n)),this._addCollisionDebugVertex(c,h,o,f,y,new i(t,n)),l.vertexLength+=4,u){var d=a.indexArray;d.emplaceBack(p,p+1,p+2),d.emplaceBack(p,p+2,p+3),l.primitiveLength+=2}else{var m=a.indexArray;m.emplaceBack(p,p+1),m.emplaceBack(p+1,p+2),m.emplaceBack(p+2,p+3),m.emplaceBack(p+3,p),l.primitiveLength+=4}},Bs.prototype.addDebugCollisionBoxes=function(t,e,r){for(var n=t;n<e;n++){var i=this.collisionBoxArray.get(n),a=i.x1,o=i.y1,s=i.x2,u=i.y2,l=i.radius>0;this.addCollisionDebugVertices(a,o,s,u,l?this.collisionCircle:this.collisionBox,i.anchorPoint,r,l)}},Bs.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},Bs.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,n,i){for(var a={},o=e;o<r;o++){var s=t.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},a.textFeatureIndex=s.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=s.featureIndex),a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=n;u<i;u++){var l=t.get(u);if(0===l.radius){a.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},a.iconFeatureIndex=l.featureIndex;break}}return a},Bs.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex))}},Bs.prototype.hasTextData=function(){return this.text.segments.get().length>0},Bs.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Bs.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Bs.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Bs.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),r=e.vertexStartIndex+4*e.numGlyphs,n=e.vertexStartIndex;n<r;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},Bs.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],r=0;r<this.symbolInstances.length;r++)e.push(r);for(var n=Math.sin(t),i=Math.cos(t),a=[],o=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);a.push(0|Math.round(n*u.anchorX+i*u.anchorY)),o.push(u.featureIndex)}e.sort(function(t,e){return a[t]-a[e]||o[e]-o[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,p=e;l<p.length;l+=1){var c=p[l],h=this.symbolInstances.get(c);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var f=this.icon.placedSymbolArray.get(c);if(f.numGlyphs){var y=f.vertexStartIndex;this.icon.indexArray.emplaceBack(y,y+1,y+2),this.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},sn("SymbolBucket",Bs,{omit:["layers","collisionBoxArray","features","compareText"]}),Bs.MAX_GLYPHS=65535,Bs.addDynamicAttributes=ks;var Es=new Dn({"symbol-placement":new Mn(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Mn(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mn(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tn(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mn(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mn(mt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mn(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mn(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mn(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tn(mt.layout_symbol["icon-size"]),"icon-text-fit":new Mn(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mn(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tn(mt.layout_symbol["icon-image"]),"icon-rotate":new Tn(mt.layout_symbol["icon-rotate"]),"icon-padding":new Mn(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Mn(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new Tn(mt.layout_symbol["icon-offset"]),"icon-anchor":new Tn(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mn(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mn(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mn(mt.layout_symbol["text-rotation-alignment"]),"text-field":new Tn(mt.layout_symbol["text-field"]),"text-font":new Tn(mt.layout_symbol["text-font"]),"text-size":new Tn(mt.layout_symbol["text-size"]),"text-max-width":new Tn(mt.layout_symbol["text-max-width"]),"text-line-height":new Mn(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new Tn(mt.layout_symbol["text-letter-spacing"]),"text-justify":new Tn(mt.layout_symbol["text-justify"]),"text-anchor":new Tn(mt.layout_symbol["text-anchor"]),"text-max-angle":new Mn(mt.layout_symbol["text-max-angle"]),"text-rotate":new Tn(mt.layout_symbol["text-rotate"]),"text-padding":new Mn(mt.layout_symbol["text-padding"]),"text-keep-upright":new Mn(mt.layout_symbol["text-keep-upright"]),"text-transform":new Tn(mt.layout_symbol["text-transform"]),"text-offset":new Tn(mt.layout_symbol["text-offset"]),"text-allow-overlap":new Mn(mt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mn(mt.layout_symbol["text-ignore-placement"]),"text-optional":new Mn(mt.layout_symbol["text-optional"])}),Ps={paint:new Dn({"icon-opacity":new Tn(mt.paint_symbol["icon-opacity"]),"icon-color":new Tn(mt.paint_symbol["icon-color"]),"icon-halo-color":new Tn(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tn(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tn(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Mn(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mn(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tn(mt.paint_symbol["text-opacity"]),"text-color":new Tn(mt.paint_symbol["text-color"]),"text-halo-color":new Tn(mt.paint_symbol["text-halo-color"]),"text-halo-width":new Tn(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new Tn(mt.paint_symbol["text-halo-blur"]),"text-translate":new Mn(mt.paint_symbol["text-translate"]),"text-translate-anchor":new Mn(mt.paint_symbol["text-translate-anchor"])}),layout:Es},Vs=function(t){function e(e){t.call(this,e,Ps)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var r,n=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||yr(i.value)?n:(r=e.properties,n.replace(/{([^{}]+)}/g,function(t,e){return e in r?String(r[e]):""}))},e.prototype.createBucket=function(t){return new Bs(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Un),Cs={paint:new Dn({"background-color":new Mn(mt.paint_background["background-color"]),"background-pattern":new Ln(mt.paint_background["background-pattern"]),"background-opacity":new Mn(mt.paint_background["background-opacity"])})},Ms=function(t){function e(e){t.call(this,e,Cs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Un),Ts={paint:new Dn({"raster-opacity":new Mn(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mn(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mn(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mn(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Mn(mt.paint_raster["raster-saturation"]),"raster-contrast":new Mn(mt.paint_raster["raster-contrast"]),"raster-resampling":new Mn(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Mn(mt.paint_raster["raster-fade-duration"])})},Fs=function(t){function e(e){t.call(this,e,Ts)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Un),Ls=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},e}(Un),Os={circle:Ta,heatmap:Ka,hillshade:Xa,fill:Po,"fill-extrusion":Uo,line:ps,symbol:Vs,background:Ms,raster:Fs};function Ds(t){for(var e=0,r=0,n=0,i=t;n<i.length;n+=1){var a=i[n];e+=a.w*a.h,r=Math.max(r,a.w)}t.sort(function(t,e){return e.h-t.h});for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,u=0,l=0,p=t;l<p.length;l+=1)for(var c=p[l],h=o.length-1;h>=0;h--){var f=o[h];if(!(c.w>f.w||c.h>f.h)){if(c.x=f.x,c.y=f.y,u=Math.max(u,c.y+c.h),s=Math.max(s,c.x+c.w),c.w===f.w&&c.h===f.h){var y=o.pop();h<o.length&&(o[h]=y)}else c.h===f.h?(f.x+=c.w,f.w-=c.w):c.w===f.w?(f.y+=c.h,f.h-=c.h):(o.push({x:f.x+c.w,y:f.y,w:f.w-c.w,h:c.h}),f.y+=c.h,f.h-=c.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var Us=function(t,e){var r=e.pixelRatio;this.paddedRect=t,this.pixelRatio=r},js={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};js.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},js.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},js.tlbr.get=function(){return this.tl.concat(this.br)},js.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Us.prototype,js);var Rs=function(t,e){var r={},n={},i=[];for(var a in t){var o=t[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};i.push(s),r[a]=new Us(s,o)}for(var u in e){var l=e[u],p={x:0,y:0,w:l.data.width+2,h:l.data.height+2};i.push(p),n[u]=new Us(p,l)}var c=Ds(i),h=c.w,f=c.h,y=new Ra({width:h||1,height:f||1});for(var d in t){var m=t[d],v=r[d].paddedRect;Ra.copy(m.data,y,{x:0,y:0},{x:v.x+1,y:v.y+1},m.data)}for(var g in e){var x=e[g],b=n[g].paddedRect,_=b.x+1,w=b.y+1,A=x.data.width,S=x.data.height;Ra.copy(x.data,y,{x:0,y:0},{x:_,y:w},x.data),Ra.copy(x.data,y,{x:0,y:S-1},{x:_,y:w-1},{width:A,height:1}),Ra.copy(x.data,y,{x:0,y:0},{x:_,y:w+S},{width:A,height:1}),Ra.copy(x.data,y,{x:A-1,y:0},{x:_-1,y:w},{width:1,height:S}),Ra.copy(x.data,y,{x:0,y:0},{x:_+A,y:w},{width:1,height:S})}this.image=y,this.iconPositions=r,this.patternPositions=n};sn("ImagePosition",Us),sn("ImageAtlas",Rs);var qs=self.HTMLImageElement,Ns=self.HTMLCanvasElement,Ks=self.HTMLVideoElement,Gs=self.ImageData,Xs=function(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)};Xs.prototype.update=function(t,e){var r=t.width,n=t.height,i=!this.size||this.size[0]!==r||this.size[1]!==n,a=this.context,o=a.gl;this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!e||!1!==e.premultiply)),i?(this.size=[r,n],t instanceof qs||t instanceof Ns||t instanceof Ks||t instanceof Gs?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,r,n,0,this.format,o.UNSIGNED_BYTE,t.data)):t instanceof qs||t instanceof Ns||t instanceof Ks||t instanceof Gs?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,0,0,r,n,o.RGBA,o.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},Xs.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},Xs.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Xs.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Zs=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,p=-7,c=r?i-1:0,h=r?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-p)-1,f>>=-p,p+=s;p>0;a=256*a+t[e+c],c+=h,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=256*o+t[e+c],c+=h,p-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),a-=l}return(f?-1:1)*o*Math.pow(2,a-n)},Hs=function(t,e,r,n,i,a){var o,s,u,l=8*a-i-1,p=(1<<l)-1,c=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(o++,u/=2),o+c>=p?(s=0,o=p):o+c>=1?(s=(e*u-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&s,f+=y,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+f]=255&o,f+=y,o/=256,l-=8);t[r+f-y]|=128*d},Ys=Js;function Js(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function $s(t){return t.type===Js.Bytes?t.readVarint()+t.pos:t.pos+1}function Ws(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Qs(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function tu(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function eu(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function ru(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function nu(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function iu(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function au(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function ou(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function su(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function uu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function pu(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function cu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Js.Varint=0,Js.Fixed64=1,Js.Bytes=2,Js.Fixed32=5,Js.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,t(i,e,this),this.pos===a&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=cu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=lu(this.buf,this.pos)+4294967296*cu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Zs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Zs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return Ws(t,n,e);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return Ws(t,n,e);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return Ws(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var n="",i=e;i<r;){var a,o,s,u=t[i],l=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p>r)break;1===p?u<128&&(l=u):2===p?128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===p?(a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===p&&(a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,p=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=p}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=$s(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Js.Varint)for(;this.buf[this.pos++]>127;);else if(e===Js.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Js.Fixed32)this.pos+=4;else{if(e!==Js.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pu(this.buf,-1&t,this.pos),pu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pu(this.buf,-1&t,this.pos),pu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,a=0;a<e.length;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Qs(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Hs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Hs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Qs(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Js.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,tu,e)},writePackedSVarint:function(t,e){this.writeMessage(t,eu,e)},writePackedBoolean:function(t,e){this.writeMessage(t,iu,e)},writePackedFloat:function(t,e){this.writeMessage(t,ru,e)},writePackedDouble:function(t,e){this.writeMessage(t,nu,e)},writePackedFixed32:function(t,e){this.writeMessage(t,au,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,ou,e)},writePackedFixed64:function(t,e){this.writeMessage(t,su,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,uu,e)},writeBytesField:function(t,e){this.writeTag(t,Js.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Js.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Js.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Js.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Js.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Js.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Js.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Js.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Js.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Js.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var hu=3;function fu(t,e,r){1===t&&r.readMessage(yu,e)}function yu(t,e,r){if(3===t){var n=r.readMessage(du,{}),i=n.id,a=n.bitmap,o=n.width,s=n.height,u=n.left,l=n.top,p=n.advance;e.push({id:i,bitmap:new ja({width:o+2*hu,height:s+2*hu},a),metrics:{width:o,height:s,left:u,top:l,advance:p}})}}function du(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}var mu=hu,vu=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function gu(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}vu.prototype.send=function(t,e,r,n){var i=this,a=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[a]=r);var o=[];if(this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:t,id:String(a),data:ln(e,o)},o),r)return{cancel:function(){return i.target.postMessage({targetMapId:n,sourceMapId:i.mapId,type:"<cancel>",id:String(a)})}}},vu.prototype.receive=function(t){var e,r=this,n=t.data,i=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var a=function(t,e){delete r.callbacks[i];var n=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(i),error:t?ln(t):null,data:ln(e,n)},n)};if("<response>"===n.type||"<cancel>"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e&&n.error?e(pn(n.error)):e&&e(null,pn(n.data));else if(void 0!==n.id&&this.parent[n.type]){this.callbacks[n.id]=null;var o=this.parent[n.type](n.sourceMapId,pn(n.data),a);o&&null===this.callbacks[n.id]&&(this.callbacks[n.id]=o)}else if(void 0!==n.id&&this.parent.getWorkerSource){var s=n.type.split("."),u=pn(n.data);this.parent.getWorkerSource(n.sourceMapId,s[0],u.source)[s[1]](u,a)}else this.parent[n.type](pn(n.data))}},vu.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var xu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};xu.prototype.setNorthEast=function(t){return this._ne=t instanceof bu?new bu(t.lng,t.lat):bu.convert(t),this},xu.prototype.setSouthWest=function(t){return this._sw=t instanceof bu?new bu(t.lng,t.lat):bu.convert(t),this},xu.prototype.extend=function(t){var e,r,n=this._sw,i=this._ne;if(t instanceof bu)e=t,r=t;else{if(!(t instanceof xu))return Array.isArray(t)?t.every(Array.isArray)?this.extend(xu.convert(t)):this.extend(bu.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return n||i?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new bu(e.lng,e.lat),this._ne=new bu(r.lng,r.lat)),this},xu.prototype.getCenter=function(){return new bu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},xu.prototype.getSouthWest=function(){return this._sw},xu.prototype.getNorthEast=function(){return this._ne},xu.prototype.getNorthWest=function(){return new bu(this.getWest(),this.getNorth())},xu.prototype.getSouthEast=function(){return new bu(this.getEast(),this.getSouth())},xu.prototype.getWest=function(){return this._sw.lng},xu.prototype.getSouth=function(){return this._sw.lat},xu.prototype.getEast=function(){return this._ne.lng},xu.prototype.getNorth=function(){return this._ne.lat},xu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},xu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},xu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},xu.convert=function(t){return!t||t instanceof xu?t:new xu(t)};var bu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function _u(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function wu(t){return(180+t)/360}function Au(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Su(t,e){return t/_u(e)}function ku(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}bu.prototype.wrap=function(){return new bu(p(this.lng,-180,180),this.lat)},bu.prototype.toArray=function(){return[this.lng,this.lat]},bu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},bu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new xu(new bu(this.lng-r,this.lat-e),new bu(this.lng+r,this.lat+e))},bu.convert=function(t){if(t instanceof bu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new bu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new bu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zu=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};zu.fromLngLat=function(t,e){void 0===e&&(e=0);var r=bu.convert(t);return new zu(wu(r.lng),Au(r.lat),Su(e,r.lat))},zu.prototype.toLngLat=function(){return new bu(360*this.x-180,ku(this.y))},zu.prototype.toAltitude=function(){return this.z*_u(ku(this.y))};var Iu=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Pu(0,t,e,r)};Iu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Iu.prototype.url=function(t,e){var r,n,i,a,o,s=(r=this.x,n=this.y,i=this.z,a=gu(256*r,256*(n=Math.pow(2,i)-n-1),i),o=gu(256*(r+1),256*(n+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(t,e,r){for(var n,i="",a=t;a>0;a--)i+=(e&(n=1<<a-1)?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Iu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*Yi,(t.y*e-this.y)*Yi)};var Bu=function(t,e){this.wrap=t,this.canonical=e,this.key=Pu(t,e.z,e.x,e.y)},Eu=function(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Iu(r,+n,+i),this.key=Pu(e,t,n,i)};function Pu(t,e,r,n){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*n+r)+e}Eu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Eu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Eu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Eu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Eu.prototype.children=function(t){if(this.overscaledZ>=t)return[new Eu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Eu(e,this.wrap,e,r,n),new Eu(e,this.wrap,e,r+1,n),new Eu(e,this.wrap,e,r,n+1),new Eu(e,this.wrap,e,r+1,n+1)]},Eu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Eu.prototype.wrapped=function(){return new Eu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Eu.prototype.unwrapTo=function(t){return new Eu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Eu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Eu.prototype.toUnwrapped=function(){return new Bu(this.wrap,this.canonical)},Eu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Eu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new zu(t.x-this.wrap,t.y))},sn("CanonicalTileID",Iu),sn("OverscaledTileID",Eu,{omit:["posMatrix"]});var Vu=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return w('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,a="terrarium"===r?this._unpackTerrarium:this._unpackMapbox,o=0;o<n;o++)for(var s=0;s<n;s++){var u=4*(o*n+s);this.set(s,o,a(i[u],i[u+1],i[u+2]))}for(var l=0;l<n;l++)this.set(-1,l,this.get(0,l)),this.set(n,l,this.get(n-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,n,this.get(l,n-1));this.set(-1,-1,this.get(0,0)),this.set(n,-1,this.get(n-1,0)),this.set(-1,n,this.get(0,n-1)),this.set(n,n,this.get(n-1,n-1))};Vu.prototype.set=function(t,e,r){this.data[this._idx(t,e)]=r+65536},Vu.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},Vu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Vu.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Vu.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Vu.prototype.getPixels=function(){return new Ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Vu.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,i=e*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,u=-r*this.dim,l=a;l<o;l++)for(var p=n;p<i;p++)this.set(p,l,t.get(p+s,l+u))},sn("DEMData",Vu);var Cu=Nn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Mu=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};Mu.prototype.encode=function(t){return this._stringToNumber[t]},Mu.prototype.decode=function(t){return this._numberToString[t]};var Tu=function(t,e,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Fu={geometry:{configurable:!0}};Fu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Fu.geometry.set=function(t){this._geometry=t},Tu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Tu.prototype,Fu);var Lu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Lu.prototype.updateState=function(t,e,r){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},c(this.stateChanges[t][n],r),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==n&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var a in this.deletedStates[t][n]={},this.state[t][n])r[a]||(this.deletedStates[t][n][a]=null);else for(var o in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][o]&&delete this.deletedStates[t][n][o]},Lu.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},Lu.prototype.getState=function(t,e){var r=String(e),n=this.state[t]||{},i=this.stateChanges[t]||{},a=c({},n[r],i[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var o=this.deletedStates[t][e];if(null===o)return{};for(var s in o)delete a[s]}return a},Lu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Lu.prototype.coalesceChanges=function(t,e){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),c(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o]){for(var u in this.state[o])s[u]={};this.state[o]={}}else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var p=0,h=Object.keys(this.deletedStates[o][l]);p<h.length;p+=1){var f=h[p];delete this.state[o][l][f]}s[l]=this.state[o][l]}r[o]=r[o]||{},c(r[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var y in t)t[y].setFeatureState(r,e)};var Ou=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new en(Yi,16,0),this.grid3D=new en(Yi,16,0),this.featureIndexArray=r||new Ai};function Du(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0,o=t;a<o.length;a+=1){var s=o[a];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y)}return{minX:e,minY:r,maxX:n,maxY:i}}function Uu(t,e){return e-t}Ou.prototype.insert=function(t,e,r,n,i,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var s=a?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],p=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var h=l[c];p[0]=Math.min(p[0],h.x),p[1]=Math.min(p[1],h.y),p[2]=Math.max(p[2],h.x),p[3]=Math.max(p[3],h.y)}p[0]<Yi&&p[1]<Yi&&p[2]>=0&&p[3]>=0&&s.insert(o,p[0],p[1],p[2],p[3])}},Ou.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Wo.VectorTile(new Ys(this.rawTileData)).layers,this.sourceLayerCoder=new Mu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ou.prototype.query=function(t,e,r){var n=this;this.loadVTLayers();for(var a=t.params||{},o=Yi/t.tileSize/t.scale,s=Er(a.filter),u=t.queryGeometry,l=t.queryPadding*o,p=Du(u),c=this.grid.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l),h=Du(t.cameraQueryGeometry),y=0,d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,function(e,r,n,a){return function(t,e,r,n,a){for(var o=0,s=t;o<s.length;o+=1){var u=s[o];if(e<=u.x&&r<=u.y&&n>=u.x&&a>=u.y)return!0}var l=[new i(e,r),new i(e,a),new i(n,a),new i(n,r)];if(t.length>2)for(var p=0,c=l;p<c.length;p+=1)if(pa(t,c[p]))return!0;for(var h=0;h<t.length-1;h++)if(ca(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-l,r-l,n+l,a+l)});y<d.length;y+=1){var m=d[y];c.push(m)}c.sort(Uu);for(var v,g={},x=function(i){var l=c[i];if(l!==v){v=l;var p=n.featureIndexArray.get(l),h=null;n.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,s,a.layers,e,function(e,i){h||(h=Wi(e));var a={};return e.id&&(a=r.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(u,e,a,h,n.z,t.transform,o,t.pixelPosMatrix)})}},b=0;b<c.length;b++)x(b);return g},Ou.prototype.loadMatchingFeature=function(t,e,r,n,i,a,o,s){var u=this.bucketLayerIDs[e];if(!a||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(a,u)){var l=this.sourceLayerCoder.decode(r),p=this.vtLayers[l].feature(n);if(i(new Sn(this.tileID.overscaledZ),p))for(var c=0;c<u.length;c++){var h=u[c];if(!(a&&a.indexOf(h)<0)){var f=o[h];if(f){var y=!s||s(p,f);if(y){var d=new Tu(p,this.z,this.x,this.y);d.layer=f.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:n,feature:d,intersectionZ:y})}}}}}},Ou.prototype.lookupSymbolFeatures=function(t,e,r,n,i,a){var o={};this.loadVTLayers();for(var s=Er(n),u=0,l=t;u<l.length;u+=1){var p=l[u];this.loadMatchingFeature(o,e,r,p,s,i,a)}return o},Ou.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var n=0,i=r[e];n<i.length;n+=1)if(t===i[n])return!0;return!1},sn("FeatureIndex",Ou,{omit:["rawTileData","sourceLayerCoder"]});var ju=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};ju.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<V.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ju.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ju.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var n=function(){var t=a[i],n=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return n.filter(function(e){return e.id===t})[0]}));for(var o=0,s=n;o<s.length;o+=1){var u=s[o];r[u.id]=t}}},i=0,a=t;i<a.length;i+=1)n();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Bs){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new fi},ju.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ju.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},ju.prototype.getBucket=function(t){return this.buckets[t.id]},ju.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Xs(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Xs(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},ju.prototype.queryRenderedFeatures=function(t,e,r,n,i,a,o,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:o,params:a,queryPadding:this.queryPadding*s},t,e):{}},ju.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var a=Er(e&&e.filter),o=this.tileID.canonical,s=o.z,u=o.x,l=o.y,p={z:s,x:u,y:l},c=0;c<i.length;c++){var h=i.feature(c);if(a(new Sn(this.tileID.overscaledZ),h)){var f=new Tu(h,s,u,l);f.tile=p,t.push(f)}}}},ju.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},ju.prototype.setMask=function(t,e){if(!o(this.mask,t)&&(this.mask=t,this.clearMask(),!o(t,{0:!0}))){var r=new Xn,n=new si;this.segments=new zi,this.segments.prepareSegment(0,r,n);for(var a=Object.keys(t),s=0;s<a.length;s++){var u=t[a[s]],l=Yi>>u.z,p=new i(u.x*l,u.y*l),c=new i(p.x+l,p.y+l),h=this.segments.prepareSegment(4,r,n);r.emplaceBack(p.x,p.y,p.x,p.y),r.emplaceBack(c.x,p.y,c.x,p.y),r.emplaceBack(p.x,c.y,p.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var f=h.vertexLength;n.emplaceBack(f,f+1,f+2),n.emplaceBack(f+1,f+2,f+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,Cu.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},ju.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ju.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ju.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,r,n,i){var a=n||i;return e[r]=!a||a.toLowerCase(),""}),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var a=this.expirationTime-e;a?this.expirationTime=n+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ju.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ju.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=t[a];o&&s&&0!==Object.keys(s).length&&(i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(i))))}}},ju.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ju.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()},ju.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ju.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=V.now()+t};var Ru={horizontal:1,vertical:2,horizontalOnly:3},qu=function(){this.text="",this.sectionIndex=[],this.sections=[]};qu.fromFeature=function(t,e){for(var r=new qu,n=0;n<t.sections.length;n++){var i=t.sections[n];r.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),r.text+=i.text;for(var a=0;a<i.text.length;a++)r.sectionIndex.push(n)}return r},qu.prototype.length=function(){return this.text.length},qu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},qu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},qu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;n&&mn(n)&&!gs[t[r+1]]||i&&mn(i)&&!gs[t[r-1]]||!gs[t[r]]?e+=t[r]:e+=gs[t[r]]}return e}(this.text)},qu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Nu[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=t&&Nu[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},qu.prototype.substring=function(t,e){var r=new qu;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},qu.prototype.toString=function(){return this.text},qu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,r){return Math.max(e,t.sections[r].scale)},0)};var Nu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ku={};function Gu(t,e,r,n){var i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Xu(t,e){var r=0;return 10===t&&(r-=1e4),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Zu(t,e,r,n,i,a){for(var o=null,s=Gu(e,r,i,a),u=0,l=n;u<l.length;u+=1){var p=l[u],c=Gu(e-p.x,r,i,a)+p.badness;c<=s&&(o=p,s=c)}return{index:t,x:e,priorBreak:o,badness:s}}function Hu(t,e,r,n){if(!r)return[];if(!t)return[];for(var i,a=[],o=function(t,e,r,n){for(var i=0,a=0;a<t.length();a++){var o=t.getSection(a),s=n[o.fontStack],u=s&&s[t.getCharCode(a)];u&&(i+=u.metrics.advance*o.scale+e)}return i/Math.max(1,Math.ceil(i/r))}(t,e,r,n),s=0,u=0;u<t.length();u++){var l=t.getSection(u),p=t.getCharCode(u),c=n[l.fontStack],h=c&&c[p];h&&!Nu[p]&&(s+=h.metrics.advance*l.scale+e),u<t.length()-1&&(Ku[p]||!((i=p)<11904)&&(hn["Bopomofo Extended"](i)||hn.Bopomofo(i)||hn["CJK Compatibility Forms"](i)||hn["CJK Compatibility Ideographs"](i)||hn["CJK Compatibility"](i)||hn["CJK Radicals Supplement"](i)||hn["CJK Strokes"](i)||hn["CJK Symbols and Punctuation"](i)||hn["CJK Unified Ideographs Extension A"](i)||hn["CJK Unified Ideographs"](i)||hn["Enclosed CJK Letters and Months"](i)||hn["Halfwidth and Fullwidth Forms"](i)||hn.Hiragana(i)||hn["Ideographic Description Characters"](i)||hn["Kangxi Radicals"](i)||hn["Katakana Phonetic Extensions"](i)||hn.Katakana(i)||hn["Vertical Forms"](i)||hn["Yi Radicals"](i)||hn["Yi Syllables"](i)))&&a.push(Zu(u+1,s,o,a,Xu(p,t.getCharCode(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Zu(t.length(),s,o,a,0,!0))}function Yu(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Ju(t,e,r,n,i){if(i){var a=t[n],o=e[a.fontStack],s=o&&o[a.glyph];if(s)for(var u=s.metrics.advance*a.scale,l=(t[n].x+u)*i,p=r;p<=n;p++)t[p].x-=l}}Ku[10]=!0,Ku[32]=!0,Ku[38]=!0,Ku[40]=!0,Ku[41]=!0,Ku[43]=!0,Ku[45]=!0,Ku[47]=!0,Ku[173]=!0,Ku[183]=!0,Ku[8203]=!0,Ku[8208]=!0,Ku[8211]=!0,Ku[8231]=!0,t.createCommonjsModule=e,t.window=self,t.Point=i,t.browser=V,t.getJSON=function(t,e){return at(c(t,{type:"json"}),e)},t.normalizeSpriteURL=function(t,e,r,n){var i=X(t);return U(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+r,D(i,n)):(i.path+=""+e+r,Z(i))},t.ResourceType=et,t.getImage=pt,t.RGBAImage=Ra,t.ImagePosition=Us,t.Texture=Xs,t.potpack=Ds,t.normalizeGlyphsURL=function(t,e){if(!U(t))return t;var r=X(t);return r.path="/fonts/v1"+r.path,D(r,e)},t.getArrayBuffer=ot,t.parseGlyphPBF=function(t){return new Ys(t).readFields(fu,[])},t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,i=new Array(t.length),a=null;t.forEach(function(t,o){e(t,function(t,e){t&&(a=t),i[o]=e,0==--n&&r(a,i)})})},t.isChar=hn,t.AlphaImage=ja,t.Properties=Dn,t.DataConstantProperty=Mn,t.styleSpec=mt,t.validateLight=$r,t.endsWith=v,t.emitValidationErrors=tn,t.validateStyle=Jr,t.extend=c,t.Evented=dt,t.sphericalToCartesian=function(t){var e=t[0],r=t[1],n=t[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(n),y:e*Math.sin(r)*Math.sin(n),z:e*Math.cos(n)}},t.number=le,t.Transitionable=In,t.warnOnce=w,t.uniqueId=f,t.Actor=vu,t.normalizeSourceURL=function(t,e){if(!U(t))return t;var r=X(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),D(r,e)},t.pick=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n];i in t&&(r[i]=t[i])}return r},t.canonicalizeTileset=function(t,e){if(!U(e))return t.tiles||[];for(var r=[],n=0,i=t.tiles;n<i.length;n+=1){var a=i[n],o=K(a);r.push(o)}return r},t.LngLatBounds=xu,t.mercatorXfromLng=wu,t.mercatorYfromLat=Au,t.Event=ft,t.ErrorEvent=yt,t.postTurnstileEvent=W,t.postMapLoadEvent=tt,t.normalizeTileURL=function(t,e,r){if(!e||!U(e))return t;var n=X(t),i=V.devicePixelRatio>=2||512===r?"@2x":"",a=M.supported?".webp":"$1";return n.path=n.path.replace(q,""+i+a),n.path="/v4"+n.path,D(n)},t.OverscaledTileID=Eu,t.EXTENT=Yi,t.MercatorCoordinate=zu,t.CanonicalTileID=Iu,t.StructArrayLayout4i8=Xn,t.rasterBoundsAttributes=Cu,t.SegmentVector=zi,t.getVideo=function(t,e){var r,n,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");r=t[a],n=void 0,(n=self.document.createElement("a")).href=r,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),o.src=t[a],i.appendChild(o)}return{cancel:function(){}}},t.ValidationError=vt,t.bindAll=m,t.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],d=e[12],m=e[13],v=e[14],g=e[15],x=r[0],b=r[1],_=r[2],w=r[3];return t[0]=x*n+b*s+_*c+w*d,t[1]=x*i+b*u+_*h+w*m,t[2]=x*a+b*l+_*f+w*v,t[3]=x*o+b*p+_*y+w*g,x=r[4],b=r[5],_=r[6],w=r[7],t[4]=x*n+b*s+_*c+w*d,t[5]=x*i+b*u+_*h+w*m,t[6]=x*a+b*l+_*f+w*v,t[7]=x*o+b*p+_*y+w*g,x=r[8],b=r[9],_=r[10],w=r[11],t[8]=x*n+b*s+_*c+w*d,t[9]=x*i+b*u+_*h+w*m,t[10]=x*a+b*l+_*f+w*v,t[11]=x*o+b*p+_*y+w*g,x=r[12],b=r[13],_=r[14],w=r[15],t[12]=x*n+b*s+_*c+w*d,t[13]=x*i+b*u+_*h+w*m,t[14]=x*a+b*l+_*f+w*v,t[15]=x*o+b*p+_*y+w*g,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.translate=function(t,e,r){var n,i,a,o,s,u,l,p,c,h,f,y,d=r[0],m=r[1],v=r[2];return e===t?(t[12]=e[0]*d+e[4]*m+e[8]*v+e[12],t[13]=e[1]*d+e[5]*m+e[9]*v+e[13],t[14]=e[2]*d+e[6]*m+e[10]*v+e[14],t[15]=e[3]*d+e[7]*m+e[11]*v+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],h=e[9],f=e[10],y=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=p,t[8]=c,t[9]=h,t[10]=f,t[11]=y,t[12]=n*d+s*m+c*v+e[12],t[13]=i*d+u*m+h*v+e[13],t[14]=a*d+l*m+f*v+e[14],t[15]=o*d+p*m+y*v+e[15]),t},t.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.Color=Dt,t.isEqual=o,t.keysDifference=function(t,e){var r=[];for(var n in t)n in e||r.push(n);return r},t.Tile=ju,t.SourceFeatureState=Lu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*n,t[1]=o*i+p*n,t[2]=s*i+c*n,t[3]=u*i+h*n,t[4]=l*i-a*n,t[5]=p*i-o*n,t[6]=c*i-s*n,t[7]=h*i-u*n,t},t.evaluateSizeForZoom=function(t,e,r){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var n=t.propertyValue,i=t.zoomRange,a=t.sizeRange,o=l(br(n,r.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+o*(a.max-a.min)}}var s=t.propertyValue,u=t.zoomRange;return{uSizeT:l(br(s,r.specification).interpolationFactor(e,u.min,u.max),0,1),uSize:0}},t.WritingMode=Ru,t.transformMat4=Sa,t.evaluateSizeForFeature=function(t,e,r){var n=e;return"source"===t.functionType?r.lowerSize/256:"composite"===t.functionType?le(r.lowerSize/256,r.upperSize/256,n.uSizeT):n.uSize},t.addDynamicAttributes=ks,t.properties=Ps,t.polygonIntersectsPolygon=ea,t.isMapboxURL=U,t.normalizeStyleURL=function(t,e){if(!U(t))return t;var r=X(t);return r.path="/styles/v1"+r.path,D(r,e)},t.createStyleLayer=function(t){return"custom"===t.type?new Ls(t):new Os[t.type](t)},t.clone=b,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.filterObject=x,t.mapObject=g,t.evented=wn,t.makeRequest=at,t.registerForPluginAvailability=function(t){return bn?t({pluginURL:bn,completionCallback:gn}):wn.once("pluginAvailable",t),t},t.ZoomHistory=cn,t.getReferrer=it,t.createLayout=Nn,t.UniformMatrix4f=Di,t.Uniform3f=Ti,t.Uniform1f=Ci,t.Uniform1i=Vi,t.Uniform2f=Mi,t.Uniform4f=Fi,t.create=ga,t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},t.create$1=function(){var t=new va(16);return va!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*l,t[15]=1,t},t.UniformColor=Li,t.clamp=l,t.StructArrayLayout2i4=Gn,t.StructArrayLayout2ui4=ui,t.ProgramConfiguration=Gi,t.StructArrayLayout1ui2=li,t.StructArrayLayout3ui6=si,t.wrap=p,t.create$2=function(){var t=new va(4);return va!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t},t.LngLat=bu,t.UnwrappedTileID=Bu,t.perspective=function(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t},t.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*n,t[5]=o*i+p*n,t[6]=s*i+c*n,t[7]=u*i+h*n,t[8]=l*i-a*n,t[9]=p*i-o*n,t[10]=c*i-s*n,t[11]=h*i-u*n,t},t.mercatorZfromAltitude=Su,t.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],h=e[10],f=e[11],y=e[12],d=e[13],m=e[14],v=e[15],g=r*s-n*o,x=r*u-i*o,b=r*l-a*o,_=n*u-i*s,w=n*l-a*s,A=i*l-a*u,S=p*d-c*y,k=p*m-h*y,z=p*v-f*y,I=c*m-h*d,B=c*v-f*d,E=h*v-f*m,P=g*E-x*B+b*I+_*z-w*k+A*S;return P?(P=1/P,t[0]=(s*E-u*B+l*I)*P,t[1]=(i*B-n*E-a*I)*P,t[2]=(d*A-m*w+v*_)*P,t[3]=(h*w-c*A-f*_)*P,t[4]=(u*z-o*E-l*k)*P,t[5]=(r*E-i*z+a*k)*P,t[6]=(m*b-y*A-v*x)*P,t[7]=(p*A-h*b+f*x)*P,t[8]=(o*B-s*z+l*S)*P,t[9]=(n*z-r*B-a*S)*P,t[10]=(y*w-d*b+v*g)*P,t[11]=(c*b-p*w-f*g)*P,t[12]=(s*k-o*I-u*S)*P,t[13]=(r*I-n*k+i*S)*P,t[14]=(d*x-y*_-m*g)*P,t[15]=(p*_-c*x+h*g)*P,t):null},t.ease=u,t.bezier=s,t.config=C,t.webpSupported=M,t.EvaluationParameters=Sn,t.version="0.53.1",t.setRTLTextPlugin=function(t,e){if(xn)throw new Error("setRTLTextPlugin cannot be called multiple times.");xn=!0,bn=V.resolveURL(t),gn=function(t){t?(xn=!1,bn=null,e&&e(t)):_n=!0},wn.fire(new ft("pluginAvailable",{pluginURL:bn,completionCallback:gn}))},t.featureFilter=Er,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.Anchor=xs,t.GLYPH_PBF_BORDER=mu,t.distToSegmentSquared=ua,t.allowsLetterSpacing=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!yn(r[e].charCodeAt(0)))return!1;return!0},t.shapeText=function(t,e,r,n,i,a,o,s,u,l,p){var c=qu.fromFeature(t,r);p===Ru.vertical&&c.verticalizePunctuation();var h,f=[],y={positionedGlyphs:f,text:c,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:p},d=An.processBidirectionalText,m=An.processStyledBidirectionalText;if(d&&1===c.sections.length){h=[];for(var v=0,g=d(c.toString(),Hu(c,s,n,e));v<g.length;v+=1){var x=g[v],b=new qu;b.text=x,b.sections=c.sections;for(var _=0;_<x.length;_++)b.sectionIndex.push(0);h.push(b)}}else if(m){h=[];for(var w=0,A=m(c.text,c.sectionIndex,Hu(c,s,n,e));w<A.length;w+=1){var S=A[w],k=new qu;k.text=S[0],k.sectionIndex=S[1],k.sections=c.sections,h.push(k)}}else h=function(t,e){for(var r=[],n=t.text,i=0,a=0,o=e;a<o.length;a+=1){var s=o[a];r.push(t.substring(i,s)),i=s}return i<n.length&&r.push(t.substring(i,n.length)),r}(c,Hu(c,s,n,e));return function(t,e,r,n,i,a,o,s,u){for(var l=0,p=-17,c=0,h=t.positionedGlyphs,f="right"===a?1:"left"===a?0:.5,y=0,d=r;y<d.length;y+=1){var m=d[y];m.trim();var v=m.getMaxScale();if(m.length()){for(var g=h.length,x=0;x<m.length();x++){var b=m.getSection(x),_=m.getCharCode(x),w=24*(v-b.scale),A=e[b.fontStack],S=A&&A[_];S&&(dn(_)&&o!==Ru.horizontal?(h.push({glyph:_,x:l,y:w,vertical:!0,scale:b.scale,fontStack:b.fontStack}),l+=u*b.scale+s):(h.push({glyph:_,x:l,y:p+w,vertical:!1,scale:b.scale,fontStack:b.fontStack}),l+=S.metrics.advance*b.scale+s))}if(h.length!==g){var k=l-s;c=Math.max(k,c),Ju(h,e,g,h.length-1,f)}l=0,p+=n*v}else p+=n}var z=Yu(i),I=z.horizontalAlign,B=z.verticalAlign;!function(t,e,r,n,i,a,o){for(var s=(e-r)*i,u=(-n*o+.5)*a,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(h,f,I,B,c,n,r.length);var E=p- -17;t.top+=-B*E,t.bottom=t.top+E,t.left+=-I*c,t.right=t.left+c}(y,e,h,i,a,o,p,s,l),!!f.length&&(y.text=y.text.toString(),y)},t.allowsVerticalWritingMode=fn,t.shapeIcon=function(t,e,r){var n=Yu(r),i=n.horizontalAlign,a=n.verticalAlign,o=e[0],s=e[1],u=o-t.displaySize[0]*i,l=u+t.displaySize[0],p=s-t.displaySize[1]*a;return{image:t,top:p,bottom:p+t.displaySize[1],left:u,right:l}},t.classifyRings=So,t.SIZE_PACK_FACTOR=256,t.SymbolBucket=Bs,t.register=sn,t.CollisionBoxArray=fi,t.DictionaryCoder=Mu,t.FeatureIndex=Ou,t.ImageAtlas=Rs,t.LineBucket=as,t.FillBucket=Bo,t.FillExtrusionBucket=Fo,t.mvt=Wo,t.Protobuf=Ys,t.DEMData=Vu,t.vectorTile=Wo,t.Point$1=i,t.pbf=Ys,t.createExpression=dr,t.plugin=An}),define(0,function(e){function t(e){var r=typeof e;if("number"===r||"boolean"===r||"string"===r||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",o=0,i=e;o<i.length;o+=1)n+=t(i[o])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+t(e[a[l]])+",";return s+"}"}function r(r){for(var n="",o=0,i=e.refProperties;o<i.length;o+=1)n+="/"+t(r[i[o]]);return n}var n=function(e){e&&this.replace(e)};function o(e,t,r,n,o){if(void 0===t.segment)return!0;for(var i=t,a=t.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=e[a].dist(i),i=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<r/2;){var h=e[a-1],c=e[a],p=e[a+1];if(!p)return!1;var f=h.angleTo(c)-c.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>o)return!1;a++,s+=c.dist(p)}return!0}function i(e){for(var t=0,r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function a(e,t,r){return e?.6*t*r:0}function s(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function l(t,r,n,l,u,h){for(var c=a(n,u,h),p=s(n,l)*h,f=0,d=i(t)/2,g=0;g<t.length-1;g++){var m=t[g],v=t[g+1],y=m.dist(v);if(f+y>d){var x=(d-f)/y,w=e.number(m.x,v.x,x),M=e.number(m.y,v.y,x),S=new e.Anchor(w,M,v.angleTo(m),g);return S._round(),!c||o(t,S,p,c,r)?S:void 0}f+=y}}function u(t,r,n,l,u,h,c,p,f){var d=a(l,h,c),g=s(l,u),m=g*c,v=0===t[0].x||t[0].x===f||0===t[0].y||t[0].y===f;return r-m<r/4&&(r=m+r/4),function t(r,n,a,s,l,u,h,c,p){for(var f=u/2,d=i(r),g=0,m=n-a,v=[],y=0;y<r.length-1;y++){for(var x=r[y],w=r[y+1],M=x.dist(w),S=w.angleTo(x);m+a<g+M;){var _=((m+=a)-g)/M,P=e.number(x.x,w.x,_),b=e.number(x.y,w.y,_);if(P>=0&&P<p&&b>=0&&b<p&&m-f>=0&&m+f<=d){var T=new e.Anchor(P,b,S,y);T._round(),s&&!o(r,T,u,s,l)||v.push(T)}}g+=M}return c||v.length||h||(v=t(r,g/2,a,s,l,u,h,!0,p)),v}(t,v?r/2*p%r:(g/2+2*h)*c*p%r,r,d,n,m,v,!1,f)}n.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},n.prototype.update=function(t,n){for(var o=this,i=0,a=t;i<a.length;i+=1){var s=a[i];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=e.createStyleLayer(s);l._featureFilter=e.featureFilter(l.filter)}for(var u=0,h=n;u<h.length;u+=1){var c=h[u];delete this._layerConfigs[c],delete this._layers[c]}this.familiesBySource={};for(var p=0,f=function(e){for(var t={},n=0;n<e.length;n++){var o=r(e[n]),i=t[o];i||(i=t[o]=[]),i.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}(e.values(this._layerConfigs));p<f.length;p+=1){var d=f[p].map(function(e){return o._layers[e.id]}),g=d[0];if("none"!==g.visibility){var m=g.source||"",v=this.familiesBySource[m];v||(v=this.familiesBySource[m]={});var y=g.sourceLayer||"_geojsonTileLayer",x=v[y];x||(x=v[y]=[]),x.push(d)}}};var h=function(t,r,n,o,i,a,s,l,u,h,c,p){var f=s.top*l-u,d=s.bottom*l+u,g=s.left*l-u,m=s.right*l+u;if(this.boxStartIndex=t.length,h){var v=d-f,y=m-g;v>0&&(v=Math.max(10*l,v),this._addLineCollisionCircles(t,r,n,n.segment,y,v,o,i,a,c))}else{if(p){var x=new e.Point(g,f),w=new e.Point(m,f),M=new e.Point(g,d),S=new e.Point(m,d),_=p*Math.PI/180;x._rotate(_),w._rotate(_),M._rotate(_),S._rotate(_),g=Math.min(x.x,w.x,M.x,S.x),m=Math.max(x.x,w.x,M.x,S.x),f=Math.min(x.y,w.y,M.y,S.y),d=Math.max(x.y,w.y,M.y,S.y)}t.emplaceBack(n.x,n.y,g,f,m,d,o,i,a,0,0)}this.boxEndIndex=t.length};h.prototype._addLineCollisionCircles=function(e,t,r,n,o,i,a,s,l,u){var h=i/2,c=Math.floor(o/h)||1,p=1+.4*Math.log(u)/Math.LN2,f=Math.floor(c*p/2),d=-i/2,g=r,m=n+1,v=d,y=-o/2,x=y-o/4;do{if(--m<0){if(v>y)return;m=0;break}v-=t[m].dist(g),g=t[m]}while(v>x);for(var w=t[m].dist(t[m+1]),M=-f;M<c+f;M++){var S=M*h,_=y+S;if(S<0&&(_+=S),S>o&&(_+=S-o),!(_<v)){for(;v+w<_;){if(v+=w,++m+1>=t.length)return;w=t[m].dist(t[m+1])}var P=_-v,b=t[m],T=t[m+1].sub(b)._unit()._mult(P)._add(b)._round(),I=Math.abs(_-d)<h?0:.8*(_-d);e.emplaceBack(T.x,T.y,-i/2,-i/2,i/2,i/2,a,s,l,i/2,I)}}};var c=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=p),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function p(e,t){return e<t?-1:e>t?1:0}function f(t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);for(var o=1/0,i=1/0,a=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var h=l[u];(!u||h.x<o)&&(o=h.x),(!u||h.y<i)&&(i=h.y),(!u||h.x>a)&&(a=h.x),(!u||h.y>s)&&(s=h.y)}var p=a-o,f=s-i,m=Math.min(p,f),v=m/2,y=new c([],d);if(0===m)return new e.Point(o,i);for(var x=o;x<a;x+=m)for(var w=i;w<s;w+=m)y.push(new g(x+v,w+v,v,t));for(var M=function(e){for(var t=0,r=0,n=0,o=e[0],i=0,a=o.length,s=a-1;i<a;s=i++){var l=o[i],u=o[s],h=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*h,n+=(l.y+u.y)*h,t+=3*h}return new g(r/t,n/t,0,e)}(t),S=y.length;y.length;){var _=y.pop();(_.d>M.d||!M.d)&&(M=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,S)),_.max-M.d<=r||(v=_.h/2,y.push(new g(_.p.x-v,_.p.y-v,v,t)),y.push(new g(_.p.x+v,_.p.y-v,v,t)),y.push(new g(_.p.x-v,_.p.y+v,v,t)),y.push(new g(_.p.x+v,_.p.y+v,v,t)),S+=4)}return n&&(console.log("num probes: "+S),console.log("best distance: "+M.d)),M.p}function d(e,t){return t.max-e.max}function g(t,r,n,o){this.p=new e.Point(t,r),this.h=n,this.d=function(t,r){for(var n=!1,o=1/0,i=0;i<r.length;i++)for(var a=r[i],s=0,l=a.length,u=l-1;s<l;u=s++){var h=a[s],c=a[u];h.y>t.y!=c.y>t.y&&t.x<(c.x-h.x)*(t.y-h.y)/(c.y-h.y)+h.x&&(n=!n),o=Math.min(o,e.distToSegmentSquared(t,h,c))}return(n?1:-1)*Math.sqrt(o)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}c.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},c.prototype.pop=function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},c.prototype.peek=function(){return this.data[0]},c.prototype._up=function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var o=e-1>>1,i=t[o];if(r(n,i)>=0)break;t[e]=i,e=o}t[e]=n},c.prototype._down=function(e){for(var t=this.data,r=this.compare,n=this.length>>1,o=t[e];e<n;){var i=1+(e<<1),a=t[i],s=i+1;if(s<this.length&&r(t[s],a)<0&&(i=s,a=t[s]),r(a,o)>=0)break;t[e]=a,e=i}t[e]=o};var m=e.createCommonjsModule(function(e){e.exports=function(e,t){var r,n,o,i,a,s,l,u;for(r=3&e.length,n=e.length-r,o=t,a=3432918353,s=461845907,u=0;u<n;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,o=27492+(65535&(i=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}}),v=e.createCommonjsModule(function(e){e.exports=function(e,t){for(var r,n=e.length,o=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o=1540483477*(65535&(o^=255&e.charCodeAt(i)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0}}),y=m,x=m,w=v;function M(t,r,n,o,i,a){t.createArrays();var s=512*t.overscaling;t.tilePixelRatio=e.EXTENT/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,p=c.min,f=c.max;h.compositeTextSizes=[u["text-size"].possiblyEvaluate(new e.EvaluationParameters(p)),u["text-size"].possiblyEvaluate(new e.EvaluationParameters(f))]}if("composite"===t.iconSizeData.functionType){var d=t.iconSizeData.zoomRange,g=d.min,m=d.max;h.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new e.EvaluationParameters(g)),u["icon-size"].possiblyEvaluate(new e.EvaluationParameters(m))]}h.layoutTextSize=u["text-size"].possiblyEvaluate(new e.EvaluationParameters(t.zoom+1)),h.layoutIconSize=u["icon-size"].possiblyEvaluate(new e.EvaluationParameters(t.zoom+1)),h.textMaxSize=u["text-size"].possiblyEvaluate(new e.EvaluationParameters(18));for(var v=24*l.get("text-line-height"),y="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),x=l.get("text-keep-upright"),w=0,M=t.features;w<M.length;w+=1){var _=M[w],P=l.get("text-font").evaluate(_,{}).join(","),b=n,T={},I=_.text;if(I){var k=I.toString(),z=l.get("text-offset").evaluate(_,{}).map(function(e){return 24*e}),C=24*l.get("text-letter-spacing").evaluate(_,{}),E=e.allowsLetterSpacing(k)?C:0,A=l.get("text-anchor").evaluate(_,{}),L=l.get("text-justify").evaluate(_,{}),D="point"===l.get("symbol-placement")?24*l.get("text-max-width").evaluate(_,{}):0;T.horizontal=e.shapeText(I,r,P,D,v,A,L,E,z,24,e.WritingMode.horizontal),e.allowsVerticalWritingMode(k)&&y&&x&&(T.vertical=e.shapeText(I,r,P,D,v,A,L,E,z,24,e.WritingMode.vertical))}var O=void 0;if(_.icon){var N=o[_.icon];N&&(O=e.shapeIcon(i[_.icon],l.get("icon-offset").evaluate(_,{}),l.get("icon-anchor").evaluate(_,{})),void 0===t.sdfIcons?t.sdfIcons=N.sdf:t.sdfIcons!==N.sdf&&e.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),N.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(T.horizontal||O)&&S(t,_,T,O,b,h)}a&&t.generateCollisionDebugBuffers()}function S(t,r,n,o,i,a){var s=a.layoutTextSize.evaluate(r,{}),c=a.layoutIconSize.evaluate(r,{}),p=a.textMaxSize.evaluate(r,{});void 0===p&&(p=s);var d=t.layers[0].layout,g=d.get("text-offset").evaluate(r,{}),m=d.get("icon-offset").evaluate(r,{}),v=s/24,x=t.tilePixelRatio*v,w=t.tilePixelRatio*p/24,M=t.tilePixelRatio*c,S=t.tilePixelRatio*d.get("symbol-spacing"),T=d.get("text-padding")*t.tilePixelRatio,I=d.get("icon-padding")*t.tilePixelRatio,k=d.get("text-max-angle")/180*Math.PI,z="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),C="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),E=d.get("symbol-placement"),A=S/2,L=function(s,l){l.x<0||l.x>=e.EXTENT||l.y<0||l.y>=e.EXTENT||function(t,r,n,o,i,a,s,l,u,c,p,f,d,g,m,v,x,w,M,S,b){var T,I,k=t.addToLineVertexArray(r,n),z=0,C=0,E=0,A=y(o.horizontal?o.horizontal.text:""),L=[];if(o.horizontal){var D=a.layout.get("text-rotate").evaluate(M,{});T=new h(s,n,r,l,u,c,o.horizontal,p,f,d,t.overscaling,D),C+=P(t,r,o.horizontal,a,d,M,g,k,o.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,L,S,b),o.vertical&&(E+=P(t,r,o.vertical,a,d,M,g,k,e.WritingMode.vertical,L,S,b))}var O=T?T.boxStartIndex:t.collisionBoxArray.length,N=T?T.boxEndIndex:t.collisionBoxArray.length;if(i){var R=function(t,r,n,o,i,a){var s,l,u,h,c=r.image,p=n.layout,f=r.top-1/c.pixelRatio,d=r.left-1/c.pixelRatio,g=r.bottom+1/c.pixelRatio,m=r.right+1/c.pixelRatio;if("none"!==p.get("icon-text-fit")&&i){var v=m-d,y=g-f,x=p.get("text-size").evaluate(a,{})/24,w=i.left*x,M=i.right*x,S=i.top*x,_=M-w,P=i.bottom*x-S,b=p.get("icon-text-fit-padding")[0],T=p.get("icon-text-fit-padding")[1],I=p.get("icon-text-fit-padding")[2],k=p.get("icon-text-fit-padding")[3],z="width"===p.get("icon-text-fit")?.5*(P-y):0,C="height"===p.get("icon-text-fit")?.5*(_-v):0,E="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?_:v,A="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?P:y;s=new e.Point(w+C-k,S+z-b),l=new e.Point(w+C+T+E,S+z-b),u=new e.Point(w+C+T+E,S+z+I+A),h=new e.Point(w+C-k,S+z+I+A)}else s=new e.Point(d,f),l=new e.Point(m,f),u=new e.Point(m,g),h=new e.Point(d,g);var L=n.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(L){var D=Math.sin(L),O=Math.cos(L),N=[O,-D,D,O];s._matMult(N),l._matMult(N),h._matMult(N),u._matMult(N)}return[{tl:s,tr:l,bl:h,br:u,tex:c.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,i,a,0,o.horizontal,M),F=a.layout.get("icon-rotate").evaluate(M,{});I=new h(s,n,r,l,u,c,i,m,v,!1,t.overscaling,F),z=4*R.length;var B=t.iconSizeData,Z=null;"source"===B.functionType?(Z=[e.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(M,{})])[0]>_&&e.warnOnce(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((Z=[e.SIZE_PACK_FACTOR*b.compositeIconSizes[0].evaluate(M,{}),e.SIZE_PACK_FACTOR*b.compositeIconSizes[1].evaluate(M,{})])[0]>_||Z[1]>_)&&e.warnOnce(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,R,Z,w,x,M,!1,r,k.lineStartIndex,k.lineLength)}var j=I?I.boxStartIndex:t.collisionBoxArray.length,G=I?I.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=e.SymbolBucket.MAX_GLYPHS&&e.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(r.x,r.y,L.length>0?L[0]:-1,L.length>1?L[1]:-1,A,O,N,j,G,l,C,E,z,0)}(t,l,s,n,o,t.layers[0],t.collisionBoxArray,r.index,r.sourceLayerIndex,t.index,x,T,z,g,M,I,C,m,r,i,a)};if("line"===E)for(var D=0,O=function(t,r,n,o,i){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,h=0;h<l.length-1;h++){var c=l[h],p=l[h+1];c.x<0&&p.x<0||(c.x<0?c=new e.Point(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round():p.x<0&&(p=new e.Point(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round()),c.y<0&&p.y<0||(c.y<0?c=new e.Point(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round():p.y<0&&(p=new e.Point(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round()),c.x>=o&&p.x>=o||(c.x>=o?c=new e.Point(o,c.y+(p.y-c.y)*((o-c.x)/(p.x-c.x)))._round():p.x>=o&&(p=new e.Point(o,c.y+(p.y-c.y)*((o-c.x)/(p.x-c.x)))._round()),c.y>=i&&p.y>=i||(c.y>=i?c=new e.Point(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round():p.y>=i&&(p=new e.Point(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],a.push(u)),u.push(p)))))}return a}(r.geometry,0,0,e.EXTENT,e.EXTENT);D<O.length;D+=1)for(var N=O[D],R=0,F=u(N,S,k,n.vertical||n.horizontal,o,24,w,t.overscaling,e.EXTENT);R<F.length;R+=1){var B=F[R],Z=n.horizontal;Z&&b(t,Z.text,A,B)||L(N,B)}else if("line-center"===E)for(var j=0,G=r.geometry;j<G.length;j+=1){var J=G[j];if(J.length>1){var X=l(J,k,n.vertical||n.horizontal,o,24,w);X&&L(J,X)}}else if("Polygon"===r.type)for(var V=0,W=e.classifyRings(r.geometry,0);V<W.length;V+=1){var Y=W[V],q=f(Y,16);L(Y[0],new e.Anchor(q.x,q.y,0))}else if("LineString"===r.type)for(var U=0,K=r.geometry;U<K.length;U+=1){var H=K[U];L(H,new e.Anchor(H[0].x,H[0].y,0))}else if("Point"===r.type)for(var Q=0,$=r.geometry;Q<$.length;Q+=1)for(var ee=0,te=$[Q];ee<te.length;ee+=1){var re=te[ee];L([re],new e.Anchor(re.x,re.y,0))}}y.murmur3=x,y.murmur2=w;var _=65535;function P(t,r,n,o,i,a,s,l,u,h,c,p){var f=function(t,r,n,o,i,a){for(var s=n.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,l=n.layout.get("text-offset").evaluate(i,{}).map(function(e){return 24*e}),u=r.positionedGlyphs,h=[],c=0;c<u.length;c++){var p=u[c],f=a[p.fontStack],d=f&&f[p.glyph];if(d){var g=d.rect;if(g){var m=e.GLYPH_PBF_BORDER+1,v=d.metrics.advance*p.scale/2,y=o?[p.x+v,p.y]:[0,0],x=o?[0,0]:[p.x+v+l[0],p.y+l[1]],w=(d.metrics.left-m)*p.scale-v+x[0],M=(-d.metrics.top-m)*p.scale+x[1],S=w+g.w*p.scale,_=M+g.h*p.scale,P=new e.Point(w,M),b=new e.Point(S,M),T=new e.Point(w,_),I=new e.Point(S,_);if(o&&p.vertical){var k=new e.Point(-v,v),z=-Math.PI/2,C=new e.Point(5,0);P._rotateAround(z,k)._add(C),b._rotateAround(z,k)._add(C),T._rotateAround(z,k)._add(C),I._rotateAround(z,k)._add(C)}if(s){var E=Math.sin(s),A=Math.cos(s),L=[A,-E,E,A];P._matMult(L),b._matMult(L),T._matMult(L),I._matMult(L)}h.push({tl:P,tr:b,bl:T,br:I,tex:g,writingMode:r.writingMode,glyphOffset:y})}}}return h}(0,n,o,i,a,c),d=t.textSizeData,g=null;return"source"===d.functionType?(g=[e.SIZE_PACK_FACTOR*o.layout.get("text-size").evaluate(a,{})])[0]>_&&e.warnOnce(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((g=[e.SIZE_PACK_FACTOR*p.compositeTextSizes[0].evaluate(a,{}),e.SIZE_PACK_FACTOR*p.compositeTextSizes[1].evaluate(a,{})])[0]>_||g[1]>_)&&e.warnOnce(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,f,g,s,i,a,u,r,l.lineStartIndex,l.lineLength),h.push(t.text.placedSymbolArray.length-1),4*f.length}function b(e,t,r,n){var o=e.compareText;if(t in o){for(var i=o[t],a=i.length-1;a>=0;a--)if(n.dist(i[a])<r)return!0}else o[t]=[];return o[t].push(n),!1}var T=function(t){var r={},n=[];for(var o in t){var i=t[o],a=r[o]={};for(var s in i){var l=i[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};n.push(u),a[s]={rect:u,metrics:l.metrics}}}}var h=e.potpack(n),c=h.w,p=h.h,f=new e.AlphaImage({width:c||1,height:p||1});for(var d in t){var g=t[d];for(var m in g){var v=g[+m];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var y=r[d][m].rect;e.AlphaImage.copy(v.bitmap,f,{x:0,y:0},{x:y.x+1,y:y.y+1},v.bitmap)}}}this.image=f,this.positions=r};e.register("GlyphAtlas",T);var I=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies};function k(t,r){for(var n=new e.EvaluationParameters(r),o=0,i=t;o<i.length;o+=1)i[o].recalculate(n)}I.prototype.parse=function(t,r,n,o){var i=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var a=new e.DictionaryCoder(Object.keys(t.layers).sort()),s=new e.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var l,u,h,c,p={},f={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=r.familiesBySource[this.source];for(var g in d){var m=t.layers[g];if(m){1===m.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var v=a.encode(g),y=[],x=0;x<m.length;x++){var w=m.feature(x);y.push({feature:w,index:x,sourceLayerIndex:v})}for(var S=0,_=d[g];S<_.length;S+=1){var P=_[S],b=P[0];b.minzoom&&this.zoom<Math.floor(b.minzoom)||b.maxzoom&&this.zoom>=b.maxzoom||"none"!==b.visibility&&(k(P,this.zoom),(p[b.id]=b.createBucket({index:s.bucketLayerIDs.length,layers:P,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:v,sourceID:this.source})).populate(y,f),s.bucketLayerIDs.push(P.map(function(e){return e.id})))}}}var I=e.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(I).length?n.send("getGlyphs",{uid:this.uid,stacks:I},function(e,t){l||(l=e,u=t,E.call(i))}):u={};var z=Object.keys(f.iconDependencies);z.length?n.send("getImages",{icons:z},function(e,t){l||(l=e,h=t,E.call(i))}):h={};var C=Object.keys(f.patternDependencies);function E(){if(l)return o(l);if(u&&h&&c){var t=new T(u),r=new e.ImageAtlas(h,c);for(var n in p){var i=p[n];i instanceof e.SymbolBucket?(k(i.layers,this.zoom),M(i,u,t.positions,h,r.iconPositions,this.showCollisionBoxes)):i.hasPattern&&(i instanceof e.LineBucket||i instanceof e.FillBucket||i instanceof e.FillExtrusionBucket)&&(k(i.layers,this.zoom),i.addFeatures(f,r.patternPositions))}this.status="done",o(null,{buckets:e.values(p).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:r,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?t.positions:null})}}C.length?n.send("getImages",{icons:C},function(e,t){l||(l=e,c=t,E.call(i))}):c={},E.call(this)};var z="undefined"!=typeof performance,C={getEntriesByName:function(e){return!!(z&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(z&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,r){return!!(z&&performance&&performance.measure)&&performance.measure(e,t,r)},clearMarks:function(e){return!!(z&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(z&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},E=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},C.mark(this._marks.start)};function A(t,r){var n=e.getArrayBuffer(t.request,function(t,n,o,i){t?r(t):n&&r(null,{vectorTile:new e.mvt.VectorTile(new e.Protobuf(n)),rawData:n,cacheControl:o,expires:i})});return function(){n.cancel(),r()}}E.prototype.finish=function(){C.mark(this._marks.end);var e=C.getEntriesByName(this._marks.measure);return 0===e.length&&(C.measure(this._marks.measure,this._marks.start,this._marks.end),e=C.getEntriesByName(this._marks.measure),C.clearMarks(this._marks.start),C.clearMarks(this._marks.end),C.clearMeasures(this._marks.measure)),e},C.Performance=E;var L=function(e,t,r){this.actor=e,this.layerIndex=t,this.loadVectorData=r||A,this.loading={},this.loaded={}};L.prototype.loadTile=function(t,r){var n=this,o=t.uid;this.loading||(this.loading={});var i=!!(t&&t.request&&t.request.collectResourceTiming)&&new C.Performance(t.request),a=this.loading[o]=new I(t);a.abort=this.loadVectorData(t,function(t,s){if(delete n.loading[o],t||!s)return a.status="done",n.loaded[o]=a,r(t);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var h={};if(i){var c=i.finish();c&&(h.resourceTiming=JSON.parse(JSON.stringify(c)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,n.layerIndex,n.actor,function(t,n){if(t||!n)return r(t);r(null,e.extend({rawTileData:l.slice(0)},n,u,h))}),n.loaded=n.loaded||{},n.loaded[o]=a})},L.prototype.reloadTile=function(e,t){var r=this.loaded,n=e.uid,o=this;if(r&&r[n]){var i=r[n];i.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,r){var n=i.reloadCallback;n&&(delete i.reloadCallback,i.parse(i.vectorTile,o.layerIndex,o.actor,n)),t(e,r)};"parsing"===i.status?i.reloadCallback=a:"done"===i.status&&(i.vectorTile?i.parse(i.vectorTile,this.layerIndex,this.actor,a):a())}},L.prototype.abortTile=function(e,t){var r=this.loading,n=e.uid;r&&r[n]&&r[n].abort&&(r[n].abort(),delete r[n]),t()},L.prototype.removeTile=function(e,t){var r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()};var D=function(){this.loaded={}};D.prototype.loadTile=function(t,r){var n=t.uid,o=t.encoding,i=t.rawImageData,a=new e.DEMData(n,i,o);this.loaded=this.loaded||{},this.loaded[n]=a,r(null,a)},D.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]};var O={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function N(e){var t=0;if(e&&e.length>0){t+=Math.abs(R(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(R(e[r]))}return t}function R(e){var t,r,n,o,i,a,s=0,l=e.length;if(l>2){for(a=0;a<l;a++)a===l-2?(n=l-2,o=l-1,i=0):a===l-1?(n=l-1,o=0,i=1):(n=a,o=a+1,i=a+2),t=e[n],r=e[o],s+=(F(e[i][0])-F(t[0]))*Math.sin(F(r[1]));s=s*O.RADIUS*O.RADIUS/2}return s}function F(e){return e*Math.PI/180}var B={geometry:function e(t){var r,n=0;switch(t.type){case"Polygon":return N(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)n+=N(t.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)n+=e(t.geometries[r]);return n}},ring:R};function j(e,t){return function(r){return e(r,t)}}function G(e,t){t=!!t,e[0]=J(e[0],t);for(var r=1;r<e.length;r++)e[r]=J(e[r],!t);return e}function J(e,t){return function(e){return B.ring(e)>=0}(e)===t?e:e.reverse()}var X=e.mvt.VectorTileFeature.prototype.toGeoJSON,V=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};V.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],r=0,n=this._feature.geometry;r<n.length;r+=1){var o=n[r];t.push([new e.Point(o[0],o[1])])}return t}for(var i=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,h=s[a];u<h.length;u+=1){var c=h[u];l.push(new e.Point(c[0],c[1]))}i.push(l)}return i},V.prototype.toGeoJSON=function(e,t,r){return X.call(this,e,t,r)};var W=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};W.prototype.feature=function(e){return new V(this._features[e])};var Y=e.vectorTile.VectorTileFeature,q=U;function U(e,t){this.options=t||{},this.features=e,this.length=e.length}function K(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}U.prototype.feature=function(e){return new K(this.features[e],this.options.extent)},K.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var r=0;r<t.length;r++){for(var n=t[r],o=[],i=0;i<n.length;i++)o.push(new e.Point$1(n[i][0],n[i][1]));this.geometry.push(o)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,o=-1/0,i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),o=Math.max(o,l.y)}return[t,n,r,o]},K.prototype.toGeoJSON=Y.prototype.toGeoJSON;var H=te,Q=te,ee=q;function te(t){var r=new e.pbf;return function(e,t){for(var r in e.layers)t.writeMessage(3,re,e.layers[r])}(t,r),r.finish()}function re(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,ne,n);var o=n.keys;for(r=0;r<o.length;r++)t.writeStringField(3,o[r]);var i=n.values;for(r=0;r<i.length;r++)t.writeMessage(4,le,i[r])}function ne(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,oe,e),t.writeVarintField(3,r.type),t.writeMessage(4,se,r)}function oe(e,t){var r=e.feature,n=e.keys,o=e.values,i=e.keycache,a=e.valuecache;for(var s in r.properties){var l=i[s];void 0===l&&(n.push(s),l=n.length-1,i[s]=l),t.writeVarint(l);var u=r.properties[s],h=typeof u;"string"!==h&&"boolean"!==h&&"number"!==h&&(u=JSON.stringify(u));var c=h+":"+u,p=a[c];void 0===p&&(o.push(u),p=o.length-1,a[c]=p),t.writeVarint(p)}}function ie(e,t){return(t<<3)+(7&e)}function ae(e){return e<<1^e>>31}function se(e,t){for(var r=e.loadGeometry(),n=e.type,o=0,i=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===n&&(u=l.length),t.writeVarint(ie(1,u));for(var h=3===n?l.length-1:l.length,c=0;c<h;c++){1===c&&1!==n&&t.writeVarint(ie(2,h-1));var p=l[c].x-o,f=l[c].y-i;t.writeVarint(ae(p)),t.writeVarint(ae(f)),o+=p,i+=f}3===n&&t.writeVarint(ie(7,1))}}function le(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function he(e,t,r,n){ce(e,r,n),ce(t,2*r,2*n),ce(t,2*r+1,2*n+1)}function ce(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function pe(e,t,r,n){var o=e-r,i=t-n;return o*o+i*i}H.fromVectorTileJs=Q,H.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new q(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return te({layers:r})},H.GeoJSONWrapper=ee;var fe=function(e){return e[0]},de=function(e){return e[1]},ge=function(e,t,r,n,o){void 0===t&&(t=fe),void 0===r&&(r=de),void 0===n&&(n=64),void 0===o&&(o=Float64Array),this.nodeSize=n,this.points=e;for(var i=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new i(e.length),s=this.coords=new o(2*e.length),l=0;l<e.length;l++)a[l]=l,s[2*l]=t(e[l]),s[2*l+1]=r(e[l]);!function ue(e,t,r,n,o,i){if(!(o-n<=r)){var a=n+o>>1;!function e(t,r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=n-o+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(l-s/2<0?-1:1);e(t,r,n,Math.max(o,Math.floor(n-l*h/s+c)),Math.min(i,Math.floor(n+(s-l)*h/s+c)),a)}var d=r[2*n+a],g=o,m=i;for(he(t,r,o,n),r[2*i+a]>d&&he(t,r,o,i);g<m;){for(he(t,r,g,m),g++,m--;r[2*g+a]<d;)g++;for(;r[2*m+a]>d;)m--}r[2*o+a]===d?he(t,r,o,m):he(t,r,++m,i),m<=n&&(o=m+1),n<=m&&(i=m-1)}}(e,t,a,n,o,i%2),ue(e,t,r,n,a-1,i+1),ue(e,t,r,a+1,o,i+1)}}(a,s,n,0,a.length-1,0)};ge.prototype.range=function(e,t,r,n){return function(e,t,r,n,o,i,a){for(var s,l,u=[0,e.length-1,0],h=[];u.length;){var c=u.pop(),p=u.pop(),f=u.pop();if(p-f<=a)for(var d=f;d<=p;d++)s=t[2*d],l=t[2*d+1],s>=r&&s<=o&&l>=n&&l<=i&&h.push(e[d]);else{var g=Math.floor((f+p)/2);s=t[2*g],l=t[2*g+1],s>=r&&s<=o&&l>=n&&l<=i&&h.push(e[g]);var m=(c+1)%2;(0===c?r<=s:n<=l)&&(u.push(f),u.push(g-1),u.push(m)),(0===c?o>=s:i>=l)&&(u.push(g+1),u.push(p),u.push(m))}}return h}(this.ids,this.coords,e,t,r,n,this.nodeSize)},ge.prototype.within=function(e,t,r){return function(e,t,r,n,o,i){for(var a=[0,e.length-1,0],s=[],l=o*o;a.length;){var u=a.pop(),h=a.pop(),c=a.pop();if(h-c<=i)for(var p=c;p<=h;p++)pe(t[2*p],t[2*p+1],r,n)<=l&&s.push(e[p]);else{var f=Math.floor((c+h)/2),d=t[2*f],g=t[2*f+1];pe(d,g,r,n)<=l&&s.push(e[f]);var m=(u+1)%2;(0===u?r-o<=d:n-o<=g)&&(a.push(c),a.push(f-1),a.push(m)),(0===u?r+o>=d:n+o>=g)&&(a.push(f+1),a.push(h),a.push(m))}}return s}(this.ids,this.coords,e,t,r,this.nodeSize)};var me={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(e){return e}},ve=function(e){this.options=Pe(Object.create(me),e),this.trees=new Array(this.options.maxZoom+1)};function ye(e,t,r,n,o){return{x:e,y:t,zoom:1/0,id:r,parentId:-1,numPoints:n,properties:o}}function xe(e,t){var r=e.geometry.coordinates,n=r[0],o=r[1];return{x:Se(n),y:_e(o),zoom:1/0,index:t,parentId:-1}}function we(e){return{type:"Feature",id:e.id,properties:Me(e),geometry:{type:"Point",coordinates:[(n=e.x,360*(n-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,n}function Me(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return Pe(Pe({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function Se(e){return e/360+.5}function _e(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Pe(e,t){for(var r in t)e[r]=t[r];return e}function be(e){return e.x}function Te(e){return e.y}function Ie(e,t,r,n,o,i){var a=o-r,s=i-n;if(0!==a||0!==s){var l=((e-r)*a+(t-n)*s)/(a*a+s*s);l>1?(r=o,n=i):l>0&&(r+=a*l,n+=s*l)}return(a=e-r)*a+(s=t-n)*s}function ke(e,t,r,n){var o={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)ze(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)ze(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)ze(e,t[n][o])}(o),o}function ze(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Ce(e,t,r,n){if(t.geometry){var o=t.geometry.coordinates,i=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===i)Ee(o,s);else if("MultiPoint"===i)for(var u=0;u<o.length;u++)Ee(o[u],s);else if("LineString"===i)Ae(o,s,a,!1);else if("MultiLineString"===i){if(r.lineMetrics){for(u=0;u<o.length;u++)s=[],Ae(o[u],s,a,!1),e.push(ke(l,"LineString",s,t.properties));return}Le(o,s,a,!1)}else if("Polygon"===i)Le(o,s,a,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(u=0;u<t.geometry.geometries.length;u++)Ce(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<o.length;u++){var h=[];Le(o[u],h,a,!0),s.push(h)}}e.push(ke(l,i,s,t.properties))}}function Ee(e,t){t.push(De(e[0])),t.push(Oe(e[1])),t.push(0)}function Ae(e,t,r,n){for(var o,i,a=0,s=0;s<e.length;s++){var l=De(e[s][0]),u=Oe(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=n?(o*u-l*i)/2:Math.sqrt(Math.pow(l-o,2)+Math.pow(u-i,2))),o=l,i=u}var h=t.length-3;t[2]=1,function e(t,r,n,o){for(var i,a=o,s=n-r>>1,l=n-r,u=t[r],h=t[r+1],c=t[n],p=t[n+1],f=r+3;f<n;f+=3){var d=Ie(t[f],t[f+1],u,h,c,p);if(d>a)i=f,a=d;else if(d===a){var g=Math.abs(f-s);g<l&&(i=f,l=g)}}a>o&&(i-r>3&&e(t,r,i,o),t[i+2]=a,n-i>3&&e(t,i,n,o))}(t,0,h,r),t[h+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function Le(e,t,r,n){for(var o=0;o<e.length;o++){var i=[];Ae(e[o],i,r,n),t.push(i)}}function De(e){return e/360+.5}function Oe(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Ne(e,t,r,n,o,i,a,s){if(n/=t,i>=(r/=t)&&a<n)return e;if(a<r||i>=n)return null;for(var l=[],u=0;u<e.length;u++){var h=e[u],c=h.geometry,p=h.type,f=0===o?h.minX:h.minY,d=0===o?h.maxX:h.maxY;if(f>=r&&d<n)l.push(h);else if(!(d<r||f>=n)){var g=[];if("Point"===p||"MultiPoint"===p)Re(c,g,r,n,o);else if("LineString"===p)Fe(c,g,r,n,o,!1,s.lineMetrics);else if("MultiLineString"===p)Ze(c,g,r,n,o,!1);else if("Polygon"===p)Ze(c,g,r,n,o,!0);else if("MultiPolygon"===p)for(var m=0;m<c.length;m++){var v=[];Ze(c[m],v,r,n,o,!0),v.length&&g.push(v)}if(g.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<g.length;m++)l.push(ke(h.id,p,g[m],h.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===g.length?(p="LineString",g=g[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===g.length?"Point":"MultiPoint"),l.push(ke(h.id,p,g,h.tags))}}}return l.length?l:null}function Re(e,t,r,n,o){for(var i=0;i<e.length;i+=3){var a=e[i+o];a>=r&&a<=n&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}}function Fe(e,t,r,n,o,i,a){for(var s,l,u=Be(e),h=0===o?Ge:Je,c=e.start,p=0;p<e.length-3;p+=3){var f=e[p],d=e[p+1],g=e[p+2],m=e[p+3],v=e[p+4],y=0===o?f:d,x=0===o?m:v,w=!1;a&&(s=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-v,2))),y<r?x>r&&(l=h(u,f,d,m,v,r),a&&(u.start=c+s*l)):y>n?x<n&&(l=h(u,f,d,m,v,n),a&&(u.start=c+s*l)):je(u,f,d,g),x<r&&y>=r&&(l=h(u,f,d,m,v,r),w=!0),x>n&&y<=n&&(l=h(u,f,d,m,v,n),w=!0),!i&&w&&(a&&(u.end=c+s*l),t.push(u),u=Be(e)),a&&(c+=s)}var M=e.length-3;f=e[M],d=e[M+1],g=e[M+2],(y=0===o?f:d)>=r&&y<=n&&je(u,f,d,g),M=u.length-3,i&&M>=3&&(u[M]!==u[0]||u[M+1]!==u[1])&&je(u,u[0],u[1],u[2]),u.length&&t.push(u)}function Be(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Ze(e,t,r,n,o,i){for(var a=0;a<e.length;a++)Fe(e[a],t,r,n,o,i,!1)}function je(e,t,r,n){e.push(t),e.push(r),e.push(n)}function Ge(e,t,r,n,o,i){var a=(i-t)/(n-t);return e.push(i),e.push(r+(o-r)*a),e.push(1),a}function Je(e,t,r,n,o,i){var a=(i-r)/(o-r);return e.push(t+(n-t)*a),e.push(i),e.push(1),a}function Xe(e,t){for(var r=[],n=0;n<e.length;n++){var o,i=e[n],a=i.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)o=Ve(i.geometry,t);else if("MultiLineString"===a||"Polygon"===a){o=[];for(var s=0;s<i.geometry.length;s++)o.push(Ve(i.geometry[s],t))}else if("MultiPolygon"===a)for(o=[],s=0;s<i.geometry.length;s++){for(var l=[],u=0;u<i.geometry[s].length;u++)l.push(Ve(i.geometry[s][u],t));o.push(l)}r.push(ke(i.id,a,o,i.tags))}return r}function Ve(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function We(e,t){if(e.transformed)return e;var r,n,o,i=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,h=l.type;if(l.geometry=[],1===h)for(n=0;n<u.length;n+=2)l.geometry.push(Ye(u[n],u[n+1],t,i,a,s));else for(n=0;n<u.length;n++){var c=[];for(o=0;o<u[n].length;o+=2)c.push(Ye(u[n][o],u[n][o+1],t,i,a,s));l.geometry.push(c)}}return e.transformed=!0,e}function Ye(e,t,r,n,o,i){return[Math.round(r*(e*n-o)),Math.round(r*(t*n-i))]}function qe(e,t,r,n,o){for(var i=t===o.maxZoom?0:o.tolerance/((1<<t)*o.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Ue(a,e[s],i,o);var l=e[s].minX,u=e[s].minY,h=e[s].maxX,c=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),h>a.maxX&&(a.maxX=h),c>a.maxY&&(a.maxY=c)}return a}function Ue(e,t,r,n){var o=t.geometry,i=t.type,a=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<o.length;s+=3)a.push(o[s]),a.push(o[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===i)Ke(a,o,e,r,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<o.length;s++)Ke(a,o[s],e,r,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var l=0;l<o.length;l++){var u=o[l];for(s=0;s<u.length;s++)Ke(a,u[s],e,r,!0,0===s)}if(a.length){var h=t.tags||null;if("LineString"===i&&n.lineMetrics){for(var c in h={},t.tags)h[c]=t.tags[c];h.mapbox_clip_start=o.start/o.size,h.mapbox_clip_end=o.end/o.size}var p={geometry:a,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:h};null!==t.id&&(p.id=t.id),e.features.push(p)}}function Ke(e,t,r,n,o,i){var a=n*n;if(n>0&&t.size<(o?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;o&&function(e,t){for(var r=0,n=0,o=e.length,i=o-2;n<o;i=n,n+=2)r+=(e[n]-e[i])*(e[n+1]+e[i+1]);if(r>0===t)for(n=0,o=e.length;n<o/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[o-2-n],e[n+1]=e[o-1-n],e[o-2-n]=a,e[o-1-n]=s}}(s,i),e.push(s)}}function He(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)Ce(r,e.features[n],t,n);else"Feature"===e.type?Ce(r,e,t):Ce(r,{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(e,t){var r=t.buffer/t.extent,n=e,o=Ne(e,1,-1-r,r,0,-1,2,t),i=Ne(e,1,1-r,2+r,0,-1,2,t);return(o||i)&&(n=Ne(e,1,-r,1+r,0,-1,2,t)||[],o&&(n=Xe(o,1).concat(n)),i&&(n=n.concat(Xe(i,-1)))),n}(n,t)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qe(e,t,r){return 32*((1<<e)*r+t)+e}function $e(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);var o=new W(n.features),i=H(o);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),t(null,{vectorTile:o,rawData:i.buffer})}ve.prototype.load=function(e){var t=this.options,r=t.log,n=t.minZoom,o=t.maxZoom,i=t.nodeSize;r&&console.time("total time");var a="prepare "+e.length+" points";r&&console.time(a),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(xe(e[l],l));this.trees[o+1]=new ge(s,be,Te,i,Float32Array),r&&console.timeEnd(a);for(var u=o;u>=n;u--){var h=+Date.now();s=this._cluster(s,u),this.trees[u]=new ge(s,be,Te,i,Float32Array),r&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-h)}return r&&console.timeEnd("total time"),this},ve.prototype.getClusters=function(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),o=180===e[2]?180:((e[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,o=180;else if(r>o){var a=this.getClusters([r,n,180,i],t),s=this.getClusters([-180,n,o,i],t);return a.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=[],h=0,c=l.range(Se(r),_e(i),Se(o),_e(n));h<c.length;h+=1){var p=c[h],f=l.points[p];u.push(f.numPoints?we(f):this.points[f.index])}return u},ve.prototype.getChildren=function(e){var t=e>>5,r=e%32,n="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(n);var i=o.points[t];if(!i)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],l=0,u=o.within(i.x,i.y,a);l<u.length;l+=1){var h=u[l],c=o.points[h];c.parentId===e&&s.push(c.numPoints?we(c):this.points[c.index])}if(0===s.length)throw new Error(n);return s},ve.prototype.getLeaves=function(e,t,r){t=t||10,r=r||0;var n=[];return this._appendLeaves(n,e,t,r,0),n},ve.prototype.getTile=function(e,t,r){var n=this.trees[this._limitZoom(e)],o=Math.pow(2,e),i=this.options,a=i.extent,s=i.radius/a,l=(r-s)/o,u=(r+1+s)/o,h={features:[]};return this._addTileFeatures(n.range((t-s)/o,l,(t+1+s)/o,u),n.points,t,r,o,h),0===t&&this._addTileFeatures(n.range(1-s/o,l,1,u),n.points,o,r,o,h),t===o-1&&this._addTileFeatures(n.range(0,l,s/o,u),n.points,-1,r,o,h),h.features.length?h:null},ve.prototype.getClusterExpansionZoom=function(e){for(var t=e%32-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},ve.prototype._appendLeaves=function(e,t,r,n,o){for(var i=0,a=this.getChildren(t);i<a.length;i+=1){var s=a[i],l=s.properties;if(l&&l.cluster?o+l.point_count<=n?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,r,n,o):o<n?o++:e.push(s),e.length===r)break}return o},ve.prototype._addTileFeatures=function(e,t,r,n,o,i){for(var a=0,s=e;a<s.length;a+=1){var l=t[s[a]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*o-r)),Math.round(this.options.extent*(l.y*o-n))]],tags:l.numPoints?Me(l):this.points[l.index].properties},h=l.numPoints?l.id:this.points[l.index].id;void 0!==h&&(u.id=h),i.features.push(u)}},ve.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},ve.prototype._cluster=function(e,t){for(var r=[],n=this.options,o=n.radius,i=n.extent,a=n.reduce,s=o/(i*Math.pow(2,t)),l=0;l<e.length;l++){var u=e[l];if(!(u.zoom<=t)){u.zoom=t;for(var h=this.trees[t+1],c=h.within(u.x,u.y,s),p=u.numPoints||1,f=u.x*p,d=u.y*p,g=a?this._map(u,!0):null,m=(l<<5)+(t+1),v=0,y=c;v<y.length;v+=1){var x=y[v],w=h.points[x];if(!(w.zoom<=t)){w.zoom=t;var M=w.numPoints||1;f+=w.x*M,d+=w.y*M,p+=M,w.parentId=m,a&&a(g,this._map(w))}}1===p?r.push(u):(u.parentId=m,r.push(ye(f/p,d/p,m,p,g)))}}return r},ve.prototype._map=function(e,t){if(e.numPoints)return t?Pe({},e.properties):e.properties;var r=this.points[e.index].properties,n=this.options.map(r);return t&&n===r?Pe({},n):n},He.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},He.prototype.splitTile=function(e,t,r,n,o,i,a){for(var s=[e,t,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var h=1<<t,c=Qe(t,r,n),p=this.tiles[c];if(!p&&(u>1&&console.time("creation"),p=this.tiles[c]=qe(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,o){if(t===l.maxZoom||t===o)continue;var d=1<<o-t;if(r!==Math.floor(i/d)||n!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){u>1&&console.time("clipping");var g,m,v,y,x,w,M=.5*l.buffer/l.extent,S=.5-M,_=.5+M,P=1+M;g=m=v=y=null,x=Ne(e,h,r-M,r+_,0,p.minX,p.maxX,l),w=Ne(e,h,r+S,r+P,0,p.minX,p.maxX,l),e=null,x&&(g=Ne(x,h,n-M,n+_,1,p.minY,p.maxY,l),m=Ne(x,h,n+S,n+P,1,p.minY,p.maxY,l),x=null),w&&(v=Ne(w,h,n-M,n+_,1,p.minY,p.maxY,l),y=Ne(w,h,n+S,n+P,1,p.minY,p.maxY,l),w=null),u>1&&console.timeEnd("clipping"),s.push(g||[],t+1,2*r,2*n),s.push(m||[],t+1,2*r,2*n+1),s.push(v||[],t+1,2*r+1,2*n),s.push(y||[],t+1,2*r+1,2*n+1)}}},He.prototype.getTile=function(e,t,r){var n=this.options,o=n.extent,i=n.debug;if(e<0||e>24)return null;var a=1<<e,s=Qe(e,t=(t%a+a)%a,r);if(this.tiles[s])return We(this.tiles[s],o);i>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,h=t,c=r;!l&&u>0;)u--,h=Math.floor(h/2),c=Math.floor(c/2),l=this.tiles[Qe(u,h,c)];return l&&l.source?(i>1&&console.log("found parent tile z%d-%d-%d",u,h,c),i>1&&console.time("drilling down"),this.splitTile(l.source,u,h,c,e,t,r),i>1&&console.timeEnd("drilling down"),this.tiles[s]?We(this.tiles[s],o):null):null};var et=function(t){function r(e,r,n){t.call(this,e,r,$e),n&&(this.loadGeoJSON=n)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(n&&n.request&&n.request.collectResourceTiming)&&new C.Performance(n.request);this.loadGeoJSON(n,function(i,a){if(i||!a)return r(i);if("object"!=typeof a)return r(new Error("Input data is not a valid GeoJSON object."));!function e(t,r){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(j(e,r)),t;case"GeometryCollection":return t.geometries=t.geometries.map(j(e,r)),t;case"Feature":return t.geometry=e(t.geometry,r),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=G(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(j(G,t))),e}(t,r);default:return t}}(a,!0);try{t._geoJSONIndex=n.cluster?new ve(function(t){var r=t.superclusterOptions,n=t.clusterProperties;if(!n||!r)return r;for(var o={},i={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),u=0,h=l;u<h.length;u+=1){var c=h[u],p=n[c],f=p[0],d=p[1],g=e.createExpression(d),m=e.createExpression("string"==typeof f?[f,["accumulated"],["get",c]]:f);o[c]=g.value,i[c]=m.value}return r.map=function(e){s.properties=e;for(var t={},r=0,n=l;r<n.length;r+=1){var i=n[r];t[i]=o[i].evaluate(a,s)}return t},r.reduce=function(e,t){s.properties=t;for(var r=0,n=l;r<n.length;r+=1){var o=n[r];a.accumulated=e[o],e[o]=i[o].evaluate(a,s)}},r}(n)).load(a.features):new He(a,n.geojsonVtOptions)}catch(i){return r(i)}t.loaded={};var s={};if(o){var l=o.finish();l&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(l)))}r(null,s)})}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(e,r){var n=this.loaded,o=e.uid;return n&&n[o]?t.prototype.reloadTile.call(this,e,r):this.loadTile(e,r)},r.prototype.loadGeoJSON=function(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data is not a valid GeoJSON object."));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},r.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},r.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},r.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},r}(L),tt=function(t){var r=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.workerSourceTypes={vector:L,geojson:et},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return tt.prototype.setReferrer=function(e,t){this.referrer=t},tt.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r()},tt.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()},tt.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},tt.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},tt.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},tt.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},tt.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},tt.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},tt.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}},tt.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}},tt.prototype.loadRTLTextPlugin=function(t,r,n){try{e.plugin.isLoaded()||(this.self.importScripts(r),n(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+r)))}catch(e){n(e.toString())}},tt.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t},tt.prototype.getWorkerSource=function(e,t,r){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){var o={send:function(t,r,o){n.actor.send(t,r,o,e)}};this.workerSources[e][t][r]=new this.workerSourceTypes[t](o,this.getLayerIndex(e))}return this.workerSources[e][t][r]},tt.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new D),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new tt(self)),tt}),define(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{e=new Worker(o),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(o),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===i[t]&&(i[t]=function(t){var i=document.createElement("canvas"),o=Object.create(e.webGLContextAttributes);return o.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",o)||i.probablySupportsContext("experimental-webgl",o):i.supportsContext?i.supportsContext("webgl",o)||i.supportsContext("experimental-webgl",o):i.getContext("webgl",o)||i.getContext("experimental-webgl",o)}(t)),i[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(e,i,o){var r=t.window.document.createElement(e);return i&&(r.className=i),o&&o.appendChild(r),r},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},o=t.window.document?t.window.document.documentElement.style:null;function r(t){if(!o)return null;for(var e=0;e<t.length;e++)if(t[e]in o)return t[e];return t[0]}var a,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){o&&n&&(a=o[n],o[n]="none")},i.enableDrag=function(){o&&n&&(o[n]=a)};var s=r(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}i.addEventListener=function(t,e,i,o){void 0===o&&(o={}),"passive"in o&&l?t.addEventListener(e,i,o):t.addEventListener(e,i,o.capture)},i.removeEventListener=function(t,e,i,o){void 0===o&&(o={}),"passive"in o&&l?t.removeEventListener(e,i,o):t.removeEventListener(e,i,o.capture)};var u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};i.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",u,!0)},0)},i.mousePos=function(e,i){var o=e.getBoundingClientRect();return i=i.touches?i.touches[0]:i,new t.Point(i.clientX-o.left-e.clientLeft,i.clientY-o.top-e.clientTop)},i.touchPos=function(e,i){for(var o=e.getBoundingClientRect(),r=[],a="touchend"===i.type?i.changedTouches:i.touches,n=0;n<a.length;n++)r.push(new t.Point(a[n].clientX-o.left-e.clientLeft,a[n].clientY-o.top-e.clientTop));return r},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var o=i[e],r=o.ids,a=o.callback;this._notify(r,a)}this.requestors=[]}},h.prototype.getImage=function(t){return this.images[t]},h.prototype.addImage=function(t,e){this.images[t]=e},h.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var o=0,r=t;o<r.length;o+=1){var a=r[o];this.images[a]||(i=!1)}this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},h.prototype._notify=function(t,e){for(var i={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=this.images[a];n&&(i[a]={data:n.data.clone(),pixelRatio:n.pixelRatio,sdf:n.sdf})}e(null,i)},h.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},h.prototype.getPattern=function(e){var i=this.patterns[e];if(i)return i.position;var o=this.getImage(e);if(!o)return null;var r={w:o.data.width+2,h:o.data.height+2,x:0,y:0},a=new t.ImagePosition(r,o);return this.patterns[e]={bin:r,position:a},this._updatePatternAtlas(),a},h.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var o=t.potpack(e),r=o.w,a=o.h,n=this.atlasImage;for(var s in n.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u},{width:p,height:d}),t.RGBAImage.copy(h,n,{x:0,y:d-1},{x:c,y:u-1},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c,y:u+d},{width:p,height:1}),t.RGBAImage.copy(h,n,{x:p-1,y:0},{x:c-1,y:u},{width:1,height:d}),t.RGBAImage.copy(h,n,{x:0,y:0},{x:c+p,y:u},{width:1,height:d})}this.dirty=!0};var p=_,d=1e20;function _(t,e,i,o,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=o||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var n=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=n,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(n*n),this.gridInner=new Float64Array(n*n),this.f=new Float64Array(n),this.d=new Float64Array(n),this.z=new Float64Array(n+1),this.v=new Int16Array(n),this.middle=Math.round(n/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function f(t,e,i,o,r,a,n){for(var s=0;s<e;s++){for(var l=0;l<i;l++)o[l]=t[l*e+s];for(m(o,r,a,n,i),l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)o[s]=t[l*e+s];for(m(o,r,a,n,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function m(t,e,i,o,r){i[0]=0,o[0]=-d,o[1]=+d;for(var a=1,n=0;a<r;a++){for(var s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);s<=o[n];)n--,s=(t[a]+a*a-(t[i[n]]+i[n]*i[n]))/(2*a-2*i[n]);i[++n]=a,o[n]=s,o[n+1]=+d}for(a=0,n=0;a<r;a++){for(;o[n+1]<a;)n++;e[a]=(a-i[n])*(a-i[n])+t[i[n]]}}_.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),o=0;o<this.size*this.size;o++){var r=e.data[4*o+3]/255;this.gridOuter[o]=1===r?0:0===r?d:Math.pow(Math.max(0,.5-r),2),this.gridInner[o]=1===r?d:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),o=0;o<this.size*this.size;o++){var a=this.gridOuter[o]-this.gridInner[o];i[o]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return i};var g=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};g.prototype.setURL=function(t){this.url=t},g.prototype.getGlyphs=function(e,i){var o=this,r=[];for(var a in e)for(var n=0,s=e[a];n<s.length;n+=1){var l=s[n];r.push({stack:a,id:l})}t.asyncAll(r,function(t,e){var i=t.stack,r=t.id,a=o.entries[i];a||(a=o.entries[i]={glyphs:{},requests:{}});var n=a.glyphs[r];if(void 0===n)if(n=o._tinySDF(a,i,r))e(null,{stack:i,id:r,glyph:n});else{var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[s];l||(l=a.requests[s]=[],g.loadGlyphRange(i,s,o.url,o.requestTransform,function(t,e){if(e)for(var i in e)a.glyphs[+i]=e[+i];for(var o=0,r=l;o<r.length;o+=1)(0,r[o])(t,e);delete a.requests[s]})),l.push(function(t,o){t?e(t):o&&e(null,{stack:i,id:r,glyph:o[r]||null})})}}else e(null,{stack:i,id:r,glyph:n})},function(t,e){if(t)i(t);else if(e){for(var o={},r=0,a=e;r<a.length;r+=1){var n=a[r],s=n.stack,l=n.id,c=n.glyph;(o[s]||(o[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,o)}})},g.prototype._tinySDF=function(e,i,o){var r=this.localIdeographFontFamily;if(r&&(t.isChar["CJK Unified Ideographs"](o)||t.isChar["Hangul Syllables"](o))){var a=e.tinySDF;if(!a){var n="400";/bold/i.test(i)?n="900":/medium/i.test(i)?n="500":/light/i.test(i)&&(n="200"),a=e.tinySDF=new g.TinySDF(24,3,8,.25,r,n)}return{id:o,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},g.loadGlyphRange=function(e,i,o,r,a){var n=256*i,s=n+255,l=r(t.normalizeGlyphsURL(o).replace("{fontstack}",e).replace("{range}",n+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,i){if(e)a(e);else if(i){for(var o={},r=0,n=t.parseGlyphPBF(i);r<n.length;r+=1){var s=n[r];o[s.id]=s}a(null,o)}})},g.TinySDF=p;var v=function(){this.specification=t.styleSpec.light.position};v.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},v.prototype.interpolate=function(e,i,o){return{x:t.number(e.x,i.x,o),y:t.number(e.y,i.y,o),z:t.number(e.z,i.z,o)}};var y=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new v,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),x=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(y),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var o in e){var r=e[o];t.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-"-transition".length),r):this._transitionable.setValue(o,r)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,o){return(!o||!1!==o.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),b=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};b.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},b.prototype.addDash=function(e,i){var o=i?7:0,r=2*o+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,n=0;n<e.length;n++)a+=e[n];for(var s=this.width/a,l=s/2,c=e.length%2==1,u=-o;u<=o;u++)for(var h=this.nextRow+o+u,p=this.width*h,d=c?-e[e.length-1]:0,_=e[0],f=1,m=0;m<this.width;m++){for(;_<m/s;)d=_,_+=e[f],c&&f===e.length-1&&(_+=e[0]),f++;var g=Math.abs(m-d*s),v=Math.abs(m-_*s),y=Math.min(g,v),x=f%2==1,b=void 0;if(i){var w=o?u/o*(l+1):0;if(x){var E=l-Math.abs(w);b=Math.sqrt(y*y+E*E)}else b=l-Math.sqrt(y*y+w*w)}else b=(x?1:-1)*y;this.data[3+4*(p+m)]=Math.max(0,Math.min(255,b+128))}var T={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=r,this.dirty=!0,T},b.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var w=function e(i,o){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var n=r[a],s=new e.Actor(n,o,this.id);s.name="Worker "+a,this.actors.push(s)}};function E(e,i,o){var r=function(i,r){if(i)return o(i);if(r){var a=t.pick(r,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);r.vector_layers&&(a.vectorLayers=r.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),e.url&&(a.tiles=t.canonicalizeTileset(a,e.url)),o(null,a)}};return e.url?t.getJSON(i(t.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame(function(){return r(null,e)})}w.prototype.broadcast=function(e,i,o){o=o||function(){},t.asyncAll(this.actors,function(t,o){t.send(e,i,o)},o)},w.prototype.send=function(t,e,i,o){return("number"!=typeof o||isNaN(o))&&(o=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[o].send(t,e,i),o},w.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=t.Actor;var T=function(e,i,o){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=o||24};T.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},T.prototype.contains=function(e){var i=Math.pow(2,e.z),o=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),n=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=o&&e.x<a&&e.y>=r&&e.y<n};var I=function(e){function i(i,o,r,a){if(e.call(this),this.id=i,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(o,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(i,o){e._tileJSONRequest=null,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new T(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles),t.postMapLoadEvent(o.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var o=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),r={request:this.map._transformRequest(o,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(t,o){return e.aborted?i(null):t&&404!==t.status?i(t):(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",r,a.bind(this)):"loading"===e.state?e.reloadCallback=i:this.dispatcher.send("reloadTile",r,a.bind(this),e.workerID)},i.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),C=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.dispatcher=r,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},o),t.extend(this,t.pick(o,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(i,o){e._tileJSONRequest=null,i?e.fire(new t.ErrorEvent(i)):o&&(t.extend(e,o),o.bounds&&(e.tileBounds=new T(o.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(o.tiles),t.postMapLoadEvent(o.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var o=this,r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(a){o.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var n=o.map.painter.context,s=n.gl;e.texture=o.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(n,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",i(null)}})},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),S=function(e){function i(i,o,r,a){e.call(this,i,o,r,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},o),this.encoding=o.encoding||"mapbox"}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var o=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(o,t.ResourceType.Tile),function(o,r){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(o)e.state="errored",i(o);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=t.browser.getImageData(r),n={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",n,function(t,o){t&&(e.state="errored",i(t)),o&&(e.dem=o,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,o=Math.pow(2,i.z),r=(i.x-1+o)%o,a=0===i.x?e.wrap-1:e.wrap,n=(i.x+1+o)%o,s=i.x+1===o?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},i}(C),z=function(e){function i(i,o,r,a){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(a),this._data=o.data,this._options=t.extend({},o),this._collectResourceTiming=o.collectResourceTiming,this._resourceTiming=[],void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution);var n=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*n,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*n,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?Math.min(o.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(o.clusterRadius||50)*n,log:!1},clusterProperties:o.clusterProperties},o.workerOptions)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(i){if(i)e.fire(new t.ErrorEvent(i));else{var o={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(o.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",o))}})},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)i.fire(new t.ErrorEvent(e));else{var o={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(o.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",o))}}),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},i.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},i.prototype.getClusterLeaves=function(t,e,i,o){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},o,this.workerID),this},i.prototype._updateWorkerData=function(e){var i=this,o=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(o.request=this.map._transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",o,function(t,r){i._removed||r&&r.abandoned||(i._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[i.id]&&(i._resourceTiming=r.resourceTiming[i.id].slice(0)),i.dispatcher.send(i.type+".coalesce",{source:o.source},null,i.workerID),e(t))},this.workerID)},i.prototype.loadTile=function(e,i){var o=this,r=void 0===e.workerID?"loadTile":"reloadTile",a={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,a,function(t,a){return e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(a,o.map.painter,"reloadTile"===r),i(null))},this.workerID)},i.prototype.abortTile=function(t){t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},i.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),L=function(e){function i(t,i,o,r){e.call(this),this.id=t,this.dispatcher=o,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(e,i){var o=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(r,a){r?o.fire(new t.ErrorEvent(r)):a&&(o.image=a,e&&(o.coordinates=e),i&&i(),o._finishLoading())})},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var o=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,o=1/0,r=-1/0,a=-1/0,n=0,s=e;n<s.length;n+=1){var l=s[n];i=Math.min(i,l.x),o=Math.min(o,l.y),r=Math.max(r,l.x),a=Math.max(a,l.y)}var c=r-i,u=a-o,h=Math.max(c,u),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),d=Math.pow(2,p);return new t.CanonicalTileID(p,Math.floor((i+r)/2*d),Math.floor((o+a)/2*d))}(o),this.minzoom=this.maxzoom=this.tileID.z;var r=o.map(function(t){return i.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),P={vector:I,raster:C,"raster-dem":S,geojson:z,video:function(e){function i(t,i,o,r){e.call(this,t,i,o,r),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this,i=this.options;this.urls=[];for(var o=0,r=i.urls;o<r.length;o+=1){var a=r[o];this.urls.push(this.map._transformRequest(a,t.ResourceType.Source).url)}t.getVideo(this.urls,function(i,o){i?e.fire(new t.ErrorEvent(i)):o&&(e.video=o,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[o];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(L),image:L,canvas:function(e){function i(i,o,r,a){e.call(this,i,o,r,a),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,o=i.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,o.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(L)},D=function(e,i,o,r){var a=new P[i.type](e,i,o,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a};function R(e,i){var o=t.identity([]);return t.translate(o,o,[1,1,0]),t.scale(o,o,[.5*e.width,.5*e.height,1]),t.multiply(o,o,e.calculatePosMatrix(i.toUnwrapped()))}function M(t,e,i,o,r){var a=function(t,e,i){if(t)for(var o=0,r=t;o<r.length;o+=1){var a=e[r[o]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(var n in e){var s=e[n];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(o&&o.layers,e,t.id),n=r.maxPitchScaleFactor(),s=t.tilesIn(i,n,a);s.sort(A);for(var l=[],c=0,u=s;c<u.length;c+=1){var h=u[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,o,r,n,R(t.transform,h.tileID))})}var p=function(t){for(var e={},i={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var c in n)for(var u=n[c],h=l[c]=l[c]||{},p=e[c]=e[c]||[],d=0,_=u;d<_.length;d+=1){var f=_[d];h[f.featureIndex]||(h[f.featureIndex]=!0,p.push(f))}}return e}(l);for(var d in p)p[d].forEach(function(e){var i=e.feature,o=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o});return p}function A(t,e){var i=t.tileID,o=e.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}var k=function(t,e){this.max=t,this.onRemove=e,this.reset()};k.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var o=i[e];o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value)}return this.data={},this.order=[],this},k.prototype.add=function(t,e,i){var o=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:e,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout(function(){o.remove(t,a)},i)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this},k.prototype.has=function(t){return t.wrapped().key in this.data},k.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},k.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},k.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},k.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,o=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][o];return this.data[i].splice(o,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this},k.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var B=function(t,e,i){this.context=t;var o=t.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};B.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},B.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},B.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var O={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},F=function(t,e,i,o){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=o,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};F.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},F.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},F.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var o=this.attributes[i],r=e.attributes[o.name];void 0!==r&&t.enableVertexAttribArray(r)}},F.prototype.setVertexAttribPointers=function(t,e,i){for(var o=0;o<this.attributes.length;o++){var r=this.attributes[o],a=e.attributes[r.name];void 0!==a&&t.vertexAttribPointer(a,r.components,t[O[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}},F.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var U=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};U.prototype.get=function(){return this.current},U.prototype.set=function(t){},U.prototype.getDefault=function(){return this.default},U.prototype.setDefault=function(){this.set(this.default)};var N=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(U),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(U),j=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(U),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(U),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(U),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(U),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(U),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(U),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(U),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(U),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(U),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(U),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(U),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(U),tt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(U),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(U),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(U),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(U),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(U),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(U),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(U),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(U),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(U),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(U),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(U),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(U),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(U),dt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(U),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(U),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(U),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(U),gt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(U),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(gt),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(gt),xt=function(t,e,i){this.context=t,this.width=e,this.height=i;var o=t.gl,r=this.framebuffer=o.createFramebuffer();this.colorAttachment=new vt(t,r),this.depthAttachment=new yt(t,r)};xt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i),t.deleteFramebuffer(this.framebuffer)};var bt=function(t,e,i){this.func=t,this.mask=e,this.range=i};bt.ReadOnly=!1,bt.ReadWrite=!0,bt.disabled=new bt(519,bt.ReadOnly,[0,1]);var wt=function(t,e,i,o,r,a){this.test=t,this.ref=e,this.mask=i,this.fail=o,this.depthFail=r,this.pass=a};wt.disabled=new wt({func:519,mask:0},0,0,7680,7680,7680);var Et=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};Et.disabled=new Et(Et.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Et.unblended=new Et(Et.Replace,t.Color.transparent,[!0,!0,!0,!0]),Et.alphaBlended=new Et([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Tt=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Tt.disabled=new Tt(!1,1029,2305),Tt.backCCW=new Tt(!0,1029,2305);var It=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new N(this),this.clearDepth=new Z(this),this.clearStencil=new j(this),this.colorMask=new V(this),this.depthMask=new q(this),this.stencilMask=new G(this),this.stencilFunc=new W(this),this.stencilOp=new X(this),this.stencilTest=new H(this),this.depthRange=new K(this),this.depthTest=new Y(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new $(this),this.blendColor=new tt(this),this.blendEquation=new et(this),this.cullFace=new it(this),this.cullFaceSide=new ot(this),this.frontFace=new rt(this),this.program=new at(this),this.activeTexture=new nt(this),this.viewport=new st(this),this.bindFramebuffer=new lt(this),this.bindRenderbuffer=new ct(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new ht(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dt(this),this.pixelStoreUnpack=new _t(this),this.pixelStoreUnpackPremultiplyAlpha=new ft(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};It.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},It.prototype.createIndexBuffer=function(t,e){return new B(this,t,e)},It.prototype.createVertexBuffer=function(t,e,i){return new F(this,t,e,i)},It.prototype.createRenderbuffer=function(t,e,i){var o=this.gl,r=o.createRenderbuffer();return this.bindRenderbuffer.set(r),o.renderbufferStorage(o.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r},It.prototype.createFramebuffer=function(t,e){return new xt(this,t,e)},It.prototype.clear=function(t){var e=t.color,i=t.depth,o=this.gl,r=0;e&&(r|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(r|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),o.clear(r)},It.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},It.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},It.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},It.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,Et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},It.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ct=function(e){function i(i,o,r){var a=this;e.call(this),this.id=i,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))}),this.on("error",function(){a._sourceErrored=!0}),this._source=D(i,o,r,this),this._tiles={},this._cache=new k(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},i.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(St)},i.prototype.getRenderableIds=function(e){var i=this,o=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&o.push(+r);return e?o.sort(function(e,o){var r=i._tiles[e].tileID,a=i._tiles[o].tileID,n=new t.Point(r.canonical.x,r.canonical.y)._rotate(i.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle);return r.overscaledZ-a.overscaledZ||s.y-n.y||s.x-n.x}):o.sort(St)},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,o,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===o&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var o=e[i];if(t.neighboringTiles&&t.neighboringTiles[o]){var r=this.getTileByID(o);a(t,r),a(r,t)}}function a(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,o=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===o||Math.abs(o)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,o),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},i.prototype._retainLoadedChildren=function(t,e,i,o){for(var r in this._tiles){var a=this._tiles[r];if(!(o[r]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)){for(var n=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(n=s)}for(var l=n;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){o[n.key]=n;break}}}},i.prototype.findLoadedParent=function(t,e){for(var i=t.overscaledZ-1;i>=e;i--){var o=t.scaledTo(i);if(!o)return;var r=String(o.key),a=this._tiles[r];if(a&&a.hasData())return a;if(this._cache.has(o))return this._cache.get(o)}},i.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),i=Math.floor(5*e),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},i.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,i=Math.round(e);if(this._prevLng=t,i){var o={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+i),o[a.tileID.key]=a}for(var n in this._tiles=o,this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},i.prototype.update=function(e){var o=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return o._source.hasTile(t)}))):r=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),n=Math.max(a-i.maxOverzooming,this._source.minzoom),s=Math.max(a+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a);if(zt(this._source.type)){for(var c={},u={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],_=l[d],f=this._tiles[d];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(_,n);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),u[d]=_}}for(var g in this._retainLoadedChildren(u,a,s,l),c)l[g]||(this._coveredTiles[g]=!0,l[g]=c[g])}for(var v in l)this._tiles[v].clearFadeHold();for(var y=0,x=t.keysDifference(this._tiles,l);y<x.length;y+=1){var b=x[y],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var o={},r={},a=Math.max(e-i.maxOverzooming,this._source.minzoom),n=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var u=c[l],h=this._addTile(u);o[u.key]=u,h.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,n,o);for(var p=0,d=t;p<d.length;p+=1){var _=d[p],f=this._tiles[_.key];if(!f.hasData()){if(e+1>this._source.maxzoom){var m=_.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){o[m.key]=m;continue}}else{var v=_.children(this._source.maxzoom);if(o[v[0].key]&&o[v[1].key]&&o[v[2].key]&&o[v[3].key])continue}for(var y=f.wasRequested(),x=_.overscaledZ-1;x>=a;--x){var b=_.scaledTo(x);if(r[b.key])break;if(r[b.key]=!0,!(f=this.getTile(b))&&y&&(f=this._addTile(b)),f&&(o[b.key]=b,y=f.wasRequested(),f.hasData()))break}}}return o},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var o=Boolean(i);return o||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,o||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var o=e.getExpiryTimeout();o&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired"),delete i._timers[t]},o))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,o){var r=this,a=[],n=this.transform;if(!n)return a;for(var s=o?n.getCameraQueryGeometry(e):e,l=e.map(function(t){return n.pointCoordinate(t)}),c=s.map(function(t){return n.pointCoordinate(t)}),u=this.getIds(),h=1/0,p=1/0,d=-1/0,_=-1/0,f=0,m=c;f<m.length;f+=1){var g=m[f];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),_=Math.max(_,g.y)}for(var v=function(e){var o=r._tiles[u[e]];if(!o.holdingForFade()){var s=o.tileID,f=Math.pow(2,n.zoom-o.tileID.overscaledZ),m=i*o.queryPadding*t.EXTENT/o.tileSize/f,g=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,_))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var v=l.map(function(t){return s.getTilePoint(t)}),y=c.map(function(t){return s.getTilePoint(t)});a.push({tile:o,tileID:s,queryGeometry:v,cameraQueryGeometry:y,scale:f})}}},y=0;y<u.length;y++)v(y);return a},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),o=0,r=i;o<r.length;o+=1){var a=r[o];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.updateState(t,e,i)},i.prototype.removeFeatureState=function(t,e,i){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,i)},i.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},i}(t.Evented);function St(t,e){return t%32-e%32||e-t}function zt(t){return"raster"===t||"image"===t||"video"===t}function Lt(){return new t.window.Worker(Qo.workerUrl)}Ct.maxOverzooming=10,Ct.maxUnderzooming=3;var Pt=function(){this.active={}};Pt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new Lt);return this.active[t]=!0,this.workers.slice()},Pt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Dt,Rt=Math.floor(t.browser.hardwareConcurrency/2);function Mt(e,i){var o={};for(var r in e)"ref"!==r&&(o[r]=e[r]);return t.refProperties.forEach(function(t){t in i&&(o[t]=i[t])}),o}function At(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var o=0;o<t.length;o++)"ref"in t[o]&&(t[o]=Mt(t[o],e[t[o].ref]));return t}Pt.workerCount=Math.max(Math.min(Rt,6),1);var kt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(t,e,i){i.push({command:kt.addSource,args:[t,e[t]]})}function Ot(t,e,i){e.push({command:kt.removeSource,args:[t]}),i[t]=!0}function Ft(t,e,i,o){Ot(t,i,o),Bt(t,e,i)}function Ut(e,i,o){var r;for(r in e[o])if(e[o].hasOwnProperty(r)&&"data"!==r&&!t.isEqual(e[o][r],i[o][r]))return!1;for(r in i[o])if(i[o].hasOwnProperty(r)&&"data"!==r&&!t.isEqual(e[o][r],i[o][r]))return!1;return!0}function Nt(e,i,o,r,a,n){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.isEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],i[s])||o.push({command:n,args:[r,s,i[s],a]}))}function Zt(t){return t.id}function jt(t,e){return t[e.id]=e,t}var qt=function(t,e,i){var o=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var a=0;a<this.xCellCount*this.yCellCount;a++)o.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};qt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qt.prototype.insert=function(t,e,i,o,r){this._forEachCell(e,i,o,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(r)},qt.prototype.insertCircle=function(t,e,i,o){this._forEachCell(e-o,i-o,e+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(o)},qt.prototype._insertBoxCell=function(t,e,i,o,r,a){this.boxCells[r].push(a)},qt.prototype._insertCircleCell=function(t,e,i,o,r,a){this.circleCells[r].push(a)},qt.prototype._query=function(t,e,i,o,r,a){if(i<0||t>this.width||o<0||e>this.height)return!r&&[];var n=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=o){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)n.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];n.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return a?n.filter(a):n}var p={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,i,o,this._queryCell,n,p,a),r?n.length>0:n},qt.prototype._queryCircle=function(t,e,i,o,r){var a=t-i,n=t+i,s=e-i,l=e+i;if(n<0||a>this.width||l<0||s>this.height)return!o&&[];var c=[],u={hitTest:o,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,n,l,this._queryCellCircle,c,u,r),o?c.length>0:c},qt.prototype.query=function(t,e,i,o,r){return this._query(t,e,i,o,!1,r)},qt.prototype.hitTest=function(t,e,i,o,r){return this._query(t,e,i,o,!0,r)},qt.prototype.hitTestCircle=function(t,e,i,o){return this._queryCircle(t,e,i,!0,o)},qt.prototype._queryCell=function(t,e,i,o,r,a,n,s){var l=n.seenUids,c=this.boxCells[r];if(null!==c)for(var u=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var _=4*d;if(t<=u[_+2]&&e<=u[_+3]&&i>=u[_+0]&&o>=u[_+1]&&(!s||s(this.boxKeys[d]))){if(n.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:u[_],y1:u[_+1],x2:u[_+2],y2:u[_+3]})}}}var f=this.circleCells[r];if(null!==f)for(var m=this.circles,g=0,v=f;g<v.length;g+=1){var y=v[g];if(!l.circle[y]){l.circle[y]=!0;var x=3*y;if(this._circleAndRectCollide(m[x],m[x+1],m[x+2],t,e,i,o)&&(!s||s(this.circleKeys[y]))){if(n.hitTest)return a.push(!0),!0;var b=m[x],w=m[x+1],E=m[x+2];a.push({key:this.circleKeys[y],x1:b-E,y1:w-E,x2:b+E,y2:w+E})}}}},qt.prototype._queryCellCircle=function(t,e,i,o,r,a,n,s){var l=n.circle,c=n.seenUids,u=this.boxCells[r];if(null!==u)for(var h=this.bboxes,p=0,d=u;p<d.length;p+=1){var _=d[p];if(!c.box[_]){c.box[_]=!0;var f=4*_;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[f+0],h[f+1],h[f+2],h[f+3])&&(!s||s(this.boxKeys[_])))return a.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,v=0,y=m;v<y.length;v+=1){var x=y[v];if(!c.circle[x]){c.circle[x]=!0;var b=3*x;if(this._circlesCollide(g[b],g[b+1],g[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}},qt.prototype._forEachCell=function(t,e,i,o,r,a,n,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(o),p=l;p<=u;p++)for(var d=c;d<=h;d++){var _=this.xCellCount*d+p;if(r.call(this,t,e,i,o,_,a,n,s))return}},qt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},qt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},qt.prototype._circlesCollide=function(t,e,i,o,r,a){var n=o-t,s=r-e,l=i+a;return l*l>n*n+s*s},qt.prototype._circleAndRectCollide=function(t,e,i,o,r,a,n){var s=(a-o)/2,l=Math.abs(t-(o+s));if(l>s+i)return!1;var c=(n-r)/2,u=Math.abs(e-(r+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var h=l-s,p=u-c;return h*h+p*p<=i*i};var Gt=t.properties.layout;function Wt(e,i,o,r,a){var n=t.identity(new Float32Array(16));return i?(t.identity(n),t.scale(n,n,[1/a,1/a,1]),o||t.rotateZ(n,n,r.angle)):(t.scale(n,n,[r.width/2,-r.height/2,1]),t.translate(n,n,[1,-1,0]),t.multiply(n,n,e)),n}function Xt(e,i,o,r,a){var n=t.identity(new Float32Array(16));return i?(t.multiply(n,n,e),t.scale(n,n,[a,a,1]),o||t.rotateZ(n,n,-r.angle)):(t.scale(n,n,[1,-1,1]),t.translate(n,n,[-1,-1,0]),t.scale(n,n,[2/r.width,2/r.height,1])),n}function Ht(e,i){var o=[e.x,e.y,0,1];re(o,o,i);var r=o[3];return{point:new t.Point(o[0]/r,o[1]/r),signedDistanceFromCamera:r}}function Kt(t,e){var i=t[0]/t[3],o=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&o>=-e[1]&&o<=e[1]}function Yt(e,i,o,r,a,n,s,l){var c=r?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,o.transform.zoom,Gt.properties[r?"text-size":"icon-size"]),h=[256/o.width*2+1,256/o.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,f=o.transform.width/o.transform.height,m=!1,g=0;g<_.length;g++){var v=_.get(g);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!m)oe(v.numGlyphs,p);else{m=!1;var y=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(y,y,i),Kt(y,h)){var x=.5+y[3]/o.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(c,u,v),w=s?b*x:b/x,E=new t.Point(v.anchorX,v.anchorY),T=Ht(E,a).point,I={},C=$t(v,w,!1,l,i,a,n,e.glyphOffsetArray,d,p,T,E,I,f);m=C.useVertical,(C.notEnoughRoom||m||C.needsFlipping&&$t(v,w,!0,l,i,a,n,e.glyphOffsetArray,d,p,T,E,I,f).notEnoughRoom)&&oe(v.numGlyphs,p)}else oe(v.numGlyphs,p)}}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function Jt(t,e,i,o,r,a,n,s,l,c,u,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,_=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(p-1),g=ee(t*f,i,o,r,a,n,s.segment,d,_,l,c,u,h);if(!g)return null;var v=ee(t*m,i,o,r,a,n,s.segment,d,_,l,c,u,h);return v?{first:g,last:v}:null}function Qt(e,i,o,r){return e===t.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function $t(e,i,o,r,a,n,s,l,c,u,h,p,d,_){var f,m=i/24,g=e.lineOffsetX*i,v=e.lineOffsetY*i;if(e.numGlyphs>1){var y=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=Jt(m,l,g,v,o,h,p,e,c,n,d,!1);if(!w)return{notEnoughRoom:!0};var E=Ht(w.first.point,s).point,T=Ht(w.last.point,s).point;if(r&&!o){var I=Qt(e.writingMode,E,T,_);if(I)return I}f=[w.first];for(var C=e.glyphStartIndex+1;C<y-1;C++)f.push(ee(m*l.getoffsetX(C),g,v,o,h,p,e.segment,x,b,c,n,d,!1));f.push(w.last)}else{if(r&&!o){var S=Ht(p,a).point,z=e.lineStartIndex+e.segment+1,L=new t.Point(c.getx(z),c.gety(z)),P=Ht(L,a),D=P.signedDistanceFromCamera>0?P.point:te(p,L,S,1,a),R=Qt(e.writingMode,S,D,_);if(R)return R}var M=ee(m*l.getoffsetX(e.glyphStartIndex),g,v,o,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,n,d,!1);if(!M)return{notEnoughRoom:!0};f=[M]}for(var A=0,k=f;A<k.length;A+=1){var B=k[A];t.addDynamicAttributes(u,B.point,B.angle)}return{}}function te(t,e,i,o,r){var a=Ht(t.add(t.sub(e)._unit()),r).point,n=i.sub(a);return i.add(n._mult(o/n.mag()))}function ee(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=r?e-i:e+i,f=_>0?1:-1,m=0;r&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var g=f>0?l+s:l+s+1,v=g,y=a,x=a,b=0,w=0,E=Math.abs(_);b+w<=E;){if((g+=f)<l||g>=c)return null;if(x=y,void 0===(y=p[g])){var T=new t.Point(u.getx(g),u.gety(g)),I=Ht(T,h);if(I.signedDistanceFromCamera>0)y=p[g]=I.point;else{var C=g-f;y=te(0===b?n:new t.Point(u.getx(C),u.gety(C)),T,x,E-b+1,h)}}b+=w,w=x.dist(y)}var S=(E-b)/w,z=y.sub(x),L=z.mult(S)._add(x);return L._add(z._unit()._perp()._mult(o*f)),{point:L,angle:m+Math.atan2(y.y-x.y,y.x-x.x),tileDistance:d?{prevTileDistance:g-f===v?0:u.gettileUnitDistanceFromAnchor(g-f),lastSegmentViewportDistance:E-b}:null}}var ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(t,e){for(var i=0;i<t;i++){var o=e.length;e.resize(o+4),e.float32.set(ie,3*o)}}function re(t,e,i){var o=e[0],r=e[1];return t[0]=i[0]*o+i[4]*r+i[12],t[1]=i[1]*o+i[5]*r+i[13],t[3]=i[3]*o+i[7]*r+i[15],t}var ae=function(t,e,i){void 0===e&&(e=new qt(t.width+200,t.height+200,25)),void 0===i&&(i=new qt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ne(t,e,i){t[e+4]=i?1:0}function se(e,i,o){return i*(t.EXTENT/(e.tileSize*Math.pow(2,o-e.tileID.overscaledZ)))}ae.prototype.placeCollisionBox=function(t,e,i,o,r){var a=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY),n=i*a.perspectiveRatio,s=t.x1*n+a.point.x,l=t.y1*n+a.point.y,c=t.x2*n+a.point.x,u=t.y2*n+a.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,r)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},ae.prototype.approximateTileDistance=function(t,e,i,o,r){var a=r?1:o/this.pitchfactor,n=t.lastSegmentViewportDistance*i;return t.prevTileDistance+n+(a-1)*n*Math.abs(Math.sin(e))},ae.prototype.placeCollisionCircles=function(e,i,o,r,a,n,s,l,c,u,h,p,d){var _=[],f=this.projectAnchor(c,a.anchorX,a.anchorY),m=l/24,g=a.lineOffsetX*l,v=a.lineOffsetY*l,y=new t.Point(a.anchorX,a.anchorY),x=Jt(m,s,g,v,!1,Ht(y,u).point,y,a,n,u,{},!0),b=!1,w=!1,E=!0,T=f.perspectiveRatio*r,I=1/(r*o),C=0,S=0;x&&(C=this.approximateTileDistance(x.first.tileDistance,x.first.angle,I,f.cameraDistance,p),S=this.approximateTileDistance(x.last.tileDistance,x.last.angle,I,f.cameraDistance,p));for(var z=0;z<e.length;z+=5){var L=e[z],P=e[z+1],D=e[z+2],R=e[z+3];if(!x||R<-C||R>S)ne(e,z,!1);else{var M=this.projectPoint(c,L,P),A=D*T;if(_.length>0){var k=M.x-_[_.length-4],B=M.y-_[_.length-3];if(A*A*2>k*k+B*B&&z+8<e.length){var O=e[z+8];if(O>-C&&O<S){ne(e,z,!1);continue}}}var F=z/5;_.push(M.x,M.y,A,F),ne(e,z,!0);var U=M.x-A,N=M.y-A,Z=M.x+A,j=M.y+A;if(E=E&&this.isOffscreen(U,N,Z,j),w=w||this.isInsideGrid(U,N,Z,j),!i&&this.grid.hitTestCircle(M.x,M.y,A,d)){if(!h)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:_,offscreen:E}},ae.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],o=1/0,r=1/0,a=-1/0,n=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.Point(c.x+100,c.y+100);o=Math.min(o,u.x),r=Math.min(r,u.y),a=Math.max(a,u.x),n=Math.max(n,u.y),i.push(u)}for(var h={},p={},d=0,_=this.grid.query(o,r,a,n).concat(this.ignoredGrid.query(o,r,a,n));d<_.length;d+=1){var f=_[d],m=f.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(f.x1,f.y1),new t.Point(f.x2,f.y1),new t.Point(f.x2,f.y2),new t.Point(f.x1,f.y2)];t.polygonIntersectsPolygon(i,g)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},ae.prototype.insertCollisionBox=function(t,e,i,o,r){var a={bucketInstanceId:i,featureIndex:o,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(a,t[0],t[1],t[2],t[3])},ae.prototype.insertCollisionCircles=function(t,e,i,o,r){for(var a=e?this.ignoredGrid:this.grid,n={bucketInstanceId:i,featureIndex:o,collisionGroupID:r},s=0;s<t.length;s+=4)a.insertCircle(n,t[s],t[s+1],t[s+2])},ae.prototype.projectAnchor=function(t,e,i){var o=[e,i,0,1];return re(o,o,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5,cameraDistance:o[3]}},ae.prototype.projectPoint=function(e,i,o){var r=[i,o,0,1];return re(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},ae.prototype.projectAndGetPerspectiveRatio=function(e,i,o){var r=[i,o,0,1];return re(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},ae.prototype.isOffscreen=function(t,e,i,o){return i<100||t>=this.screenRightBoundary||o<100||e>this.screenBottomBoundary},ae.prototype.isInsideGrid=function(t,e,i,o){return i>=0&&t<this.gridRightBoundary&&o>=0&&e<this.gridBottomBoundary};var le=function(t,e,i,o){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):o&&i?1:0,this.placed=i};le.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ce=function(t,e,i,o,r){this.text=new le(t?t.text:null,e,i,r),this.icon=new le(t?t.icon:null,e,o,r)};ce.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ue=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},he=function(t,e,i,o,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=r},pe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};pe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var de=function(t,e,i){this.transform=t.clone(),this.collisionIndex=new ae(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new pe(i)};function _e(t,e,i){t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0)}de.prototype.placeLayerTile=function(e,i,o,r){var a=i.getBucket(e),n=i.latestFeatureIndex;if(a&&n&&e.id===a.layerIds[0]){var s=i.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),p=Wt(h,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,se(i,1,this.transform.zoom)),d=Wt(h,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,se(i,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new he(a.bucketInstanceId,n,a.sourceLayerIndex,a.index,i.tileID),this.placeLayerBucket(a,h,p,d,c,u,o,i.holdingForFade(),r,s)}},de.prototype.placeLayerBucket=function(e,i,o,r,a,n,s,l,c,u){var h=e.layers[0].layout,p=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),d=h.get("text-optional"),_=h.get("icon-optional"),f=h.get("text-allow-overlap"),m=h.get("icon-allow-overlap"),g=f&&(m||!e.hasIconData()||_),v=m&&(f||!e.hasTextData()||d),y=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&u&&e.deserializeCollisionBoxes(u);for(var x=0;x<e.symbolInstances.length;x++){var b=e.symbolInstances.get(x);if(!c[b.crossTileID]){if(l){this.placements[b.crossTileID]=new ue(!1,!1,!1);continue}var w=!1,E=!1,T=!0,I=null,C=null,S=null,z=0,L=0,P=e.collisionArrays[x];P.textFeatureIndex&&(z=P.textFeatureIndex),P.textBox&&(w=(I=this.collisionIndex.placeCollisionBox(P.textBox,h.get("text-allow-overlap"),n,i,y.predicate)).box.length>0,T=T&&I.offscreen);var D=P.textCircles;if(D){var R=e.text.placedSymbolArray.get(b.horizontalPlacedTextSymbolIndex),M=t.evaluateSizeForFeature(e.textSizeData,p,R);C=this.collisionIndex.placeCollisionCircles(D,h.get("text-allow-overlap"),a,n,R,e.lineVertexArray,e.glyphOffsetArray,M,i,o,s,"map"===h.get("text-pitch-alignment"),y.predicate),w=h.get("text-allow-overlap")||C.circles.length>0,T=T&&C.offscreen}P.iconFeatureIndex&&(L=P.iconFeatureIndex),P.iconBox&&(E=(S=this.collisionIndex.placeCollisionBox(P.iconBox,h.get("icon-allow-overlap"),n,i,y.predicate)).box.length>0,T=T&&S.offscreen);var A=d||0===b.numGlyphVertices&&0===b.numVerticalGlyphVertices,k=_||0===b.numIconVertices;A||k?k?A||(E=E&&w):w=E&&w:E=w=E&&w,w&&I&&this.collisionIndex.insertCollisionBox(I.box,h.get("text-ignore-placement"),e.bucketInstanceId,z,y.ID),E&&S&&this.collisionIndex.insertCollisionBox(S.box,h.get("icon-ignore-placement"),e.bucketInstanceId,L,y.ID),w&&C&&this.collisionIndex.insertCollisionCircles(C.circles,h.get("text-ignore-placement"),e.bucketInstanceId,z,y.ID),this.placements[b.crossTileID]=new ue(w||g,E||v,T||e.justReloaded),c[b.crossTileID]=!0}}e.justReloaded=!1},de.prototype.commit=function(t,e){this.commitTime=e;var i=!1,o=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,r=t?t.opacities:{};for(var a in this.placements){var n=this.placements[a],s=r[a];s?(this.opacities[a]=new ce(s,o,n.text,n.icon),i=i||n.text!==s.text.placed||n.icon!==s.icon.placed):(this.opacities[a]=new ce(null,o,n.text,n.icon,n.skipFade),i=i||n.text||n.icon)}for(var l in r){var c=r[l];if(!this.opacities[l]){var u=new ce(c,o,!1,!1);u.isHidden()||(this.opacities[l]=u,i=i||c.text.placed||c.icon.placed)}}i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},de.prototype.updateLayerOpacities=function(t,e){for(var i={},o=0,r=e;o<r.length;o+=1){var a=r[o],n=a.getBucket(t);n&&a.latestFeatureIndex&&t.id===n.layerIds[0]&&this.updateBucketOpacities(n,i,a.collisionBoxArray)}},de.prototype.updateBucketOpacities=function(t,e,i){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var o=t.layers[0].layout,r=new ce(null,0,!1,!1,!0),a=o.get("text-allow-overlap"),n=o.get("icon-allow-overlap"),s=new ce(null,0,a&&(n||!t.hasIconData()||o.get("icon-optional")),n&&(a||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(i);for(var l=0;l<t.symbolInstances.length;l++){var c=t.symbolInstances.get(l),u=e[c.crossTileID],h=this.opacities[c.crossTileID];u?h=r:h||(h=s,this.opacities[c.crossTileID]=h),e[c.crossTileID]=!0;var p=c.numGlyphVertices>0||c.numVerticalGlyphVertices>0,d=c.numIconVertices>0;if(p){for(var _=we(h.text),f=(c.numGlyphVertices+c.numVerticalGlyphVertices)/4,m=0;m<f;m++)t.text.opacityVertexArray.emplaceBack(_);t.text.placedSymbolArray.get(c.horizontalPlacedTextSymbolIndex).hidden=h.text.isHidden(),c.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).hidden=h.text.isHidden())}if(d){for(var g=we(h.icon),v=0;v<c.numIconVertices/4;v++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(l).hidden=h.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var y=t.collisionArrays[l];if(y){y.textBox&&_e(t.collisionBox.collisionVertexArray,h.text.placed,!1),y.iconBox&&_e(t.collisionBox.collisionVertexArray,h.icon.placed,!1);var x=y.textCircles;if(x&&t.hasCollisionCircleData())for(var b=0;b<x.length;b+=5){var w=u||0===x[b+4];_e(t.collisionCircle.collisionVertexArray,h.text.placed,w)}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},de.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},de.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},de.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},de.prototype.setStale=function(){this.stale=!0};var fe=Math.pow(2,25),me=Math.pow(2,24),ge=Math.pow(2,17),ve=Math.pow(2,16),ye=Math.pow(2,9),xe=Math.pow(2,8),be=Math.pow(2,1);function we(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*fe+e*me+i*ge+e*ve+i*ye+e*xe+i*be+e}var Ee=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Ee.prototype.continuePlacement=function(t,e,i,o,r){for(;this._currentTileIndex<t.length;){var a=t[this._currentTileIndex];if(e.placeLayerTile(o,a,i,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};var Te=function(t,e,i,o,r,a){this.placement=new de(t,r,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1};Te.prototype.isDone=function(){return this._done},Te.prototype.continuePlacement=function(e,i,o){for(var r=this,a=t.browser.now(),n=function(){var e=t.browser.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Ee),this._inProgressLayer.continuePlacement(o[s.source],this.placement,this._showCollisionBoxes,s,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Te.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var Ie=512/t.EXTENT/2,Ce=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var o=0;o<e.length;o++){var r=e.get(o),a=r.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};Ce.prototype.getScaledCoordinates=function(e,i){var o=i.canonical.z-this.tileID.canonical.z,r=Ie/Math.pow(2,o);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}},Ce.prototype.findMatches=function(t,e,i){for(var o=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var a=t.get(r);if(!a.crossTileID){var n=this.indexedSymbolInstances[a.key];if(n)for(var s=this.getScaledCoordinates(a,e),l=0,c=n;l<c.length;l+=1){var u=c[l];if(Math.abs(u.coord.x-s.x)<=o&&Math.abs(u.coord.y-s.y)<=o&&!i[u.crossTileID]){i[u.crossTileID]=!0,a.crossTileID=u.crossTileID;break}}}}};var Se=function(){this.maxCrossTileID=0};Se.prototype.generate=function(){return++this.maxCrossTileID};var ze=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ze.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var o=this.indexes[i],r={};for(var a in o){var n=o[a];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t},ze.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var o=0;o<e.symbolInstances.length;o++)e.symbolInstances.get(o).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var n=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in n){var l=n[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var c=n[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,r)}}for(var u=0;u<e.symbolInstances.length;u++){var h=e.symbolInstances.get(u);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ce(t,e.symbolInstances,e.bucketInstanceId),!0},ze.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var o=0,r=e.indexedSymbolInstances[i];o<r.length;o+=1){var a=r[o];delete this.usedCrossTileIDs[t][a.crossTileID]}},ze.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var o=this.indexes[i];for(var r in o)t[o[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[r]),delete o[r],e=!0)}return e};var Le=function(){this.layerIndexes={},this.crossTileIDs=new Se,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Le.prototype.addLayer=function(t,e,i){var o=this.layerIndexes[t.id];void 0===o&&(o=this.layerIndexes[t.id]=new ze);var r=!1,a={};o.handleWrapJump(i);for(var n=0,s=e;n<s.length;n+=1){var l=s[n],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(l.tileID,c,this.crossTileIDs)&&(r=!0),a[c.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(r=!0),r},Le.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var Pe=function(e,i){return t.emitValidationErrors(e,i&&i.filter(function(t){return"source.canvas"!==t.identifier}))},De=t.pick(kt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Re=t.pick(kt,["setCenter","setZoom","setBearing","setPitch"]),Me=function(e){function i(o,r){var a=this;void 0===r&&(r={}),e.call(this),this.map=o,this.dispatcher=new w((Dt||(Dt=new Pt),Dt),this),this.imageManager=new h,this.glyphManager=new g(o._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new b(256,512),this.crossTileSymbolIndex=new Le,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var n=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(t){for(var e in n.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),n.sourceCaches)n.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var o in a._layers){var r=a._layers[o];r.source===i.id&&a._validateLayer(r)}}}})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,i.accessToken);var a=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,function(e,i){o._request=null,e?o.fire(new t.ErrorEvent(e)):i&&o._load(i,r)})},i.prototype.loadJSON=function(e,i){var o=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){o._request=null,o._load(e,!1!==i.validate)})},i.prototype._load=function(e,i){var o=this;if(!i||!Pe(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=function(e,i,o){var r,a,n,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i(t.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,n||(n=t,r=e,u())}),c=t.getImage(i(t.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,n||(n=t,a=e,u())});function u(){if(n)o(n);else if(r&&a){var e=t.browser.getImageData(a),i={};for(var s in r){var l=r[s],c=l.width,u=l.height,h=l.x,p=l.y,d=l.sdf,_=l.pixelRatio,f=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,f,{x:h,y:p},{x:0,y:0},{width:c,height:u}),i[s]={data:f,pixelRatio:_,sdf:d}}o(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,i){if(o._spriteRequest=null,e)o.fire(new t.ErrorEvent(e));else if(i)for(var r in i)o.imageManager.addImage(r,i[r]);o.imageManager.setLoaded(!0),o.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=At(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var n=0,s=a;n<s.length;n+=1){var l=s[n];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var o=e.sourceLayer;if(o){var r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(o))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+o+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,o=t;i<o.length;i+=1){var r=o[i],a=this._layers[r];"custom"!==a.type&&e.push(a.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var o=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(o.length||r.length)&&this._updateWorkerLayers(o,r),this._updatedSources){var n=this._updatedSources[a];"reload"===n?this._reloadSource(a):"clear"===n&&this._clearSource(a)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var c=0,u=this._order;c<u.length;c+=1){var h=u[c],p=this._layers[h];p.recalculate(e),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),Pe(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=At(e.layers);var o=function Vt(e,i){if(!e)return[{command:kt.setStyle,args:[i]}];var o=[];try{if(!t.isEqual(e.version,i.version))return[{command:kt.setStyle,args:[i]}];t.isEqual(e.center,i.center)||o.push({command:kt.setCenter,args:[i.center]}),t.isEqual(e.zoom,i.zoom)||o.push({command:kt.setZoom,args:[i.zoom]}),t.isEqual(e.bearing,i.bearing)||o.push({command:kt.setBearing,args:[i.bearing]}),t.isEqual(e.pitch,i.pitch)||o.push({command:kt.setPitch,args:[i.pitch]}),t.isEqual(e.sprite,i.sprite)||o.push({command:kt.setSprite,args:[i.sprite]}),t.isEqual(e.glyphs,i.glyphs)||o.push({command:kt.setGlyphs,args:[i.glyphs]}),t.isEqual(e.transition,i.transition)||o.push({command:kt.setTransition,args:[i.transition]}),t.isEqual(e.light,i.light)||o.push({command:kt.setLight,args:[i.light]});var r={},a=[];!function(e,i,o,r){var a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(i.hasOwnProperty(a)||Ot(a,o,r));for(a in i)i.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.isEqual(e[a],i[a])||("geojson"===e[a].type&&"geojson"===i[a].type&&Ut(e,i,a)?o.push({command:kt.setGeoJSONSourceData,args:[a,i[a].data]}):Ft(a,i,o,r)):Bt(a,i,o))}(e.sources,i.sources,a,r);var n=[];e.layers&&e.layers.forEach(function(t){r[t.source]?o.push({command:kt.removeLayer,args:[t.id]}):n.push(t)}),o=o.concat(a),function(e,i,o){i=i||[];var r,a,n,s,l,c,u,h=(e=e||[]).map(Zt),p=i.map(Zt),d=e.reduce(jt,{}),_=i.reduce(jt,{}),f=h.slice(),m=Object.create(null);for(r=0,a=0;r<h.length;r++)n=h[r],_.hasOwnProperty(n)?a++:(o.push({command:kt.removeLayer,args:[n]}),f.splice(f.indexOf(n,a),1));for(r=0,a=0;r<p.length;r++)n=p[p.length-1-r],f[f.length-1-r]!==n&&(d.hasOwnProperty(n)?(o.push({command:kt.removeLayer,args:[n]}),f.splice(f.lastIndexOf(n,f.length-a),1)):a++,c=f[f.length-r],o.push({command:kt.addLayer,args:[_[n],c]}),f.splice(f.length-r,0,n),m[n]=!0);for(r=0;r<p.length;r++)if(s=d[n=p[r]],l=_[n],!m[n]&&!t.isEqual(s,l))if(t.isEqual(s.source,l.source)&&t.isEqual(s["source-layer"],l["source-layer"])&&t.isEqual(s.type,l.type)){for(u in Nt(s.layout,l.layout,o,n,null,kt.setLayoutProperty),Nt(s.paint,l.paint,o,n,null,kt.setPaintProperty),t.isEqual(s.filter,l.filter)||o.push({command:kt.setFilter,args:[n,l.filter]}),t.isEqual(s.minzoom,l.minzoom)&&t.isEqual(s.maxzoom,l.maxzoom)||o.push({command:kt.setLayerZoomRange,args:[n,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Nt(s[u],l[u],o,n,u.slice(6),kt.setPaintProperty):t.isEqual(s[u],l[u])||o.push({command:kt.setLayerProperty,args:[n,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Nt(s[u],l[u],o,n,u.slice(6),kt.setPaintProperty):t.isEqual(s[u],l[u])||o.push({command:kt.setLayerProperty,args:[n,u,l[u]]}))}else o.push({command:kt.removeLayer,args:[n]}),c=f[f.lastIndexOf(n)+1],o.push({command:kt.addLayer,args:[l,c]})}(n,i.layers,o)}catch(t){console.warn("Unable to compute style diff:",t),o=[{command:kt.setStyle,args:[i]}]}return o}(this.serialize(),e).filter(function(t){return!(t.command in Re)});if(0===o.length)return!1;var r=o.filter(function(t){return!(t.command in De)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return o.forEach(function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)}),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,o){var r=this;if(void 0===o&&(o={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,o))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Ct(e,i,this.dispatcher);a.style=this,a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}}),a.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.clearTiles(),o.onRemove&&o.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var a;if("custom"===e.type){if(Pe(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},o))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}})}var n=i?this._order.indexOf(i):this._order.length;if(i&&-1===n)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(n,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source&&"custom"!==a.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var o=this._order.indexOf(e);this._order.splice(o,1);var r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var o=this._order.indexOf(e);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.setLayerZoomRange=function(e,i,o){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===o||(null!=i&&(r.minzoom=i),null!=o&&(r.maxzoom=o),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.isEqual(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",i,null,o)||(r.filter=t.clone(i),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.isEqual(a.getLayoutProperty(i),o)||(a.setLayoutProperty(i,o,r),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var o=this.getLayer(e);if(o)return o.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,o,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(e);a?t.isEqual(a.getPaintProperty(i),o)||(a.setPaintProperty(i,o,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=e.sourceLayer,a=this.sourceCaches[o],n=parseInt(e.id,10);if(void 0!==a){var s=a.getSource().type;"geojson"===s&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?isNaN(n)||n<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(r,n,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var o=e.source,r=this.sourceCaches[o];if(void 0!==r){var a=r.getSource().type,n="vector"===a?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==a||n?e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!i||e.id?r.removeFeatureState(n,s,i):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,o=e.sourceLayer,r=this.sourceCaches[i],a=parseInt(e.id,10);if(void 0!==r)if("vector"!==r.getSource().type||o){if(!(isNaN(a)||a<0))return r.getFeatureState(o,a);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},o={},r=[],a=this._order.length-1;a>=0;a--){var n=this._order[a];if(i(n)){o[n]=a;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][n];if(c)for(var u=0,h=c;u<h.length;u+=1){var p=h[u];r.push(p)}}}}r.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var d=[],_=this._order.length-1;_>=0;_--){var f=this._order[_];if(i(f))for(var m=r.length-1;m>=0;m--){var g=r[m].feature;if(o[g.layer.id]<_)break;d.push(g),r.pop()}else for(var v=0,y=t;v<y.length;v+=1){var x=y[v][f];if(x)for(var b=0,w=x;b<w.length;b+=1){var E=w[b];d.push(E.feature)}}}return d},i.prototype.queryRenderedFeatures=function(e,i,o){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter);var r={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,n=i.layers;a<n.length;a+=1){var s=n[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var c=[];for(var u in this.sourceCaches)i.layers&&!r[u]||c.push(M(this.sourceCaches[u],this._layers,e,i,o));return this.placement&&c.push(function(t,e,i,o,r,a){for(var n={},s=r.queryRenderedSymbols(i),l=[],c=0,u=Object.keys(s).map(Number);c<u.length;c+=1){var h=u[c];l.push(a[h])}l.sort(A);for(var p=function(){var e=_[d],i=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,o.filter,o.layers,t);for(var r in i){var a=n[r]=n[r]||[],l=i[r];l.sort(function(t,i){var o=e.featureSortOrder;if(o){var r=o.indexOf(t.featureIndex);return o.indexOf(i.featureIndex)-r}return i.featureIndex-t.featureIndex});for(var c=0,u=l;c<u.length;c+=1){var h=u[c];a.push(h)}}},d=0,_=l;d<_.length;d+=1)p();var f=function(i){n[i].forEach(function(o){var r=o.feature,a=t[i],n=e[a.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n})};for(var m in n)f(m);return n}(this._layers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter);var o=this.sourceCaches[e];return o?function(t,e){for(var i=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),o=[],r={},a=0;a<i.length;a++){var n=i[a],s=n.tileID.canonical.key;r[s]||(r[s]=!0,n.querySourceFeatures(o,e))}return o}(o,i):[]},i.prototype.addSourceType=function(t,e,o){return i.getSourceType(t)?o(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},o):o(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var o=this.light.getLight(),r=!1;for(var a in e)if(!t.isEqual(e[a],o[a])){r=!0;break}if(r){var n={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(n)}},i.prototype._validate=function(e,i,o,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Pe(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:o,styleSpec:t.styleSpec},r)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,o,r){for(var a=!1,n=!1,s={},l=0,c=this._order;l<c.length;l+=1){var u=c[l],h=this._layers[u];if("symbol"===h.type){if(!s[h.source]){var p=this.sourceCaches[h.source];s[h.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var d=this.crossTileSymbolIndex.addLayer(h,s[h.source],e.center.lng);a=a||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var _=this._layerOrderChanged||0===o;if((_||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new Te(e,this._order,_,i,o,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),n=!0),a&&this.pauseablePlacement.placement.setStale()),n||a)for(var f=0,m=this._order;f<m.length;f+=1){var g=m[f],v=this._layers[g];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,o){return t.makeRequest(i,o)},i}(t.Evented);Me.getSourceType=function(t){return P[t]},Me.setSourceType=function(t,e){P[t]=e},Me.registerForPluginAvailability=t.registerForPluginAvailability;var Ae=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ke=si("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Be=si("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Oe=si("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Fe=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ue=si("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ne=si("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ze=si("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),je=si("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ve=si("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),qe=si("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),We=si("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xe=si("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),He=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ke=si("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),Ye=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),Je=si("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qe=si("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),$e=si("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ti=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ei=si("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ii=si("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),oi=si("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ri=si("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ai=si("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ni=si("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function si(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o={};return{fragmentSource:t=t.replace(i,function(t,e,i,r,a){return o[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"}),vertexSource:e=e.replace(i,function(t,e,i,r,a){var n="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":n;return o[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})}}var li=Object.freeze({prelude:ke,background:Be,backgroundPattern:Oe,circle:Fe,clippingMask:Ue,heatmap:Ne,heatmapTexture:Ze,collisionBox:je,collisionCircle:Ve,debug:qe,fill:Ge,fillOutline:We,fillOutlinePattern:Xe,fillPattern:He,fillExtrusion:Ke,fillExtrusionPattern:Ye,extrusionTexture:Je,hillshadePrepare:Qe,hillshade:$e,line:ti,lineGradient:ei,linePattern:ii,lineSDF:oi,raster:ri,symbolIcon:ai,symbolSDF:ni}),ci=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ci.prototype.bind=function(t,e,i,o,r,a,n,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==o.length,c=0;!l&&c<o.length;c++)this.boundPaintVertexBuffers[c]!==o[c]&&(l=!0);var u=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==n||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||u?this.freshBind(e,i,o,r,a,n,s):(t.bindVertexArrayOES.set(this.vao),n&&n.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},ci.prototype.freshBind=function(t,e,i,o,r,a,n){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=n;else{s=c.currentNumAttributes||0;for(var h=l;h<s;h++)u.disableVertexAttribArray(h)}e.enableAttributes(u,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(u,t);a&&a.enableAttributes(u,t),n&&n.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(var _=0,f=i;_<f.length;_+=1){var m=f[_];m.bind(),m.setVertexAttribPointers(u,t,r)}a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),o&&o.bind(),n&&(n.bind(),n.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l},ci.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ui=function(e,i,o,r,a){var n=e.gl;this.program=n.createProgram();var s=o.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));a&&s.push("#define OVERDRAW_INSPECTOR;");var l=s.concat(ke.fragmentSource,i.fragmentSource).join("\n"),c=s.concat(ke.vertexSource,i.vertexSource).join("\n"),u=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(u,l),n.compileShader(u),n.attachShader(this.program,u);var h=n.createShader(n.VERTEX_SHADER);n.shaderSource(h,c),n.compileShader(h),n.attachShader(this.program,h);for(var p=o.layoutAttributes||[],d=0;d<p.length;d++)n.bindAttribLocation(this.program,d,p[d].name);n.linkProgram(this.program),this.numAttributes=n.getProgramParameter(this.program,n.ACTIVE_ATTRIBUTES),this.attributes={};for(var _={},f=0;f<this.numAttributes;f++){var m=n.getActiveAttrib(this.program,f);m&&(this.attributes[m.name]=n.getAttribLocation(this.program,m.name))}for(var g=n.getProgramParameter(this.program,n.ACTIVE_UNIFORMS),v=0;v<g;v++){var y=n.getActiveUniform(this.program,v);y&&(_[y.name]=n.getUniformLocation(this.program,y.name))}this.fixedUniforms=r(e,_),this.binderUniforms=o.getUniforms(e,_)};function hi(e,i,o){var r=1/se(o,1,i.transform.tileZoom),a=Math.pow(2,o.tileID.overscaledZ),n=o.tileSize*Math.pow(2,i.transform.tileZoom)/a,s=n*(o.tileID.canonical.x+o.tileID.wrap*a),l=n*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}ui.prototype.draw=function(t,e,i,o,r,a,n,s,l,c,u,h,p,d,_,f){var m,g=t.gl;for(var v in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(o),t.setColorMode(r),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[v].set(n[v]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var y=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],x=0,b=u.get();x<b.length;x+=1){var w=b[x],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new ci)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,w.vertexOffset,_,f),g.drawElements(e,w.primitiveLength*y,g.UNSIGNED_SHORT,w.primitiveOffset*y*2)}};var pi=function(e,i,o){var r=i.style.light,a=r.properties.get("position"),n=[a.x,a.y,a.z],s=t.create();"viewport"===r.properties.get("anchor")&&t.fromRotation(s,-i.transform.angle),t.transformMat3(n,n,s);var l=r.properties.get("color");return{u_matrix:e,u_lightpos:n,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+o}},di=function(e,i,o,r,a,n){return t.extend(pi(e,i,o),hi(a,i,n),{u_height_factor:-Math.pow(2,r.overscaledZ)/n.tileSize/8})},_i=function(e,i,o){var r=t.create$1();t.ortho(r,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:r,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:o,u_opacity:i}},fi=function(t){return{u_matrix:t}},mi=function(e,i,o,r){return t.extend(fi(e),hi(o,i,r))},gi=function(t,e){return{u_matrix:t,u_world:e}},vi=function(e,i,o,r,a){return t.extend(mi(e,i,o,r),{u_world:a})},yi=function(t,e,i,o){var r,a,n=t.transform;if("map"===o.paint.get("circle-pitch-alignment")){var s=se(i,1,n.zoom);r=!0,a=[s,s]}else r=!1,a=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+r,u_extrude_scale:a}},xi=function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},bi=function(t,e,i){var o=se(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:o,u_extrude_scale:[e.pixelsToGLUnits[0]/(o*r),e.pixelsToGLUnits[1]/(o*r)],u_overscale_factor:a}},wi=function(t,e){return{u_matrix:t,u_color:e}},Ei=function(t){return{u_matrix:t}},Ti=function(t,e,i,o){return{u_matrix:t,u_extrude_scale:se(e,1,i),u_intensity:o}},Ci=function(t,e,i){var o=i.paint.get("hillshade-shadow-color"),r=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),n=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(n-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:zi(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),n],u_shadow:o,u_highlight:r,u_accent:a}},Si=function(e,i){var o=e.dem.stride,r=t.create$1();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[o,o],u_zoom:e.tileID.overscaledZ,u_maxzoom:i}};function zi(e,i){var o=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new t.MercatorCoordinate(0,r/o).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/o).toLngLat().lat]}var Li=function(t,e,i){var o=t.transform;return{u_matrix:Ai(t,e,i),u_ratio:1/se(e,1,o.zoom),u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Pi=function(e,i,o){return t.extend(Li(e,i,o),{u_image:0})},Di=function(e,i,o,r){var a=e.transform,n=Mi(i,a);return{u_matrix:Ai(e,i,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/se(i,1,a.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,n,r.fromScale,r.toScale],u_fade:r.t,u_gl_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Ri=function(e,i,o,r,a){var n=e.transform,s=e.lineAtlas,l=Mi(i,n),c="round"===o.layout.get("line-cap"),u=s.getDash(r.from,c),h=s.getDash(r.to,c),p=u.width*a.fromScale,d=h.width*a.toScale;return t.extend(Li(e,i,o),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/d,-h.height/2],u_sdfgamma:s.width/(256*Math.min(p,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:a.t})};function Mi(t,e){return 1/se(t,1,e.tileZoom)}function Ai(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var ki=function(t,e,i,o,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(n=r.paint.get("raster-saturation"),n>0?1-1/(1.001-n):-n),u_contrast_factor:(a=r.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Bi(r.paint.get("raster-hue-rotate"))};var a,n};function Bi(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Oi=function(t,e,i,o,r,a,n,s,l,c){var u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:n,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+o,u_texsize:c,u_texture:0}},Fi=function(e,i,o,r,a,n,s,l,c,u,h){var p=a.transform;return t.extend(Oi(e,i,o,r,a,n,s,l,c,u),{u_gamma_scale:r?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_is_halo:+h})},Ui=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Ni=function(e,i,o,r,a,n){return t.extend(function(t,e,i,o){var r=i.imageManager.getPattern(t.from),a=i.imageManager.getPattern(t.to),n=i.imageManager.getPixelSize(),s=n.width,l=n.height,c=Math.pow(2,o.tileID.overscaledZ),u=o.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(o.tileID.canonical.x+o.tileID.wrap*c),p=u*o.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/se(o,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,n,o,a),{u_matrix:e,u_opacity:i})},Zi={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},extrusionTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:xi,collisionCircle:xi,debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_maxzoom:new t.Uniform1f(e,i.u_maxzoom)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_image:new t.Uniform1i(e,i.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,i.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,i.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,i.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_is_halo:new t.Uniform1f(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function ji(e,i){for(var o=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<o.length;r++){var a={},n=o[r],s=o.slice(r+1);Vi(n.tileID.wrapped(),n.tileID,s,new t.OverscaledTileID(0,n.tileID.wrap+1,0,0,0),a),n.setMask(a,i)}}function Vi(e,i,o,r,a){for(var n=0;n<o.length;n++){var s=o[n];if(r.isLessThan(s.tileID))break;if(i.key===s.tileID.key)return;if(s.tileID.isChildOf(i)){for(var l=i.children(1/0),c=0;c<l.length;c++)Vi(e,l[c],o.slice(n),r,a);return}}var u=i.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(u,i.canonical.x-(e.canonical.x<<u),i.canonical.y-(e.canonical.y<<u));a[h.key]=a[h.key]||h}function qi(t,e,i,o,r){for(var a=t.context,n=a.gl,s=r?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),l=0;l<o.length;l++){var c=o[l],u=e.getTile(c),h=u.getBucket(i);if(h){var p=r?h.collisionCircle:h.collisionBox;p&&s.draw(a,r?n.TRIANGLES:n.LINES,bt.disabled,wt.disabled,t.colorModeForRenderPass(),Tt.disabled,bi(c.posMatrix,t.transform,u),i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,t.transform.zoom,null,null,p.collisionVertexBuffer)}}}var Gi=t.identity(new Float32Array(16)),Wi=t.properties.layout;function Xi(e,i,o,r,a,n,s,l,c,u,h,p){for(var d,_,f=e.context,m=f.gl,g=e.transform,v="map"===l,y="map"===c,x=v&&"point"!==o.layout.get("symbol-placement"),b=v&&!y&&!x,w=void 0!==o.layout.get("symbol-sort-key").constantOr(1),E=e.depthModeForSublayer(0,bt.ReadOnly),T=[],I=0,C=r;I<C.length;I+=1){var S=C[I],z=i.getTile(S),L=z.getBucket(o);if(L){var P=a?L.text:L.icon;if(P&&P.segments.get().length){var D=P.programConfigurations.get(o.id),R=a||L.sdfIcons,M=a?L.textSizeData:L.iconSizeData;d||(d=e.useProgram(R?"symbolSDF":"symbolIcon",D),_=t.evaluateSizeForZoom(M,g.zoom,Wi.properties[a?"text-size":"icon-size"])),f.activeTexture.set(m.TEXTURE0);var A=void 0,k=void 0,B=void 0;if(a)k=z.glyphAtlasTexture,B=m.LINEAR,A=z.glyphAtlasTexture.size;else{var O=1!==o.layout.get("icon-size").constantOr(0)||L.iconsNeedLinear,F=y||0!==g.pitch;k=z.imageAtlasTexture,B=R||e.options.rotating||e.options.zooming||O||F?m.LINEAR:m.NEAREST,A=z.imageAtlasTexture.size}var U=se(z,1,e.transform.zoom),N=Wt(S.posMatrix,y,v,e.transform,U),Z=Xt(S.posMatrix,y,v,e.transform,U);x&&Yt(L,S.posMatrix,e,a,N,Z,y,u);var j=e.translatePosMatrix(S.posMatrix,z,n,s),V=x?Gi:N,q=e.translatePosMatrix(Z,z,n,s,!0),G=R&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),W={program:d,buffers:P,uniformValues:R?Fi(M.functionType,_,b,y,e,j,V,q,a,A,!0):Oi(M.functionType,_,b,y,e,j,V,q,a,A),atlasTexture:k,atlasInterpolation:B,isSDF:R,hasHalo:G};if(w)for(var X=0,H=P.segments.get();X<H.length;X+=1){var K=H[X];T.push({segments:new t.SegmentVector([K]),sortKey:K.sortKey,state:W})}else T.push({segments:P.segments,sortKey:0,state:W})}}}w&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var Y=0,J=T;Y<J.length;Y+=1){var Q=J[Y],$=Q.state;if($.atlasTexture.bind($.atlasInterpolation,m.CLAMP_TO_EDGE),$.isSDF){var tt=$.uniformValues;$.hasHalo&&(tt.u_is_halo=1,Hi($.buffers,Q.segments,o,e,$.program,E,h,p,tt)),tt.u_is_halo=0}Hi($.buffers,Q.segments,o,e,$.program,E,h,p,$.uniformValues)}}function Hi(t,e,i,o,r,a,n,s,l){var c=o.context,u=c.gl;r.draw(c,u.TRIANGLES,a,n,s,Tt.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,o.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Ki(t,e,i,o,r,a,n){var s,l,c,u,h,p=t.context.gl,d=i.paint.get("fill-pattern"),_=d&&d.constantOr(1),f=i.getCrossfadeParameters();n?(l=_&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=_?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,g=o;m<g.length;m+=1){var v=g[m],y=e.getTile(v);if(!_||y.patternsLoaded()){var x=y.getBucket(i);if(x){var b=x.programConfigurations.get(i.id),w=t.useProgram(l,b);_&&(t.context.activeTexture.set(p.TEXTURE0),y.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(f));var E=d.constantOr(null);if(E&&y.imageAtlas){var T=y.imageAtlas.patternPositions[E.to],I=y.imageAtlas.patternPositions[E.from];T&&I&&b.setConstantPatternPositions(T,I)}var C=t.translatePosMatrix(v.posMatrix,y,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(n){u=x.indexBuffer2,h=x.segments2;var S=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===l&&_?vi(C,t,f,y,S):gi(C,S)}else u=x.indexBuffer,h=x.segments,c=_?mi(C,t,f,y):fi(C);w.draw(t.context,s,r,t.stencilModeForClipping(v),a,Tt.disabled,c,i.id,x.layoutVertexBuffer,u,h,i.paint,t.transform.zoom,b)}}}}function Yi(e,i){var o=e.context,r=o.gl,a=i.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!a){var n=new t.Texture(o,{width:e.width,height:e.height,data:null},r.RGBA);n.bind(r.LINEAR,r.CLAMP_TO_EDGE),(a=i.viewportFrame=o.createFramebuffer(e.width,e.height)).colorAttachment.set(n.texture)}o.bindFramebuffer.set(a.framebuffer),a.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(o.clear({depth:1}),e.depthRboNeedsClear=!1),o.clear({color:t.Color.transparent}),o.setStencilMode(wt.disabled),o.setDepthMode(new bt(r.LEQUAL,bt.ReadWrite,[0,1])),o.setColorMode(e.colorModeForRenderPass())}function Ji(t,e,i){var o=e.viewportFrame;if(o){var r=t.context,a=r.gl;r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),t.useProgram("extrusionTexture").draw(r,a.TRIANGLES,bt.disabled,wt.disabled,t.colorModeForRenderPass(),Tt.disabled,_i(t,i,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}function Qi(t,e,i,o,r,a){var n=t.context,s=n.gl,l=e.fbo;if(l){var c=t.useProgram("hillshade");n.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var u=Ci(t,e,i);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?c.draw(n,s.TRIANGLES,o,r,a,Tt.disabled,u,i.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):c.draw(n,s.TRIANGLES,o,r,a,Tt.disabled,u,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function $i(e,i,o,r,a,n,s){var l=e.context,c=l.gl;if(i.dem&&i.dem.data){var u=i.dem.dim,h=i.dem.stride,p=i.dem.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(h),i.demTexture){var d=i.demTexture;d.update(p,{premultiply:!1}),d.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(l,p,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);var _=i.fbo;if(!_){var f=new t.Texture(l,{width:u,height:u,data:null},c.RGBA);f.bind(c.LINEAR,c.CLAMP_TO_EDGE),(_=i.fbo=l.createFramebuffer(u,u)).colorAttachment.set(f.texture)}l.bindFramebuffer.set(_.framebuffer),l.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,a,n,s,Tt.disabled,Si(i,r),o.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function to(e,i,o,r,a){var n=r.paint.get("raster-fade-duration");if(n>0){var s=t.browser.now(),l=(s-e.timeAdded)/n,c=i?(s-i.timeAdded)/n:-1,u=o.getSource(),h=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function eo(e,i,o){var r=e.context,a=r.gl,n=o.posMatrix,s=e.useProgram("debug"),l=bt.disabled,c=wt.disabled,u=e.colorModeForRenderPass(),h="$debug";s.draw(r,a.LINE_STRIP,l,c,u,Tt.disabled,wi(n,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=function(t,e,i,o){o=o||1;var r,a,n,s,l,c,u,h,p=[];for(r=0,a=t.length;r<a;r++)if(l=io[t[r]]){for(h=null,n=0,s=l[1].length;n<s;n+=2)-1===l[1][n]&&-1===l[1][n+1]?h=null:(c=e+l[1][n]*o,u=200-l[1][n+1]*o,h&&p.push(h.x,h.y,c,u),h={x:c,y:u});e+=l[0]*o}return p}(o.toString(),50,0,5),d=new t.StructArrayLayout2i4,_=new t.StructArrayLayout2ui4,f=0;f<p.length;f+=2)d.emplaceBack(p[f],p[f+1]),_.emplaceBack(f,f+1);for(var m=r.createVertexBuffer(d,Ae.members),g=r.createIndexBuffer(_),v=t.SegmentVector.simpleSegment(0,0,d.length/2,d.length/2),y=i.getTile(o).tileSize,x=t.EXTENT/(Math.pow(2,e.transform.zoom-o.overscaledZ)*y),b=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<b.length;w++){var E=b[w];s.draw(r,a.LINES,l,c,u,Tt.disabled,wi(t.translate([],n,[x*E[0],x*E[1],0]),t.Color.white),h,m,g,v)}s.draw(r,a.LINES,l,c,u,Tt.disabled,wi(n,t.Color.black),h,m,g,v)}var io={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},oo={symbol:function(t,e,i,o){if("translucent"===t.renderPass){var r=wt.disabled,a=t.colorModeForRenderPass();0!==i.paint.get("icon-opacity").constantOr(1)&&Xi(t,e,i,o,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),r,a),0!==i.paint.get("text-opacity").constantOr(1)&&Xi(t,e,i,o,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),r,a),e.map.showCollisionBoxes&&function(t,e,i,o){qi(t,e,i,o,!1),qi(t,e,i,o,!0)}(t,e,i,o)}},circle:function(t,e,i,o){if("translucent"===t.renderPass){var r=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),n=i.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==n.constantOr(1))for(var s=t.context,l=s.gl,c=t.depthModeForSublayer(0,bt.ReadOnly),u=wt.disabled,h=t.colorModeForRenderPass(),p=0;p<o.length;p++){var d=o[p],_=e.getTile(d),f=_.getBucket(i);if(f){var m=f.programConfigurations.get(i.id);t.useProgram("circle",m).draw(s,l.TRIANGLES,c,u,h,Tt.disabled,yi(t,d,_,i),i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,t.transform.zoom,m)}}}},heatmap:function(e,i,o,r){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,n=a.gl,s=e.depthModeForSublayer(0,bt.ReadOnly),l=wt.disabled,c=new Et([n.ONE,n.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var o=t.gl;t.activeTexture.set(o.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,i,o,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,i.width/4,i.height/4,0,a.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(o),e.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,i,o,r))}(t,e,a,r)}}(a,e,o),a.clear({color:t.Color.transparent});for(var u=0;u<r.length;u++){var h=r[u];if(!i.hasRenderableParent(h)){var p=i.getTile(h),d=p.getBucket(o);if(d){var _=d.programConfigurations.get(o.id),f=e.useProgram("heatmap",_),m=e.transform.zoom;f.draw(a,n.TRIANGLES,s,l,c,Tt.disabled,Ti(h.posMatrix,p,m,o.paint.get("heatmap-intensity")),o.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,o.paint,e.transform.zoom,_)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var o=e.context,r=o.gl,a=i.heatmapFbo;if(a){o.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),o.activeTexture.set(r.TEXTURE1);var n=i.colorRampTexture;n||(n=i.colorRampTexture=new t.Texture(o,i.colorRamp,r.RGBA)),n.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(o,r.TRIANGLES,bt.disabled,wt.disabled,e.colorModeForRenderPass(),Tt.disabled,function(e,i,o,r){var a=t.create$1();t.ortho(a,0,e.width,e.height,0,0,1);var n=e.context.gl;return{u_matrix:a,u_world:[n.drawingBufferWidth,n.drawingBufferHeight],u_image:o,u_color_ramp:r,u_opacity:i.paint.get("heatmap-opacity")}}(e,i,0,1),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,o))},line:function(e,i,o,r){if("translucent"===e.renderPass){var a=o.paint.get("line-opacity"),n=o.paint.get("line-width");if(0!==a.constantOr(1)&&0!==n.constantOr(1)){var s=e.depthModeForSublayer(0,bt.ReadOnly),l=e.colorModeForRenderPass(),c=o.paint.get("line-dasharray"),u=o.paint.get("line-pattern"),h=u.constantOr(1),p=o.paint.get("line-gradient"),d=o.getCrossfadeParameters(),_=c?"lineSDF":h?"linePattern":p?"lineGradient":"line",f=e.context,m=f.gl,g=!0;if(p){f.activeTexture.set(m.TEXTURE0);var v=o.gradientTexture;if(!o.gradient)return;v||(v=o.gradientTexture=new t.Texture(f,o.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var y=0,x=r;y<x.length;y+=1){var b=x[y],w=i.getTile(b);if(!h||w.patternsLoaded()){var E=w.getBucket(o);if(E){var T=E.programConfigurations.get(o.id),I=e.context.program.get(),C=e.useProgram(_,T),S=g||C.program!==I,z=u.constantOr(null);if(z&&w.imageAtlas){var L=w.imageAtlas.patternPositions[z.to],P=w.imageAtlas.patternPositions[z.from];L&&P&&T.setConstantPatternPositions(L,P)}var D=c?Ri(e,w,o,c,d):h?Di(e,w,o,d):p?Pi(e,w,o):Li(e,w,o);c&&(S||e.lineAtlas.dirty)?(f.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(f)):h&&(f.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),T.updatePatternPaintBuffers(d)),C.draw(f,m.TRIANGLES,s,e.stencilModeForClipping(b),l,Tt.disabled,D,o.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,o.paint,e.transform.zoom,T),g=!1}}}}}},fill:function(e,i,o,r){var a=o.paint.get("fill-color"),n=o.paint.get("fill-opacity");if(0!==n.constantOr(1)){var s=e.colorModeForRenderPass(),l=o.paint.get("fill-pattern").constantOr(1)||1!==a.constantOr(t.Color.transparent).a||1!==n.constantOr(0)?"translucent":"opaque";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?bt.ReadWrite:bt.ReadOnly);Ki(e,i,o,r,c,s,!1)}if("translucent"===e.renderPass&&o.paint.get("fill-antialias")){var u=e.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,bt.ReadOnly);Ki(e,i,o,r,u,s,!0)}}},"fill-extrusion":function(t,e,i,o){if(0!==i.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){Yi(t,i);var r=new bt(t.context.gl.LEQUAL,bt.ReadWrite,[0,1]),a=wt.disabled,n=t.colorModeForRenderPass();!function(t,e,i,o,r,a,n){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=i.getCrossfadeParameters(),p=0,d=o;p<d.length;p+=1){var _=d[p],f=e.getTile(_),m=f.getBucket(i);if(m){var g=m.programConfigurations.get(i.id),v=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",g);u&&(t.context.activeTexture.set(l.TEXTURE0),f.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(h));var y=c.constantOr(null);if(y&&f.imageAtlas){var x=f.imageAtlas.patternPositions[y.to],b=f.imageAtlas.patternPositions[y.from];x&&b&&g.setConstantPatternPositions(x,b)}var w=t.translatePosMatrix(_.posMatrix,f,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),E=i.paint.get("fill-extrusion-vertical-gradient"),T=u?di(w,t,E,_,h,f):pi(w,t,E);v.draw(s,s.gl.TRIANGLES,r,a,n,Tt.backCCW,T,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,t.transform.zoom,g)}}}(t,e,i,o,r,a,n)}else"translucent"===t.renderPass&&Ji(t,i,i.paint.get("fill-extrusion-opacity"))},hillshade:function(t,e,i,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,a=e.getSource().maxzoom,n=t.depthModeForSublayer(0,bt.ReadOnly),s=wt.disabled,l=t.colorModeForRenderPass(),c=0,u=o;c<u.length;c+=1){var h=u[c],p=e.getTile(h);p.needsHillshadePrepare&&"offscreen"===t.renderPass?$i(t,p,i,a,n,s,l):"translucent"===t.renderPass&&Qi(t,p,i,n,s,l)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,o){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity"))for(var r=t.context,a=r.gl,n=e.getSource(),s=t.useProgram("raster"),l=wt.disabled,c=t.colorModeForRenderPass(),u=o.length&&o[0].overscaledZ,h=!t.options.moving,p=0,d=o;p<d.length;p+=1){var _=d[p],f=t.depthModeForSublayer(_.overscaledZ-u,1===i.paint.get("raster-opacity")?bt.ReadWrite:bt.ReadOnly,a.LESS),m=e.getTile(_),g=t.transform.calculatePosMatrix(_.toUnwrapped(),h);m.registerFadeDuration(i.paint.get("raster-fade-duration"));var v=e.findLoadedParent(_,0),y=to(m,v,e,i,t.transform),x=void 0,b=void 0,w="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;r.activeTexture.set(a.TEXTURE0),m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(a.TEXTURE1),v?(v.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,v.tileID.overscaledZ-m.tileID.overscaledZ),b=[m.tileID.canonical.x*x%1,m.tileID.canonical.y*x%1]):m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var E=ki(g,b||[0,0],x||1,y,i);n instanceof L?s.draw(r,a.TRIANGLES,f,l,c,Tt.disabled,E,i.id,n.boundsBuffer,t.quadTriangleIndexBuffer,n.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(r,a.TRIANGLES,f,l,c,Tt.disabled,E,i.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,i.paint,t.transform.zoom):s.draw(r,a.TRIANGLES,f,l,c,Tt.disabled,E,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var o=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var a=t.context,n=a.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");if(!t.isPatternMissing(c)){var u=c||1!==o.a||1!==r?"translucent":"opaque";if(t.renderPass===u){var h=wt.disabled,p=t.depthModeForSublayer(0,"opaque"===u?bt.ReadWrite:bt.ReadOnly),d=t.colorModeForRenderPass(),_=t.useProgram(c?"backgroundPattern":"background"),f=s.coveringTiles({tileSize:l});c&&(a.activeTexture.set(n.TEXTURE0),t.imageManager.bind(t.context));for(var m=i.getCrossfadeParameters(),g=0,v=f;g<v.length;g+=1){var y=v[g],x=t.transform.calculatePosMatrix(y.toUnwrapped()),b=c?Ni(x,r,t,c,{tileID:y,tileSize:l},m):Ui(x,r,o);_.draw(a,n.TRIANGLES,p,h,d,Tt.disabled,b,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var o=0;o<i.length;o++)eo(t,e,i[o])},custom:function(t,e,i){var o=t.context,r=i.implementation;if("offscreen"===t.renderPass){var a=r.prerender;a&&(t.setCustomLayerDefaults(),a.call(r,o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState()),"3d"===r.renderingMode&&(t.setCustomLayerDefaults(),Yi(t,i),r.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass)if("3d"===r.renderingMode)Ji(t,i,1);else{t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(wt.disabled);var n=t.depthModeForSublayer(0,bt.ReadOnly);o.setDepthMode(n),r.render(o.gl,t.transform.customLayerMatrix()),o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}},ro=function(e,i){this.context=new It(e),this.transform=i,this._tileTextures={},this.setup(),this.numSublayers=Ct.maxUnderzooming+Ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Le};function ao(t,e){if(t.y>e.y){var i=t;t=e,e=i}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function no(t,e,i,o,r){var a=Math.max(i,Math.floor(e.y0)),n=Math.min(o,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,c=e.dx/e.dy,u=t.dx>0,h=e.dx<0,p=a;p<n;p++){var d=l*Math.max(0,Math.min(t.dy,p+u-t.y0))+t.x0,_=c*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;r(Math.floor(_),Math.ceil(d),p)}}function so(t,e,i,o,r,a){var n,s=ao(t,e),l=ao(e,i),c=ao(i,t);s.dy>l.dy&&(n=s,s=l,l=n),s.dy>c.dy&&(n=s,s=c,c=n),l.dy>c.dy&&(n=l,l=c,c=n),s.dy&&no(c,s,o,r,a),l.dy&&no(c,l,o,r,a)}ro.prototype.resize=function(e,i){var o=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1){var n=a[r];this.style._layers[n].resize()}this.depthRbo&&(o.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},ro.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Ae.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(t.EXTENT,0),o.emplaceBack(0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(o,Ae.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ae.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout1ui2;n.emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(n);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new wt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},ro.prototype.clearStencil=function(){var e=this.context,i=e.gl,o=t.create$1();t.ortho(o,0,this.width,this.height,0,0,1),t.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,bt.disabled,this.stencilClearMode,Et.disabled,Tt.disabled,Ei(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ro.prototype._renderTileClippingMasks=function(t){var e=this.context,i=e.gl;e.setColorMode(Et.disabled),e.setDepthMode(bt.disabled);var o=this.useProgram("clippingMask"),r=1;this._tileClippingMaskIDs={};for(var a=0,n=t;a<n.length;a+=1){var s=n[a],l=this._tileClippingMaskIDs[s.key]=r++;o.draw(e,i.TRIANGLES,bt.disabled,new wt({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE),Et.disabled,Tt.disabled,Ei(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},ro.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new wt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},ro.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Et([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Et.unblended:Et.alphaBlended},ro.prototype.depthModeForSublayer=function(t,e,i){var o=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new bt(i||this.context.gl.LEQUAL,e,[o,o])},ro.prototype.render=function(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var o=this.style._order,r=this.style.sourceCaches;for(var a in r){var n=r[a];n.used&&n.prepare(this.context)}var s,l={},c={},u={};for(var h in r){var p=r[h];l[h]=p.getVisibleCoordinates(),c[h]=l[h].slice().reverse(),u[h]=p.getVisibleCoordinates(!0).reverse()}for(var d in r){var _=r[d],f=_.getSource();if("raster"===f.type||"raster-dem"===f.type){for(var m=[],g=0,v=l[d];g<v.length;g+=1){var y=v[g];m.push(_.getTile(y))}ji(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var x=0,b=o;x<b.length;x+=1){var w=b[x],E=this.style._layers[w];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var T=c[E.source];("custom"===E.type||T.length)&&this.renderLayer(this,r[E.source],E,T)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){var I=this.style._layers[o[this.currentLayer]],C=r[I.source],S=l[I.source];I.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(S)),this.renderLayer(this,C,I,S),s=I.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<o.length;this.currentLayer++){var z=this.style._layers[o[this.currentLayer]],L=r[z.source],P=("symbol"===z.type?u:c)[z.source];z.source!==s&&L&&(this.clearStencil(),L.getSource().isTileClipped&&this._renderTileClippingMasks(l[z.source])),this.renderLayer(this,L,z,P),s=z.source}if(this.options.showTileBoundaries)for(var D in r){oo.debug(this,r[D],l[D]);break}this.setCustomLayerDefaults()},ro.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},ro.prototype.renderLayer=function(t,e,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||o.length)&&(this.id=i.id,oo[i.type](t,e,i,o))},ro.prototype.translatePosMatrix=function(e,i,o,r,a){if(!o[0]&&!o[1])return e;var n=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(n){var s=Math.sin(n),l=Math.cos(n);o=[o[0]*l-o[1]*s,o[0]*s+o[1]*l]}var c=[a?o[0]:se(i,o[0],this.transform.zoom),a?o[1]:se(i,o[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},ro.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},ro.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},ro.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),i=this.imageManager.getPattern(t.to);return!e||!i},ro.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var i=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new ui(this.context,li[t],e,Zi[t],this._showOverdrawInspector)),this.cache[i]},ro.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ro.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var lo=function(e,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},co={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};lo.prototype.clone=function(){var t=new lo(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},co.minZoom.get=function(){return this._minZoom},co.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},co.maxZoom.get=function(){return this._maxZoom},co.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},co.renderWorldCopies.get=function(){return this._renderWorldCopies},co.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},co.worldSize.get=function(){return this.tileSize*this.scale},co.centerPoint.get=function(){return this.size._div(2)},co.size.get=function(){return new t.Point(this.width,this.height)},co.bearing.get=function(){return-this.angle/Math.PI*180},co.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},co.pitch.get=function(){return this._pitch/Math.PI*180},co.pitch.set=function(e){var i=t.clamp(e,0,60)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},co.fov.get=function(){return this._fov/Math.PI*180},co.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},co.zoom.get=function(){return this._zoom},co.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},co.center.get=function(){return this._center},co.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},lo.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},lo.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),n=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(o.x,r.x,a.x,n.x)),l=Math.floor(Math.max(o.x,r.x,a.x,n.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new t.UnwrappedTileID(c,e));return i},lo.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),o=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i),n=new t.Point(a*r.x-.5,a*r.y-.5);return function(e,i,o,r){void 0===r&&(r=!0);var a=1<<e,n={};function s(i,s,l){var c,u,h,p;if(l>=0&&l<=a)for(c=i;c<s;c++)u=Math.floor(c/a),h=(c%a+a)%a,0!==u&&!0!==r||(p=new t.OverscaledTileID(o,u,e,h,l),n[p.key]=p)}var l=i.map(function(e){return new t.Point(e.x,e.y)._mult(a)});return so(l[0],l[1],l[2],0,a,s),so(l[2],l[3],l[0],0,a,s),Object.keys(n).map(function(t){return n[t]})}(i,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?o:i,this._renderWorldCopies).sort(function(t,e){return n.dist(t.canonical)-n.dist(e.canonical)})},lo.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},co.unmodified.get=function(){return this._unmodified},lo.prototype.zoomScale=function(t){return Math.pow(2,t)},lo.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},lo.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},lo.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},co.point.get=function(){return this.project(this.center)},lo.prototype.setLocationAtPoint=function(e,i){var o=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),n=new t.MercatorCoordinate(a.x-(o.x-r.x),a.y-(o.y-r.y));this.center=this.coordinateLocation(n),this._renderWorldCopies&&(this.center=this.center.wrap())},lo.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},lo.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},lo.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},lo.prototype.coordinateLocation=function(t){return t.toLngLat()},lo.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);var r=i[3],a=o[3],n=i[0]/r,s=o[0]/a,l=i[1]/r,c=o[1]/a,u=i[2]/r,h=o[2]/a,p=u===h?0:(0-u)/(h-u);return new t.MercatorCoordinate(t.number(n,s,p)/this.worldSize,t.number(l,c,p)/this.worldSize)},lo.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},lo.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},lo.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},lo.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},lo.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var o=e.key,r=i?this._alignedPosMatrixCache:this._posMatrixCache;if(r[o])return r[o];var a=e.canonical,n=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*n,a.y*n,0]),t.scale(l,l,[n/t.EXTENT,n/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),r[o]=new Float32Array(l),r[o]},lo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},lo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,o,r,a=-90,n=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var h=this.latRange;a=t.mercatorYfromLat(h[1])*this.worldSize,e=(n=t.mercatorYfromLat(h[0])*this.worldSize)-a<c.y?c.y/(n-a):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,i=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var d=this.point,_=Math.max(i||0,e||0);if(_)return this.center=this.unproject(new t.Point(i?(l+s)/2:d.x,e?(n+a)/2:d.y)),this.zoom+=this.scaleZoom(_),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=d.y,m=c.y/2;f-m<a&&(r=a+m),f+m>n&&(r=n-m)}if(this.lngRange){var g=d.x,v=c.x/2;g-v<s&&(o=s+v),g+v>l&&(o=l-v)}void 0===o&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==o?o:d.x,void 0!==r?r:d.y))),this._unmodified=u,this._constraining=!1}},lo.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,i=Math.PI/2+this._pitch,o=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-i-e),r=this.point,a=r.x,n=r.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*o+this.cameraToCenterDistance),l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,1,s),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-a,-n,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l;var c=this.width%2/2,u=this.height%2/2,h=Math.cos(this.angle),p=Math.sin(this.angle),d=a-Math.round(a)+h*c+p*u,_=n-Math.round(n)+h*u+p*c,f=new Float64Array(l);if(t.translate(f,f,[d>.5?d-1:d,_>.5?_-1:_,0]),this.alignedProjMatrix=f,l=t.create$1(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),l,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},lo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},lo.prototype.getCameraPoint=function(){var e=this._pitch,i=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,i))},lo.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var o=i.x,r=i.y,a=i.x,n=i.y,s=0,l=e;s<l.length;s+=1){var c=l[s];o=Math.min(o,c.x),r=Math.min(r,c.y),a=Math.max(a,c.x),n=Math.max(n,c.y)}return[new t.Point(o,r),new t.Point(a,r),new t.Point(a,n),new t.Point(o,n),new t.Point(o,r)]},Object.defineProperties(lo.prototype,co);var uo=function(){var e,o,r,a;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),o=!1,r=0,a=function(){r=0,o&&(e(),r=setTimeout(a,300),o=!1)},function(){return o=!0,r||a(),r})};uo.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},uo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},uo.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,o=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,o),a=Math.round(e.lng*r)/r,n=Math.round(e.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),c="";return c+=t?"#/"+a+"/"+n+"/"+i:"#"+i+"/"+n+"/"+a,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+="/"+Math.round(l)),c},uo.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},uo.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var ho=function(e){function o(o,r,a,n){void 0===n&&(n={});var s=i.mousePos(r.getCanvasContainer(),a),l=r.unproject(s);e.call(this,o,t.extend({point:s,lngLat:l,originalEvent:a},n)),this._defaultPrevented=!1,this.target=r}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),po=function(e){function o(o,r,a){var n=i.touchPos(r.getCanvasContainer(),a),s=n.map(function(t){return r.unproject(t)}),l=n.reduce(function(t,e,i,o){return t.add(e.div(o.length))},new t.Point(0,0)),c=r.unproject(l);e.call(this,o,{points:n,point:l,lngLats:s,lngLat:c,originalEvent:a}),this._defaultPrevented=!1}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var r={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,r),o}(t.Event),_o=function(t){function e(e,i,o){t.call(this,e,{originalEvent:o}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),fo=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};fo.prototype.isEnabled=function(){return!!this._enabled},fo.prototype.isActive=function(){return!!this._active},fo.prototype.isZooming=function(){return!!this._zooming},fo.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},fo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},fo.prototype.onWheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,o=t.browser.now(),r=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this.isActive()||this._start(e)),e.preventDefault()}},fo.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},fo.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var o=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},fo.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var i=this._map.transform;if(0!==this._delta){var o="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,r=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&0!==r&&(r=1/r);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var n="number"==typeof this._targetZoom?this._targetZoom:i.zoom,s=this._startZoom,l=this._easing,c=!1;if("wheel"===this._type&&s&&l){var u=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=l(u);i.zoom=t.number(s,n,h),u<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):c=!0}else i.zoom=n,c=!0;i.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),c&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},fo.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var o=this._prevEase,r=(t.browser.now()-o.start)/o.duration,a=o.easing(r+.01)-o.easing(r),n=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-n*n);i=t.bezier(n,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i};var mo=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};mo.prototype.isEnabled=function(){return!!this._enabled},mo.prototype.isActive=function(){return!!this._active},mo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},mo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},mo.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=this._lastPos=i.mousePos(this._el,e),this._active=!0)},mo.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var o=this._startPos;this._lastPos=e,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(o.x,e.x),a=Math.max(o.x,e.x),n=Math.min(o.y,e.y),s=Math.max(o.y,e.y);i.setTransform(this._box,"translate("+r+"px,"+n+"px)"),this._box.style.width=a-r+"px",this._box.style.height=s-n+"px"}},mo.prototype._onMouseUp=function(e){if(0===e.button){var o=this._startPos,r=i.mousePos(this._el,e);this._finish(),i.suppressClick(),o.x===r.x&&o.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(o,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},mo.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},mo.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},mo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var go=t.bezier(0,0,.25,1),vo=function(e,i){this._map=e,this._el=i.element||e.getCanvasContainer(),this._state="disabled",this._button=i.button||"right",this._bearingSnap=i.bearingSnap||0,this._pitchWithRotate=!1!==i.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};vo.prototype.isEnabled=function(){return"disabled"!==this._state},vo.prototype.isActive=function(){return"active"===this._state},vo.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},vo.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},vo.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=i.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==i.mouseButton(e))return;this._eventButton=0}i.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=i.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},vo.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},vo.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var i=this._map.transform,o=this._startPos,r=this._lastPos,a=.8*(o.x-r.x),n=-.5*(o.y-r.y),s=i.bearing-a,l=i.pitch-n,c=this._inertia,u=c[c.length-1];this._drainInertiaBuffer(),c.push([t.browser.now(),this._map._normalizeBearing(s,u[1])]),i.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),i.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},vo.prototype._onMouseUp=function(t){if(i.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},vo.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},vo.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),i.enableDrag()},vo.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},vo.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var i=this._map,o=i.getBearing(),r=this._inertia,a=function(){Math.abs(o)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)a();else{var n=r[0],s=r[r.length-1],l=r[r.length-2],c=i._normalizeBearing(o,l[1]),u=s[1]-n[1],h=u<0?-1:1,p=(s[0]-n[0])/1e3;if(0!==u&&0!==p){var d=Math.abs(u*(.25/p));d>180&&(d=180);var _=d/180;c+=h*d*(_/2),Math.abs(i._normalizeBearing(c,0))<this._bearingSnap&&(c=i._normalizeBearing(0,c)),i.rotateTo(c,{duration:1e3*_,easing:go,noMoveStart:!0},{originalEvent:t})}else a()}},vo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},vo.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>0&&i-e[0][0]>160;)e.shift()};var yo=t.bezier(0,0,.3,1),xo=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=i.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};xo.prototype.isEnabled=function(){return"disabled"!==this._state},xo.prototype.isActive=function(){return"active"===this._state},xo.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},xo.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},xo.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==i.mouseButton(e)||(i.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},xo.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(i.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},xo.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=i.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},xo.prototype._onMove=function(e){e.preventDefault();var o=i.mousePos(this._el,e);this._lastPos.equals(o)||"pending"===this._state&&o.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=o,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},xo.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},xo.prototype._onMouseUp=function(t){if(0===i.mouseButton(t))switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},xo.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},xo.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},xo.prototype._unbind=function(){i.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onTouchEnd),i.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.removeEventListener(t.window.document,"mouseup",this._onMouseUp),i.removeEventListener(t.window,"blur",this._onBlur)},xo.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},xo.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var i=e[e.length-1],o=e[0],r=i[1].sub(o[1]),a=(i[0]-o[0])/1e3;if(0===a||i[1].equals(o[1]))this._fireEvent("moveend",t);else{var n=r.mult(.3/a),s=n.mag();s>1400&&(s=1400,n._unit()._mult(s));var l=s/750,c=n.mult(-l/2);this._map.panBy(c,{duration:1e3*l,easing:yo,noMoveStart:!0},{originalEvent:t})}}},xo.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},xo.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>0&&i-e[0][0]>160;)e.shift()};var bo=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function wo(t){return t*(2-t)}bo.prototype.isEnabled=function(){return!!this._enabled},bo.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},bo.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},bo.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,o=0,r=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?o=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?o=-1:(a=1,t.preventDefault());break;default:return}var n=this._map,s=n.getZoom(),l={duration:300,delayEndEvents:500,easing:wo,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:n.getBearing()+15*i,pitch:n.getPitch()+10*o,offset:[100*-r,100*-a],center:n.getCenter()};n.easeTo(l,{originalEvent:t})}};var Eo=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Eo.prototype.isEnabled=function(){return!!this._enabled},Eo.prototype.isActive=function(){return!!this._active},Eo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Eo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Eo.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Eo.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Eo.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Eo.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var To=t.bezier(0,0,.15,1),Io=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Io.prototype.isEnabled=function(){return!!this._enabled},Io.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Io.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Io.prototype.disableRotation=function(){this._rotationDisabled=!0},Io.prototype.enableRotation=function(){this._rotationDisabled=!1},Io.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var o=i.mousePos(this._el,e.touches[0]),r=i.mousePos(this._el,e.touches[1]),a=o.add(r).div(2);this._startVec=o.sub(r),this._startAround=this._map.transform.pointLocation(a),this._gestureIntent=void 0,this._inertia=[],i.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(t.window.document,"touchend",this._onEnd)}},Io.prototype._getTouchEventData=function(t){var e=i.mousePos(this._el,t.touches[0]),o=i.mousePos(this._el,t.touches[1]),r=e.sub(o);return{vec:r,center:e.add(o).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},Io.prototype._onMove=function(e){if(2===e.touches.length){var i=this._getTouchEventData(e),o=i.vec,r=i.scale,a=i.bearing;if(!this._gestureIntent){var n=this._rotationDisabled&&1!==r||Math.abs(1-r)>.15;Math.abs(a)>10?this._gestureIntent="rotate":n&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=o)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Io.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var i=this._map.transform;this._startScale||(this._startScale=i.scale,this._startBearing=i.bearing);var o=this._getTouchEventData(this._lastTouchEvent),r=o.center,a=o.bearing,n=o.scale,s=i.pointLocation(r),l=i.locationPoint(s);"rotate"===e&&(i.bearing=this._startBearing+a),i.zoom=i.scaleZoom(this._startScale*n),i.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),n,r])}},Io.prototype._onEnd=function(e){i.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onEnd);var o=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,o){this._map.fire(new t.Event(o+"end",{originalEvent:e})),this._drainInertiaBuffer();var a=this._inertia,n=this._map;if(a.length<2)n.snapToNorth({},{originalEvent:e});else{var s=a[a.length-1],l=a[0],c=n.transform.scaleZoom(r*s[1]),u=n.transform.scaleZoom(r*l[1]),h=c-u,p=(s[0]-l[0])/1e3,d=s[2];if(0!==p&&c!==u){var _=.15*h/p;Math.abs(_)>2.5&&(_=_>0?2.5:-2.5);var f=1e3*Math.abs(_/(12*.15)),m=c+_*f/2e3;m<0&&(m=0),n.easeTo({zoom:m,duration:f,easing:To,around:this._aroundCenter?n.getCenter():n.unproject(d),noMoveStart:!0},{originalEvent:e})}else n.snapToNorth({},{originalEvent:e})}}},Io.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,i=t.browser.now();e.length>2&&i-e[0][0]>160;)e.shift()};var Co={scrollZoom:fo,boxZoom:mo,dragRotate:vo,dragPan:xo,keyboard:bo,doubleClickZoom:Eo,touchZoomRotate:Io},So=function(e){function i(i,o){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=o.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return this.transform.center},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,o){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),o)},i.prototype.panTo=function(e,i,o){return this.easeTo(t.extend({center:e},i),o)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,o){return this.easeTo(t.extend({zoom:e},i),o)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.rotateTo=function(e,i,o){return this.easeTo(t.extend({bearing:e},i),o)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(e,i,o,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var a=r.padding;r.padding={top:a,bottom:a,right:a,left:a}}if(t.isEqual(Object.keys(r.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var n=this.transform,s=n.project(t.LngLat.convert(e)),l=n.project(t.LngLat.convert(i)),c=s.rotate(-o*Math.PI/180),u=l.rotate(-o*Math.PI/180),h=new t.Point(Math.max(c.x,u.x),Math.max(c.y,u.y)),p=new t.Point(Math.min(c.x,u.x),Math.min(c.y,u.y)),d=h.sub(p),_=(n.width-r.padding.left-r.padding.right)/d.x,f=(n.height-r.padding.top-r.padding.bottom)/d.y;if(!(f<0||_<0)){var m=Math.min(n.scaleZoom(n.scale*Math.min(_,f)),r.maxZoom),g=t.Point.convert(r.offset),v=(r.padding.left-r.padding.right)/2,y=(r.padding.top-r.padding.bottom)/2,x=new t.Point(g.x+v,g.y+y).mult(n.scale/n.zoomScale(m));return{center:n.unproject(s.add(l).div(2).sub(x)),zoom:m,bearing:o}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,o,r,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),o,r),r,a)},i.prototype._fitInternal=function(e,i,o){return e?(i=t.extend(e,i)).linear?this.easeTo(i,o):this.flyTo(i,o):this},i.prototype.jumpTo=function(e,i){this.stop();var o=this.transform,r=!1,a=!1,n=!1;return"zoom"in e&&o.zoom!==+e.zoom&&(r=!0,o.zoom=+e.zoom),void 0!==e.center&&(o.center=t.LngLat.convert(e.center)),"bearing"in e&&o.bearing!==+e.bearing&&(a=!0,o.bearing=+e.bearing),"pitch"in e&&o.pitch!==+e.pitch&&(n=!0,o.pitch=+e.pitch),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),r&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),n&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var o=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:a,c="bearing"in e?this._normalizeBearing(e.bearing,n):n,u="pitch"in e?+e.pitch:s,h=r.centerPoint.add(t.Point.convert(e.offset)),p=r.pointLocation(h),d=t.LngLat.convert(e.center||p);this._normalizeCenter(d);var _,f,m=r.project(p),g=r.project(d).sub(m),v=r.zoomScale(l-a);return e.around&&(_=t.LngLat.convert(e.around),f=r.locationPoint(_)),this._zooming=l!==a,this._rotating=n!==c,this._pitching=u!==s,this._prepareEase(i,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(o._zooming&&(r.zoom=t.number(a,l,e)),o._rotating&&(r.bearing=t.number(n,c,e)),o._pitching&&(r.pitch=t.number(s,u,e)),_)r.setLocationAtPoint(_,f);else{var p=r.zoomScale(r.zoom-a),d=l>a?Math.min(2,v):Math.max(.5,v),y=Math.pow(d,1-e),x=r.unproject(m.add(g.mult(e*y)).mult(p));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,h)}o._fireMoveEvents(i)},function(){e.delayEndEvents?o._easeEndTimeoutID=setTimeout(function(){return o._afterEase(i)},e.delayEndEvents):o._afterEase(i)},e),this},i.prototype._prepareEase=function(e,i){this._moving=!0,i||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e){var i=this._zooming,o=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,i&&this.fire(new t.Event("zoomend",e)),o&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},i.prototype.flyTo=function(e,i){var o=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var r=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,n):n,u="pitch"in e?+e.pitch:s,h=r.zoomScale(l-a),p=r.centerPoint.add(t.Point.convert(e.offset)),d=r.pointLocation(p),_=t.LngLat.convert(e.center||d);this._normalizeCenter(_);var f=r.project(d),m=r.project(_).sub(f),g=e.curve,v=Math.max(r.width,r.height),y=v/h,x=m.mag();if("minZoom"in e){var b=t.clamp(Math.min(e.minZoom,a,l),r.minZoom,r.maxZoom),w=v/r.zoomScale(b-a);g=Math.sqrt(w/x*2)}var E=g*g;function T(t){var e=(y*y-v*v+(t?-1:1)*E*E*x*x)/(2*(t?y:v)*E*x);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function C(t){return(Math.exp(t)+Math.exp(-t))/2}var S=T(0),z=function(t){return C(S)/C(S+g*t)},L=function(t){return v*((C(S)*(I(e=S+g*t)/C(e))-I(S))/E)/x;var e},P=(T(1)-S)/g;if(Math.abs(x)<1e-6||!isFinite(P)){if(Math.abs(v-y)<1e-6)return this.easeTo(e,i);var D=y<v?-1:1;P=Math.abs(Math.log(y/v))/g,L=function(){return 0},z=function(t){return Math.exp(D*g*t)}}if("duration"in e)e.duration=+e.duration;else{var R="screenSpeed"in e?+e.screenSpeed/g:+e.speed;e.duration=1e3*P/R}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=n!==c,this._pitching=u!==s,this._prepareEase(i,!1),this._ease(function(e){var h=e*P,d=1/z(h);r.zoom=1===e?l:a+r.scaleZoom(d),o._rotating&&(r.bearing=t.number(n,c,e)),o._pitching&&(r.pitch=t.number(s,u,e));var g=1===e?_:r.unproject(f.add(m.mult(L(h))).mult(d));r.setLocationAtPoint(r.renderWorldCopies?g.wrap():g,p),o._fireMoveEvents(i)},function(){return o._afterEase(i)},e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},i.prototype._ease=function(e,i,o){!1===o.animate||0===o.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=o,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var o=Math.abs(e-i);return Math.abs(e-360-i)<o&&(e-=360),Math.abs(e+360-i)<o&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),zo=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};zo.prototype.getDefaultPosition=function(){return"bottom-right"},zo.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},zo.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},zo.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var o=i.reduce(function(t,e,o){return e.value&&(t+=e.key+"="+e.value+(o<i.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):"")}},zo.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},zo.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var o in i){var r=i[o];if(r.used){var a=r.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,i){for(var o=i+1;o<t.length;o++)if(t[o].indexOf(e)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},zo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Lo=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Lo.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Lo.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Lo.prototype.getDefaultPosition=function(){return"bottom-left"},Lo.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Lo.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Lo.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Po=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Po.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Po.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,o=e?this._queue.concat(e):this._queue;i<o.length;i+=1){var r=o[i];if(r.id===t)return void(r.cancelled=!0)}},Po.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,i=t;e<i.length;e+=1){var o=i[e];if(!o.cancelled&&(o.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Po.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Do=t.window.HTMLImageElement,Ro=t.window.HTMLElement,Mo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Ao=function(o){function r(e){var r=this;if(null!=(e=t.extend({},Mo,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var a=new lo(e.minZoom,e.maxZoom,e.renderWorldCopies);o.call(this,a,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Po,this._controls=[],this._mapId=t.uniqueId();var n=e.transformRequest;if(this._transformRequest=n?function(t,e){return n(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Ro))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var o=t.getCanvasContainer(),r=null,a=!1,n=null;for(var s in Co)t[s]=new Co[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);i.addEventListener(o,"mouseout",function(e){t.fire(new ho("mouseout",t,e))}),i.addEventListener(o,"mousedown",function(r){a=!0,n=i.mousePos(o,r);var s=new ho("mousedown",t,r);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))}),i.addEventListener(o,"mouseup",function(e){var i=t.dragRotate.isActive();r&&!i&&t.fire(new ho("contextmenu",t,r)),r=null,a=!1,t.fire(new ho("mouseup",t,e))}),i.addEventListener(o,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==o;)i=i.parentNode;i===o&&t.fire(new ho("mousemove",t,e))}}),i.addEventListener(o,"mouseover",function(e){for(var i=e.target;i&&i!==o;)i=i.parentNode;i===o&&t.fire(new ho("mouseover",t,e))}),i.addEventListener(o,"touchstart",function(i){var o=new po("touchstart",t,i);t.fire(o),o.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(i),t.touchZoomRotate.onStart(i),t.doubleClickZoom.onTouchStart(o))},{passive:!1}),i.addEventListener(o,"touchmove",function(e){t.fire(new po("touchmove",t,e))},{passive:!1}),i.addEventListener(o,"touchend",function(e){t.fire(new po("touchend",t,e))}),i.addEventListener(o,"touchcancel",function(e){t.fire(new po("touchcancel",t,e))}),i.addEventListener(o,"click",function(r){var a=i.mousePos(o,r);(a.equals(n)||a.dist(n)<e.clickTolerance)&&t.fire(new ho("click",t,r))}),i.addEventListener(o,"dblclick",function(e){var i=new ho("dblclick",t,e);t.fire(i),i.defaultPrevented||t.doubleClickZoom.onDblClick(i)}),i.addEventListener(o,"contextmenu",function(e){var i=t.dragRotate.isActive();a||i?a&&(r=e):t.fire(new ho("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),i.addEventListener(o,"wheel",function(i){e.interactive&&t.stop();var o=new _o("wheel",t,i);t.fire(o),o.defaultPrevented||t.scrollZoom.onWheel(i)},{passive:!1})}(this,e),this._hash=e.hash&&(new uo).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new zo({customAttribution:e.customAttribution})),this.addControl(new Lo,e.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var o=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(o,r.firstChild):r.appendChild(o),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},r.prototype.resize=function(e){var i=this._containerDimensions(),o=i[0],r=i[1];return this._resizeCanvas(o,r),this.transform.resize(o,r),this.painter.resize(o,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(t,e,i){var r=this;if(void 0===i)return o.prototype.on.call(this,t,e);var a=function(){var o;if("mouseenter"===t||"mouseover"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){var n=r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[];n.length?a||(a=!0,i.call(r,new ho(t,r,o.originalEvent,{features:n}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t||"mouseout"===t){var n=!1;return{layer:e,listener:i,delegates:{mousemove:function(o){(r.getLayer(e)?r.queryRenderedFeatures(o.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(r,new ho(t,r,o.originalEvent)))},mouseout:function(e){n&&(n=!1,i.call(r,new ho(t,r,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(o={},o[t]=function(t){var o=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];o.length&&(t.features=o,i.call(r,t),delete t.features)},o)}}();for(var n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)this.on(n,a.delegates[n]);return this},r.prototype.off=function(t,e,i){if(void 0===i)return o.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],a=0;a<r.length;a++){var n=r[a];if(n.layer===e&&n.listener===i){for(var s in n.delegates)this.off(s,n.delegates[s]);return r.splice(a,1),this}}return this},r.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var o;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])o=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),a=t.Point.convert(e[1]);o=[r,new t.Point(a.x,r.y),a,new t.Point(r.x,a.y),r]}return this.style.queryRenderedFeatures(o,i,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(t,e){return(!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t?(this._diffStyle(t,e),this):this._updateStyle(t,e)},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Me(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._diffStyle=function(e,i){var o=this;if("string"==typeof e){var r=t.normalizeStyleURL(e),a=this._transformRequest(r,t.ResourceType.Style);t.getJSON(a,function(e,r){e?o.fire(new t.ErrorEvent(e)):r&&o._updateDiff(r,i)})}else"object"==typeof e&&this._updateDiff(e,i)},r.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(o){t.warnOnce("Unable to perform style diff: "+(o.message||o.error||o)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var o in i){var r=i[o];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,i){return this.style.addSourceType(t,e,i)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,i,o){void 0===o&&(o={});var r=o.pixelRatio;void 0===r&&(r=1);var a=o.sdf;if(void 0===a&&(a=!1),i instanceof Do){var n=t.browser.getImageData(i),s=n.width,l=n.height,c=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},c),pixelRatio:r,sdf:a})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i.width,h=i.height,p=i.data;this.style.addImage(e,{data:new t.RGBAImage({width:u,height:h},new Uint8Array(p)),pixelRatio:r,sdf:a})}},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,i){t.getImage(this._transformRequest(e,t.ResourceType.Image),i)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},r.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setPaintProperty(t,e,i,o),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,i,o){return void 0===o&&(o={}),this.style.setLayoutProperty(t,e,i,o),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var o=this._containerDimensions();this._resizeCanvas(o[0],o[1]);var r=this._controlContainer=i.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){a[t]=i.create("div","mapboxgl-ctrl-"+t,r)})},r.prototype._resizeCanvas=function(e,i){var o=t.window.devicePixelRatio||1;this._canvas.width=o*e,this._canvas.height=o*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},r.prototype._setupPainter=function(){var i=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),o=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);o?(this.painter=new ro(o,this.transform),t.webpSupported.testSupport(o)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var i=this.transform.zoom,o=t.browser.now();this.style.zoomHistory.update(i,o);var r=new t.EvaluationParameters(i,{now:o,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=r.crossFadingFactor();1===a&&a===this._crossFadingFactor||(e=!0,this._crossFadingFactor=a),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),ko(this._canvasContainer),ko(this._controlContainer),ko(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(r.prototype,a),r}(So);function ko(t){t.parentNode&&t.parentNode.removeChild(t)}var Bo={showCompass:!0,showZoom:!0},Oo=function(e){var o=this;this.options=t.extend({},Bo,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return o._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return o._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return o._map.resetNorth()}),this._compassArrow=i.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Fo(e,i,o){if(e=new t.LngLat(e.lng,e.lat),i){var r=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),n=o.locationPoint(e).distSqr(i);o.locationPoint(r).distSqr(i)<n?e=r:o.locationPoint(a).distSqr(i)<n&&(e=a)}for(;Math.abs(e.lng-o.center.lng)>180;){var s=o.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=o.width&&s.y<=o.height)break;e.lng>o.center.lng?e.lng-=360:e.lng+=360}return e}Oo.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Oo.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vo(t,{button:"left",element:this._compass}),i.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Oo.prototype.onRemove=function(){i.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),i.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Oo.prototype._createButton=function(t,e,o){var r=i.create("button",t,this._container);return r.type="button",r.title=e,r.setAttribute("aria-label",e),r.addEventListener("click",o),r};var Uo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function No(t,e,i){var o=t.classList;for(var r in Uo)o.remove("mapboxgl-"+i+"-anchor-"+r);o.add("mapboxgl-"+i+"-anchor-"+e)}var Zo,jo=function(e){function o(o,r){if(e.call(this),(o instanceof t.window.HTMLElement||r)&&(o=t.extend({element:o},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._draggable=o&&o.draggable||!1,this._state="inactive",o&&o.element)this._element=o.element,this._offset=t.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div");var a=i.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var n=i.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"stroke","none"),n.setAttributeNS(null,"stroke-width","1"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"fill-rule","evenodd");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<u.length;c+=1){var h=u[c],p=i.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),l.appendChild(p)}var d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(_);var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(m);var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(y),v.appendChild(x),s.appendChild(l),s.appendChild(d),s.appendChild(f),s.appendChild(g),s.appendChild(v),a.appendChild(s),this._element.appendChild(a),this._offset=t.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},o.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},o.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Uo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),No(this._element,this._anchor,"marker"))},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},o.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o}(t.Evented),Vo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},qo=function(e){function o(i){e.call(this),this.options=t.extend({},Vo,i),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.onAdd=function(e){var o;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,void 0!==Zo?o(Zo):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){Zo="denied"!==t.state,o(Zo)}):(Zo=!!t.window.navigator.geolocation,o(Zo)),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),i.remove(this._container),this._map=void 0},o.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},o.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),o=e.coords.accuracy;this._map.fitBounds(i.toBounds(o),this.options.fitBoundsOptions,{geolocateSource:!0})},o.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(e){var o=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new jo(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==o._watchState||(o._watchState="BACKGROUND",o._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),o._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),o.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},o.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(t.Evented),Go={maxWidth:100,unit:"metric"},Wo=function(e){this.options=t.extend({},Go,e),t.bindAll(["_onMove","setUnit"],this)};function Xo(t,e,i){var o,r,a,n,s,l,c=i&&i.maxWidth||100,u=t._container.clientHeight/2,h=(o=t.unproject([0,u]),r=t.unproject([c,u]),a=Math.PI/180,n=o.lat*a,s=r.lat*a,l=Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos((r.lng-o.lng)*a),6371e3*Math.acos(Math.min(l,1)));if(i&&"imperial"===i.unit){var p=3.2808*h;p>5280?Ho(e,c,p/5280,"mi"):Ho(e,c,p,"ft")}else i&&"nautical"===i.unit?Ho(e,c,h/1852,"nm"):Ho(e,c,h,"m")}function Ho(t,e,i,o){var r,a,n,s=(r=i,(a=Math.pow(10,(""+Math.floor(r)).length-1))*(n=(n=r/a)>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n))),l=s/i;"m"===o&&s>=1e3&&(s/=1e3,o="km"),t.style.width=e*l+"px",t.innerHTML=s+o}Wo.prototype.getDefaultPosition=function(){return"bottom-left"},Wo.prototype._onMove=function(){Xo(this._map,this._container,this.options)},Wo.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Wo.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Wo.prototype.setUnit=function(t){this.options.unit=t,Xo(this._map,this._container,this.options)};var Ko=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Ko.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ko.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ko.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Ko.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ko.prototype._isFullscreen=function(){return this._fullscreen},Ko.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Ko.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Yo={closeButton:!0,closeOnClick:!0,className:""},Jo=function(e){function o(i){e.call(this),this.options=t.extend(Object.create(Yo),i),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},o.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},o.prototype.setHTML=function(e){var i,o=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;i=r.firstChild;)o.appendChild(i);return this.setDOMContent(o)},o.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},o.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},o.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform));var o=this._pos=this._map.project(this._lngLat),r=this.options.anchor,a=function e(i){if(i){if("number"==typeof i){var o=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(o,o),"top-right":new t.Point(-o,o),bottom:new t.Point(0,-i),"bottom-left":new t.Point(o,-o),"bottom-right":new t.Point(-o,-o),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var r=t.Point.convert(i);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!r){var n,s=this._container.offsetWidth,l=this._container.offsetHeight;n=o.y+a.bottom.y<l?["top"]:o.y>this._map.transform.height-l?["bottom"]:[],o.x<s/2?n.push("left"):o.x>this._map.transform.width-s/2&&n.push("right"),r=0===n.length?"bottom":n.join("-")}var c=o.add(a[r]).round();i.setTransform(this._container,Uo[r]+" translate("+c.x+"px,"+c.y+"px)"),No(this._container,r,"popup")}},o.prototype._onClickClose=function(){this.remove()},o}(t.Evented),Qo={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:Ao,NavigationControl:Oo,GeolocateControl:qo,AttributionControl:zo,ScaleControl:Wo,FullscreenControl:Ko,Popup:Jo,Marker:jo,Style:Me,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Pt.workerCount},set workerCount(t){Pt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Qo}),mapboxgl}()},function(module,exports,__webpack_require__){"use strict";(function(global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var base64=__webpack_require__(533),ieee754=__webpack_require__(534),isArray=__webpack_require__(535);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function fromArrayBuffer(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function fromString(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length?that:(obj.copy(that,0,0,len),that)}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||function isnan(val){return val!=val}(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function SlowBuffer(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function alloc(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function isBuffer(b){return!(null==b||!b._isBuffer)},Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}.apply(this,arguments)},Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function inspect(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function slice(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function fill(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function base64clean(str){if((str=function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),get=__webpack_require__(17),inherits=__webpack_require__(5),esm=__webpack_require__(10),dist_esm=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"a",function(){return column_layer_ColumnLayer});var fp64LowPart=dist_esm.r.fp64LowPart,defaultMaterial=new dist_esm.j,DEFAULT_COLOR=[255,0,255,255],defaultProps={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:{type:"accessor",value:function value(x){return x.position}},getColor:{type:"accessor",value:DEFAULT_COLOR},getElevation:{type:"accessor",value:1e3},material:defaultMaterial},column_layer_ColumnLayer=function(_Layer){function ColumnLayer(){return Object(classCallCheck.a)(this,ColumnLayer),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(ColumnLayer).apply(this,arguments))}return Object(inherits.a)(ColumnLayer,_Layer),Object(createClass.a)(ColumnLayer,[{key:"getShaders",value:function getShaders(){return{vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform float coverage;\nuniform float elevationScale;\nvarying vec4 vColor;\n\nvoid main(void) {\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  }\n  float shouldRender = float(instanceColors.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy + offset) * dotRadius, 0.);\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, pos, position_commonspace);\n\n  vec3 normals_commonspace = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, position_commonspace.xyz, normals_commonspace);\n    vColor = vec4(lightColor, instanceColors.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","gouraud-lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:5121,transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR}})}},{key:"updateState",value:function updateState(_ref){var props=_ref.props,oldProps=_ref.oldProps,changeFlags=_ref.changeFlags;if(Object(get.a)(Object(getPrototypeOf.a)(ColumnLayer.prototype),"updateState",this).call(this,{props:props,oldProps:oldProps,changeFlags:changeFlags}),props.fp64!==oldProps.fp64||props.diskResolution!==oldProps.diskResolution){var gl=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(gl)}),this.getAttributeManager().invalidateAll()}props.vertices!==oldProps.vertices&&this._updateVertices(props.vertices)}},{key:"getGeometry",value:function getGeometry(diskResolution){return new dist_esm.d({radius:1,topCap:!1,bottomCap:!0,height:2,verticalAxis:"z",nradial:diskResolution,nvertical:1})}},{key:"_getModel",value:function _getModel(gl){return new dist_esm.i(gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getGeometry(this.props.diskResolution),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_updateVertices",value:function _updateVertices(vertices){if(vertices){var diskResolution=this.props.diskResolution;esm.j.assert(vertices.length>=diskResolution);for(var model=this.state.model,geometry=this.getGeometry(this.props.diskResolution),positions=geometry.attributes.POSITION,i=0,loopIndex=0;loopIndex<3;loopIndex++)for(var j=0;j<=diskResolution;j++){var p=vertices[j]||vertices[0];positions.value[i++]=p[0],positions.value[i++]=p[1],i++}model.setProps({geometry:geometry})}}},{key:"draw",value:function draw(_ref2){var uniforms=_ref2.uniforms,_this$props=this.props,elevationScale=_this$props.elevationScale,extruded=_this$props.extruded,offset=_this$props.offset,coverage=_this$props.coverage,radius=_this$props.radius,angle=_this$props.angle;this.state.model.setUniforms(Object.assign({},uniforms,{radius:radius,angle:angle/180*Math.PI,offset:offset,extruded:extruded,coverage:coverage,elevationScale:elevationScale})).draw()}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(attribute){var isFP64=this.use64bitPositions();if(attribute.constant=!isFP64,isFP64){var _this$props2=this.props,data=_this$props2.data,getPosition=_this$props2.getPosition,value=attribute.value,i=0,_createIterable=Object(esm.h)(data),iterable=_createIterable.iterable,objectInfo=_createIterable.objectInfo,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=iterable[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var object=_step.value;objectInfo.index++;var position=getPosition(object,objectInfo);value[i++]=fp64LowPart(position[0]),value[i++]=fp64LowPart(position[1])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else attribute.value=new Float32Array(2)}}]),ColumnLayer}(esm.d);column_layer_ColumnLayer.layerName="ColumnLayer",column_layer_ColumnLayer.defaultProps=defaultProps},function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinkTo=function LinkTo(){hasWarned||(console.error((0,_commonTags.stripIndents)(_templateObject())),hasWarned=!0);return null},Object.defineProperty(exports,"linkTo",{enumerable:!0,get:function get(){return _preview.linkTo}}),Object.defineProperty(exports,"hrefTo",{enumerable:!0,get:function get(){return _preview.hrefTo}}),Object.defineProperty(exports,"withLinks",{enumerable:!0,get:function get(){return _preview.withLinks}}),__webpack_require__(179),__webpack_require__(180);var _commonTags=__webpack_require__(187),_preview=__webpack_require__(516);function _templateObject(){var data=function _taggedTemplateLiteral(strings,raw){raw||(raw=strings.slice(0));return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n      LinkTo has moved to addon-links/react:\n      import LinkTo from '@storybook/addon-links/react';\n    "]);return _templateObject=function _templateObject(){return data},data}var hasWarned=!1;module&&module.hot&&module.hot.decline&&module.hot.decline()}).call(this,__webpack_require__(79)(module))},,function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);function createDetectElementResize(nonce){var _window;_window="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var cancel,raf,attachEvent="undefined"!=typeof document&&document.attachEvent;if(!attachEvent){var requestFrame=(raf=_window.requestAnimationFrame||_window.mozRequestAnimationFrame||_window.webkitRequestAnimationFrame||function(fn){return _window.setTimeout(fn,20)},function(fn){return raf(fn)}),cancelFrame=(cancel=_window.cancelAnimationFrame||_window.mozCancelAnimationFrame||_window.webkitCancelAnimationFrame||_window.clearTimeout,function(id){return cancel(id)}),resetTriggers=function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth,contract.scrollTop=contract.scrollHeight,expandChild.style.width=expand.offsetWidth+1+"px",expandChild.style.height=expand.offsetHeight+1+"px",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight},scrollListener=function scrollListener(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var element=this;resetTriggers(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){(function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height})(element)&&(element.__resizeLast__.width=element.offsetWidth,element.__resizeLast__.height=element.offsetHeight,element.__resizeListeners__.forEach(function(fn){fn.call(element,e)}))})}},animation=!1,keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),elm=document.createElement("fakeelement");if(void 0!==elm.style.animationName&&(animation=!0),!1===animation)for(var i=0;i<domPrefixes.length;i++)if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){keyframeprefix="-"+domPrefixes[i].toLowerCase()+"-",animationstartevent=startEvents[i],animation=!0;break}var animationName="resizeanim",animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ",animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}return{addResizeListener:function addResizeListener(element,fn){if(attachEvent)element.attachEvent("onresize",fn);else{if(!element.__resizeTriggers__){var doc=element.ownerDocument,elementStyle=_window.getComputedStyle(element);elementStyle&&"static"==elementStyle.position&&(element.style.position="relative"),function createStyles(doc){if(!doc.getElementById("detectElementResize")){var css=(animationKeyframes||"")+".resize-triggers { "+(animationStyle||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=doc.head||doc.getElementsByTagName("head")[0],style=doc.createElement("style");style.id="detectElementResize",style.type="text/css",null!=nonce&&style.setAttribute("nonce",nonce),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(doc.createTextNode(css)),head.appendChild(style)}}(doc),element.__resizeLast__={},element.__resizeListeners__=[],(element.__resizeTriggers__=doc.createElement("div")).className="resize-triggers",element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',element.appendChild(element.__resizeTriggers__),resetTriggers(element),element.addEventListener("scroll",scrollListener,!0),animationstartevent&&(element.__resizeTriggers__.__animationListener__=function animationListener(e){e.animationName==animationName&&resetTriggers(element)},element.__resizeTriggers__.addEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__))}element.__resizeListeners__.push(fn)}},removeResizeListener:function removeResizeListener(element,fn){if(attachEvent)element.detachEvent("onresize",fn);else if(element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1),!element.__resizeListeners__.length){element.removeEventListener("scroll",scrollListener,!0),element.__resizeTriggers__.__animationListener__&&(element.__resizeTriggers__.removeEventListener(animationstartevent,element.__resizeTriggers__.__animationListener__),element.__resizeTriggers__.__animationListener__=null);try{element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)}catch(e){}}}}}var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},AutoSizer=function(_React$PureComponent){function AutoSizer(){var _ref,_temp,_this;classCallCheck(this,AutoSizer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=AutoSizer.__proto__||Object.getPrototypeOf(AutoSizer)).call.apply(_ref,[this].concat(args))),_this.state={height:_this.props.defaultHeight||0,width:_this.props.defaultWidth||0},_this._onResize=function(){var _this$props=_this.props,disableHeight=_this$props.disableHeight,disableWidth=_this$props.disableWidth,onResize=_this$props.onResize;if(_this._parentNode){var _height=_this._parentNode.offsetHeight||0,_width=_this._parentNode.offsetWidth||0,_style=window.getComputedStyle(_this._parentNode)||{},paddingLeft=parseInt(_style.paddingLeft,10)||0,paddingRight=parseInt(_style.paddingRight,10)||0,paddingTop=parseInt(_style.paddingTop,10)||0,paddingBottom=parseInt(_style.paddingBottom,10)||0,newHeight=_height-paddingTop-paddingBottom,newWidth=_width-paddingLeft-paddingRight;(!disableHeight&&_this.state.height!==newHeight||!disableWidth&&_this.state.width!==newWidth)&&(_this.setState({height:_height-paddingTop-paddingBottom,width:_width-paddingLeft-paddingRight}),onResize({height:_height,width:_width}))}},_this._setRef=function(autoSizer){_this._autoSizer=autoSizer},possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AutoSizer,react__WEBPACK_IMPORTED_MODULE_0__["PureComponent"]),createClass(AutoSizer,[{key:"componentDidMount",value:function componentDidMount(){var nonce=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=createDetectElementResize(nonce),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function render(){var _props=this.props,children=_props.children,className=_props.className,disableHeight=_props.disableHeight,disableWidth=_props.disableWidth,style=_props.style,_state=this.state,height=_state.height,width=_state.width,outerStyle={overflow:"visible"},childParams={},bailoutOnChildren=!1;return disableHeight||(0===height&&(bailoutOnChildren=!0),outerStyle.height=0,childParams.height=height),disableWidth||(0===width&&(bailoutOnChildren=!0),outerStyle.width=0,childParams.width=width),Object(react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{className:className,ref:this._setRef,style:_extends({},outerStyle,style)},!bailoutOnChildren&&children(childParams))}}]),AutoSizer}();AutoSizer.defaultProps={onResize:function onResize(){},disableHeight:!1,disableWidth:!1,style:{}},__webpack_exports__.a=AutoSizer}).call(this,__webpack_require__(21))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return fitBounds});var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(115),_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(52);function fitBounds(_ref){var width=_ref.width,height=_ref.height,bounds=_ref.bounds,_ref$padding=_ref.padding,padding=void 0===_ref$padding?0:_ref$padding,_ref$offset=_ref.offset,offset=void 0===_ref$offset?[0,0]:_ref$offset,_bounds=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(bounds,2),_bounds$=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_bounds[0],2),west=_bounds$[0],south=_bounds$[1],_bounds$2=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_bounds[1],2),east=_bounds$2[0],north=_bounds$2[1];if(Number.isFinite(padding)){padding={top:padding,bottom:padding,left:padding,right:padding}}else Object(_assert__WEBPACK_IMPORTED_MODULE_2__.a)(Number.isFinite(padding.top)&&Number.isFinite(padding.bottom)&&Number.isFinite(padding.left)&&Number.isFinite(padding.right));var viewport=new _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__.a({width:width,height:height,longitude:0,latitude:0,zoom:0}),nw=viewport.project([west,north]),se=viewport.project([east,south]),size=[Math.abs(se[0]-nw[0]),Math.abs(se[1]-nw[1])],targetSize=[width-padding.left-padding.right-2*Math.abs(offset[0]),height-padding.top-padding.bottom-2*Math.abs(offset[1])];Object(_assert__WEBPACK_IMPORTED_MODULE_2__.a)(targetSize[0]>0&&targetSize[1]>0);var scaleX=targetSize[0]/size[0],scaleY=targetSize[1]/size[1],offsetX=(padding.right-padding.left)/2/scaleX,offsetY=(padding.bottom-padding.top)/2/scaleY,center=[(se[0]+nw[0])/2+offsetX,(se[1]+nw[1])/2+offsetY],centerLngLat=viewport.unproject(center),zoom=viewport.zoom+Math.log2(Math.abs(Math.min(scaleX,scaleY)));return{longitude:centerLngLat[0],latitude:centerLngLat[1],zoom:zoom}}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);__webpack_exports__.a=function isElectron(){return"undefined"!=typeof window&&"object"===Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(window.process)&&"renderer"===window.process.type||!(void 0===process||"object"!==Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(process.versions)||!Boolean(process.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}()}).call(this,__webpack_require__(54))},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return getImageMetadata});var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_node_buffer_to_array_buffer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(193),BIG_ENDIAN=!1,LITTLE_ENDIAN=!0,mimeTypeMap=new Map([["image/png",function getPngSize(arrayBuffer){var dataView=toDataView(arrayBuffer);if(dataView.byteLength<24||2303741511!==dataView.getUint32(0,BIG_ENDIAN))return null;return{width:dataView.getUint32(16,BIG_ENDIAN),height:dataView.getUint32(20,BIG_ENDIAN)}}],["image/jpeg",function getJpegSize(arrayBuffer){var dataView=toDataView(arrayBuffer);if(dataView.byteLength<2||65496!==dataView.getUint16(0,BIG_ENDIAN))return null;var _getJpegMarkers=function getJpegMarkers(){for(var tableMarkers=new Set([65499,65476,65484,65501,65534]),i=65504;i<65520;++i)tableMarkers.add(i);var sofMarkers=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:tableMarkers,sofMarkers:sofMarkers}}(),tableMarkers=_getJpegMarkers.tableMarkers,sofMarkers=_getJpegMarkers.sofMarkers,i=2;for(;i<dataView.byteLength;){var marker=dataView.getUint16(i,BIG_ENDIAN);if(sofMarkers.has(marker))return{height:dataView.getUint16(i+5,BIG_ENDIAN),width:dataView.getUint16(i+7,BIG_ENDIAN)};if(!tableMarkers.has(marker))return null;i+=2,i+=dataView.getUint16(i,BIG_ENDIAN)}return null}],["image/gif",function getGifSize(arrayBuffer){var dataView=toDataView(arrayBuffer);if(dataView.byteLength<10||1195984440!==dataView.getUint32(0,BIG_ENDIAN))return null;return{width:dataView.getUint16(6,LITTLE_ENDIAN),height:dataView.getUint16(8,LITTLE_ENDIAN)}}],["image/bmp",function getBmpSize(arrayBuffer){var dataView=toDataView(arrayBuffer);if(16973!==dataView.getUint16(0,BIG_ENDIAN))return null;return{width:dataView.getUint32(18,LITTLE_ENDIAN),height:dataView.getUint32(22,LITTLE_ENDIAN)}}]]),ERR_INVALID_TYPE="Invalid MIME type. Supported MIME types are: ".concat(Array.from(mimeTypeMap.keys()).join(", "));function getImageMetadata(arrayBuffer){var mimeType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(mimeType){var handler=mimeTypeMap.get(mimeType);if(!handler)throw new Error(ERR_INVALID_TYPE);var _result=handler(arrayBuffer);if(!_result)throw new Error("invalid image data for type: ".concat(mimeType));return _result}var result=guessImageMetadata(arrayBuffer,mimeType);if(!result)throw new Error(ERR_INVALID_TYPE);return result}function guessImageMetadata(arrayBuffer,mimeType){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=mimeTypeMap.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_step.value,2),supportedMimeType=_step$value[0],result=(0,_step$value[1])(arrayBuffer);if(result)return result.mimeType=supportedMimeType,result}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}function toDataView(data){if(_node_buffer_to_array_buffer__WEBPACK_IMPORTED_MODULE_1__.a&&(data=Object(_node_buffer_to_array_buffer__WEBPACK_IMPORTED_MODULE_1__.a)(data)),data instanceof ArrayBuffer||ArrayBuffer.isView(data))return new DataView(data.buffer||data);throw new Error("toDataView")}},function(module,exports,__webpack_require__){"use strict";function earcut(data,holeIndices,dim){dim=dim||2;var minX,minY,maxX,maxY,x,y,invSize,hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;if(hasHoles&&(outerNode=function eliminateHoles(data,holeIndices,outerNode,dim){var i,len,start,end,list,queue=[];for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,(list=linkedList(data,start,end,dim,!1))===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX),i=0;i<queue.length;i++)eliminateHole(queue[i],outerNode),outerNode=filterPoints(outerNode,outerNode.next);return outerNode}(data,holeIndices,outerNode,dim)),data.length>80*dim){minX=maxX=data[0],minY=maxY=data[1];for(var i=dim;i<outerLen;i+=dim)(x=data[i])<minX&&(minX=x),(y=data[i+1])<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y);invSize=0!==(invSize=Math.max(maxX-minX,maxY-minY))?1/invSize:0}return earcutLinked(outerNode,triangles,dim,minX,minY,invSize),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var again,p=start;do{if(again=!1,p.steiner||!equals(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(removeNode(p),(p=end=p.prev)===p.next)break;again=!0}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,invSize,pass){if(ear){!pass&&invSize&&function indexCurve(start,minX,minY,invSize){var p=start;do{null===p.z&&(p.z=zOrder(p.x,p.y,minX,minY,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,function sortLinked(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)0!==pSize&&(0===qSize||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1);return list}(p)}(ear,minX,minY,invSize);for(var prev,next,stop=ear;ear.prev!==ear.next;)if(prev=ear.prev,next=ear.next,invSize?isEarHashed(ear,minX,minY,invSize):isEar(ear))triangles.push(prev.i/dim),triangles.push(ear.i/dim),triangles.push(next.i/dim),removeNode(ear),ear=next.next,stop=next.next;else if((ear=next)===stop){pass?1===pass?earcutLinked(ear=cureLocalIntersections(ear,triangles,dim),triangles,dim,minX,minY,invSize,2):2===pass&&splitEarcut(ear,triangles,dim,minX,minY,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX,minY,invSize,1);break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var p=ear.next.next;p!==ear.prev;){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX,minY,invSize){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return!1;for(var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y,minZ=zOrder(minTX,minTY,minX,minY,invSize),maxZ=zOrder(maxTX,maxTY,minX,minY,invSize),p=ear.prevZ,n=ear.nextZ;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n!==ear.prev&&n!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals(a,b)&&intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim),triangles.push(p.i/dim),triangles.push(b.i/dim),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return p}function splitEarcut(start,triangles,dim,minX,minY,invSize){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);return a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX,minY,invSize),void earcutLinked(c,triangles,dim,minX,minY,invSize)}b=b.next}a=a.next}while(a!==start)}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){if(outerNode=function findHoleBridge(hole,outerNode){var m,p=outerNode,hx=hole.x,hy=hole.y,qx=-1/0;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx){if(qx=x,x===hx){if(hy===p.y)return p;if(hy===p.next.y)return p.next}m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hx===qx)return m.prev;var tan,stop=m,mx=m.x,my=m.y,tanMin=1/0;p=m.next;for(;p!==stop;)hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&((tan=Math.abs(hy-p.y)/(hx-p.x))<tanMin||tan===tanMin&&p.x>m.x)&&locallyInside(p,hole)&&(m=p,tanMin=tan),p=p.next;return m}(hole,outerNode)){var b=splitPolygon(outerNode,hole);filterPoints(b,b.next)}}function zOrder(x,y,minX,minY,invSize){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-minX)*invSize)|x<<8))|x<<4))|x<<2))|x<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=32767*(y-minY)*invSize)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function getLeftmost(start){var p=start,leftmost=start;do{(p.x<leftmost.x||p.x===leftmost.x&&p.y<leftmost.y)&&(leftmost=p),p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function intersectsPolygon(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&locallyInside(a,b)&&locallyInside(b,a)&&function middleInside(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do{p.y>py!=p.next.y>py&&p.next.y!==p.y&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next}while(p!==a);return inside}(a,b)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){return!!(equals(p1,q1)&&equals(p2,q2)||equals(p1,q2)&&equals(p2,q1))||area(p1,q1,p2)>0!=area(p1,q1,q2)>0&&area(p2,q2,p1)>0!=area(p2,q2,q1)>0}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node(i,x,y){this.i=i,this.x=x,this.y=y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(data,start,end,dim){for(var sum=0,i=start,j=end-dim;i<end;i+=dim)sum+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum}module.exports=earcut,module.exports.default=earcut,earcut.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea=Math.abs(signedArea(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;i<len;i++){var start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length;polygonArea-=Math.abs(signedArea(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return 0===polygonArea&&0===trianglesArea?0:Math.abs((trianglesArea-polygonArea)/polygonArea)},earcut.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;d<dim;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}},,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(298),__webpack_require__(299),__webpack_require__(376)},function(module,exports){!function(global){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)inModule&&(module.exports=runtime);else{(runtime=global.regeneratorRuntime=inModule?module.exports:{}).wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},function(error){return invoke("throw",error,resolve,reject)})}reject(record.arg)}(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(module,exports,__webpack_require__){"use strict";__webpack_require__(300)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(301),__webpack_require__(302),__webpack_require__(303)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var isRegex,isString,$Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function isES6ClassFn(value){try{var fnStr=fnToStr.call(value),singleStripped=fnStr.replace(/\/\/.*\n/g,""),multiStripped=singleStripped.replace(/\/\*[.\s\S]*\*\//g,""),spaceStripped=multiStripped.replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},isCallable=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return function tryFunctionObject(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}}(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return"[object Function]"===strClass||"[object GeneratorFunction]"===strClass},regexExec=RegExp.prototype.exec;isRegex=function isRegex(value){return"object"==typeof value&&(hasToStringTag?function tryRegexExec(value){try{return regexExec.call(value),!0}catch(e){return!1}}(value):"[object RegExp]"===to_string.call(value))};var strValue=String.prototype.valueOf;isString=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}}(value):"[object String]"===to_string.call(value))};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function defineProperties(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)}),isPrimitive=function isPrimitive(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function isActualNaN(x){return x!=x},ES={ToInteger:function ToInteger(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function ToUint32(x){return x>>>0}},Empty=function Empty(){};var has,defineProperty;defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=array_slice.call(arguments,1),boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))}),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice);if("object"==typeof document&&document&&document.documentElement)try{arraySlice(document.documentElement.childNodes)}catch(e){var origArraySlice=arraySlice,origArraySliceApply=arraySliceApply;arraySlice=function arraySliceIE(arr){for(var r=[],i=arr.length;i-- >0;)r[i]=arr[i];return origArraySliceApply(r,origArraySlice(arguments,1))},arraySliceApply=function arraySliceApplyIE(arr,args){return origArraySliceApply(arraySlice(arr),args)}}var strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function isArray(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray:isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)}),method.call([1],function(){properlyBoxesStrict="string"==typeof this},"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function map(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var value,T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[];if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function every(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function some(callbackfn){var T,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",function(_,__,___,list){return list}));defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",function(_,__,___,list){return list}));defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var result,object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(a=[1,2],result=a.splice(),2===a.length&&isArray(result)&&0===result.length);var a,result;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=(obj={},ArrayPrototype.splice.call(obj,0,0,1),1===obj.length);var obj;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var spliceWorksWithLargeSparseArrays=(arr=new $Array(1e5),arr[8]="x",arr.splice(1,1),7===arr.indexOf("x")),spliceWorksWithSmallSparseArrays=function(){var arr=[];return arr[256]="a",arr.splice(257,0,"b"),"a"===arr[256]}();var arr;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){for(var from,O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var to,items=arraySlice(arguments,2),itemCount=items.length;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var hasStringJoinBug,originalJoin=ArrayPrototype.join;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function push(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={},result=Array.prototype.push.call(obj,void 0);return 1!==result||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function push(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[],result=arr.push(void 0);return 1!==result||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e2){return!1}}return!0}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function sort(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum(function(){},"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!excludedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function isArguments(value){return"[object Arguments]"===toStr(value)},isArguments=isStandardArguments(arguments)?isStandardArguments:function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)};defineProperties($Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}}(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function keys(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasToDateStringFormatBug,hasToStringFormatBug,hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString();aNegativeTestDate.getTimezoneOffset()<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate))):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(aPositiveTestDate)));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function daysInMonth(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function getFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function getMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function getDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function getUTCFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function getUTCMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function getUTCDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this);return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function toUTCString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function toDateString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function toString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=Math.floor(Math.abs(timezoneOffset)/60),minutesOffset=Math.floor(Math.abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=Math.floor(month/12);var result=[1+(month=(month%12+12)%12),originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+Math.abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function toJSON(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=Math.pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var date,length=arguments.length;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}date=1===length&&$String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)};for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0);return defineProperties(DateShim,{parse:function parse(string){var match=isoDateExpression.exec(string);if(match){var result,year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=Math.floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0),hasMinutesOrSecondsOrMilliseconds=minute>0||second>0||millisecond>0;return hour<(hasMinutesOrSecondsOrMilliseconds?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=function toUTC(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))}(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)}}),DateShim}(Date)}Date.now||(Date.now=function now(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=Math.floor(c2/toFixedHelpers.base)},divide:function divide(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function numToString(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}};defineProperties(NumberPrototype,{toFixed:function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:Math.floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69,z=e<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return f>0?(k=m.length,m=k<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f)):m=s+m,m}},hasToFixedBugs);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=NumberPrototype.toPrecision;defineProperties(NumberPrototype,{toPrecision:function toPrecision(precision){return void 0===precision?originalToPrecision.call(this):originalToPrecision.call(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=Math.pow(2,32)-1,StringPrototype.split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var separator2,match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function split(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var compliantExecNpcg,maxSafe32BitInt;var str_replace=StringPrototype.replace;groups=[],"x".replace(/x(.)?/g,function(match,group){pushCall(groups,group)}),(1!==groups.length||void 0!==groups[0])&&(StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){return str_replace.call(this,searchValue,function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)})}return str_replace.call(this,searchValue,replaceValue)});var groups;var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\v\f\r \u2028\u2029\ufeff",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!"".trim());defineProperties(StringPrototype,{trim:function trim(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abc".lastIndexOf("",2);defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf;defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length),(8!==parseInt(ws+"08")||22!==parseInt(ws+"0x16"))&&(parseInt=(origParseInt=parseInt,hexRegex=/^[-+]?0[xX]/,function parseInt(str,radix){var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}));var origParseInt,hexRegex;1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function parseFloat(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result}));var origParseFloat;if("RangeError: test"!==String(new RangeError("test"))){Error.prototype.toString=function toString(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg));if(!name)return msg;if(!msg)return name;return name+": "+msg}}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){RegExp.prototype.toString=function toString(){var str="/"+this.source+"/";this.global&&(str+="g");this.ignoreCase&&(str+="i");this.multiline&&(str+="m");return str}}})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */!function(root,factory){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var defineGetter,defineSetter,lookupGetter,lookupSetter,call=Function.call,prototypeOfObject=Object.prototype,owns=call.bind(prototypeOfObject.hasOwnProperty),isEnumerable=call.bind(prototypeOfObject.propertyIsEnumerable),toStr=call.bind(prototypeOfObject.toString),supportsAccessors=owns(prototypeOfObject,"__defineGetter__");supportsAccessors&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__));var isPrimitive=function isPrimitive(o){return null==o||"object"!=typeof o&&"function"!=typeof o};Object.getPrototypeOf||(Object.getPrototypeOf=function getPrototypeOf(object){var proto=object.__proto__;return proto||null===proto?proto:"[object Function]"===toStr(object.constructor)?object.constructor.prototype:object instanceof Object?prototypeOfObject:null});var doesGetOwnPropertyDescriptorWork=function doesGetOwnPropertyDescriptorWork(object){try{return object.sentinel=0,0===Object.getOwnPropertyDescriptor(object,"sentinel").value}catch(exception){return!1}};if(Object.defineProperty){var getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({}),getOwnPropertyDescriptorWorksOnDom="undefined"==typeof document||doesGetOwnPropertyDescriptorWork(document.createElement("div"));if(!getOwnPropertyDescriptorWorksOnDom||!getOwnPropertyDescriptorWorksOnObject)var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(isPrimitive(object))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+object);if(getOwnPropertyDescriptorFallback)try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}var descriptor;if(!owns(object,property))return descriptor;if(descriptor={enumerable:isEnumerable(object,property),configurable:!0},supportsAccessors){var prototype=object.__proto__,notPrototypeOfObject=object!==prototypeOfObject;notPrototypeOfObject&&(object.__proto__=prototypeOfObject);var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(notPrototypeOfObject&&(object.__proto__=prototype),getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor.writable=!0,descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)});if(!Object.create){var createEmpty,supportsProto=!({__proto__:null}instanceof Object);createEmpty=supportsProto||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var empty=function shouldUseActiveX(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(exception){return!1}}()?function getEmptyViaActiveX(){var empty,xDoc;xDoc=new ActiveXObject("htmlfile");return xDoc.write("<script><\/script>"),xDoc.close(),empty=xDoc.parentWindow.Object.prototype,xDoc=null,empty}():function getEmptyViaIFrame(){var empty,iframe=document.createElement("iframe"),parent=document.body||document.documentElement;return iframe.style.display="none",parent.appendChild(iframe),iframe.src="javascript:",empty=iframe.contentWindow.Object.prototype,parent.removeChild(iframe),iframe=null,empty}();delete empty.constructor,delete empty.hasOwnProperty,delete empty.propertyIsEnumerable,delete empty.isPrototypeOf,delete empty.toLocaleString,delete empty.toString,delete empty.valueOf;var Empty=function Empty(){};return Empty.prototype=empty,createEmpty=function(){return new Empty},new Empty},Object.create=function create(prototype,properties){var object,Type=function Type(){};if(null===prototype)object=createEmpty();else{if(null!==prototype&&isPrimitive(prototype))throw new TypeError("Object prototype may only be an Object or null");Type.prototype=prototype,(object=new Type).__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}var doesDefinePropertyWork=function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){return!1}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}if(!Object.defineProperty||definePropertyFallback){Object.defineProperty=function defineProperty(object,property,descriptor){if(isPrimitive(object))throw new TypeError("Object.defineProperty called on non-object: "+object);if(isPrimitive(descriptor))throw new TypeError("Property description must be an object: "+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if("value"in descriptor)if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{var hasGetter="get"in descriptor,hasSetter="set"in descriptor;if(!supportsAccessors&&(hasGetter||hasSetter))throw new TypeError("getters & setters can not be defined on this javascript engine");hasGetter&&defineGetter(object,property,descriptor.get),hasSetter&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties&&!definePropertiesFallback||(Object.defineProperties=function defineProperties(object,properties){if(definePropertiesFallback)try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}return Object.keys(properties).forEach(function(property){"__proto__"!==property&&Object.defineProperty(object,property,properties[property])}),object});Object.seal||(Object.seal=function seal(object){if(Object(object)!==object)throw new TypeError("Object.seal can only be called on Objects.");return object});Object.freeze||(Object.freeze=function freeze(object){if(Object(object)!==object)throw new TypeError("Object.freeze can only be called on Objects.");return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=(freezeObject=Object.freeze,function freeze(object){return"function"==typeof object?object:freezeObject(object)})}var freezeObject;Object.preventExtensions||(Object.preventExtensions=function preventExtensions(object){if(Object(object)!==object)throw new TypeError("Object.preventExtensions can only be called on Objects.");return object});Object.isSealed||(Object.isSealed=function isSealed(object){if(Object(object)!==object)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function isFrozen(object){if(Object(object)!==object)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function isExtensible(object){if(Object(object)!==object)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue})})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";__webpack_require__(304),__webpack_require__(305)(),__webpack_require__(310)},function(module,exports,__webpack_require__){(function(global,process){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";var ArrayIterator,_apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function valueOrFalseIfThrows(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=function notThunker(func){return function notThunk(){return!_apply(func,this,arguments)}}(throwsError),supportsDescriptors=!!Object.defineProperty&&!throwsError(function(){return Object.defineProperty({},"x",{get:function(){}})}),functionsHaveNames="foo"===function foo(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)})},_toString=Function.call.bind(Object.prototype.toString),isCallable=function IsCallableFast(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function getKey(){return originalObject[key]},set:function setKey(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function Prototype(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach(function(key){Value.defineByDescriptor(object,key,properties[key])}),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows(function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)})},globals=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")}(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function isNaN(value){return value!=value},numberIsFinite=Number.isFinite||function isFinite(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function sign(value){var number=Number(value);return 0===number?number:numberIsNaN(number)?number:number<0?-1:1},_log1p=function log1p(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},isStandardArguments=function isArguments(value){return"[object Arguments]"===_toString(value)},isArguments=isStandardArguments(arguments)?isStandardArguments:function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function overrideNative(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var o,Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function isNullOrUndefined(x){return null==x}:function isNullOrUndefinedAndNotDocumentAll(x){return null==x&&x!==domAll},ES={Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if("[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it),done=ES.IteratorComplete(result);return!done&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag;if(""!==attribute){var V=ES.ToString(value),escapedV=V.replace(/"/g,"&quot;");p1+=" "+attribute+'="'+escapedV+'"'}var p2=p1+">",p3=p2+S;return p3+"</"+tag+">"},IsRegExp:function IsRegExp(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function ToString(string){return $String(string)}};if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function defineWellKnownSymbol(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,function search(string){return ES.Call(originalSearch,string,[this])}),overrideNative(String.prototype,"search",function search(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])})}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,function replace(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}),overrideNative(String.prototype,"replace",function replace(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])})}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,function split(string,limit){return ES.Call(originalSplit,string,[this,limit])}),overrideNative(String.prototype,"split",function split(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])})}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,function match(string){return ES.Call(originalMatch,string,[this])}),overrideNative(String.prototype,"match",function match(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])})}}var wrapConstructor=function wrapConstructor(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)}):_forEach(Object.keys(original),function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])}),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function iterator(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataPropertyOrThrow=function createDataPropertyOrThrow(object,name,value){if(function createDataProperty(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value:value}):object[name]=value}(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",function fromCodePoint(codePoints){return ES.Call(originalFromCodePoint,this,arguments)})}var StringShims={fromCodePoint:function fromCodePoint(codePoints){for(var next,result=[],i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return result.join("")},raw:function raw(callSite){var cooked=ES.ToObject(callSite,"bad callSite"),rawString=ES.ToObject(cooked.raw,"bad raw value"),len=rawString.length,literalsegments=ES.ToLength(len);if(literalsegments<=0)return"";for(var nextKey,next,nextSeg,nextSub,stringElements=[],nextIndex=0;nextIndex<literalsegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(rawString[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalsegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return stringElements.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringMaxLength=1/0,StringPrototypeShims={repeat:function repeat(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half}(thisStr,numTimes)},startsWith:function startsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var position,searchStr=ES.ToString(searchString);arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function endsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var endPosition,searchStr=ES.ToString(searchString),len=S.length;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function includes(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var position,searchStr=ES.ToString(searchString);return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function codePointAt(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position),isEnd=position+1===length;if(first<55296||first>56319||isEnd)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError(function(){return"/a/".startsWith(/a/)}),startsWithHandlesInfinity=valueOrFalseIfThrows(function(){return!1==="abc".startsWith("a",1/0)});startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}if(hasSymbols){var startsWithSupportsSymbolMatch=valueOrFalseIfThrows(function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)});startsWithSupportsSymbolMatch||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith);var endsWithSupportsSymbolMatch=valueOrFalseIfThrows(function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)});endsWithSupportsSymbolMatch||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith);var includesSupportsSymbolMatch=valueOrFalseIfThrows(function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)});includesSupportsSymbolMatch||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)}defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function trim(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","",""].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var second,len,first=s.charCodeAt(i);return first<55296||first>56319||i+1===s.length?len=1:(second=s.charCodeAt(i+1),len=second<56320||second>57343?1:2),this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,function(){return new StringIterator(this)});var ArrayShims={from:function from(items){var mapFn,mapping,T,C=this;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}var length,result,i,usingIterator=void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$));if(usingIterator){result=ES.IsConstructor(C)?Object(new C):[];var next,nextValue,iterator=ES.GetIterator(items);for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var value,arrayLike=ES.ToObject(items);for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function of(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array)for(var len=ES.ToLength(array.length);i<len;i++){var retval,kind=this.kind;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype),Array.of===ArrayShims.of||function(){var Foo=function Foo(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}()||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function copyWithin(target,start){var end,o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len);arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function fill(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start),end=ES.ToInteger(void 0===end?len:end);for(var relativeStart=start<0?_max(len+start,0):_min(start,len),relativeEnd=end<0?len+end:end,i=relativeStart;i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function find(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var value,thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function findIndex(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function keys(){return new ArrayIterator(this,"key")},values:function values(){return new ArrayIterator(this,"value")},entries:function entries(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",function values(){return ES.Call(originalArrayPrototypeValues,this,arguments)}),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",function indexOf(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value},!0),addIterator(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arr,arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows(function(){return 0===Array.from({length:-1}).length}),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1];if(arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from),!valueOrFalseIfThrows(function(){return Array.from([0],void 0)})){var origArrayFrom=Array.from;overrideNative(Array,"from",function from(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)})}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows(function(){return _call(method,obj,function(){throw new RangeError("should not reach here")},[]),!0})};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",function forEach(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",function map(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",function filter(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",function some(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",function every(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",function reduce(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)})}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",function reduceRight(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)})}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,function(c){return 0===Number(c+0+c)});if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function Number(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:function(O){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")}(value):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows(function(){return OrigNumber.prototype.valueOf.call(receiver),!0});return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2.220446049250313e-16,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function isInteger(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function isSafeInteger(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find(function(){return!0})&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex(function(){return!0})&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var FAKENULL,gpo,spo,isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function ensureEnumerable(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function sliceArgs(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function assignTo(source){return function assignToSource(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var symbols,sourceKeys=keys(Object(source));return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function is(a,b){return ES.SameValue(a,b)}};if(Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}()&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,setPrototypeOf=function(O,proto){return function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)}(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,_call(set,{},null)}catch(e){if(Object.prototype!=={}.__proto__)return;set=function(proto){this.__proto__=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object)};defineProperties(Object,ES5ObjectShims)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){var proto=null===p?FAKENULL:p;return spo(o,proto)},Object.setPrototypeOf.polyfill=!1),throwsError(function(){return Object.keys("foo")})){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",function keys(value){return originalObjectKeys(ES.ToObject(value))}),keys=Object.keys}if(throwsError(function(){return Object.keys(/a/g)})){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",function keys(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)}),keys=Object.keys}if(Object.getOwnPropertyNames){var objectGOPNAcceptsPrimitives=!throwsError(function(){return Object.getOwnPropertyNames("foo")});if(!objectGOPNAcceptsPrimitives){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",function getOwnPropertyNames(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)})}}if(Object.getOwnPropertyDescriptor){var objectGOPDAcceptsPrimitives=!throwsError(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!objectGOPDAcceptsPrimitives){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)})}}if(Object.seal){var objectSealAcceptsPrimitives=!throwsError(function(){return Object.seal("foo")});if(!objectSealAcceptsPrimitives){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",function seal(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value})}}if(Object.isSealed){var objectIsSealedAcceptsPrimitives=!throwsError(function(){return Object.isSealed("foo")});if(!objectIsSealedAcceptsPrimitives){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",function isSealed(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)})}}if(Object.freeze){var objectFreezeAcceptsPrimitives=!throwsError(function(){return Object.freeze("foo")});if(!objectFreezeAcceptsPrimitives){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",function freeze(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value})}}if(Object.isFrozen){var objectIsFrozenAcceptsPrimitives=!throwsError(function(){return Object.isFrozen("foo")});if(!objectIsFrozenAcceptsPrimitives){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",function isFrozen(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)})}}if(Object.preventExtensions){var objectPreventExtensionsAcceptsPrimitives=!throwsError(function(){return Object.preventExtensions("foo")});if(!objectPreventExtensionsAcceptsPrimitives){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",function preventExtensions(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value})}}if(Object.isExtensible){var objectIsExtensibleAcceptsPrimitives=!throwsError(function(){return Object.isExtensible("foo")});if(!objectIsExtensibleAcceptsPrimitives){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",function isExtensible(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)})}}if(Object.getPrototypeOf){var objectGetProtoAcceptsPrimitives=!throwsError(function(){return Object.getPrototypeOf("foo")});if(!objectGetProtoAcceptsPrimitives){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",function getPrototypeOf(value){return originalGetProto(ES.ToObject(value))})}}var desc,hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get));supportsDescriptors&&!hasFlags&&Value.getter(RegExp.prototype,"flags",function flags(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result});var regex,regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regexToStringIsGeneric=valueOrFalseIfThrows(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",function toString(){var R=ES.RequireObjectCoercible(this);if(Type.regex(R))return _call(origRegExpToString,R);var pattern=$String(R.source),flags=$String(R.flags);return"/"+pattern+"/"+flags},!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:function(){return this.source},OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern),calledWithNew=this instanceof RegExp;if(!calledWithNew&&patternIsRegExp&&void 0===flags&&pattern.constructor===RegExp)return pattern;var P=pattern,F=flags;return Type.regex(pattern)?(P=ES.Call(sourceGetter,pattern),F=void 0===flags?ES.Call(flagsGetter,pattern):flags,new RegExp(P,F)):(patternIsRegExp&&(P=pattern.source,F=void 0===flags?pattern.flags:flags),new OrigRegExp(pattern,flags))};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],function get(){return RegExp[prop]})})}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function acosh(value){var x=Number(value);if(numberIsNaN(x)||value<1)return NaN;if(1===x)return 0;if(x===1/0)return x;var xInvSquared=1/(x*x);if(x<2)return _log1p(x-1+_sqrt(1-xInvSquared)*x);var halfX=x/2;return _log1p(halfX+_sqrt(1-xInvSquared)*halfX-1)+1/LOG2E},asinh:function asinh(value){var x=Number(value);if(0===x||!globalIsFinite(x))return x;var a=_abs(x),aSquared=a*a,s=_sign(x);return a<1?s*_log1p(a+aSquared/(_sqrt(aSquared+1)+1)):s*(_log1p(a/2+_sqrt(1+1/aSquared)*a/2-1)+1/LOG2E)},atanh:function atanh(value){var x=Number(value);if(0===x)return x;if(-1===x)return-1/0;if(1===x)return 1/0;if(numberIsNaN(x)||x<-1||x>1)return NaN;var a=_abs(x);return _sign(x)*_log1p(2*a/(1-a))/2},cbrt:function cbrt(value){var x=Number(value);if(0===x)return x;var result,negate=x<0;return negate&&(x=-x),x===1/0?result=1/0:(result=_exp(_log(x)/3),result=(x/(result*result)+2*result)/3),negate?-result:result},clz32:function clz32(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function cosh(value){var x=Number(value);if(0===x)return 1;if(numberIsNaN(x))return NaN;if(!globalIsFinite(x))return 1/0;var t=_exp(_abs(x)-1);return(t+1/(t*E*E))*(E/2)},expm1:function expm1(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function hypot(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function log2(value){return _log(value)*LOG2E},log10:function log10(value){return _log(value)*LOG10E},log1p:_log1p,sign:_sign,sinh:function sinh(value){var x=Number(value);if(!globalIsFinite(x)||0===x)return x;var a=_abs(x);if(a<1){var u=Math.expm1(a);return _sign(x)*u*(1+1/(u+1))/2}var t=_exp(a-1);return _sign(x)*(t-1/(t*E*E))*(E/2)},tanh:function tanh(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function trunc(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function imul(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),ah=a>>>16&65535,al=65535&a,bh=b>>>16&65535,bl=65535&b;return al*bl+(ah*bl+al*bh<<16>>>0)|0},fround:function fround(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*function roundTiesToEven(n){return n+inverseEpsilon-inverseEpsilon}(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}},withinULPDistance=function withinULPDistance(result,expected,distance){return _abs(1-result/expected)/Number.EPSILON<(distance||8)};defineProperties(Math,MathShims),defineProperty(Math,"sinh",MathShims.sinh,Math.sinh(710)===1/0),defineProperty(Math,"cosh",MathShims.cosh,Math.cosh(710)===1/0),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(1e300)===1/0),defineProperty(Math,"atanh",MathShims.atanh,0===Math.atanh(1e-300)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"acosh",MathShims.acosh,!withinULPDistance(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),defineProperty(Math,"cbrt",MathShims.cbrt,!withinULPDistance(Math.cbrt(1e-300),1e-100)),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),roundDoesNotIncreaseIntegers=[inverseEpsilon+1,2*inverseEpsilon-1].every(function(num){return Math.round(num)===num});defineProperty(Math,"round",function round(x){var floor=_floor(x),ceil=-1===floor?-0:floor+1;return x-floor<.5?floor:ceil},!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",function imul(x,y){return ES.Call(origImul,Math,arguments)});var count,thenable,PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var makeZeroTimeout,PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this;if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C(function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject}),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[];return window.addEventListener("message",function(event){if(event.source===window&&"zero-timeout-message"===event.data){if(event.stopPropagation(),0===timeouts.length)return;var fn=_shift(timeouts);fn()}},!0),function(fn){_push(timeouts,fn),window.postMessage("zero-timeout-message","*")}});var P,pr,Promise$prototype,Promise$prototype$then,PromiseShim,enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:(P=globals.Promise,(pr=P&&P.resolve&&P.resolve())&&function(task){return pr.then(task)}||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)})),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue(function(){promiseReactionJob(handler,capability,argument)})},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+0],_promise[idx+2],value),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=value,_promise.state=1,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+1],_promise[idx+2],reason),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=reason,_promise.state=2,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue(function(){promiseResolveThenableJob(promise,resolution,then)})}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise=PromiseShim=function Promise(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){if(!alreadyCalled&&(alreadyCalled=!0,values[index]=x,0==--remaining.count)){var resolve=capability.resolve;resolve(values)}}};return defineProperties(Promise,{all:function all(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return iterator=ES.GetIterator(iterable),function(iteratorRecord,C,resultCapability){for(var next,nextValue,it=iteratorRecord.iterator,values=[],remaining={count:1},index=0;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}if(0==--remaining.count){var resolve=resultCapability.resolve;resolve(values)}return resultCapability.promise}(iteratorRecord={iterator:iterator,done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}var reject=capability.reject;return reject(exception),capability.promise}},race:function race(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var iterator,iteratorRecord,capability=new PromiseCapability(C);try{return iterator=ES.GetIterator(iterable),function(iteratorRecord,C,resultCapability){for(var next,nextValue,nextPromise,it=iteratorRecord.iterator;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise}(iteratorRecord={iterator:iterator,done:!1},C,capability)}catch(e){var exception=e;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}var reject=capability.reject;return reject(exception),capability.promise}},reject:function reject(reason){if(!ES.TypeIsObject(this))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(this),rejectFunc=capability.reject;return rejectFunc(reason),capability.promise},resolve:function resolve(v){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)){var constructor=v.constructor;if(constructor===C)return v}var capability=new PromiseCapability(C),resolveFunc=capability.resolve;return resolveFunc(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function then(onFulfilled,onRejected){if(!ES.IsPromise(this))throw new TypeError("not a promise");var resultCapability,C=ES.SpeciesConstructor(this,Promise),returnValueIsIgnored=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY;resultCapability=returnValueIsIgnored&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var value,fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=this._promise;if(0===_promise.state){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+0]=fulfillReactionHandler,_promise[idx+1]=rejectReactionHandler,_promise[idx+2]=resultCapability}_promise.reactionLength+=1}else if(1===_promise.state)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(2!==_promise.state)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}();if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,function(S){return S.resolve(42).then(function(){})instanceof S}),promiseIgnoresNonFunctionThenCallbacks=!throwsError(function(){return globals.Promise.reject(42).then(null,5).then(null,noop)}),promiseRequiresObjectContext=throwsError(function(){return globals.Promise.call(3,noop)}),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,function(){}),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows(function(){return!!BadResolverPromise.all([1,2])});if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",function all(iterable){return ES.Call(origAll,this,arguments)})}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",function race(iterable){return ES.Call(origRace,this,arguments)})}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",function resolve(x){return ES.Call(origResolve,this,arguments)})}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",function reject(r){return ES.Call(origReject,this,arguments)})}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var s,m,testOrder=function(a){var b=keys(_reduce(a,function(o,k){return o[k]=!0,o},{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]);if(supportsDescriptors){var fastkey=function fastkey(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function emptyObject(){return Object.create?Object.create(null):{}},addIterableToMap=function addIterableToMap(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])});else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,function(value,key){map.set(key,value)});else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function addIterableToSet(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,function(value){set.add(value)});else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,function(value){set.add(value)});else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function MapEntry(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function isRemoved(){return this.key===empty};var Map$prototype,requireMapSlot=function requireMapSlot(map,method){if(!ES.TypeIsObject(map)||!function isMap(map){return!!map._es6map}(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function MapIterator(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind};addIterator(MapIterator.prototype={isMapIterator:!0,next:function next(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var result,i=this.i,kind=this.kind,head=this.head;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}});var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Value.getter(Map$prototype=MapShim.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),defineProperties(Map$prototype,{get:function get(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function has(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function set(key,value){requireMapSlot(this,"set");var entry,head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function clear(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function keys(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function values(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function entries(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function forEach(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var Set$prototype,requireSetSlot=function requireSetSlot(set,method){if(!ES.TypeIsObject(set)||!function isSet(set){return set._es6set&&void 0!==set._storage}(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var ensureMap=function ensureMap(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),function(key){var k=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}}(key);m.set(k,k)}),set["[[SetData]]"]=m}set._storage=null};Value.getter(SetShim.prototype,"size",function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)}),defineProperties(SetShim.prototype,{has:function has(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function add(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function clear(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function values(){return requireSetSlot(this,"values"),ensureMap(this),new SetIterator(this["[[SetData]]"].values())},entries:function entries(){return requireSetSlot(this,"entries"),ensureMap(this),new SetIterator(this["[[SetData]]"].entries())},forEach:function forEach(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach(function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)})}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values);var SetIterator=function SetIterator(it){this.it=it};return SetIterator.prototype={isSetIterator:!0,next:function next(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},addIterator(SetIterator.prototype),SetShim}()},isGoogleTranslate=globals.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(isGoogleTranslate&&(globals.Set=collectionShims.Set),globals.Map||globals.Set){var mapAcceptsArguments=valueOrFalseIfThrows(function(){return 2===new Map([[1,2]]).get(1)});mapAcceptsArguments||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",function set(k,v){return _call(origMapSet,this,0===k?0:k,v),this}),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function get(k){return _call(origMapGet,this,0===k?0:k)},has:function has(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function add(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function has(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function SetDelete(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,function(M){var m=new M([]);return m.set(42,42),m instanceof M}),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,function(S){var s=new S([]);return s.add(42,42),s instanceof S}),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows(function(){return newMap.keys().next().done});if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",function has(key){return _call(anonymousSetHas,this,key)})}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function throwUnlessTargetIsObject(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function apply(){return ES.Call(ES.Call,null,arguments)},construct:function construct(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function deleteProperty(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function has(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function ownKeys(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function ConvertExceptionToBoolean(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function isExtensible(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function preventExtensions(target){return throwUnlessTargetIsObject(target),callAndCatchException(function(){return Object.preventExtensions(target)})}}),supportsDescriptors){var internalGet=function get(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function set(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in desc){if(!desc.writable)return!1;if(!ES.TypeIsObject(receiver))return!1;var existingDesc=Object.getOwnPropertyDescriptor(receiver,key);return existingDesc?Reflect.defineProperty(receiver,key,{value:value}):Reflect.defineProperty(receiver,key,{value:value,writable:!0,enumerable:!0,configurable:!0})}return!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function defineProperty(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException(function(){return Object.defineProperty(target,propertyKey,attributes)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function get(target,key){throwUnlessTargetIsObject(target);var receiver=arguments.length>2?arguments[2]:target;return internalGet(target,key,receiver)},set:function set(target,key,value){throwUnlessTargetIsObject(target);var receiver=arguments.length>3?arguments[3]:target;return internalSet(target,key,value,receiver)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function getPrototypeOf(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}Object.setPrototypeOf&&ReflectShims.getPrototypeOf&&Object.assign(ReflectShims,{setPrototypeOf:function setPrototypeOf(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&!function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1}(object,proto)&&(Object.setPrototypeOf(object,proto),!0)}}),Object.keys(ReflectShims).forEach(function(key){!function(key,shim){if(ES.IsCallable(globals.Reflect[key])){var acceptsPrimitives=valueOrFalseIfThrows(function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0});acceptsPrimitives&&overrideNative(globals.Reflect,key,shim)}else defineProperty(globals.Reflect,key,shim)}(key,ReflectShims[key])});var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",function getPrototypeOf(target){return _call(originalReflectGetProto,globals.Reflect,target)}),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows(function(){return globals.Reflect.setPrototypeOf(1,{}),!0})&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows(function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible})||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows(function(){var F=function F(){};return globals.Reflect.construct(function(){},[],F)instanceof F})||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString;overrideNative(Date.prototype,"toString",function toString(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)})}var stringHTMLshims={anchor:function anchor(name){return ES.CreateHTML(this,"a","name",name)},big:function big(){return ES.CreateHTML(this,"big","","")},blink:function blink(){return ES.CreateHTML(this,"blink","","")},bold:function bold(){return ES.CreateHTML(this,"b","","")},fixed:function fixed(){return ES.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function fontsize(size){return ES.CreateHTML(this,"font","size",size)},italics:function italics(){return ES.CreateHTML(this,"i","","")},link:function link(url){return ES.CreateHTML(this,"a","href",url)},small:function small(){return ES.CreateHTML(this,"small","","")},strike:function strike(){return ES.CreateHTML(this,"strike","","")},sub:function sub(){return ES.CreateHTML(this,"sub","","")},sup:function sub(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])});var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows(function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])});if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",function stringify(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null;args.push(function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue})}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}})}return globals})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this,__webpack_require__(21),__webpack_require__(54))},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(27).supportsDescriptors,functionsHaveNames=__webpack_require__(196),getPolyfill=__webpack_require__(307),defineProperty=Object.defineProperty,TypeErr=TypeError;module.exports=function shimName(){var polyfill=getPolyfill();if(functionsHaveNames)return polyfill;if(!supportsDescriptors)throw new TypeErr("Shimming Function.prototype.name support requires ES5 property descriptor support.");var functionProto=Function.prototype;return defineProperty(functionProto,"name",{configurable:!0,enumerable:!1,get:function(){var name=polyfill.call(this);return this!==functionProto&&defineProperty(this,"name",{configurable:!0,enumerable:!1,value:name,writable:!1}),name}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__(195),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function keys(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(308);module.exports=function getPolyfill(){return implementation}},function(module,exports,__webpack_require__){"use strict";var isCallable=__webpack_require__(117),functionsHaveNames=__webpack_require__(196),bind=__webpack_require__(45),functionToString=bind.call(Function.call,Function.prototype.toString),stringMatch=bind.call(Function.call,String.prototype.match),classRegex=/^class /,regex=/\s*function\s+([^(\s]*)\s*/,functionProto=Function.prototype;module.exports=function getName(){if(!function isClassConstructor(fn){if(isCallable(fn))return!1;if("function"!=typeof fn)return!1;try{return!!stringMatch(functionToString(fn),classRegex)}catch(e){}return!1}(this)&&!isCallable(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(functionsHaveNames)return this.name;if(this===functionProto)return"";var str=functionToString(this),match=stringMatch(str,regex);return match&&match[1]}},function(module,exports,__webpack_require__){"use strict";var slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=slice.call(arguments,1),boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))}),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(311)(),__webpack_require__(321)},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),getPolyfill=__webpack_require__(312);module.exports=function shimArrayPrototypeIncludes(){var polyfill=getPolyfill();return define(Array.prototype,{includes:polyfill},{includes:function(){return Array.prototype.includes!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(313);module.exports=function getPolyfill(){return Array.prototype.includes||implementation}},function(module,exports,__webpack_require__){"use strict";(function(global){var ES=__webpack_require__(314),$isNaN=Number.isNaN||function isNaN(a){return a!=a},$isFinite=Number.isFinite||function isFinite(n){return"number"==typeof n&&global.isFinite(n)},indexOf=Array.prototype.indexOf;module.exports=function includes(searchElement){var fromIndex=arguments.length>1?ES.ToInteger(arguments[1]):0;if(indexOf&&!$isNaN(searchElement)&&$isFinite(fromIndex)&&void 0!==searchElement)return indexOf.apply(this,arguments)>-1;var O=ES.ToObject(this),length=ES.ToLength(O.length);if(0===length)return!1;for(var k=fromIndex>=0?fromIndex:Math.max(0,length+fromIndex);k<length;){if(ES.SameValueZero(searchElement,O[k]))return!0;k+=1}return!1}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(153)},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(316)},function(module,exports,__webpack_require__){"use strict";var hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,isPrimitive=__webpack_require__(197),isCallable=__webpack_require__(117),isDate=__webpack_require__(317),isSymbol=__webpack_require__(198);module.exports=function ToPrimitive(input){if(isPrimitive(input))return input;var exoticToPrim,hint="default";if(arguments.length>1&&(arguments[1]===String?hint="string":arguments[1]===Number&&(hint="number")),hasSymbols&&(Symbol.toPrimitive?exoticToPrim=function GetMethod(O,P){var func=O[P];if(null!=func){if(!isCallable(func))throw new TypeError(func+" returned for property "+P+" of object "+O+" is not a function");return func}}(input,Symbol.toPrimitive):isSymbol(input)&&(exoticToPrim=Symbol.prototype.valueOf)),void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(isPrimitive(result))return result;throw new TypeError("unable to convert exotic object to primitive")}return"default"===hint&&(isDate(input)||isSymbol(input))&&(hint="string"),function OrdinaryToPrimitive(O,hint){if(null==O)throw new TypeError("Cannot call method on "+O);if("string"!=typeof hint||"number"!==hint&&"string"!==hint)throw new TypeError('hint must be "string" or "number"');var method,result,i,methodNames="string"===hint?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methodNames.length;++i)if(method=O[methodNames[i]],isCallable(method)&&(result=method.call(O),isPrimitive(result)))return result;throw new TypeError("No default value")}(input,"default"===hint?"number":hint)}},function(module,exports,__webpack_require__){"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=function isDateObject(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function tryDateObject(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},function(module,exports,__webpack_require__){"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},function(module,exports){module.exports=function isPrimitive(value){return null===value||"function"!=typeof value&&"object"!=typeof value}},function(module,exports,__webpack_require__){"use strict";var toStr=Object.prototype.toString,isPrimitive=__webpack_require__(197),isCallable=__webpack_require__(117),ES5internalSlots___DefaultValue__=function(O){var actualHint;if((actualHint=arguments.length>1?arguments[1]:"[object Date]"===toStr.call(O)?String:Number)===String||actualHint===Number){var value,i,methods=actualHint===String?["toString","valueOf"]:["valueOf","toString"];for(i=0;i<methods.length;++i)if(isCallable(O[methods[i]])&&(value=O[methods[i]](),isPrimitive(value)))return value;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};module.exports=function ToPrimitive(input){return isPrimitive(input)?input:arguments.length>1?ES5internalSlots___DefaultValue__(input,arguments[1]):ES5internalSlots___DefaultValue__(input)}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(322)(),__webpack_require__(325)(),__webpack_require__(328)(),__webpack_require__(331)(),__webpack_require__(334)(),__webpack_require__(337)},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(323),define=__webpack_require__(27);module.exports=function shimValues(){var polyfill=getPolyfill();return define(Object,{values:polyfill},{values:function testValues(){return Object.values!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(324);module.exports=function getPolyfill(){return"function"==typeof Object.values?Object.values:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(86),has=__webpack_require__(85),isEnumerable=__webpack_require__(45).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function values(O){var obj=ES.RequireObjectCoercible(O),vals=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&vals.push(obj[key]);return vals}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(326),define=__webpack_require__(27);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{entries:polyfill},{entries:function testEntries(){return Object.entries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(327);module.exports=function getPolyfill(){return"function"==typeof Object.entries?Object.entries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(86),has=__webpack_require__(85),isEnumerable=__webpack_require__(45).call(Function.call,Object.prototype.propertyIsEnumerable);module.exports=function entries(O){var obj=ES.RequireObjectCoercible(O),entrys=[];for(var key in obj)has(obj,key)&&isEnumerable(obj,key)&&entrys.push([key,obj[key]]);return entrys}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(329),define=__webpack_require__(27);module.exports=function shimPadStart(){var polyfill=getPolyfill();return define(String.prototype,{padStart:polyfill},{padStart:function(){return String.prototype.padStart!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(330);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(45),ES=__webpack_require__(86),slice=bind.call(Function.call,String.prototype.slice);module.exports=function padStart(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}return(filler.length>fillLen?slice(filler,0,fillLen):filler)+S}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(332),define=__webpack_require__(27);module.exports=function shimPadEnd(){var polyfill=getPolyfill();return define(String.prototype,{padEnd:polyfill},{padEnd:function(){return String.prototype.padEnd!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(333);module.exports=function getPolyfill(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:implementation}},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(45),ES=__webpack_require__(86),slice=bind.call(Function.call,String.prototype.slice);module.exports=function padEnd(maxLength){var fillString,O=ES.RequireObjectCoercible(this),S=ES.ToString(O),stringLength=ES.ToLength(S.length);arguments.length>1&&(fillString=arguments[1]);var filler=void 0===fillString?"":ES.ToString(fillString);""===filler&&(filler=" ");var intMaxLength=ES.ToLength(maxLength);if(intMaxLength<=stringLength)return S;for(var fillLen=intMaxLength-stringLength;filler.length<fillLen;){var fLen=filler.length,remainingCodeUnits=fillLen-fLen;filler+=fLen>remainingCodeUnits?slice(filler,0,remainingCodeUnits):filler}return S+(filler.length>fillLen?slice(filler,0,fillLen):filler)}},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(335),define=__webpack_require__(27);module.exports=function shimGetOwnPropertyDescriptors(){var polyfill=getPolyfill();return define(Object,{getOwnPropertyDescriptors:polyfill},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(336);module.exports=function getPolyfill(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(86),defineProperty=Object.defineProperty,getDescriptor=Object.getOwnPropertyDescriptor,getOwnNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,concat=Function.call.bind(Array.prototype.concat),reduce=Function.call.bind(Array.prototype.reduce),getAll=getSymbols?function(obj){return concat(getOwnNames(obj),getSymbols(obj))}:getOwnNames,isES5=ES.IsCallable(getDescriptor)&&ES.IsCallable(getOwnNames);module.exports=function getOwnPropertyDescriptors(value){if(ES.RequireObjectCoercible(value),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var O=ES.ToObject(value);return reduce(getAll(O),function(acc,key){var descriptor=getDescriptor(O,key);return void 0!==descriptor&&function put(obj,prop,val){defineProperty&&prop in obj?defineProperty(obj,prop,{configurable:!0,enumerable:!0,value:val,writable:!0}):obj[prop]=val}(acc,key,descriptor),acc},{})}},function(module,exports,__webpack_require__){"use strict";"function"==typeof Promise&&__webpack_require__(338),__webpack_require__(342)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(339)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(155),getPolyfill=__webpack_require__(340),define=__webpack_require__(27);module.exports=function shimPromiseFinally(){requirePromise();var polyfill=getPolyfill();return define(Promise.prototype,{finally:polyfill},{finally:function testFinally(){return Promise.prototype.finally!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(155),implementation=__webpack_require__(341);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(155)();var ES=__webpack_require__(86),bind=__webpack_require__(45),promiseResolve=function PromiseResolve(C,value){return new C(function(resolve){resolve(value)})},OriginalPromise=Promise,then=bind.call(Function.call,OriginalPromise.prototype.then),promiseFinally=function finally_(onFinally){then(this,null,function(){});var C=ES.SpeciesConstructor(this,OriginalPromise),thenFinally=onFinally,catchFinally=onFinally;return ES.IsCallable(onFinally)&&(thenFinally=function CreateThenFinally(C,onFinally){return function(value){var result=onFinally();return promiseResolve(C,result).then(function(){return value})}}(C,onFinally),catchFinally=function CreateCatchFinally(C,onFinally){return function(reason){var result=onFinally();return promiseResolve(C,result).then(function(){throw reason})}}(C,onFinally)),this.then(thenFinally,catchFinally)};if(Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(promiseFinally,"name");descriptor&&descriptor.configurable&&Object.defineProperty(promiseFinally,"name",{configurable:!0,value:"finally"})}module.exports=promiseFinally},function(module,exports,__webpack_require__){"use strict";__webpack_require__(343),__webpack_require__(347),__webpack_require__(351),__webpack_require__(355),__webpack_require__(359)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(344)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),getPolyfill=__webpack_require__(345);module.exports=function shimFlat(){var polyfill=getPolyfill();return define(Array.prototype,{flat:polyfill},{flat:function(){return Array.prototype.flat!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(346);module.exports=function getPolyfill(){return Array.prototype.flat||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(101),MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;module.exports=function flat(){var O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length")),depthNum=1;arguments.length>0&&void 0!==arguments[0]&&(depthNum=ES.ToInteger(arguments[0]));var A=ES.ArraySpeciesCreate(O,0);return function FlattenIntoArray(target,source,sourceLen,start,depth){for(var targetIndex=start,sourceIndex=0;sourceIndex<sourceLen;){var P=ES.ToString(sourceIndex);if(ES.HasProperty(source,P)){var element=ES.Get(source,P),shouldFlatten=!1;if(depth>0&&(shouldFlatten=ES.IsArray(element)),shouldFlatten)targetIndex=FlattenIntoArray(target,element,ES.ToLength(ES.Get(element,"length")),targetIndex,depth-1);else{if(targetIndex>=MAX_SAFE_INTEGER)throw new TypeError("index too large");ES.CreateDataPropertyOrThrow(target,ES.ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex}(A,O,sourceLen,0,depthNum),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(348)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),getPolyfill=__webpack_require__(349);module.exports=function shimFlatMap(){var polyfill=getPolyfill();return define(Array.prototype,{flatMap:polyfill},{flatMap:function(){return Array.prototype.flatMap!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(350);module.exports=function getPolyfill(){return Array.prototype.flatMap||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(101),MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;module.exports=function flatMap(callbackfn){var T,O=ES.ToObject(this),sourceLen=ES.ToLength(ES.Get(O,"length"));if(!ES.IsCallable(callbackfn))throw new TypeError("callback must be a function");arguments.length>1&&(T=arguments[1]);var A=ES.ArraySpeciesCreate(O,0);return function FlattenIntoArray(target,source,sourceLen,start,depth){var mapperFunction,targetIndex=start,sourceIndex=0;for(arguments.length>5&&(mapperFunction=arguments[5]);sourceIndex<sourceLen;){var P=ES.ToString(sourceIndex);if(ES.HasProperty(source,P)){var element=ES.Get(source,P);if(void 0!==mapperFunction){if(arguments.length<=6)throw new TypeError("Assertion failed: thisArg is required when mapperFunction is provided");element=ES.Call(mapperFunction,arguments[6],[element,sourceIndex,source])}var shouldFlatten=!1;if(depth>0&&(shouldFlatten=ES.IsArray(element)),shouldFlatten)targetIndex=FlattenIntoArray(target,element,ES.ToLength(ES.Get(element,"length")),targetIndex,depth-1);else{if(targetIndex>=MAX_SAFE_INTEGER)throw new TypeError("index too large");ES.CreateDataPropertyOrThrow(target,ES.ToString(targetIndex),element),targetIndex+=1}}sourceIndex+=1}return targetIndex}(A,O,sourceLen,0,1,callbackfn,T),A}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(352)()},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(73)(),polyfill=__webpack_require__(353),getInferredName=__webpack_require__(207),gOPD=Object.getOwnPropertyDescriptor,dP=Object.defineProperty,setProto=Object.setPrototypeOf,define=function defineGetter(getter){dP(Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:getter})};module.exports=function shimSymbolDescription(){if(!hasSymbols)return!1;var desc=gOPD(Symbol.prototype,"description"),getter=polyfill(),isMissing=!desc||"function"!=typeof desc.get,isBroken=!isMissing&&(void 0!==Symbol().description||""!==Symbol("").description);if(isMissing||isBroken){if(!getInferredName)return function shimGlobalSymbol(getter){var origSym=Function.apply.bind(Symbol),emptyStrings=Object.create?Object.create(null):{},SymNew=function Symbol(){var sym=origSym(this,arguments);return arguments.length>0&&""===arguments[0]&&(emptyStrings[sym]=!0),sym};SymNew.prototype=Symbol.prototype,setProto(SymNew,Symbol),Symbol=SymNew;var boundGetter=Function.call.bind(getter),wrappedGetter=function description(){var symbolDescription=boundGetter(this);return emptyStrings[this]?"":symbolDescription};return define(wrappedGetter),wrappedGetter}(getter);define(getter)}return getter}},function(module,exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(73)(),implementation=__webpack_require__(354),gOPD=Object.getOwnPropertyDescriptor;module.exports=function descriptionPolyfill(){if(!hasSymbols||"function"!=typeof gOPD)return null;var desc=gOPD(Symbol.prototype,"description");return desc&&"function"==typeof desc.get?void 0!==desc.get.call(Symbol())||""!==desc.get.call(Symbol())||"a"!==desc.get.call(Symbol("a"))?implementation:desc.get:implementation}},function(module,exports,__webpack_require__){"use strict";var symToStr=__webpack_require__(73)()?Function.call.bind(Symbol.prototype.toString):null,getInferredName=__webpack_require__(207);module.exports=function description(){var str=symToStr(this);if(getInferredName){var name=getInferredName(this);if(""===name)return;return name.slice(1,-1)}var desc=str.slice(7,-1);if(desc)return desc}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(356)()},function(module,exports,__webpack_require__){"use strict";var getPolyfill=__webpack_require__(357),define=__webpack_require__(27);module.exports=function shimEntries(){var polyfill=getPolyfill();return define(Object,{fromEntries:polyfill},{fromEntries:function testEntries(){return Object.fromEntries!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(358);module.exports=function getPolyfill(){return"function"==typeof Object.fromEntries?Object.fromEntries:implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(101),ThrowCompletion=function Throw(error){throw error},hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");module.exports=function fromEntries(iterable){ES.RequireObjectCoercible(iterable);var obj={};if(!hasSymbols){if(!ES.IsArray(iterable))throw new TypeError("this environment lacks native Symbols, and can not support non-Array iterables");return function assign(obj,entries){for(var i=0;i<entries.length;++i){var entry=entries[i];if("Object"!==ES.Type(entry))throw new TypeError("iterator returned a non-object; entry expected");var key=ES.Get(entry,"0"),value=ES.Get(entry,"1"),propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(obj,propertyKey,value)}}(obj,iterable),obj}for(var iter=ES.GetIterator(iterable);;){var next=ES.IteratorStep(iter);if(!1===next)return obj;var nextItem=ES.IteratorValue(next);if("Object"!==ES.Type(nextItem)){var error=new TypeError("iterator returned a non-object; entry expected");return ES.IteratorClose(iter,ThrowCompletion(error))}try{var key=ES.Get(nextItem,"0"),value=ES.Get(nextItem,"1"),propertyKey=ES.ToPropertyKey(key);ES.CreateDataPropertyOrThrow(obj,propertyKey,value)}catch(e){return ES.IteratorClose(iter,ThrowCompletion(e))}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(360),__webpack_require__(368),__webpack_require__(372)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(361)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),hasSymbols=__webpack_require__(73)(),getPolyfill=__webpack_require__(362),regexMatchAll=__webpack_require__(209),defineP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor;module.exports=function shimMatchAll(){var polyfill=getPolyfill();if(define(String.prototype,{matchAll:polyfill},{matchAll:function(){return String.prototype.matchAll!==polyfill}}),hasSymbols){var symbol=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(define(Symbol,{matchAll:symbol},{matchAll:function(){return Symbol.matchAll!==symbol}}),defineP&&gOPD){var desc=gOPD(Symbol,symbol);desc&&!desc.configurable||defineP(Symbol,symbol,{configurable:!1,enumerable:!1,value:symbol,writable:!1})}var func={};func[symbol]=RegExp.prototype[symbol]||regexMatchAll;var predicate={};predicate[symbol]=function(){return RegExp.prototype[symbol]!==regexMatchAll},define(RegExp.prototype,func,predicate)}return polyfill}},function(module,exports,__webpack_require__){"use strict";var implementation=__webpack_require__(363);module.exports=function getPolyfill(){return String.prototype.matchAll||implementation}},function(module,exports,__webpack_require__){"use strict";var ES=__webpack_require__(156),hasSymbols=__webpack_require__(73)(),regexMatchAll=__webpack_require__(209);module.exports=function matchAll(regexp){var matcher,O=ES.RequireObjectCoercible(this);if(null!=regexp&&(hasSymbols&&"symbol"==typeof Symbol.matchAll?matcher=ES.GetMethod(regexp,Symbol.matchAll):ES.IsRegExp(regexp)&&(matcher=regexMatchAll),void 0!==matcher))return ES.Call(matcher,regexp,[O]);var S=ES.ToString(O),rx=new RegExp(regexp,"g");return hasSymbols&&"symbol"==typeof Symbol.matchAll?ES.Invoke(rx,Symbol.matchAll,[S]):ES.Call(regexMatchAll,rx,[S])}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),implementation=__webpack_require__(210),getPolyfill=__webpack_require__(211),shim=__webpack_require__(365),flagsBound=Function.call.bind(implementation);define(flagsBound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=flagsBound},function(module,exports,__webpack_require__){"use strict";var supportsDescriptors=__webpack_require__(27).supportsDescriptors,getPolyfill=__webpack_require__(211),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function shimFlags(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),ES=__webpack_require__(156),GetIntrinsic=__webpack_require__(74),hasSymbols=__webpack_require__(73)(),hidden=__webpack_require__(367)(),RegExpStringIterator=function RegExpStringIterator(R,S,global,fullUnicode){if("String"!==ES.Type(S))throw new TypeError("S must be a string");if("Boolean"!==ES.Type(global))throw new TypeError("global must be a boolean");if("Boolean"!==ES.Type(fullUnicode))throw new TypeError("fullUnicode must be a boolean");hidden.set(this,"[[IteratingRegExp]]",R),hidden.set(this,"[[IteratedString]]",S),hidden.set(this,"[[Global]]",global),hidden.set(this,"[[Unicode]]",fullUnicode),hidden.set(this,"[[Done]]",!1)},IteratorPrototype=GetIntrinsic("%IteratorPrototype%",!0);if(IteratorPrototype&&(RegExpStringIterator.prototype=ES.ObjectCreate(IteratorPrototype)),define(RegExpStringIterator.prototype,{next:function next(){var O=this;if("Object"!==ES.Type(O))throw new TypeError("receiver must be an object");if(!(O instanceof RegExpStringIterator&&hidden.has(O,"[[IteratingRegExp]]")&&hidden.has(O,"[[IteratedString]]")&&hidden.has(O,"[[Global]]")&&hidden.has(O,"[[Unicode]]")&&hidden.has(O,"[[Done]]")))throw new TypeError('"this" value must be a RegExpStringIterator instance');if(hidden.get(O,"[[Done]]"))return ES.CreateIterResultObject(void 0,!0);var R=hidden.get(O,"[[IteratingRegExp]]"),S=hidden.get(O,"[[IteratedString]]"),global=hidden.get(O,"[[Global]]"),fullUnicode=hidden.get(O,"[[Unicode]]"),match=ES.RegExpExec(R,S);if(null===match)return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(void 0,!0);if(global){if(""===ES.ToString(ES.Get(match,"0"))){var thisIndex=ES.ToLength(ES.Get(R,"lastIndex")),nextIndex=ES.AdvanceStringIndex(S,thisIndex,fullUnicode);ES.Set(R,"lastIndex",nextIndex,!0)}return ES.CreateIterResultObject(match,!1)}return hidden.set(O,"[[Done]]",!0),ES.CreateIterResultObject(match,!1)}}),hasSymbols){var defineP=Object.defineProperty;if(Symbol.toStringTag&&(defineP?defineP(RegExpStringIterator.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!1,value:"RegExp String Iterator",writable:!1}):RegExpStringIterator.prototype[Symbol.toStringTag]="RegExp String Iterator"),!IteratorPrototype&&Symbol.iterator){var func={};func[Symbol.iterator]=RegExpStringIterator.prototype[Symbol.iterator]||function SymbolIterator(){return this};var predicate={};predicate[Symbol.iterator]=function(){return RegExpStringIterator.prototype[Symbol.iterator]!==func[Symbol.iterator]},define(RegExpStringIterator.prototype,func,predicate)}}module.exports=RegExpStringIterator},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27);module.exports=function getHiddenKeyManager(){var symbolCache={},makeKey=function key(prop){return symbolCache["$"+prop]?symbolCache["$"+prop]:"function"==typeof Symbol?(symbolCache["$"+prop]=Symbol(prop),symbolCache["$"+prop]):"___ "+prop+" ___"};return{get:function get(obj,prop){return obj[makeKey(prop)]},has:function has(obj,prop){return makeKey(prop)in obj},set:function set(obj,prop,value){var key=makeKey(prop);define.supportsDescriptors?Object.defineProperty(obj,key,{configurable:!1,enumerable:!1,value:value,writable:!0}):obj[key]=value}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(369)()},function(module,exports,__webpack_require__){"use strict";var define=__webpack_require__(27),getPolyfill=__webpack_require__(370);module.exports=function shimGlobal(){var polyfill=getPolyfill();if(define.supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(polyfill,"globalThis");(!descriptor||descriptor.configurable&&(descriptor.enumerable||descriptor.writable||globalThis!==polyfill))&&Object.defineProperty(polyfill,"globalThis",{configurable:!0,enumerable:!1,value:polyfill,writable:!1})}else"object"==typeof globalThis&&globalThis===polyfill||(polyfill.globalThis=polyfill);return polyfill}},function(module,exports,__webpack_require__){"use strict";(function(global){var implementation=__webpack_require__(371);module.exports=function getPolyfill(){return"object"==typeof global&&global&&global.Math===Math&&global.Array===Array?global:implementation}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";(function(global){"undefined"!=typeof self?module.exports=self:"undefined"!=typeof window?module.exports=window:module.exports=void 0!==global?global:Function("return this")()}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(373)()},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(157),getPolyfill=__webpack_require__(374),define=__webpack_require__(27);module.exports=function shimAllSettled(){requirePromise();var polyfill=getPolyfill();return define(Promise,{allSettled:polyfill},{allSettled:function testAllSettled(){return Promise.allSettled!==polyfill}}),polyfill}},function(module,exports,__webpack_require__){"use strict";var requirePromise=__webpack_require__(157),implementation=__webpack_require__(375);module.exports=function getPolyfill(){return requirePromise(),"function"==typeof Promise.allSettled?Promise.allSettled:implementation}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(157)();var ES=__webpack_require__(208),getIntrinsic=__webpack_require__(74),bind=__webpack_require__(45),all=bind.call(Function.call,getIntrinsic("%Promise_all%")),reject=bind.call(Function.call,getIntrinsic("%Promise_reject%"));module.exports=function allSettled(iterable){var C=this;if("Object"!==ES.Type(C))throw new TypeError("`this` value must be an object");return all(C,Array.from(iterable,function(item){var itemPromise=ES.PromiseResolve(C,item);try{return itemPromise.then(function(value){return{status:"fulfilled",value:value}},function(reason){return{status:"rejected",reason:reason}})}catch(e){return reject(C,e)}}))}},function(module,exports,__webpack_require__){__webpack_require__(63),__webpack_require__(55),__webpack_require__(78),__webpack_require__(381),module.exports=__webpack_require__(65).Symbol},function(module,exports,__webpack_require__){module.exports=__webpack_require__(119)("native-function-to-string",Function.toString)},function(module,exports,__webpack_require__){var getKeys=__webpack_require__(75),gOPS=__webpack_require__(162),pIE=__webpack_require__(107);module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(122),max=Math.max,min=Math.min;module.exports=function(index,length){return(index=toInteger(index))<0?max(index+length,0):min(index,length)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(76),gOPN=__webpack_require__(164).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function getOwnPropertyNames(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}}(it):gOPN(toIObject(it))}},function(module,exports,__webpack_require__){__webpack_require__(159)("observable")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(49).window.STORYBOOK_REACT_CLASSES={}},,function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceReRender=exports.configure=exports.raw=exports.getStorybook=exports.clearDecorators=exports.addParameters=exports.addDecorator=exports.setAddon=exports.storiesOf=void 0;var _client=__webpack_require__(385);__webpack_require__(429);var _render=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(430));var _start=(0,_client.start)(_render.default),clientApi=_start.clientApi,configApi=_start.configApi,forceReRender=_start.forceReRender;exports.forceReRender=forceReRender;var storiesOf=clientApi.storiesOf,setAddon=clientApi.setAddon,addDecorator=clientApi.addDecorator,addParameters=clientApi.addParameters,clearDecorators=clientApi.clearDecorators,getStorybook=clientApi.getStorybook,raw=clientApi.raw;exports.raw=raw,exports.getStorybook=getStorybook,exports.clearDecorators=clearDecorators,exports.addParameters=addParameters,exports.addDecorator=addDecorator,exports.setAddon=setAddon,exports.storiesOf=storiesOf;var configure=configApi.configure;exports.configure=configure},function(module,exports,__webpack_require__){module.exports=__webpack_require__(386).default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(387)).default;exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _clientApi=__webpack_require__(219),_utils=__webpack_require__(127);var _default={start:function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(424)).default,toId:_utils.toId,ClientApi:_clientApi.ClientApi,ConfigApi:_clientApi.ConfigApi,StoryStore:_clientApi.StoryStore};exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.defaultDecorateStory=void 0,__webpack_require__(124),__webpack_require__(167),__webpack_require__(169),__webpack_require__(171),__webpack_require__(78),__webpack_require__(63),__webpack_require__(125),__webpack_require__(172),__webpack_require__(110),__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(111),__webpack_require__(80),__webpack_require__(173),__webpack_require__(397),__webpack_require__(89),__webpack_require__(90);var _isPlainObject=_interopRequireDefault(__webpack_require__(398)),_clientLogger=__webpack_require__(91),_addons=_interopRequireDefault(__webpack_require__(112)),_coreEvents=_interopRequireDefault(__webpack_require__(92)),_utils=__webpack_require__(127),_lodash=_interopRequireDefault(__webpack_require__(407)),_lodash2=_interopRequireDefault(__webpack_require__(408)),_subscriptions_store=_interopRequireDefault(__webpack_require__(234));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var defaultDecorateStory=function defaultDecorateStory(storyFn,decorators){return decorators.reduce(function(decorated,decorator){return function(){var context=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return decorator(function(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return decorated(Object.assign(context,p,{parameters:Object.assign(context.parameters||{},p.parameters)},{options:Object.assign(context.options||{},p.options)}))},context)}},storyFn)};exports.defaultDecorateStory=defaultDecorateStory;var metaSubscription=function metaSubscription(){return _addons.default.getChannel().on(_coreEvents.default.REGISTER_SUBSCRIPTION,_subscriptions_store.default.register),function(){return _addons.default.getChannel().removeListener(_coreEvents.default.REGISTER_SUBSCRIPTION,_subscriptions_store.default.register)}},withSubscriptionTracking=function withSubscriptionTracking(storyFn){if(!_addons.default.hasChannel())return storyFn();_subscriptions_store.default.markAllAsUnused(),_subscriptions_store.default.register(metaSubscription);var result=storyFn();return _subscriptions_store.default.clearUnused(),result};exports.default=function ClientApi(){var _this=this,_ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},storyStore=_ref.storyStore,_ref$decorateStory=_ref.decorateStory,decorateStory=void 0===_ref$decorateStory?defaultDecorateStory:_ref$decorateStory;if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClientApi),this.setAddon=function(addon){_this._addons=Object.assign({},_this._addons,addon)},this.getSeparators=function(){return Object.assign({},{hierarchyRootSeparator:"|",hierarchySeparator:/\/|\./},_this._globalParameters.options)},this.addDecorator=function(decorator){_this._globalDecorators.push(decorator)},this.addParameters=function(parameters){Object.assign(_this._globalParameters,parameters)},this.clearDecorators=function(){_this._globalDecorators=[]},this.storiesOf=function(kind,m){if(!kind&&"string"!=typeof kind)throw new Error("Invalid or missing kind provided for stories, should be a string");m||_clientLogger.logger.warn("Missing 'module' parameter for story with a kind of '".concat(kind,"'. It will break your HMR")),m&&m.hot&&m.hot.dispose&&m.hot.dispose(function(){_this._storyStore.remove(),_this._storyStore.removeStoryKind(kind),_this._storyStore.incrementRevision()});var localDecorators=[],localParameters={},hasAdded=!1,api={kind:kind};return Object.keys(_this._addons).forEach(function(name){var addon=_this._addons[name];api[name]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return addon.apply(api,args),api}}),api.add=function(storyName,storyFn,parameters){hasAdded=!0;var _globalParameters=_this._globalParameters,_globalDecorators=_this._globalDecorators,id=(0,_utils.toId)(kind,storyName);if("string"!=typeof storyName)throw new Error('Invalid or missing storyName provided for a "'.concat(kind,'" story.'));m&&m.hot&&m.hot.dispose&&m.hot.dispose(function(){_this._storyStore.remove(id)});var fileName=m&&"string"==typeof m.id?m.id:void 0,_this$getSeparators=_this.getSeparators(),_this$getSeparators$h=_this$getSeparators.hierarchyRootSeparator,hierarchyRootSeparator=void 0===_this$getSeparators$h?"|":_this$getSeparators$h,_this$getSeparators$h2=_this$getSeparators.hierarchySeparator,allParam=[{options:{hierarchyRootSeparator:hierarchyRootSeparator,hierarchySeparator:void 0===_this$getSeparators$h2?/\/|\./:_this$getSeparators$h2}},_globalParameters,localParameters,parameters].reduce(function(acc,p){return p&&Object.entries(p).forEach(function(_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1],existingValue=acc[key];Array.isArray(value)?acc[key]=value:(0,_isPlainObject.default)(value)&&(0,_isPlainObject.default)(existingValue)?acc[key]=function merge(a,b){return(0,_lodash.default)({},a,b,function(objValue,srcValue){return Array.isArray(srcValue)&&Array.isArray(objValue)?(srcValue.forEach(function(s){objValue.find(function(o){return o===s||(0,_lodash2.default)(o,s)})||objValue.push(s)}),objValue):Array.isArray(objValue)?(_clientLogger.logger.log("the types mismatch, picking",objValue),objValue):void 0})}(existingValue,value):acc[key]=value}),acc},{fileName:fileName});return _this._storyStore.addStory({id:id,kind:kind,name:storyName,storyFn:storyFn,parameters:allParam},{applyDecorators:_this._decorateStory,getDecorators:function getDecorators(){return[].concat(_toConsumableArray(allParam.decorators||[]),localDecorators,_toConsumableArray(_globalDecorators),[withSubscriptionTracking])}}),api},api.addDecorator=function(decorator){return hasAdded&&_clientLogger.logger.warn("You have added a decorator to the kind '".concat(kind,"' after a story has already been added.\nIn Storybook 4 this applied the decorator only to subsequent stories. In Storybook 5+ it applies to all stories.\nThis is probably not what you intended. Read more here: https://github.com/storybooks/storybook/blob/master/MIGRATION.md")),localDecorators.push(decorator),api},api.addParameters=function(parameters){return localParameters=Object.assign({},localParameters,parameters),api},api},this.getStorybook=function(){return _this._storyStore.getStoryKinds().map(function(kind){var fileName=_this._storyStore.getStoryFileName(kind),stories=_this._storyStore.getStories(kind).map(function(name){return{name:name,render:_this._storyStore.getStoryWithContext(kind,name)}});return{kind:kind,fileName:fileName,stories:stories}})},this.raw=function(){return _this._storyStore.raw()},this._storyStore=storyStore,this._addons={},this._globalDecorators=[],this._globalParameters={},this._decorateStory=decorateStory,!storyStore)throw new Error("storyStore is required")}},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(108),descriptor=__webpack_require__(102),setToStringTag=__webpack_require__(105),IteratorPrototype={};__webpack_require__(66)(IteratorPrototype,__webpack_require__(28)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var has=__webpack_require__(64),toObject=__webpack_require__(69),IE_PROTO=__webpack_require__(160)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports,__webpack_require__){"use strict";var $defineProperty=__webpack_require__(42),createDesc=__webpack_require__(102);module.exports=function(object,index,value){index in object?$defineProperty.f(object,index,createDesc(0,value)):object[index]=value}},function(module,exports,__webpack_require__){__webpack_require__(37)&&"g"!=/./g.flags&&__webpack_require__(42).f(RegExp.prototype,"flags",{configurable:!0,get:__webpack_require__(170)})},function(module,exports,__webpack_require__){var speciesConstructor=__webpack_require__(394);module.exports=function(original,length){return new(speciesConstructor(original))(length)}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39),isArray=__webpack_require__(163),SPECIES=__webpack_require__(28)("species");module.exports=function(original){var C;return isArray(original)&&("function"!=typeof(C=original.constructor)||C!==Array&&!isArray(C.prototype)||(C=void 0),isObject(C)&&null===(C=C[SPECIES])&&(C=void 0)),void 0===C?Array:C}},function(module,exports,__webpack_require__){"use strict";var getKeys=__webpack_require__(75),gOPS=__webpack_require__(162),pIE=__webpack_require__(107),toObject=__webpack_require__(69),IObject=__webpack_require__(121),$assign=Object.assign;module.exports=!$assign||__webpack_require__(38)(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function assign(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(87),toObject=__webpack_require__(69),IObject=__webpack_require__(121),toLength=__webpack_require__(68);module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that),self=IObject(O),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,isRight?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;isRight?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),$find=__webpack_require__(126)(5),forced=!0;"find"in[]&&Array(1).find(function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),__webpack_require__(225)("find")},function(module,exports,__webpack_require__){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isObject=__webpack_require__(228);function isObjectObject(o){return!0===isObject(o)&&"[object Object]"===Object.prototype.toString.call(o)}module.exports=function isPlainObject(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var util_deprecate_1=__importDefault(__webpack_require__(229));exports.makeDecorator=function(_a){var name=_a.name,parameterName=_a.parameterName,wrapper=_a.wrapper,_b=_a.skipIfNoParametersOrOptions,skipIfNoParametersOrOptions=void 0!==_b&&_b,_c=_a.allowDeprecatedUsage,allowDeprecatedUsage=void 0!==_c&&_c,decorator=function(options){return function(getStory,context){var parameters=context.parameters&&context.parameters[parameterName];return parameters&&parameters.disable?getStory(context):!skipIfNoParametersOrOptions||options||parameters?wrapper(getStory,context,{options:options,parameters:parameters}):getStory(context)}};return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return"function"==typeof args[0]?decorator().apply(void 0,args):function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];if(innerArgs.length>1)return decorator.apply(void 0,args).apply(void 0,innerArgs);if(allowDeprecatedUsage)return util_deprecate_1.default(function(context){return decorator.apply(void 0,args)(innerArgs[0],context)},"Passing stories directly into "+name+"() is deprecated,\n          instead use addDecorator("+name+") and pass options with the '"+parameterName+"' parameter");throw new Error("Passing stories directly into "+name+"() is not allowed,\n        instead use addDecorator("+name+") and pass options with the '"+parameterName+"' parameter")}}}},function(module,exports,__webpack_require__){"use strict";var types;Object.defineProperty(exports,"__esModule",{value:!0}),function(types){types.TAB="tab",types.PANEL="panel",types.TOOL="tool",types.PREVIEW="preview",types.NOTES_ELEMENT="notes-element"}(types=exports.types||(exports.types={})),exports.isSupportedType=function isSupportedType(type){return!!Object.values(types).find(function(typeVal){return typeVal===type})}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var channels_1=__importDefault(__webpack_require__(231));exports.mockChannel=function mockChannel(){return new channels_1.default({transport:{setHandler:function(){},send:function(){}}})}},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function onTimeout(){item._onTimeout&&item._onTimeout()},msecs))},__webpack_require__(403),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick(function(){runIfPresent(handle)})}}():!function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}}():doc&&"onreadystatechange"in doc.createElement("script")?function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}}():function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}}():function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))};global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}}(),attachTo.setImmediate=function setImmediate(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function run(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(21),__webpack_require__(54))},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var qs_1=__importDefault(__webpack_require__(174)),memoizerific_1=__importDefault(__webpack_require__(175)),knownViewModesRegex=/(story|info)/,splitPath=/\/([^\/]+)\/([^\/]+)?/;exports.sanitize=function(string){return string.toLowerCase().replace(/[ '`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};var sanitizeSafe=function(string,part){var sanitized=exports.sanitize(string);if(""===sanitized)throw new Error("Invalid "+part+" '"+string+"', must include alphanumeric characters");return sanitized};exports.toId=function(kind,name){return sanitizeSafe(kind,"kind")+"--"+sanitizeSafe(name,"name")},exports.storyDataFromString=memoizerific_1.default(1e3)(function(path){var result={viewMode:void 0,storyId:void 0};if(path){var _a=path.match(splitPath)||[void 0,void 0,void 0],viewMode=_a[1],storyId=_a[2];viewMode&&viewMode.match(knownViewModesRegex)&&Object.assign(result,{viewMode:viewMode,storyId:storyId})}return result}),exports.queryFromString=memoizerific_1.default(1e3)(function(s){return qs_1.default.parse(s,{ignoreQueryPrefix:!0})}),exports.queryFromLocation=function(location){return exports.queryFromString(location.search)},exports.stringifyQuery=function(query){return qs_1.default.stringify(query,{addQueryPrefix:!0,encode:!1})},exports.getMatch=memoizerific_1.default(1e3)(function(current,target,startsWith){void 0===startsWith&&(startsWith=!0);var startsWithTarget=current&&startsWith&&current.startsWith(target),currentIsTarget="string"==typeof target&&current===target,matchTarget=current&&target&&current.match(target);return startsWithTarget||currentIsTarget||matchTarget?{path:current}:null})},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(232),formats=__webpack_require__(233),arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}},toISO=Date.prototype.toISOString,defaults={delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly){var obj=object;if("function"==typeof filter)obj=filter(prefix,obj);else if(obj instanceof Date)obj=serializeDate(obj);else if(null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder):prefix;obj=""}if("string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder))+"="+formatter(encoder(obj,defaults.encoder))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(Array.isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(values=Array.isArray(obj)?values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)):values.concat(stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)))}return values};module.exports=function(object,opts){var obj=object,options=opts?utils.assign({},opts):{};if(null!==options.encoder&&void 0!==options.encoder&&"function"!=typeof options.encoder)throw new TypeError("Encoder has to be a function.");var delimiter=void 0===options.delimiter?defaults.delimiter:options.delimiter,strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,skipNulls="boolean"==typeof options.skipNulls?options.skipNulls:defaults.skipNulls,encode="boolean"==typeof options.encode?options.encode:defaults.encode,encoder="function"==typeof options.encoder?options.encoder:defaults.encoder,sort="function"==typeof options.sort?options.sort:null,allowDots=void 0!==options.allowDots&&options.allowDots,serializeDate="function"==typeof options.serializeDate?options.serializeDate:defaults.serializeDate,encodeValuesOnly="boolean"==typeof options.encodeValuesOnly?options.encodeValuesOnly:defaults.encodeValuesOnly;if(void 0===options.format)options.format=formats.default;else if(!Object.prototype.hasOwnProperty.call(formats.formatters,options.format))throw new TypeError("Unknown format option provided.");var objKeys,filter,formatter=formats.formatters[options.format];"function"==typeof options.filter?obj=(filter=options.filter)("",obj):Array.isArray(options.filter)&&(objKeys=filter=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=options.arrayFormat in arrayPrefixGenerators?options.arrayFormat:"indices"in options?options.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),sort&&objKeys.sort(sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encode?encoder:null,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)))}var joined=keys.join(delimiter),prefix=!0===options.addQueryPrefix?"?":"";return joined.length>0?prefix+joined:""}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(232),has=Object.prototype.hasOwnProperty,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:utils.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},parseKeys=function parseQueryStringKeys(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options){for(var leaf=val,i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root)obj=(obj=[]).concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf}leaf=obj}return leaf}(keys,val,options)}};module.exports=function(str,opts){var options=opts?utils.assign({},opts):{};if(null!==options.decoder&&void 0!==options.decoder&&"function"!=typeof options.decoder)throw new TypeError("Decoder has to be a function.");if(options.ignoreQueryPrefix=!0===options.ignoreQueryPrefix,options.delimiter="string"==typeof options.delimiter||utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter,options.depth="number"==typeof options.depth?options.depth:defaults.depth,options.arrayLimit="number"==typeof options.arrayLimit?options.arrayLimit:defaults.arrayLimit,options.parseArrays=!1!==options.parseArrays,options.decoder="function"==typeof options.decoder?options.decoder:defaults.decoder,options.allowDots="boolean"==typeof options.allowDots?options.allowDots:defaults.allowDots,options.plainObjects="boolean"==typeof options.plainObjects?options.plainObjects:defaults.plainObjects,options.allowPrototypes="boolean"==typeof options.allowPrototypes?options.allowPrototypes:defaults.allowPrototypes,options.parameterLimit="number"==typeof options.parameterLimit?options.parameterLimit:defaults.parameterLimit,options.strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function parseQueryStringValues(str,options){for(var obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),i=0;i<parts.length;++i){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder),val=options.decoder(part.slice(pos+1),defaults.decoder)),has.call(obj,key)?obj[key]=[].concat(obj[key]).concat(val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){(function(global,module){var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",HOT_COUNT=800,HOT_SPAN=16,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",undefinedTag="[object Undefined]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags[funcTag]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags[objectTag]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function safeGet(object,key){return"__proto__"==key?void 0:object[key]}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0,getPrototype=function overArg(func,transform){return function(arg){return func(transform(arg))}}(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeMax=Math.max,nativeNow=Date.now,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,0))},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var baseFor=function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}();function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}(value))}function baseKeysIn(object){if(!isObject(object))return function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(isObject(srcValue))stack||(stack=new Stack),function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:!function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}(objValue)?isBuff?(isCommon=!1,newValue=function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}(srcValue,!0)):isTyped?(isCommon=!1,newValue=function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(srcValue,!0)):newValue=[]:newValue=function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(objValue):function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=function toPlainObject(value){return function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;for(;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}(value,keysIn(value))}(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue));assignMergeValue(object,key,newValue)}(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn)}function baseRest(func,start){return setToString(function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}(func,start,identity),func+"")}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}var setToString=function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}(defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity);function eq(value,other){return value===other||value!=value&&other!=other}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function baseUnary(func){return function(value){return func(value)}}(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var mergeWith=function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});function identity(value){return value}module.exports=mergeWith}).call(this,__webpack_require__(21),__webpack_require__(79)(module))},function(module,exports,__webpack_require__){(function(global,module){var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=function overArg(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othLength=getAllKeys(other).length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(!function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,0))},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:function stubArray(){return[]},getTag=baseGetTag;function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function baseUnary(func){return function(value){return func(value)}}(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keys(object){return function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=function isEqual(value,other){return baseIsEqual(value,other)}}).call(this,__webpack_require__(21),__webpack_require__(79)(module))},function(module,exports,__webpack_require__){"use strict";var strong=__webpack_require__(410),validate=__webpack_require__(236);module.exports=__webpack_require__(411)("Map",function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:void 0)}},{get:function get(key){var entry=strong.getEntry(validate(this,"Map"),key);return entry&&entry.v},set:function set(key,value){return strong.def(validate(this,"Map"),0===key?0:key,value)}},strong,!0)},function(module,exports,__webpack_require__){"use strict";var dP=__webpack_require__(42).f,create=__webpack_require__(108),redefineAll=__webpack_require__(176),ctx=__webpack_require__(67),anInstance=__webpack_require__(177),forOf=__webpack_require__(178),$iterDefine=__webpack_require__(166),step=__webpack_require__(226),setSpecies=__webpack_require__(235),DESCRIPTORS=__webpack_require__(37),fastKey=__webpack_require__(120).fastKey,validate=__webpack_require__(236),SIZE=DESCRIPTORS?"_s":"size",getEntry=function(that,key){var entry,index=fastKey(key);if("F"!==index)return that._i[index];for(entry=that._f;entry;entry=entry.n)if(entry.k==key)return entry};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._t=NAME,that._i=create(null),that._f=void 0,that._l=void 0,that[SIZE]=0,null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{clear:function clear(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n)entry.r=!0,entry.p&&(entry.p=entry.p.n=void 0),delete data[entry.i];that._f=that._l=void 0,that[SIZE]=0},delete:function(key){var that=validate(this,NAME),entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i],entry.r=!0,prev&&(prev.n=next),next&&(next.p=prev),that._f==entry&&(that._f=next),that._l==entry&&(that._l=prev),that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){validate(this,NAME);for(var entry,f=ctx(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.n:this._f;)for(f(entry.v,entry.k,this);entry&&entry.r;)entry=entry.p},has:function has(key){return!!getEntry(validate(this,NAME),key)}}),DESCRIPTORS&&dP(C.prototype,"size",{get:function(){return validate(this,NAME)[SIZE]}}),C},def:function(that,key,value){var prev,index,entry=getEntry(that,key);return entry?entry.v=value:(that._l=entry={i:index=fastKey(key,!0),k:key,v:value,p:prev=that._l,n:void 0,r:!1},that._f||(that._f=entry),prev&&(prev.n=entry),that[SIZE]++,"F"!==index&&(that._i[index]=entry)),that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME),this._k=kind,this._l=void 0},function(){for(var kind=this._k,entry=this._l;entry&&entry.r;)entry=entry.p;return this._t&&(this._l=entry=entry?entry.n:this._t._f)?step(0,"keys"==kind?entry.k:"values"==kind?entry.v:[entry.k,entry.v]):(this._t=void 0,step(1))},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(NAME)}}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(29),$export=__webpack_require__(23),redefine=__webpack_require__(48),redefineAll=__webpack_require__(176),meta=__webpack_require__(120),forOf=__webpack_require__(178),anInstance=__webpack_require__(177),isObject=__webpack_require__(39),fails=__webpack_require__(38),$iterDetect=__webpack_require__(168),setToStringTag=__webpack_require__(105),inheritIfRequired=__webpack_require__(237);module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={},fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,"delete"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"has"==KEY?function has(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"get"==KEY?function get(a){return IS_WEAK&&!isObject(a)?void 0:fn.call(this,0===a?0:a)}:"add"==KEY?function add(a){return fn.call(this,0===a?0:a),this}:function set(a,b){return fn.call(this,0===a?0:a,b),this})};if("function"==typeof C&&(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new C,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||((C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);return null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that),that})).prototype=proto,proto.constructor=C),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&proto.clear&&delete proto.clear}else C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER),redefineAll(C.prototype,methods),meta.NEED=!0;return setToStringTag(C,NAME),O[NAME]=C,$export($export.G+$export.W+$export.F*(C!=Base),O),IS_WEAK||common.setStrong(C,NAME,IS_MAP),C}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.splitPath=void 0,__webpack_require__(78),__webpack_require__(179),__webpack_require__(180),__webpack_require__(63),__webpack_require__(181),__webpack_require__(20),__webpack_require__(413),__webpack_require__(414),__webpack_require__(89),__webpack_require__(111),__webpack_require__(110),__webpack_require__(415),__webpack_require__(125),__webpack_require__(239),__webpack_require__(418),__webpack_require__(90),__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(172),__webpack_require__(173),__webpack_require__(240),__webpack_require__(241),__webpack_require__(80),__webpack_require__(420);var _global=__webpack_require__(49),_eventemitter=_interopRequireDefault(__webpack_require__(421)),_qs=_interopRequireDefault(__webpack_require__(174)),_memoizerific=_interopRequireDefault(__webpack_require__(175)),_lodash=_interopRequireDefault(__webpack_require__(422)),_commonTags=__webpack_require__(187),_coreEvents=_interopRequireDefault(__webpack_require__(92)),_clientLogger=__webpack_require__(91),_utils=__webpack_require__(127),_pathToId=_interopRequireDefault(__webpack_require__(243));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _templateObject(){var data=function _taggedTemplateLiteral(strings,raw){raw||(raw=strings.slice(0));return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n        Story with id "," already exists in the store!\n\n        Perhaps you added the same story twice, or you have a name collision?\n        Story ids need to be unique -- ensure you aren't using the same names modolo url-sanitization.\n      "]);return _templateObject=function _templateObject(){return data},data}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var toKey=function toKey(input){return input.replace(/[^a-z0-9]+([a-z0-9])/gi,function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];return params[1].toUpperCase()})};exports.splitPath=function splitPath(path,_ref){var rootSeparator=_ref.rootSeparator,groupSeparator=_ref.groupSeparator,_path$split2=_slicedToArray(path.split(rootSeparator,2),2),root=_path$split2[0],remainder=_path$split2[1];return{root:remainder?root:null,groups:(remainder||path).split(groupSeparator).filter(function(i){return!!i})}};var count=0;function getId(){return count+=1}var getIdFromLegacyQuery=function getIdFromLegacyQuery(_ref4){var path=_ref4.path,selectedKind=_ref4.selectedKind,selectedStory=_ref4.selectedStory;return path&&(0,_pathToId.default)(path)||selectedKind&&selectedStory&&(0,_utils.toId)(selectedKind,selectedStory)},StoryStore=function(_EventEmitter){function StoryStore(_ref5){var _this,channel=_ref5.channel;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryStore),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(StoryStore).call(this))).getIdOnPath=function(){return _qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0}).id},_this.setPath=function(storyId){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},path="".concat(_global.document.location.pathname,"?").concat(_qs.default.stringify(Object.assign({},params,{id:storyId})));_global.history.replaceState({},"",path)},_this.fromId=function(id){try{var data=_this._data[id];return data&&data.getDecorated?data:null}catch(e){return _clientLogger.logger.warn("failed to get story:",_this._data),_clientLogger.logger.error(e),{}}},_this.setSelection=function(data){_this._selection=data,setTimeout(function(){return _this.emit(_coreEvents.default.STORY_RENDER)},1)},_this.getSelection=function(){return _this._selection},_this.remove=function(id){delete _assertThisInitialized(_this)._data[id]},_this.pushToManager=(0,_lodash.default)(function(){if(_this._channel){var stories=_this.extract();_this._channel.emit(_coreEvents.default.SET_STORIES,{stories:stories})}},0),_this._legacydata={},_this._data={},_this._revision=0,_this._selection={},_this._channel=channel,_this.on(_coreEvents.default.STORY_INIT,function(){var storyId=_this.getIdOnPath();if(!storyId){var params=_qs.default.parse(_global.document.location.search,{ignoreQueryPrefix:!0});if(storyId=getIdFromLegacyQuery(params)){params.path,params.selectedKind,params.selectedStory;var rest=_objectWithoutProperties(params,["path","selectedKind","selectedStory"]);_this.setPath(storyId,rest)}}_this.setSelection(_this.fromId(storyId))}),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StoryStore,_eventemitter.default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StoryStore,[{key:"setSeparators",value:function setSeparators(data){this.separators=data}},{key:"raw",value:function raw(){var _this2=this;return Object.values(this._data).filter(function(i){return!!i.getDecorated}).map(function(_ref6){var id=_ref6.id;return _this2.fromId(id)})}},{key:"extract",value:function extract(){return Object.entries(this._data).reduce(function(a,_ref7){var _ref8=_slicedToArray(_ref7,2),k=_ref8[0],v=_ref8[1];return Object.assign(a,_defineProperty({},k,function toExtracted(obj){return Object.entries(obj).reduce(function(acc,_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];return"function"==typeof value?acc:Array.isArray(value)?Object.assign(acc,_defineProperty({},key,value.slice().sort())):Object.assign(acc,_defineProperty({},key,value))},{})}(v)))},{})}},{key:"addStory",value:function addStory(_ref9,_ref10){var id=_ref9.id,kind=_ref9.kind,name=_ref9.name,original=_ref9.storyFn,_ref9$parameters=_ref9.parameters,parameters=void 0===_ref9$parameters?{}:_ref9$parameters,getDecorators=_ref10.getDecorators,applyDecorators=_ref10.applyDecorators,_data=this._data;_data[id]&&_clientLogger.logger.warn((0,_commonTags.stripIndents)(_templateObject(),id));var identification={id:id,kind:kind,name:name,story:name},getOriginal=function getOriginal(){return original},getDecorated=(0,_memoizerific.default)(1)(function(){return applyDecorators(getOriginal(),getDecorators())}),storyFn=function storyFn(p){return getDecorated()(Object.assign({},identification,{parameters:Object.assign({},parameters,p)}))};_data[id]=function toChild(it){return Object.assign({},it)}(Object.assign({},identification,{getDecorated:getDecorated,getOriginal:getOriginal,storyFn:storyFn,parameters:parameters})),this.addLegacyStory({kind:kind,name:name,storyFn:storyFn,parameters:parameters}),this.pushToManager()}},{key:"getRevision",value:function getRevision(){return this._revision}},{key:"incrementRevision",value:function incrementRevision(){this._revision+=1}},{key:"addLegacyStory",value:function addLegacyStory(_ref11){var kind=_ref11.kind,name=_ref11.name,storyFn=_ref11.storyFn,_ref11$parameters=_ref11.parameters,parameters=void 0===_ref11$parameters?{}:_ref11$parameters,k=toKey(kind);this._legacydata[k]||(this._legacydata[k]={kind:kind,fileName:parameters.fileName,index:getId(),stories:{}}),this._legacydata[k].stories[toKey(name)]={name:name,index:getId(),story:storyFn,parameters:parameters}}},{key:"getStoryKinds",value:function getStoryKinds(){return Object.values(this._legacydata).filter(function(kind){return Object.keys(kind.stories).length>0}).sort(function(info1,info2){return info1.index-info2.index}).map(function(info){return info.kind})}},{key:"getStories",value:function getStories(kind){var _this3=this,key=toKey(kind);return this._legacydata[key]?Object.keys(this._legacydata[key].stories).map(function(name){return _this3._legacydata[key].stories[name]}).sort(function(info1,info2){return info1.index-info2.index}).map(function(info){return info.name}):[]}},{key:"getStoryFileName",value:function getStoryFileName(kind){var key=toKey(kind),storiesKind=this._legacydata[key];return storiesKind?storiesKind.fileName:null}},{key:"getStoryAndParameters",value:function getStoryAndParameters(kind,name){if(!kind||!name)return null;var storiesKind=this._legacydata[toKey(kind)];if(!storiesKind)return null;var storyInfo=storiesKind.stories[toKey(name)];return storyInfo?{story:storyInfo.story,parameters:storyInfo.parameters}:null}},{key:"getStory",value:function getStory(kind,name){var data=this.getStoryAndParameters(kind,name);return data&&data.story}},{key:"getStoryWithContext",value:function getStoryWithContext(kind,name){var data=this.getStoryAndParameters(kind,name);return data?data.story:null}},{key:"removeStoryKind",value:function removeStoryKind(kind){this.hasStoryKind(kind)&&(this._legacydata[toKey(kind)].stories={})}},{key:"hasStoryKind",value:function hasStoryKind(kind){return Boolean(this._legacydata[toKey(kind)])}},{key:"hasStory",value:function hasStory(kind,name){return Boolean(this.getStory(kind,name))}},{key:"dumpStoryBook",value:function dumpStoryBook(){var _this4=this;return this.getStoryKinds().map(function(kind){return{kind:kind,stories:_this4.getStories(kind)}})}},{key:"size",value:function size(){return Object.keys(this._legacydata).length}},{key:"clean",value:function clean(){var _this5=this;this.getStoryKinds().forEach(function(kind){return delete _this5._legacydata[toKey(kind)]})}}]),StoryStore}();exports.default=StoryStore},function(module,exports,__webpack_require__){var $export=__webpack_require__(23);$export($export.S,"Object",{create:__webpack_require__(108)})},function(module,exports,__webpack_require__){var $export=__webpack_require__(23);$export($export.S,"Object",{setPrototypeOf:__webpack_require__(238).set})},function(module,exports,__webpack_require__){var $export=__webpack_require__(23),$values=__webpack_require__(224)(!1);$export($export.S,"Object",{values:function values(it){return $values(it)}})},function(module,exports){module.exports=Object.is||function is(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){"use strict";var regexpExec=__webpack_require__(182);__webpack_require__(23)({target:"RegExp",proto:!0,forced:regexpExec!==/./.exec},{exec:regexpExec})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(23),aFunction=__webpack_require__(87),toObject=__webpack_require__(69),fails=__webpack_require__(38),$sort=[].sort,test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(void 0)})||!fails(function(){test.sort(null)})||!__webpack_require__(88)($sort)),"Array",{sort:function sort(comparefn){return void 0===comparefn?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(39),cof=__webpack_require__(77),MATCH=__webpack_require__(28)("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==cof(it))}},function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(33),toObject=__webpack_require__(69),toLength=__webpack_require__(68),toInteger=__webpack_require__(122),advanceStringIndex=__webpack_require__(183),regExpExec=__webpack_require__(128),max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&`']|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&`']|\d\d?)/g;__webpack_require__(129)("replace",2,function(defined,REPLACE,$replace,maybeCallNative){return[function replace(searchValue,replaceValue){var O=defined(this),fn=null==searchValue?void 0:searchValue[REPLACE];return void 0!==fn?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},function(regexp,replaceValue){var res=maybeCallNative($replace,regexp,this,replaceValue);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),functionalReplace="function"==typeof replaceValue;functionalReplace||(replaceValue=String(replaceValue));var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0}for(var results=[];;){var result=regExpExec(rx,S);if(null===result)break;if(results.push(result),!global)break;""===String(result[0])&&(rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode))}for(var it,accumulatedResult="",nextSourcePosition=0,i=0;i<results.length;i++){result=results[i];for(var matched=String(result[0]),position=max(min(toInteger(result.index),S.length),0),captures=[],j=1;j<result.length;j++)captures.push(void 0===(it=result[j])?it:String(it));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);void 0!==namedCaptures&&replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(void 0,replacerArgs))}else replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);position>=nextSourcePosition&&(accumulatedResult+=S.slice(nextSourcePosition,position)+replacement,nextSourcePosition=position+matched.length)}return accumulatedResult+S.slice(nextSourcePosition)}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length,m=captures.length,symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==namedCaptures&&(namedCaptures=toObject(namedCaptures),symbols=SUBSTITUTION_SYMBOLS),$replace.call(replacement,symbols,function(match,ch){var capture;switch(ch.charAt(0)){case"$":return"$";case"&":return matched;case"`":return str.slice(0,position);case"'":return str.slice(tailPos);case"<":capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(0===n)return match;if(n>m){var f=floor(n/10);return 0===f?match:f<=m?void 0===captures[f-1]?ch.charAt(1):captures[f-1]+ch.charAt(1):match}capture=captures[n-1]}return void 0===capture?"":capture})}})},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function eventNames(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports,__webpack_require__){(function(global){var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectToString=Object.prototype.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function toNumber(value){if("number"==typeof value)return value;if(function isSymbol(value){return"symbol"==typeof value||function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var result=wait-(time-lastCallTime);return maxing?nativeMin(result,maxWait-(time-lastInvokeTime)):result}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(20);var _global=__webpack_require__(49),_coreEvents=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(92)),_clientLogger=__webpack_require__(91);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ConfigApi=function(){function ConfigApi(_ref){var _this=this,channel=_ref.channel,storyStore=_ref.storyStore,clearDecorators=_ref.clearDecorators,clientApi=_ref.clientApi;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConfigApi),this.configure=function(loaders,module){var render=function render(){var errors=[];try{loaders&&loaders()}catch(e){_clientLogger.logger.error(e),errors.push(e)}try{_this._renderMain()}catch(e){_clientLogger.logger.error(e),errors.push(e)}errors.length&&(module.hot&&"apply"===module.hot.status()?(_clientLogger.logger.error("RELOAD THE PAGE","module.hot.status() === apply"),_global.location.reload()):_this._renderError(errors[0]))};module.hot&&(module.hot.accept(function(){setTimeout(render)}),module.hot.dispose(function(){_this._clearDecorators()})),_this._channel?(render(),setTimeout(function(){return _this._channel.emit(_coreEvents.default.STORIES_CONFIGURED)},0)):loaders()},this._channel=channel,this._storyStore=storyStore,this._clearDecorators=clearDecorators,this.clientApi=clientApi}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConfigApi,[{key:"_renderMain",value:function _renderMain(){this._storyStore.emit(_coreEvents.default.STORY_INIT)}},{key:"_renderError",value:function _renderError(e){var error={stack:e.stack,message:e.message};this._storyStore.setSelection({error:error})}}]),ConfigApi}();exports.default=ConfigApi},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function start(render){var decorateStory=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).decorateStory,context=getContext(decorateStory),clientApi=context.clientApi,channel=context.channel,configApi=context.configApi,storyStore=context.storyStore,previousKind="",previousStory="",previousRevision=-1,renderMain=function renderMain(forceRender){var revision=storyStore.getRevision(),selection=storyStore.getSelection(),_ref4=selection||{},kind=_ref4.kind,name=_ref4.name,getDecorated=_ref4.getDecorated,id=_ref4.id;if(getDecorated){if(!forceRender&&revision===previousRevision&&kind===previousKind&&previousStory===name)return void _addons.default.getChannel().emit(_coreEvents.default.STORY_UNCHANGED,id);!forceRender&&previousKind&&previousStory&&_addons.default.getChannel().emit(_coreEvents.default.STORY_CHANGED,id),render(Object.assign({},context,selection,{selectedKind:kind,selectedStory:name,forceRender:forceRender})),_addons.default.getChannel().emit(_coreEvents.default.STORY_RENDERED,id)}else!function showNopreview(){_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.NOPREVIEW)}(),_addons.default.getChannel().emit(_coreEvents.default.STORY_MISSING,id);previousRevision=revision,previousKind=kind,previousStory=name,forceRender||(_global.document.documentElement.scrollTop=0)},renderUI=function renderUI(forceRender){if(isBrowser)try{renderMain(forceRender)}catch(ex){showException(ex)}},forceReRender=function forceReRender(){return renderUI(!0)};if(isBrowser){var deprecatedToId=(0,_utilDeprecate.default)(_utils.toId,"Passing name+kind to the SET_CURRENT_STORY event is deprecated, use a storyId instead");channel.on(_coreEvents.default.FORCE_RE_RENDER,forceReRender),channel.on(_coreEvents.default.SET_CURRENT_STORY,function(_ref5){var inputStoryId=_ref5.storyId,name=_ref5.name,kind=_ref5.kind,storyId=inputStoryId;if(!storyId){if(!name||!kind)throw new Error("You should pass `storyId` into SET_CURRENT_STORY");storyId=deprecatedToId(kind,name)}var data=storyStore.fromId(storyId);storyStore.setSelection(data),storyStore.setPath(storyId)}),_global.window.onkeydown=function(event){if(!function focusInInput(event){return/input|textarea/i.test(event.target.tagName)||null!==event.target.getAttribute("contenteditable")}(event)){var altKey=event.altKey,ctrlKey=event.ctrlKey,metaKey=event.metaKey,shiftKey=event.shiftKey,key=event.key,code=event.code,keyCode=event.keyCode;channel.emit(_coreEvents.default.PREVIEW_KEYDOWN,{event:{altKey:altKey,ctrlKey:ctrlKey,metaKey:metaKey,shiftKey:shiftKey,key:key,code:code,keyCode:keyCode}})}}}storyStore.on(_coreEvents.default.STORY_RENDER,renderUI),void 0!==_global.window&&(_global.window.__STORYBOOK_CLIENT_API__=clientApi,_global.window.__STORYBOOK_ADDONS_CHANNEL__=channel);return{context:context,clientApi:clientApi,configApi:configApi,forceReRender:forceReRender}},exports.getContext=void 0,__webpack_require__(80),__webpack_require__(110),__webpack_require__(181);var _addons=_interopRequireDefault(__webpack_require__(112)),_global=__webpack_require__(49),_channelPostmessage=_interopRequireDefault(__webpack_require__(425)),_clientApi=__webpack_require__(219),_utils=__webpack_require__(127),_clientLogger=__webpack_require__(91),_coreEvents=_interopRequireDefault(__webpack_require__(92)),_utilDeprecate=_interopRequireDefault(__webpack_require__(229));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var classes={MAIN:"sb-show-main",NOPREVIEW:"sb-show-nopreview",ERROR:"sb-show-errordisplay"};function showMain(){_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.remove(classes.ERROR),_global.document.body.classList.add(classes.MAIN)}function showErrorDisplay(_ref){var message=_ref.message,stack=_ref.stack;_global.document.getElementById("error-message").textContent=message,_global.document.getElementById("error-stack").textContent=stack,_global.document.body.classList.remove(classes.MAIN),_global.document.body.classList.remove(classes.NOPREVIEW),_global.document.body.classList.add(classes.ERROR)}function showError(_ref2){var title=_ref2.title,description=_ref2.description;_addons.default.getChannel().emit(_coreEvents.default.STORY_ERRORED,{title:title,description:description}),showErrorDisplay({message:title,stack:description})}function showException(exception){_addons.default.getChannel().emit(_coreEvents.default.STORY_THREW_EXCEPTION,exception),showErrorDisplay(exception),_clientLogger.logger.error(exception.stack)}var isBrowser=_global.navigator&&_global.navigator.userAgent&&"storyshots"!==_global.navigator.userAgent&&!(_global.navigator.userAgent.indexOf("Node.js")>-1)&&!(_global.navigator.userAgent.indexOf("jsdom")>-1),getContext=function(decorateStory){var channel=null;if(isBrowser)try{channel=_addons.default.getChannel()}catch(e){channel=(0,_channelPostmessage.default)({page:"preview"}),_addons.default.setChannel(channel)}var storyStore=new _clientApi.StoryStore({channel:channel}),clientApi=new _clientApi.ClientApi({storyStore:storyStore,decorateStory:decorateStory}),clearDecorators=clientApi.clearDecorators;return{configApi:new _clientApi.ConfigApi({clearDecorators:clearDecorators,storyStore:storyStore,channel:channel,clientApi:clientApi}),storyStore:storyStore,channel:channel,clientApi:clientApi,showMain:showMain,showError:showError,showException:showException}};exports.getContext=getContext},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var global_1=__webpack_require__(49),channels_1=__importDefault(__webpack_require__(231)),client_logger_1=__webpack_require__(91),telejson_1=__webpack_require__(426);exports.KEY="storybook-channel";var PostmsgTransport=function(){function PostmsgTransport(config){var _this=this;if(this.config=config,this.buffer=[],this.handler=null,global_1.window.addEventListener("message",this.handleEvent.bind(this),!1),global_1.document.addEventListener("DOMContentLoaded",function(){return _this.flush()}),"manager"!==config.page&&"preview"!==config.page)throw new Error('postmsg-channel: "config.page" cannot be "'+config.page+'"')}return PostmsgTransport.prototype.setHandler=function(handler){this.handler=handler},PostmsgTransport.prototype.send=function(event){var _this=this,iframeWindow=this.getWindow();if(!iframeWindow)return new Promise(function(resolve,reject){_this.buffer.push({event:event,resolve:resolve,reject:reject})});var data=telejson_1.stringify({key:exports.KEY,event:event},{maxDepth:15});return iframeWindow.postMessage(data,"*"),Promise.resolve(null)},PostmsgTransport.prototype.flush=function(){var _this=this,buffer=this.buffer;this.buffer=[],buffer.forEach(function(item){_this.send(item.event).then(item.resolve).catch(item.reject)})},PostmsgTransport.prototype.getWindow=function(){if("manager"===this.config.page){var iframe=global_1.document.getElementById("storybook-preview-iframe");return iframe?iframe.contentWindow:null}return global_1.window.parent},PostmsgTransport.prototype.handleEvent=function(rawEvent){try{var data=rawEvent.data,_a="string"==typeof data&&telejson_1.isJSON(data)?telejson_1.parse(data):data,key=_a.key,event_1=_a.event;key===exports.KEY&&(client_logger_1.logger.debug.apply(client_logger_1.logger,["message arrived at "+this.config.page,event_1.type].concat(event_1.args)),this.handler(event_1))}catch(error){client_logger_1.logger.error(error)}},PostmsgTransport}();exports.PostmsgTransport=PostmsgTransport,exports.default=function createChannel(_a){var page=_a.page,transport=new PostmsgTransport({page:page});return new channels_1.default({transport:transport})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.stringify=exports.isJSON=exports.reviver=exports.replacer=void 0;var _global=__webpack_require__(49),_isRegex=_interopRequireDefault(__webpack_require__(205)),_isFunction=_interopRequireDefault(__webpack_require__(427)),_isSymbol=_interopRequireDefault(__webpack_require__(198)),_isobject=_interopRequireDefault(__webpack_require__(228)),_lodash=_interopRequireDefault(__webpack_require__(428)),_memoizerific=_interopRequireDefault(__webpack_require__(175));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var removeCodeComments=function removeCodeComments(code){var inQuoteChar=null,inBlockComment=!1,inLineComment=!1,inRegexLiteral=!1,newCode="";if(code.indexOf("//")>=0||code.indexOf("/*")>=0)for(var i=0;i<code.length;i+=1)inQuoteChar||inBlockComment||inLineComment||inRegexLiteral?(inQuoteChar&&(code[i]===inQuoteChar&&"\\"!==code[i-1]||"\n"===code[i]&&"`"!==inQuoteChar)&&(inQuoteChar=null),inRegexLiteral&&("/"===code[i]&&"\\"!==code[i-1]||"\n"===code[i])&&(inRegexLiteral=!1),inBlockComment&&"/"===code[i-1]&&"*"===code[i-2]&&(inBlockComment=!1),inLineComment&&"\n"===code[i]&&(inLineComment=!1)):'"'===code[i]||"'"===code[i]||"`"===code[i]?inQuoteChar=code[i]:"/"===code[i]&&"*"===code[i+1]?inBlockComment=!0:"/"===code[i]&&"/"===code[i+1]?inLineComment=!0:"/"===code[i]&&"/"!==code[i+1]&&(inRegexLiteral=!0),inBlockComment||inLineComment||(newCode+=code[i]);else newCode=code;return newCode},cleanCode=(0,_memoizerific.default)(1e4)(function(code){return removeCodeComments(code).replace(/\n\s*/g,"").trim()}),dateFormat=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/,replacer=function replacer(options){var objects,stack,keys;return function replace(key,value){if(""===key)return keys=["root"],objects=[{keys:"root",value:value}],stack=[],value;for(;stack.length&&this!==stack[0];)stack.shift(),keys.pop();if((0,_isRegex.default)(value)){if(!options.allowRegExp)return;return"_regexp_".concat(value.flags,"|").concat(value.source)}if((0,_isFunction.default)(value)){if(!options.allowFunction)return;var name=value.name,stringified=value.toString();return stringified.match(/(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/)?"_function_".concat(name,"|").concat(function(){}.toString()):"_function_".concat(name,"|").concat(cleanCode(stringified))}if((0,_isSymbol.default)(value)){if(!options.allowSymbol)return;return"_symbol_".concat(value.toString().slice(7,-1))}if("string"==typeof value&&dateFormat.test(value)){if(!options.allowDate)return;return"_date_".concat(value)}if(void 0===value){if(!options.allowUndefined)return;return"_undefined_"}if("number"==typeof value)return value===-1/0?"_-Infinity_":value===1/0?"_Infinity_":Number.isNaN(value)?"_NaN_":value;if("string"==typeof value)return value;if(stack.length>=options.maxDepth)return Array.isArray(value)?"[Array(".concat(value.length,")]"):"[Object]";var found=objects.find(function(o){return o.value===value});if(!found){if(value&&(0,_isobject.default)(value)&&value.constructor&&value.constructor.name&&"Object"!==value.constructor.name){if(!options.allowClass)return;try{Object.assign(value,{"_constructor-name_":value.constructor.name})}catch(e){}}return keys.push(key),stack.unshift(value),objects.push({keys:keys.join("."),value:value}),value}return"_duplicate_".concat(found.keys)}};exports.replacer=replacer;var reviver=function reviver(){var refs=[],root;return function revive(key,value){if(""===key&&(root=value,refs.forEach(function(_ref){var target=_ref.target,container=_ref.container,replacement=_ref.replacement;container[target]="root"===replacement?root:(0,_lodash.default)(root,replacement.replace("root.",""))})),"_constructor-name_"===key)return value;if((0,_isobject.default)(value)&&value["_constructor-name_"]){var name=value["_constructor-name_"];if("Object"!==name){var Fn=new Function("return function ".concat(name,"(){}"))();Object.setPrototypeOf(value,new Fn)}return delete value["_constructor-name_"],value}if("string"==typeof value&&value.startsWith("_function_")){var _value$match=value.match(/_function_([^|]*)\|(.*)/),_value$match2=_slicedToArray(_value$match,3),_name=_value$match2[1],source=_value$match2[2],result=function result(){var f=eval("(".concat(source,")"));f.apply(void 0,arguments)};return Object.defineProperty(result,"toString",{value:function value(){return source}}),Object.defineProperty(result,"name",{value:_name}),result}if("string"==typeof value&&value.startsWith("_regexp_")){var _value$match3=value.match(/_regexp_([^|]*)\|(.*)/),_value$match4=_slicedToArray(_value$match3,3),flags=_value$match4[1],_source=_value$match4[2];return new RegExp(_source,flags)}return"string"==typeof value&&value.startsWith("_date_")?new Date(value.replace("_date_","")):"string"==typeof value&&value.startsWith("_duplicate_")?(refs.push({target:key,container:this,replacement:value.replace("_duplicate_","")}),null):"string"==typeof value&&value.startsWith("_symbol_")?Symbol(value.replace("_symbol_","")):"string"!=typeof value||"_undefined_"!==value?"string"==typeof value&&"_-Infinity_"===value?-1/0:"string"==typeof value&&"_Infinity_"===value?1/0:"string"==typeof value&&"_NaN_"===value?NaN:value:void 0}};exports.reviver=reviver;var isJSON=function isJSON(input){return input.match(/^[\[\{\"\}].*[\]\}\"]$/)};exports.isJSON=isJSON;var defaultOptions={maxDepth:10,space:void 0,allowFunction:!0,allowRegExp:!0,allowDate:!0,allowClass:!0,allowUndefined:!0,allowSymbol:!0},stringify=function stringify(data){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},mergedOptions=Object.assign({},defaultOptions,options);return JSON.stringify(data,replacer(mergedOptions),options.space)};exports.stringify=stringify;var parse=function parse(data){return JSON.parse(data,reviver())};exports.parse=parse},function(module,exports){module.exports=function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)};var toString=Object.prototype.toString},function(module,exports,__webpack_require__){(function(global){var FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",INFINITY=1/0,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,splice=arrayProto.splice,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var value,other,length=array.length;length--;)if((value=array[length][0])===(other=key)||value!=value&&other!=other)return length;return-1}function baseGet(object,path){for(var index=0,length=(path=function isKey(value,object){if(isArray(value))return!1;var type=typeof value;if("number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value))return!0;return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)}(path,object)?[path]:function castPath(value){return isArray(value)?value:stringToPath(value)}(path)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}(value)||function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}(value)?reIsNative:reIsHostCtor).test(function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}(value))}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function hashDelete(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[]},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),0))},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this};var stringToPath=memoize(function(string){string=function toString(value){return null==value?"":function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}(value)}(string);var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result),result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;var isArray=Array.isArray;function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isSymbol(value){return"symbol"==typeof value||function isObjectLike(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}module.exports=function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";var _global=__webpack_require__(49);if(_global.window&&_global.window.parent!==_global.window)try{_global.window.__REACT_DEVTOOLS_GLOBAL_HOOK__=_global.window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(error){}_global.window&&(_global.window.STORYBOOK_ENV="react")},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function renderMain(_ref){var storyFn=_ref.storyFn,selectedKind=_ref.selectedKind,selectedStory=_ref.selectedStory,showMain=_ref.showMain,showError=_ref.showError,forceRender=_ref.forceRender,element=storyFn();if(!element)return void showError({title:'Expecting a React element from the story: "'.concat(selectedStory,'" of "').concat(selectedKind,'".'),description:(0,_commonTags.stripIndents)(_templateObject())});if(!(0,_element_check.default)(element))return void showError({title:'Expecting a valid React element from the story: "'.concat(selectedStory,'" of "').concat(selectedKind,'".'),description:(0,_commonTags.stripIndents)(_templateObject2())});forceRender||_reactDom.default.unmountComponentAtNode(rootEl);showMain(),function render(node,el){_reactDom.default.render(Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).STORYBOOK_EXAMPLE_APP?_react.default.createElement(_react.default.StrictMode,null,node):node,el)}(element,rootEl)},__webpack_require__(179),__webpack_require__(180);var _global=__webpack_require__(49),_react=_interopRequireDefault(__webpack_require__(9)),_reactDom=_interopRequireDefault(__webpack_require__(432)),_commonTags=__webpack_require__(187),_element_check=_interopRequireDefault(__webpack_require__(436));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _templateObject2(){var data=_taggedTemplateLiteral(["\n         Seems like you are not returning a correct React element from the story.\n         Could you double check that?\n       "]);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=_taggedTemplateLiteral(['\n        Did you forget to return the React element from the story?\n        Use "() => (<MyComp/>)" or "() => { return <MyComp/>; }" when defining the story.\n      ']);return _templateObject=function _templateObject(){return data},data}function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var rootEl=_global.document?_global.document.getElementById("root"):null},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k=__webpack_require__(245),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.concurrent_mode"):60111,y=n?Symbol.for("react.forward_ref"):60112,z=n?Symbol.for("react.suspense"):60113,aa=n?Symbol.for("react.memo"):60115,ba=n?Symbol.for("react.lazy"):60116,A="function"==typeof Symbol&&Symbol.iterator;function B(a){for(var b=arguments.length-1,d="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=0;c<b;c++)d+="&args[]="+encodeURIComponent(arguments[c+1]);!function ca(a,b,d,c,e,g,h,f){if(!a){if(a=void 0,void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[d,c,e,g,h,f],m=0;(a=Error(b.replace(/%s/g,function(){return l[m++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",d)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};function E(a,b,d){this.props=a,this.context=b,this.refs=D,this.updater=d||C}function F(){}function G(a,b,d){this.props=a,this.context=b,this.refs=D,this.updater=d||C}E.prototype.isReactComponent={},E.prototype.setState=function(a,b){"object"!=typeof a&&"function"!=typeof a&&null!=a&&B("85"),this.updater.enqueueSetState(this,a,b,"setState")},E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},F.prototype=E.prototype;var H=G.prototype=new F;H.constructor=G,k(H,E.prototype),H.isPureReactComponent=!0;var I={current:null},J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,d){var c=void 0,e={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=""+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=b[c]);var f=arguments.length-2;if(1===f)e.children=d;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];e.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps)void 0===e[c]&&(e[c]=f[c]);return{$$typeof:p,type:a,key:g,ref:h,props:e,_owner:J.current}}function N(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var O=/\/+/g,P=[];function Q(a,b,d,c){if(P.length){var e=P.pop();return e.result=a,e.keyPrefix=b,e.func=d,e.context=c,e.count=0,e}return{result:a,keyPrefix:b,func:d,context:c,count:0}}function R(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>P.length&&P.push(a)}function U(a,b,d){return null==a?0:function S(a,b,d,c){var e=typeof a;"undefined"!==e&&"boolean"!==e||(a=null);var g=!1;if(null===a)g=!0;else switch(e){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return d(c,a,""===b?"."+T(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var h=0;h<a.length;h++){var f=b+T(e=a[h],h);g+=S(e,f,d,c)}else if(f=null===a||"object"!=typeof a?null:"function"==typeof(f=A&&a[A]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),h=0;!(e=a.next()).done;)g+=S(e=e.value,f=b+T(e,h++),d,c);else"object"===e&&B("31","[object Object]"==(d=""+a)?"object with keys {"+Object.keys(a).join(", ")+"}":d,"");return g}(a,"",b,d)}function T(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function escape(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}(a.key):b.toString(36)}function ea(a,b){a.func.call(a.context,b,a.count++)}function fa(a,b,d){var c=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?V(a,c,d,function(a){return a}):null!=a&&(N(a)&&(a=function da(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+d)),c.push(a))}function V(a,b,d,c,e){var g="";null!=d&&(g=(""+d).replace(O,"$&/")+"/"),U(a,fa,b=Q(b,g,c,e)),R(b)}function W(){var a=I.current;return null===a&&B("321"),a}var X={Children:{map:function(a,b,d){if(null==a)return a;var c=[];return V(a,c,null,b,d),c},forEach:function(a,b,d){if(null==a)return a;U(a,ea,b=Q(null,null,b,d)),R(b)},count:function(a){return U(a,function(){return null},null)},toArray:function(a){var b=[];return V(a,b,null,function(a){return a}),b},only:function(a){return N(a)||B("143"),a}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},forwardRef:function(a){return{$$typeof:y,render:a}},lazy:function(a){return{$$typeof:ba,_ctor:a,_status:-1,_result:null}},memo:function(a,b){return{$$typeof:aa,type:a,compare:void 0===b?null:b}},useCallback:function(a,b){return W().useCallback(a,b)},useContext:function(a,b){return W().useContext(a,b)},useEffect:function(a,b){return W().useEffect(a,b)},useImperativeHandle:function(a,b,d){return W().useImperativeHandle(a,b,d)},useDebugValue:function(){},useLayoutEffect:function(a,b){return W().useLayoutEffect(a,b)},useMemo:function(a,b){return W().useMemo(a,b)},useReducer:function(a,b,d){return W().useReducer(a,b,d)},useRef:function(a){return W().useRef(a)},useState:function(a){return W().useState(a)},Fragment:r,StrictMode:t,Suspense:z,createElement:M,cloneElement:function(a,b,d){null==a&&B("267",a);var c=void 0,e=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,f=J.current),void 0!==b.key&&(g=""+b.key);var l=void 0;for(c in a.type&&a.type.defaultProps&&(l=a.type.defaultProps),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(e[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}if(1===(c=arguments.length-2))e.children=d;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];e.children=l}return{$$typeof:p,type:a.type,key:g,ref:h,props:e,_owner:f}},createFactory:function(a){var b=M.bind(null,a);return b.type=a,b},isValidElement:N,version:"16.8.6",unstable_ConcurrentMode:x,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentOwner:J,assign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default||Z},function(module,exports,__webpack_require__){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}(),module.exports=__webpack_require__(433)},function(module,exports,__webpack_require__){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=__webpack_require__(9),n=__webpack_require__(245),r=__webpack_require__(434);function x(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);!function ba(a,b,c,d,e,f,g,h){if(!a){if(a=void 0,void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[c,d,e,f,g,h],k=0;(a=Error(b.replace(/%s/g,function(){return l[k++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}aa||x("227");var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(a){da=!0,ea=a}};function ja(a,b,c,d,e,f,g,h,l){da=!1,ea=null,function ca(a,b,c,d,e,f,g,h,l){var k=Array.prototype.slice.call(arguments,3);try{b.apply(c,k)}catch(m){this.onError(m)}}.apply(ia,arguments)}var la=null,ma={};function na(){if(la)for(var a in ma){var b=ma[a],c=la.indexOf(a);if(-1<c||x("96",a),!oa[c])for(var d in b.extractEvents||x("97",a),oa[c]=b,c=b.eventTypes){var e=void 0,f=c[d],g=b,h=d;pa.hasOwnProperty(h)&&x("99",h),pa[h]=f;var l=f.phasedRegistrationNames;if(l){for(e in l)l.hasOwnProperty(e)&&qa(l[e],g,h);e=!0}else f.registrationName?(qa(f.registrationName,g,h),e=!0):e=!1;e||x("98",d,a)}}}function qa(a,b,c){ra[a]&&x("100",a),ra[a]=b,sa[a]=b.eventTypes[c].dependencies}var oa=[],pa={},ra={},sa={},ta=null,ua=null,va=null;function wa(a,b,c){var d=a.type||"unknown-event";a.currentTarget=va(c),function ka(a,b,c,d,e,f,g,h,l){if(ja.apply(this,arguments),da){if(da){var k=ea;da=!1,ea=null}else x("198"),k=void 0;fa||(fa=!0,ha=k)}}(d,b,void 0,a),a.currentTarget=null}function xa(a,b){return null==b&&x("30"),null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function ya(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var za=null;function Aa(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)wa(a,b[d],c[d]);else b&&wa(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}var Ba={injectEventPluginOrder:function(a){la&&x("101"),la=Array.prototype.slice.call(a),na()},injectEventPluginsByName:function(a){var c,b=!1;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];ma.hasOwnProperty(c)&&ma[c]===d||(ma[c]&&x("102",c),ma[c]=d,b=!0)}b&&na()}};function Ca(a,b){var c=a.stateNode;if(!c)return null;var d=ta(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(d=!d.disabled)||(d=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!d;break a;default:a=!1}return a?null:(c&&"function"!=typeof c&&x("231",b,typeof c),c)}function Da(a){if(null!==a&&(za=xa(za,a)),a=za,za=null,a&&(ya(a,Aa),za&&x("95"),fa))throw a=ha,fa=!1,ha=null,a}var Ea=Math.random().toString(36).slice(2),Fa="__reactInternalInstance$"+Ea,Ga="__reactEventHandlers$"+Ea;function Ha(a){if(a[Fa])return a[Fa];for(;!a[Fa];){if(!a.parentNode)return null;a=a.parentNode}return 5===(a=a[Fa]).tag||6===a.tag?a:null}function Ia(a){return!(a=a[Fa])||5!==a.tag&&6!==a.tag?null:a}function Ja(a){if(5===a.tag||6===a.tag)return a.stateNode;x("33")}function Ka(a){return a[Ga]||null}function La(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Ma(a,b,c){(b=Ca(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Na(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=La(b);for(b=c.length;0<b--;)Ma(c[b],"captured",a);for(b=0;b<c.length;b++)Ma(c[b],"bubbled",a)}}function Oa(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Ca(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=xa(c._dispatchListeners,b),c._dispatchInstances=xa(c._dispatchInstances,a))}function Pa(a){a&&a.dispatchConfig.registrationName&&Oa(a._targetInst,null,a)}function Qa(a){ya(a,Na)}var Ra=!("undefined"==typeof window||!window.document||!window.document.createElement);function Sa(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}var Ta={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},Ua={},Va={};function Wa(a){if(Ua[a])return Ua[a];if(!Ta[a])return a;var c,b=Ta[a];for(c in b)if(b.hasOwnProperty(c)&&c in Va)return Ua[a]=b[c];return a}Ra&&(Va=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);var Xa=Wa("animationend"),Ya=Wa("animationiteration"),Za=Wa("animationstart"),$a=Wa("transitionend"),ab="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bb=null,cb=null,db=null;function eb(){if(db)return db;var a,d,b=cb,c=b.length,e="value"in bb?bb.value:bb.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return db=e.slice(a,1<d?1-d:void 0)}function fb(){return!0}function gb(){return!1}function y(a,b,c,d){for(var e in this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?fb:gb,this.isPropagationStopped=gb,this}function ib(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function jb(a){a instanceof this||x("279"),a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function hb(a){a.eventPool=[],a.getPooled=ib,a.release=jb}n(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=fb)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=fb)},persist:function(){this.isPersistent=fb},isPersistent:gb,destructor:function(){var b,a=this.constructor.Interface;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=gb,this._dispatchInstances=this._dispatchListeners=null}}),y.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},y.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;return n(e,c.prototype),c.prototype=e,c.prototype.constructor=c,c.Interface=n({},d.Interface,a),c.extend=d.extend,hb(c),c},hb(y);var kb=y.extend({data:null}),lb=y.extend({data:null}),mb=[9,13,27,32],nb=Ra&&"CompositionEvent"in window,ob=null;Ra&&"documentMode"in document&&(ob=document.documentMode);var pb=Ra&&"TextEvent"in window&&!ob,qb=Ra&&(!nb||ob&&8<ob&&11>=ob),rb=String.fromCharCode(32),sb={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},tb=!1;function ub(a,b){switch(a){case"keyup":return-1!==mb.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function vb(a){return"object"==typeof(a=a.detail)&&"data"in a?a.data:null}var wb=!1;var zb={eventTypes:sb,extractEvents:function(a,b,c,d){var e=void 0,f=void 0;if(nb)b:{switch(a){case"compositionstart":e=sb.compositionStart;break b;case"compositionend":e=sb.compositionEnd;break b;case"compositionupdate":e=sb.compositionUpdate;break b}e=void 0}else wb?ub(a,c)&&(e=sb.compositionEnd):"keydown"===a&&229===c.keyCode&&(e=sb.compositionStart);return e?(qb&&"ko"!==c.locale&&(wb||e!==sb.compositionStart?e===sb.compositionEnd&&wb&&(f=eb()):(cb="value"in(bb=d)?bb.value:bb.textContent,wb=!0)),e=kb.getPooled(e,b,c,d),f?e.data=f:null!==(f=vb(c))&&(e.data=f),Qa(e),f=e):f=null,(a=pb?function xb(a,b){switch(a){case"compositionend":return vb(b);case"keypress":return 32!==b.which?null:(tb=!0,rb);case"textInput":return(a=b.data)===rb&&tb?null:a;default:return null}}(a,c):function yb(a,b){if(wb)return"compositionend"===a||!nb&&ub(a,b)?(a=eb(),db=cb=bb=null,wb=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return qb&&"ko"!==b.locale?null:b.data;default:return null}}(a,c))?((b=lb.getPooled(sb.beforeInput,b,c,d)).data=a,Qa(b)):b=null,null===f?b:null===b?f:[f,b]}},Ab=null,Bb=null,Cb=null;function Db(a){if(a=ua(a)){"function"!=typeof Ab&&x("280");var b=ta(a.stateNode);Ab(a.stateNode,a.type,b)}}function Eb(a){Bb?Cb?Cb.push(a):Cb=[a]:Bb=a}function Fb(){if(Bb){var a=Bb,b=Cb;if(Cb=Bb=null,Db(a),b)for(a=0;a<b.length;a++)Db(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c){return a(b,c)}function Ib(){}var Jb=!1;function Kb(a,b){if(Jb)return a(b);Jb=!0;try{return Gb(a,b)}finally{Jb=!1,(null!==Bb||null!==Cb)&&(Ib(),Fb())}}var Lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Lb[a.type]:"textarea"===b}function Nb(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function Ob(a){if(!Ra)return!1;var b=(a="on"+a)in document;return b||((b=document.createElement("div")).setAttribute(a,"return;"),b="function"==typeof b[a]),b}function Pb(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function Rb(a){a._valueTracker||(a._valueTracker=function Qb(a){var b=Pb(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}(a))}function Sb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=Pb(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}var Tb=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Tb.hasOwnProperty("ReactCurrentDispatcher")||(Tb.ReactCurrentDispatcher={current:null});var Ub=/^(.*)[\\\/]/,z="function"==typeof Symbol&&Symbol.for,Vb=z?Symbol.for("react.element"):60103,Wb=z?Symbol.for("react.portal"):60106,Xb=z?Symbol.for("react.fragment"):60107,Yb=z?Symbol.for("react.strict_mode"):60108,Zb=z?Symbol.for("react.profiler"):60114,$b=z?Symbol.for("react.provider"):60109,ac=z?Symbol.for("react.context"):60110,bc=z?Symbol.for("react.concurrent_mode"):60111,cc=z?Symbol.for("react.forward_ref"):60112,dc=z?Symbol.for("react.suspense"):60113,ec=z?Symbol.for("react.memo"):60115,fc=z?Symbol.for("react.lazy"):60116,gc="function"==typeof Symbol&&Symbol.iterator;function hc(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=gc&&a[gc]||a["@@iterator"])?a:null}function ic(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case bc:return"ConcurrentMode";case Xb:return"Fragment";case Wb:return"Portal";case Zb:return"Profiler";case Yb:return"StrictMode";case dc:return"Suspense"}if("object"==typeof a)switch(a.$$typeof){case ac:return"Context.Consumer";case $b:return"Context.Provider";case cc:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case ec:return ic(a.type);case fc:if(a=1===a._status?a._result:null)return ic(a)}return null}function jc(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=ic(a.type);c=null,d&&(c=ic(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(Ub,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}var kc=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lc=Object.prototype.hasOwnProperty,mc={},nc={};function C(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){D[a]=new C(a,0,!1,a,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];D[b]=new C(b,1,!1,a[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){D[a]=new C(a,2,!1,a.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){D[a]=new C(a,2,!1,a,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){D[a]=new C(a,3,!1,a.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(a){D[a]=new C(a,3,!0,a,null)}),["capture","download"].forEach(function(a){D[a]=new C(a,4,!1,a,null)}),["cols","rows","size","span"].forEach(function(a){D[a]=new C(a,6,!1,a,null)}),["rowSpan","start"].forEach(function(a){D[a]=new C(a,5,!1,a.toLowerCase(),null)});var rc=/[\-:]([a-z])/g;function sc(a){return a[1].toUpperCase()}function tc(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(function qc(a,b,c,d){if(null==b||function pc(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}(b,c,e,d)&&(c=null),d||null===e?function oc(a){return!!lc.call(nc,a)||!lc.call(mc,a)&&(kc.test(a)?nc[a]=!0:(mc[a]=!0,!1))}(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(c=3===(e=e.type)||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function uc(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function vc(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function wc(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=uc(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function xc(a,b){null!=(b=b.checked)&&tc(a,"checked",b,!1)}function yc(a,b){xc(a,b);var c=uc(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?zc(a,b.type,c):b.hasOwnProperty("defaultValue")&&zc(a,b.type,uc(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Ac(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}""!==(c=a.name)&&(a.name=""),a.defaultChecked=!a.defaultChecked,a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function zc(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(rc,sc);D[b]=new C(b,1,!1,a,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(rc,sc);D[b]=new C(b,1,!1,a,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(rc,sc);D[b]=new C(b,1,!1,a,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(a){D[a]=new C(a,1,!1,a.toLowerCase(),null)});var Bc={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Cc(a,b,c){return(a=y.getPooled(Bc.change,a,b,c)).type="change",Eb(c),Qa(a),a}var Dc=null,Ec=null;function Fc(a){Da(a)}function Gc(a){if(Sb(Ja(a)))return a}function Hc(a,b){if("change"===a)return b}var Ic=!1;function Jc(){Dc&&(Dc.detachEvent("onpropertychange",Kc),Ec=Dc=null)}function Kc(a){"value"===a.propertyName&&Gc(Ec)&&Kb(Fc,a=Cc(Ec,a,Nb(a)))}function Lc(a,b,c){"focus"===a?(Jc(),Ec=c,(Dc=b).attachEvent("onpropertychange",Kc)):"blur"===a&&Jc()}function Mc(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return Gc(Ec)}function Nc(a,b){if("click"===a)return Gc(b)}function Oc(a,b){if("input"===a||"change"===a)return Gc(b)}Ra&&(Ic=Ob("input")&&(!document.documentMode||9<document.documentMode));var Pc={eventTypes:Bc,_isInputEventSupported:Ic,extractEvents:function(a,b,c,d){var e=b?Ja(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();if("select"===h||"input"===h&&"file"===e.type?f=Hc:Mb(e)?Ic?f=Oc:(f=Mc,g=Lc):(h=e.nodeName)&&"input"===h.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(f=Nc),f&&(f=f(a,b)))return Cc(f,c,d);g&&g(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&zc(e,"number",e.value)}},Qc=y.extend({view:null,detail:null}),Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=Rc[a])&&!!b[a]}function Tc(){return Sc}var Uc=0,Vc=0,Wc=!1,Xc=!1,Yc=Qc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Tc,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=Uc;return Uc=a.screenX,Wc?"mousemove"===a.type?a.screenX-b:0:(Wc=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=Vc;return Vc=a.screenY,Xc?"mousemove"===a.type?a.screenY-b:0:(Xc=!0,0)}}),Zc=Yc.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),$c={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},ad={eventTypes:$c,extractEvents:function(a,b,c,d){var e="mouseover"===a||"pointerover"===a,f="mouseout"===a||"pointerout"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;if(e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window,f?(f=b,b=(b=c.relatedTarget||c.toElement)?Ha(b):null):f=null,f===b)return null;var g=void 0,h=void 0,l=void 0,k=void 0;"mouseout"===a||"mouseover"===a?(g=Yc,h=$c.mouseLeave,l=$c.mouseEnter,k="mouse"):"pointerout"!==a&&"pointerover"!==a||(g=Zc,h=$c.pointerLeave,l=$c.pointerEnter,k="pointer");var m=null==f?e:Ja(f);if(e=null==b?e:Ja(b),(a=g.getPooled(h,f,c,d)).type=k+"leave",a.target=m,a.relatedTarget=e,(c=g.getPooled(l,b,c,d)).type=k+"enter",c.target=e,c.relatedTarget=m,d=b,f&&d)a:{for(e=d,k=0,g=b=f;g;g=La(g))k++;for(g=0,l=e;l;l=La(l))g++;for(;0<k-g;)b=La(b),k--;for(;0<g-k;)e=La(e),g--;for(;k--;){if(b===e||b===e.alternate)break a;b=La(b),e=La(e)}b=null}else b=null;for(e=b,b=[];f&&f!==e&&(null===(k=f.alternate)||k!==e);)b.push(f),f=La(f);for(f=[];d&&d!==e&&(null===(k=d.alternate)||k!==e);)f.push(d),d=La(d);for(d=0;d<b.length;d++)Oa(b[d],"bubbled",a);for(d=f.length;0<d--;)Oa(f[d],"captured",c);return[a,c]}};function bd(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b}var cd=Object.prototype.hasOwnProperty;function dd(a,b){if(bd(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!cd.call(b,c[d])||!bd(a[c[d]],b[c[d]]))return!1;return!0}function ed(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!=(2&b.effectTag))return 1;for(;b.return;)if(0!=(2&(b=b.return).effectTag))return 1}return 3===b.tag?2:3}function fd(a){2!==ed(a)&&x("188")}function hd(a){if(!(a=function gd(a){var b=a.alternate;if(!b)return 3===(b=ed(a))&&x("188"),1===b?null:a;for(var c=a,d=b;;){var e=c.return,f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return fd(e),a;if(g===d)return fd(e),b;g=g.sibling}x("188")}if(c.return!==d.return)c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0,c=e,d=f;break}if(h===d){g=!0,d=e,c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0,c=f,d=e;break}if(h===d){g=!0,d=f,c=e;break}h=h.sibling}g||x("189")}}c.alternate!==d&&x("190")}return 3!==c.tag&&x("188"),c.stateNode.current===c?a:b}(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}var id=y.extend({animationName:null,elapsedTime:null,pseudoElement:null}),jd=y.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),kd=Qc.extend({relatedTarget:null});function ld(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}var md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},od=Qc.extend({key:function(a){if(a.key){var b=md[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?13===(a=ld(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?nd[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Tc,charCode:function(a){return"keypress"===a.type?ld(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?ld(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),pd=Yc.extend({dataTransfer:null}),qd=Qc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Tc}),rd=y.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sd=Yc.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),td=[["abort","abort"],[Xa,"animationEnd"],[Ya,"animationIteration"],[Za,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[$a,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],ud={},vd={};function wd(a,b){var c=a[0],d="on"+((a=a[1])[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+"Capture"},dependencies:[c],isInteractive:b},ud[a]=b,vd[c]=b}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(a){wd(a,!0)}),td.forEach(function(a){wd(a,!1)});var xd={eventTypes:ud,isInteractiveTopLevelEventType:function(a){return void 0!==(a=vd[a])&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=vd[a];if(!e)return null;switch(a){case"keypress":if(0===ld(c))return null;case"keydown":case"keyup":a=od;break;case"blur":case"focus":a=kd;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=Yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=qd;break;case Xa:case Ya:case Za:a=id;break;case $a:a=rd;break;case"scroll":a=Qc;break;case"wheel":a=sd;break;case"copy":case"cut":case"paste":a=jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=Zc;break;default:a=y}return Qa(b=a.getPooled(e,b,c,d)),b}},yd=xd.isInteractiveTopLevelEventType,zd=[];function Ad(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d;for(d=c;d.return;)d=d.return;if(!(d=3!==d.tag?null:d.stateNode.containerInfo))break;a.ancestors.push(c),c=Ha(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Nb(a.nativeEvent);d=a.topLevelType;for(var f=a.nativeEvent,g=null,h=0;h<oa.length;h++){var l=oa[h];l&&(l=l.extractEvents(d,b,f,e))&&(g=xa(g,l))}Da(g)}}var Bd=!0;function E(a,b){if(!b)return null;var c=(yd(a)?Cd:Dd).bind(null,a);b.addEventListener(a,c,!1)}function Ed(a,b){if(!b)return null;var c=(yd(a)?Cd:Dd).bind(null,a);b.addEventListener(a,c,!0)}function Cd(a,b){Hb(Dd,a,b)}function Dd(a,b){if(Bd){var c=Nb(b);if(null===(c=Ha(c))||"number"!=typeof c.tag||2===ed(c)||(c=null),zd.length){var d=zd.pop();d.topLevelType=a,d.nativeEvent=b,d.targetInst=c,a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{Kb(Ad,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>zd.length&&zd.push(a)}}}var Fd={},Gd=0,Hd="_reactListenersID"+(""+Math.random()).slice(2);function Id(a){return Object.prototype.hasOwnProperty.call(a,Hd)||(a[Hd]=Gd++,Fd[a[Hd]]={}),Fd[a[Hd]]}function Jd(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}}function Kd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ld(a,b){var d,c=Kd(a);for(a=0;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Kd(c)}}function Nd(){for(var a=window,b=Jd();b instanceof a.HTMLIFrameElement;){try{var c="string"==typeof b.contentWindow.location.href}catch(d){c=!1}if(!c)break;b=Jd((a=b.contentWindow).document)}return b}function Od(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function Qd(a){var b=Nd(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&function Md(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?Md(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}(c.ownerDocument.documentElement,c)){if(null!==d&&Od(c))if(b=d.start,void 0===(a=d.end)&&(a=b),"selectionStart"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if((a=(b=c.ownerDocument||document)&&b.defaultView||window).getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e),!a.extend&&f>d&&(e=d,d=f,f=e),e=Ld(c,f);var g=Ld(c,d);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&((b=b.createRange()).setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}for(b=[],a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});for("function"==typeof c.focus&&c.focus(),c=0;c<b.length;c++)(a=b[c]).element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Rd=Ra&&"documentMode"in document&&11>=document.documentMode,Sd={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Td=null,Ud=null,Vd=null,Wd=!1;function Xd(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return Wd||null==Td||Td!==Jd(c)?null:("selectionStart"in(c=Td)&&Od(c)?c={start:c.selectionStart,end:c.selectionEnd}:c={anchorNode:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset},Vd&&dd(Vd,c)?null:(Vd=c,(a=y.getPooled(Sd.select,Ud,a,b)).type="select",a.target=Td,Qa(a),a))}var Yd={eventTypes:Sd,extractEvents:function(a,b,c,d){var f,e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument;if(!(f=!e)){a:{e=Id(e),f=sa.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;switch(e=b?Ja(b):window,a){case"focus":(Mb(e)||"true"===e.contentEditable)&&(Td=e,Ud=b,Vd=null);break;case"blur":Vd=Ud=Td=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wd=!1,Xd(c,d);case"selectionchange":if(Rd)break;case"keydown":case"keyup":return Xd(c,d)}return null}};function $d(a,b){return a=n({children:void 0},b),(b=function Zd(a){var b="";return aa.Children.forEach(a,function(a){null!=a&&(b+=a)}),b}(b.children))&&(a.children=b),a}function ae(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+uc(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function be(a,b){return null!=b.dangerouslySetInnerHTML&&x("91"),n({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ce(a,b){var c=b.value;null==c&&(c=b.defaultValue,null!=(b=b.children)&&(null!=c&&x("92"),Array.isArray(b)&&(1>=b.length||x("93"),b=b[0]),c=b),null==c&&(c="")),a._wrapperState={initialValue:uc(c)}}function de(a,b){var c=uc(b.value),d=uc(b.defaultValue);null!=c&&((c=""+c)!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function ee(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}Ba.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ta=Ka,ua=Ia,va=Ja,Ba.injectEventPluginsByName({SimpleEventPlugin:xd,EnterLeaveEventPlugin:ad,ChangeEventPlugin:Pc,SelectEventPlugin:Yd,BeforeInputEventPlugin:zb});var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ge(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?ge(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}var a,ie=void 0,je=(a=function(a,b){if(a.namespaceURI!==fe.svg||"innerHTML"in a)a.innerHTML=b;else{for((ie=ie||document.createElement("div")).innerHTML="<svg>"+b+"</svg>",b=ie.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c)})}:a);function ke(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b}var le={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ne(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||le.hasOwnProperty(a)&&le[a]?(""+b).trim():b+"px"}function oe(a,b){for(var c in a=a.style,b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=ne(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}Object.keys(le).forEach(function(a){me.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),le[b]=le[a]})});var pe=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qe(a,b){b&&(pe[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML)&&x("137",a,""),null!=b.dangerouslySetInnerHTML&&(null!=b.children&&x("60"),"object"==typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML||x("61")),null!=b.style&&"object"!=typeof b.style&&x("62",""))}function re(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function se(a,b){var c=Id(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);b=sa[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case"scroll":Ed("scroll",a);break;case"focus":case"blur":Ed("focus",a),Ed("blur",a),c.blur=!0,c.focus=!0;break;case"cancel":case"close":Ob(e)&&Ed(e,a);break;case"invalid":case"submit":case"reset":break;default:-1===ab.indexOf(e)&&E(e,a)}c[e]=!0}}}function te(){}var ue=null,ve=null;function we(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function xe(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var ye="function"==typeof setTimeout?setTimeout:void 0,ze="function"==typeof clearTimeout?clearTimeout:void 0,Ae=r.unstable_scheduleCallback,Be=r.unstable_cancelCallback;function De(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function Ee(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}new Set;var Fe=[],Ge=-1;function F(a){0>Ge||(a.current=Fe[Ge],Fe[Ge]=null,Ge--)}function G(a,b){Fe[++Ge]=a.current,a.current=b}var He={},H={current:He},I={current:!1},Ie=He;function Je(a,b){var c=a.type.contextTypes;if(!c)return He;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var f,e={};for(f in c)e[f]=b[f];return d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e),e}function J(a){return null!=(a=a.childContextTypes)}function Ke(a){F(I),F(H)}function Le(a){F(I),F(H)}function Me(a,b,c){H.current!==He&&x("168"),G(H,b),G(I,c)}function Ne(a,b,c){var d=a.stateNode;if(a=b.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var e in d=d.getChildContext())e in a||x("108",ic(b)||"Unknown",e);return n({},c,d)}function Oe(a){var b=a.stateNode;return b=b&&b.__reactInternalMemoizedMergedChildContext||He,Ie=H.current,G(H,b),G(I,I.current),!0}function Pe(a,b,c){var d=a.stateNode;d||x("169"),c?(b=Ne(a,b,Ie),d.__reactInternalMemoizedMergedChildContext=b,F(I),F(H),G(H,b)):F(I),G(I,c)}var Qe=null,Re=null;function Se(a){return function(b){try{return a(b)}catch(c){}}}function Ue(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function K(a,b,c,d){return new Ue(a,b,c,d)}function Ve(a){return!(!(a=a.prototype)||!a.isReactComponent)}function Xe(a,b){var c=a.alternate;return null===c?((c=K(a.tag,b,a.key,a.mode)).elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,c.contextDependencies=a.contextDependencies,c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function Ye(a,b,c,d,e,f){var g=2;if(d=a,"function"==typeof a)Ve(a)&&(g=1);else if("string"==typeof a)g=5;else a:switch(a){case Xb:return Ze(c.children,e,f,b);case bc:return $e(c,3|e,f,b);case Yb:return $e(c,2|e,f,b);case Zb:return(a=K(12,c,b,4|e)).elementType=Zb,a.type=Zb,a.expirationTime=f,a;case dc:return(a=K(13,c,b,e)).elementType=dc,a.type=dc,a.expirationTime=f,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case $b:g=10;break a;case ac:g=9;break a;case cc:g=11;break a;case ec:g=14;break a;case fc:g=16,d=null;break a}x("130",null==a?a:typeof a,"")}return(b=K(g,c,b,e)).elementType=a,b.type=d,b.expirationTime=f,b}function Ze(a,b,c,d){return(a=K(7,a,d,b)).expirationTime=c,a}function $e(a,b,c,d){return a=K(8,a,d,b),b=0==(1&b)?Yb:bc,a.elementType=b,a.type=b,a.expirationTime=c,a}function af(a,b,c){return(a=K(6,a,null,b)).expirationTime=c,a}function bf(a,b,c){return(b=K(4,null!==a.children?a.children:[],a.key,b)).expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function cf(a,b){a.didError=!1;var c=a.earliestPendingTime;0===c?a.earliestPendingTime=a.latestPendingTime=b:c<b?a.earliestPendingTime=b:a.latestPendingTime>b&&(a.latestPendingTime=b),df(b,a)}function ff(a,b){a.didError=!1,a.latestPingedTime>=b&&(a.latestPingedTime=0);var c=a.earliestPendingTime,d=a.latestPendingTime;c===b?a.earliestPendingTime=d===b?a.latestPendingTime=0:d:d===b&&(a.latestPendingTime=c),c=a.earliestSuspendedTime,d=a.latestSuspendedTime,0===c?a.earliestSuspendedTime=a.latestSuspendedTime=b:c<b?a.earliestSuspendedTime=b:d>b&&(a.latestSuspendedTime=b),df(b,a)}function gf(a,b){var c=a.earliestPendingTime;return c>b&&(b=c),(a=a.earliestSuspendedTime)>b&&(b=a),b}function df(a,b){var c=b.earliestSuspendedTime,d=b.latestSuspendedTime,e=b.earliestPendingTime,f=b.latestPingedTime;0===(e=0!==e?e:f)&&(0===a||d<a)&&(e=d),0!==(a=e)&&c>a&&(a=c),b.nextExpirationTimeToWorkOn=e,b.expirationTime=a}function L(a,b){if(a&&a.defaultProps)for(var c in b=n({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}var jf=(new aa.Component).refs;function kf(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:n({},b,c),a.memoizedState=c,null!==(d=a.updateQueue)&&0===a.expirationTime&&(d.baseState=c)}var tf={isMounted:function(a){return!!(a=a._reactInternalFiber)&&2===ed(a)},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=lf(),e=nf(d=mf(d,a));e.payload=b,null!=c&&(e.callback=c),of(),pf(a,e),qf(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=lf(),e=nf(d=mf(d,a));e.tag=rf,e.payload=b,null!=c&&(e.callback=c),of(),pf(a,e),qf(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=lf(),d=nf(c=mf(c,a));d.tag=sf,null!=b&&(d.callback=b),of(),pf(a,d),qf(a,c)}};function uf(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!dd(c,d)||!dd(e,f))}function vf(a,b,c){var d=!1,e=He,f=b.contextType;return"object"==typeof f&&null!==f?f=M(f):(e=J(b)?Ie:H.current,f=(d=null!=(d=b.contextTypes))?Je(a,e):He),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=tf,a.stateNode=b,b._reactInternalFiber=a,d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function wf(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&tf.enqueueReplaceState(b,b.state,null)}function xf(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=jf;var f=b.contextType;"object"==typeof f&&null!==f?e.context=M(f):(f=J(b)?Ie:H.current,e.context=Je(a,f)),null!==(f=a.updateQueue)&&(yf(a,f,c,e,d),e.state=a.memoizedState),"function"==typeof(f=b.getDerivedStateFromProps)&&(kf(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&tf.enqueueReplaceState(e,e.state,null),null!==(f=a.updateQueue)&&(yf(a,f,c,e,d),e.state=a.memoizedState)),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}var zf=Array.isArray;function Af(a,b,c){if(null!==(a=c.ref)&&"function"!=typeof a&&"object"!=typeof a){if(c._owner){c=c._owner;var d=void 0;c&&(1!==c.tag&&x("309"),d=c.stateNode),d||x("147",a);var e=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===e?b.ref:((b=function(a){var b=d.refs;b===jf&&(b=d.refs={}),null===a?delete b[e]:b[e]=a})._stringRef=e,b)}"string"!=typeof a&&x("284"),c._owner||x("290",a)}return a}function Bf(a,b){"textarea"!==a.type&&x("31","[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,"")}function Cf(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){return(a=Xe(a,b)).index=0,a.sibling=null,a}function f(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index)<c?(b.effectTag=2,c):d:(b.effectTag=2,c):c}function g(b){return a&&null===b.alternate&&(b.effectTag=2),b}function h(a,b,c,d){return null===b||6!==b.tag?((b=af(c,a.mode,d)).return=a,b):((b=e(b,c)).return=a,b)}function l(a,b,c,d){return null!==b&&b.elementType===c.type?((d=e(b,c.props)).ref=Af(a,b,c),d.return=a,d):((d=Ye(c.type,c.key,c.props,null,a.mode,d)).ref=Af(a,b,c),d.return=a,d)}function k(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?((b=bf(c,a.mode,d)).return=a,b):((b=e(b,c.children||[])).return=a,b)}function m(a,b,c,d,f){return null===b||7!==b.tag?((b=Ze(c,a.mode,d,f)).return=a,b):((b=e(b,c)).return=a,b)}function p(a,b,c){if("string"==typeof b||"number"==typeof b)return(b=af(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Vb:return(c=Ye(b.type,b.key,b.props,null,a.mode,c)).ref=Af(a,null,b),c.return=a,c;case Wb:return(b=bf(b,a.mode,c)).return=a,b}if(zf(b)||hc(b))return(b=Ze(b,a.mode,c,null)).return=a,b;Bf(a,b)}return null}function t(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:h(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Vb:return c.key===e?c.type===Xb?m(a,b,c.props.children,d,e):l(a,b,c,d):null;case Wb:return c.key===e?k(a,b,c,d):null}if(zf(c)||hc(c))return null!==e?null:m(a,b,c,d,null);Bf(a,c)}return null}function A(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return h(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Vb:return a=a.get(null===d.key?c:d.key)||null,d.type===Xb?m(b,a,d.props.children,e,d.key):l(b,a,d,e);case Wb:return k(b,a=a.get(null===d.key?c:d.key)||null,d,e)}if(zf(d)||hc(d))return m(b,a=a.get(c)||null,d,e,null);Bf(b,d)}return null}function v(e,g,h,k){for(var l=null,m=null,q=g,u=g=0,B=null;null!==q&&u<h.length;u++){q.index>u?(B=q,q=null):B=q.sibling;var w=t(e,q,h[u],k);if(null===w){null===q&&(q=B);break}a&&q&&null===w.alternate&&b(e,q),g=f(w,g,u),null===m?l=w:m.sibling=w,m=w,q=B}if(u===h.length)return c(e,q),l;if(null===q){for(;u<h.length;u++)(q=p(e,h[u],k))&&(g=f(q,g,u),null===m?l=q:m.sibling=q,m=q);return l}for(q=d(e,q);u<h.length;u++)(B=A(q,e,u,h[u],k))&&(a&&null!==B.alternate&&q.delete(null===B.key?u:B.key),g=f(B,g,u),null===m?l=B:m.sibling=B,m=B);return a&&q.forEach(function(a){return b(e,a)}),l}function R(e,g,h,k){var l=hc(h);"function"!=typeof l&&x("150"),null==(h=l.call(h))&&x("151");for(var m=l=null,q=g,u=g=0,B=null,w=h.next();null!==q&&!w.done;u++,w=h.next()){q.index>u?(B=q,q=null):B=q.sibling;var v=t(e,q,w.value,k);if(null===v){q||(q=B);break}a&&q&&null===v.alternate&&b(e,q),g=f(v,g,u),null===m?l=v:m.sibling=v,m=v,q=B}if(w.done)return c(e,q),l;if(null===q){for(;!w.done;u++,w=h.next())null!==(w=p(e,w.value,k))&&(g=f(w,g,u),null===m?l=w:m.sibling=w,m=w);return l}for(q=d(e,q);!w.done;u++,w=h.next())null!==(w=A(q,e,u,w.value,k))&&(a&&null!==w.alternate&&q.delete(null===w.key?u:w.key),g=f(w,g,u),null===m?l=w:m.sibling=w,m=w);return a&&q.forEach(function(a){return b(e,a)}),l}return function(a,d,f,h){var k="object"==typeof f&&null!==f&&f.type===Xb&&null===f.key;k&&(f=f.props.children);var l="object"==typeof f&&null!==f;if(l)switch(f.$$typeof){case Vb:a:{for(l=f.key,k=d;null!==k;){if(k.key===l){if(7===k.tag?f.type===Xb:k.elementType===f.type){c(a,k.sibling),(d=e(k,f.type===Xb?f.props.children:f.props)).ref=Af(a,k,f),d.return=a,a=d;break a}c(a,k);break}b(a,k),k=k.sibling}f.type===Xb?((d=Ze(f.props.children,a.mode,h,f.key)).return=a,a=d):((h=Ye(f.type,f.key,f.props,null,a.mode,h)).ref=Af(a,d,f),h.return=a,a=h)}return g(a);case Wb:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling),(d=e(d,f.children||[])).return=a,a=d;break a}c(a,d);break}b(a,d),d=d.sibling}(d=bf(f,a.mode,h)).return=a,a=d}return g(a)}if("string"==typeof f||"number"==typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),(d=e(d,f)).return=a,a=d):(c(a,d),(d=af(f,a.mode,h)).return=a,a=d),g(a);if(zf(f))return v(a,d,f,h);if(hc(f))return R(a,d,f,h);if(l&&Bf(a,f),void 0===f&&!k)switch(a.tag){case 1:case 0:x("152",(h=a.type).displayName||h.name||"Component")}return c(a,d)}}var Df=Cf(!0),Ef=Cf(!1),Ff={},N={current:Ff},Gf={current:Ff},Hf={current:Ff};function If(a){return a===Ff&&x("174"),a}function Jf(a,b){G(Hf,b),G(Gf,a),G(N,Ff);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:he(null,"");break;default:b=he(b=(c=8===c?b.parentNode:b).namespaceURI||null,c=c.tagName)}F(N),G(N,b)}function Kf(a){F(N),F(Gf),F(Hf)}function Lf(a){If(Hf.current);var b=If(N.current),c=he(b,a.type);b!==c&&(G(Gf,a),G(N,c))}function Mf(a){Gf.current===a&&(F(N),F(Gf))}var Nf=0,Of=2,Pf=4,Qf=8,Rf=16,Sf=32,Tf=64,Uf=128,Vf=Tb.ReactCurrentDispatcher,Wf=0,Xf=null,O=null,P=null,Yf=null,Q=null,Zf=null,$f=0,ag=null,bg=0,cg=!1,dg=null,eg=0;function fg(){x("321")}function gg(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!bd(a[c],b[c]))return!1;return!0}function hg(a,b,c,d,e,f){if(Wf=f,Xf=b,P=null!==a?a.memoizedState:null,Vf.current=null===P?ig:jg,b=c(d,e),cg){do{cg=!1,eg+=1,P=null!==a?a.memoizedState:null,Zf=Yf,ag=Q=O=null,Vf.current=jg,b=c(d,e)}while(cg);dg=null,eg=0}return Vf.current=kg,(a=Xf).memoizedState=Yf,a.expirationTime=$f,a.updateQueue=ag,a.effectTag|=bg,a=null!==O&&null!==O.next,Wf=0,Zf=Q=Yf=P=O=Xf=null,$f=0,ag=null,bg=0,a&&x("300"),b}function lg(){Vf.current=kg,Wf=0,Zf=Q=Yf=P=O=Xf=null,$f=0,ag=null,bg=0,cg=!1,dg=null,eg=0}function mg(){var a={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Q?Yf=Q=a:Q=Q.next=a,Q}function ng(){if(null!==Zf)Zf=(Q=Zf).next,P=null!==(O=P)?O.next:null;else{null===P&&x("310");var a={memoizedState:(O=P).memoizedState,baseState:O.baseState,queue:O.queue,baseUpdate:O.baseUpdate,next:null};Q=null===Q?Yf=a:Q.next=a,P=O.next}return Q}function og(a,b){return"function"==typeof b?b(a):b}function pg(a){var b=ng(),c=b.queue;if(null===c&&x("311"),c.lastRenderedReducer=a,0<eg){var d=c.dispatch;if(null!==dg){var e=dg.get(c);if(void 0!==e){dg.delete(c);var f=b.memoizedState;do{f=a(f,e.action),e=e.next}while(null!==e);return bd(f,b.memoizedState)||(qg=!0),b.memoizedState=f,b.baseUpdate===c.last&&(b.baseState=f),c.lastRenderedState=f,[f,d]}}return[b.memoizedState,d]}d=c.last;var g=b.baseUpdate;if(f=b.baseState,null!==g?(null!==d&&(d.next=null),d=g.next):d=null!==d?d.next:null,null!==d){var h=e=null,l=d,k=!1;do{var m=l.expirationTime;m<Wf?(k||(k=!0,h=g,e=f),m>$f&&($f=m)):f=l.eagerReducer===a?l.eagerState:a(f,l.action),g=l,l=l.next}while(null!==l&&l!==d);k||(h=g,e=f),bd(f,b.memoizedState)||(qg=!0),b.memoizedState=f,b.baseUpdate=h,b.baseState=e,c.lastRenderedState=f}return[b.memoizedState,c.dispatch]}function rg(a,b,c,d){return a={tag:a,create:b,destroy:c,deps:d,next:null},null===ag?(ag={lastEffect:null}).lastEffect=a.next=a:null===(b=ag.lastEffect)?ag.lastEffect=a.next=a:(c=b.next,b.next=a,a.next=c,ag.lastEffect=a),a}function sg(a,b,c,d){var e=mg();bg|=a,e.memoizedState=rg(b,c,void 0,void 0===d?null:d)}function tg(a,b,c,d){var e=ng();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;if(f=g.destroy,null!==d&&gg(d,g.deps))return void rg(Nf,c,f,d)}bg|=a,e.memoizedState=rg(b,c,f,d)}function ug(a,b){return"function"==typeof b?(a=a(),b(a),function(){b(null)}):null!=b?(a=a(),b.current=a,function(){b.current=null}):void 0}function vg(){}function wg(a,b,c){25>eg||x("301");var d=a.alternate;if(a===Xf||null!==d&&d===Xf)if(cg=!0,a={expirationTime:Wf,action:c,eagerReducer:null,eagerState:null,next:null},null===dg&&(dg=new Map),void 0===(c=dg.get(b)))dg.set(b,a);else{for(b=c;null!==b.next;)b=b.next;b.next=a}else{of();var e=lf(),f={expirationTime:e=mf(e,a),action:c,eagerReducer:null,eagerState:null,next:null},g=b.last;if(null===g)f.next=f;else{var h=g.next;null!==h&&(f.next=h),g.next=f}if(b.last=f,0===a.expirationTime&&(null===d||0===d.expirationTime)&&null!==(d=b.lastRenderedReducer))try{var l=b.lastRenderedState,k=d(l,c);if(f.eagerReducer=d,f.eagerState=k,bd(k,l))return}catch(m){}qf(a,e)}}var kg={readContext:M,useCallback:fg,useContext:fg,useEffect:fg,useImperativeHandle:fg,useLayoutEffect:fg,useMemo:fg,useReducer:fg,useRef:fg,useState:fg,useDebugValue:fg},ig={readContext:M,useCallback:function(a,b){return mg().memoizedState=[a,void 0===b?null:b],a},useContext:M,useEffect:function(a,b){return sg(516,Uf|Tf,a,b)},useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,sg(4,Pf|Sf,ug.bind(null,b,a),c)},useLayoutEffect:function(a,b){return sg(4,Pf|Sf,a,b)},useMemo:function(a,b){var c=mg();return b=void 0===b?null:b,a=a(),c.memoizedState=[a,b],a},useReducer:function(a,b,c){var d=mg();return b=void 0!==c?c(b):b,d.memoizedState=d.baseState=b,a=(a=d.queue={last:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b}).dispatch=wg.bind(null,Xf,a),[d.memoizedState,a]},useRef:function(a){return a={current:a},mg().memoizedState=a},useState:function(a){var b=mg();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,a=(a=b.queue={last:null,dispatch:null,lastRenderedReducer:og,lastRenderedState:a}).dispatch=wg.bind(null,Xf,a),[b.memoizedState,a]},useDebugValue:vg},jg={readContext:M,useCallback:function(a,b){var c=ng();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&gg(b,d[1])?d[0]:(c.memoizedState=[a,b],a)},useContext:M,useEffect:function(a,b){return tg(516,Uf|Tf,a,b)},useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,tg(4,Pf|Sf,ug.bind(null,b,a),c)},useLayoutEffect:function(a,b){return tg(4,Pf|Sf,a,b)},useMemo:function(a,b){var c=ng();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&gg(b,d[1])?d[0]:(a=a(),c.memoizedState=[a,b],a)},useReducer:pg,useRef:function(){return ng().memoizedState},useState:function(a){return pg(og)},useDebugValue:vg},xg=null,yg=null,zg=!1;function Ag(a,b){var c=K(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function Bg(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);case 13:default:return!1}}function Cg(a){if(zg){var b=yg;if(b){var c=b;if(!Bg(a,b)){if(!(b=De(c))||!Bg(a,b))return a.effectTag|=2,zg=!1,void(xg=a);Ag(xg,c)}xg=a,yg=Ee(b)}else a.effectTag|=2,zg=!1,xg=a}}function Dg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&18!==a.tag;)a=a.return;xg=a}function Eg(a){if(a!==xg)return!1;if(!zg)return Dg(a),zg=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!xe(b,a.memoizedProps))for(b=yg;b;)Ag(a,b),b=De(b);return Dg(a),yg=xg?De(a.stateNode):null,!0}function Fg(){yg=xg=null,zg=!1}var Gg=Tb.ReactCurrentOwner,qg=!1;function S(a,b,c,d){b.child=null===a?Ef(b,null,c,d):Df(b,a.child,c,d)}function Hg(a,b,c,d,e){c=c.render;var f=b.ref;return Ig(b,e),d=hg(a,b,c,d,f,e),null===a||qg?(b.effectTag|=1,S(a,b,d,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),Jg(a,b,e))}function Kg(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||Ve(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?((a=Ye(c.type,null,d,null,b.mode,f)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,Lg(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,(c=null!==(c=c.compare)?c:dd)(e,d)&&a.ref===b.ref)?Jg(a,b,f):(b.effectTag|=1,(a=Xe(g,d)).ref=b.ref,a.return=b,b.child=a)}function Lg(a,b,c,d,e,f){return null!==a&&dd(a.memoizedProps,d)&&a.ref===b.ref&&(qg=!1,e<f)?Jg(a,b,f):Mg(a,b,c,d,f)}function Ng(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function Mg(a,b,c,d,e){var f=J(c)?Ie:H.current;return f=Je(b,f),Ig(b,e),c=hg(a,b,c,d,f,e),null===a||qg?(b.effectTag|=1,S(a,b,c,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),Jg(a,b,e))}function Og(a,b,c,d,e){if(J(c)){var f=!0;Oe(b)}else f=!1;if(Ig(b,e),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),vf(b,c,d),xf(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var l=g.context,k=c.contextType;"object"==typeof k&&null!==k?k=M(k):k=Je(b,k=J(c)?Ie:H.current);var m=c.getDerivedStateFromProps,p="function"==typeof m||"function"==typeof g.getSnapshotBeforeUpdate;p||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||l!==k)&&wf(b,g,d,k),Pg=!1;var t=b.memoizedState;l=g.state=t;var A=b.updateQueue;null!==A&&(yf(b,A,d,g,e),l=b.memoizedState),h!==d||t!==l||I.current||Pg?("function"==typeof m&&(kf(b,c,m,d),l=b.memoizedState),(h=Pg||uf(b,c,h,d,t,l,k))?(p||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=l),g.props=d,g.state=l,g.context=k,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,h=b.memoizedProps,g.props=b.type===b.elementType?h:L(b.type,h),l=g.context,"object"==typeof(k=c.contextType)&&null!==k?k=M(k):k=Je(b,k=J(c)?Ie:H.current),(p="function"==typeof(m=c.getDerivedStateFromProps)||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||l!==k)&&wf(b,g,d,k),Pg=!1,l=b.memoizedState,t=g.state=l,null!==(A=b.updateQueue)&&(yf(b,A,d,g,e),t=b.memoizedState),h!==d||l!==t||I.current||Pg?("function"==typeof m&&(kf(b,c,m,d),t=b.memoizedState),(m=Pg||uf(b,c,h,d,l,t,k))?(p||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,t,k),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,t,k)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=t),g.props=d,g.state=t,g.context=k,d=m):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&l===a.memoizedState||(b.effectTag|=256),d=!1);return Qg(a,b,c,d,f,e)}function Qg(a,b,c,d,e,f){Ng(a,b);var g=0!=(64&b.effectTag);if(!d&&!g)return e&&Pe(b,c,!1),Jg(a,b,f);d=b.stateNode,Gg.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=Df(b,a.child,null,f),b.child=Df(b,null,h,f)):S(a,b,h,f),b.memoizedState=d.state,e&&Pe(b,c,!0),b.child}function Rg(a){var b=a.stateNode;b.pendingContext?Me(0,b.pendingContext,b.pendingContext!==b.context):b.context&&Me(0,b.context,!1),Jf(a,b.containerInfo)}function Sg(a,b,c){var d=b.mode,e=b.pendingProps,f=b.memoizedState;if(0==(64&b.effectTag)){f=null;var g=!1}else f={timedOutAt:null!==f?f.timedOutAt:0},g=!0,b.effectTag&=-65;if(null===a)if(g){var h=e.fallback;a=Ze(null,d,0,null),0==(1&b.mode)&&(a.child=null!==b.memoizedState?b.child.child:b.child),d=Ze(h,d,c,null),a.sibling=d,(c=a).return=d.return=b}else c=d=Ef(b,null,e.children,c);else null!==a.memoizedState?(h=(d=a.child).sibling,g?(c=e.fallback,e=Xe(d,d.pendingProps),0==(1&b.mode)&&((g=null!==b.memoizedState?b.child.child:b.child)!==d.child&&(e.child=g)),d=e.sibling=Xe(h,c,h.expirationTime),c=e,e.childExpirationTime=0,c.return=d.return=b):c=d=Df(b,d.child,e.children,c)):(h=a.child,g?(g=e.fallback,(e=Ze(null,d,0,null)).child=h,0==(1&b.mode)&&(e.child=null!==b.memoizedState?b.child.child:b.child),(d=e.sibling=Ze(g,d,c,null)).effectTag|=2,c=e,e.childExpirationTime=0,c.return=d.return=b):d=c=Df(b,h,e.children,c)),b.stateNode=a.stateNode;return b.memoizedState=f,b.child=c,d}function Jg(a,b,c){if(null!==a&&(b.contextDependencies=a.contextDependencies),b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child&&x("153"),null!==b.child){for(c=Xe(a=b.child,a.pendingProps,a.expirationTime),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=Xe(a,a.pendingProps,a.expirationTime)).return=b;c.sibling=null}return b.child}function Tg(a,b,c){var d=b.expirationTime;if(null!==a){if(a.memoizedProps!==b.pendingProps||I.current)qg=!0;else if(d<c){switch(qg=!1,b.tag){case 3:Rg(b),Fg();break;case 5:Lf(b);break;case 1:J(b.type)&&Oe(b);break;case 4:Jf(b,b.stateNode.containerInfo);break;case 10:Ug(b,b.memoizedProps.value);break;case 13:if(null!==b.memoizedState)return 0!==(d=b.child.childExpirationTime)&&d>=c?Sg(a,b,c):null!==(b=Jg(a,b,c))?b.sibling:null}return Jg(a,b,c)}}else qg=!1;switch(b.expirationTime=0,b.tag){case 2:d=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps;var e=Je(b,H.current);if(Ig(b,c),e=hg(null,b,d,a,e,c),b.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(b.tag=1,lg(),J(d)){var f=!0;Oe(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;var g=d.getDerivedStateFromProps;"function"==typeof g&&kf(b,d,g,a),e.updater=tf,b.stateNode=e,e._reactInternalFiber=b,xf(b,d,a,c),b=Qg(null,b,d,!0,f,c)}else b.tag=0,S(null,b,e,c),b=b.child;return b;case 16:switch(e=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),f=b.pendingProps,a=function hf(a){var b=a._result;switch(a._status){case 1:return b;case 2:case 0:throw b;default:switch(a._status=0,(b=(b=a._ctor)()).then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)}),a._status){case 1:return a._result;case 2:throw a._result}throw a._result=b,b}}(e),b.type=a,e=b.tag=function We(a){if("function"==typeof a)return Ve(a)?1:0;if(null!=a){if((a=a.$$typeof)===cc)return 11;if(a===ec)return 14}return 2}(a),f=L(a,f),g=void 0,e){case 0:g=Mg(null,b,a,f,c);break;case 1:g=Og(null,b,a,f,c);break;case 11:g=Hg(null,b,a,f,c);break;case 14:g=Kg(null,b,a,L(a.type,f),d,c);break;default:x("306",a,"")}return g;case 0:return d=b.type,e=b.pendingProps,Mg(a,b,d,e=b.elementType===d?e:L(d,e),c);case 1:return d=b.type,e=b.pendingProps,Og(a,b,d,e=b.elementType===d?e:L(d,e),c);case 3:return Rg(b),null===(d=b.updateQueue)&&x("282"),e=null!==(e=b.memoizedState)?e.element:null,yf(b,d,b.pendingProps,null,c),(d=b.memoizedState.element)===e?(Fg(),b=Jg(a,b,c)):(e=b.stateNode,(e=(null===a||null===a.child)&&e.hydrate)&&(yg=Ee(b.stateNode.containerInfo),xg=b,e=zg=!0),e?(b.effectTag|=2,b.child=Ef(b,null,d,c)):(S(a,b,d,c),Fg()),b=b.child),b;case 5:return Lf(b),null===a&&Cg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,xe(d,e)?g=null:null!==f&&xe(d,f)&&(b.effectTag|=16),Ng(a,b),1!==c&&1&b.mode&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(S(a,b,g,c),b=b.child),b;case 6:return null===a&&Cg(b),null;case 13:return Sg(a,b,c);case 4:return Jf(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Df(b,null,d,c):S(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,Hg(a,b,d,e=b.elementType===d?e:L(d,e),c);case 7:return S(a,b,b.pendingProps,c),b.child;case 8:case 12:return S(a,b,b.pendingProps.children,c),b.child;case 10:a:{if(d=b.type._context,e=b.pendingProps,g=b.memoizedProps,Ug(b,f=e.value),null!==g){var h=g.value;if(0===(f=bd(h,f)?0:0|("function"==typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823))){if(g.children===e.children&&!I.current){b=Jg(a,b,c);break a}}else for(null!==(h=b.child)&&(h.return=b);null!==h;){var l=h.contextDependencies;if(null!==l){g=h.child;for(var k=l.first;null!==k;){if(k.context===d&&0!=(k.observedBits&f)){1===h.tag&&((k=nf(c)).tag=sf,pf(h,k)),h.expirationTime<c&&(h.expirationTime=c),null!==(k=h.alternate)&&k.expirationTime<c&&(k.expirationTime=c),k=c;for(var m=h.return;null!==m;){var p=m.alternate;if(m.childExpirationTime<k)m.childExpirationTime=k,null!==p&&p.childExpirationTime<k&&(p.childExpirationTime=k);else{if(!(null!==p&&p.childExpirationTime<k))break;p.childExpirationTime=k}m=m.return}l.expirationTime<c&&(l.expirationTime=c);break}k=k.next}}else g=10===h.tag&&h.type===b.type?null:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}if(null!==(h=g.sibling)){h.return=g.return,g=h;break}g=g.return}h=g}}S(a,b,e.children,c),b=b.child}return b;case 9:return e=b.type,d=(f=b.pendingProps).children,Ig(b,c),d=d(e=M(e,f.unstable_observedBits)),b.effectTag|=1,S(a,b,d,c),b.child;case 14:return f=L(e=b.type,b.pendingProps),Kg(a,b,e,f=L(e.type,f),d,c);case 15:return Lg(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:L(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,J(d)?(a=!0,Oe(b)):a=!1,Ig(b,c),vf(b,d,e),xf(b,d,e,c),Qg(null,b,d,!0,a,c)}x("156")}var Vg={current:null},Wg=null,Xg=null,Yg=null;function Ug(a,b){var c=a.type._context;G(Vg,c._currentValue),c._currentValue=b}function Zg(a){var b=Vg.current;F(Vg),a.type._context._currentValue=b}function Ig(a,b){Wg=a,Yg=Xg=null;var c=a.contextDependencies;null!==c&&c.expirationTime>=b&&(qg=!0),a.contextDependencies=null}function M(a,b){return Yg!==a&&!1!==b&&0!==b&&("number"==typeof b&&1073741823!==b||(Yg=a,b=1073741823),b={context:a,observedBits:b,next:null},null===Xg?(null===Wg&&x("308"),Xg=b,Wg.contextDependencies={first:b,expirationTime:0}):Xg=Xg.next=b),a._currentValue}var $g=0,rf=1,sf=2,ah=3,Pg=!1;function bh(a){return{baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ch(a){return{baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function nf(a){return{expirationTime:a,tag:$g,payload:null,callback:null,next:null,nextEffect:null}}function dh(a,b){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b)}function pf(a,b){var c=a.alternate;if(null===c){var d=a.updateQueue,e=null;null===d&&(d=a.updateQueue=bh(a.memoizedState))}else d=a.updateQueue,e=c.updateQueue,null===d?null===e?(d=a.updateQueue=bh(a.memoizedState),e=c.updateQueue=bh(c.memoizedState)):d=a.updateQueue=ch(e):null===e&&(e=c.updateQueue=ch(d));null===e||d===e?dh(d,b):null===d.lastUpdate||null===e.lastUpdate?(dh(d,b),dh(e,b)):(dh(d,b),e.lastUpdate=b)}function eh(a,b){var c=a.updateQueue;null===(c=null===c?a.updateQueue=bh(a.memoizedState):fh(a,c)).lastCapturedUpdate?c.firstCapturedUpdate=c.lastCapturedUpdate=b:(c.lastCapturedUpdate.next=b,c.lastCapturedUpdate=b)}function fh(a,b){var c=a.alternate;return null!==c&&b===c.updateQueue&&(b=a.updateQueue=ch(b)),b}function gh(a,b,c,d,e,f){switch(c.tag){case rf:return"function"==typeof(a=c.payload)?a.call(f,d,e):a;case ah:a.effectTag=-2049&a.effectTag|64;case $g:if(null==(e="function"==typeof(a=c.payload)?a.call(f,d,e):a))break;return n({},d,e);case sf:Pg=!0}return d}function yf(a,b,c,d,e){Pg=!1;for(var f=(b=fh(a,b)).baseState,g=null,h=0,l=b.firstUpdate,k=f;null!==l;){var m=l.expirationTime;m<e?(null===g&&(g=l,f=k),h<m&&(h=m)):(k=gh(a,0,l,k,c,d),null!==l.callback&&(a.effectTag|=32,l.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=l:(b.lastEffect.nextEffect=l,b.lastEffect=l))),l=l.next}for(m=null,l=b.firstCapturedUpdate;null!==l;){var p=l.expirationTime;p<e?(null===m&&(m=l,null===g&&(f=k)),h<p&&(h=p)):(k=gh(a,0,l,k,c,d),null!==l.callback&&(a.effectTag|=32,l.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=l:(b.lastCapturedEffect.nextEffect=l,b.lastCapturedEffect=l))),l=l.next}null===g&&(b.lastUpdate=null),null===m?b.lastCapturedUpdate=null:a.effectTag|=32,null===g&&null===m&&(f=k),b.baseState=f,b.firstUpdate=g,b.firstCapturedUpdate=m,a.expirationTime=h,a.memoizedState=k}function hh(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null),ih(b.firstEffect,c),b.firstEffect=b.lastEffect=null,ih(b.firstCapturedEffect,c),b.firstCapturedEffect=b.lastCapturedEffect=null}function ih(a,b){for(;null!==a;){var c=a.callback;if(null!==c){a.callback=null;var d=b;"function"!=typeof c&&x("191",c),c.call(d)}a=a.nextEffect}}function jh(a,b){return{value:a,source:b,stack:jc(b)}}function kh(a){a.effectTag|=4}var lh=void 0,mh=void 0,nh=void 0,oh=void 0;lh=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},mh=function(){},nh=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;switch(If(N.current),a=null,c){case"input":f=vc(g,f),d=vc(g,d),a=[];break;case"option":f=$d(g,f),d=$d(g,d),a=[];break;case"select":f=n({},f,{value:void 0}),d=n({},d,{value:void 0}),a=[];break;case"textarea":f=be(g,f),d=be(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=te)}qe(c,d),g=c=void 0;var h=null;for(c in f)if(!d.hasOwnProperty(c)&&f.hasOwnProperty(c)&&null!=f[c])if("style"===c){var l=f[c];for(g in l)l.hasOwnProperty(g)&&(h||(h={}),h[g]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ra.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in d){var k=d[c];if(l=null!=f?f[c]:void 0,d.hasOwnProperty(c)&&k!==l&&(null!=k||null!=l))if("style"===c)if(l){for(g in l)!l.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(h||(h={}),h[g]="");for(g in k)k.hasOwnProperty(g)&&l[g]!==k[g]&&(h||(h={}),h[g]=k[g])}else h||(a||(a=[]),a.push(c,h)),h=k;else"dangerouslySetInnerHTML"===c?(k=k?k.__html:void 0,l=l?l.__html:void 0,null!=k&&l!==k&&(a=a||[]).push(c,""+k)):"children"===c?l===k||"string"!=typeof k&&"number"!=typeof k||(a=a||[]).push(c,""+k):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ra.hasOwnProperty(c)?(null!=k&&se(e,c),a||l===k||(a=[])):(a=a||[]).push(c,k))}h&&(a=a||[]).push("style",h),e=a,(b.updateQueue=e)&&kh(b)}},oh=function(a,b,c,d){c!==d&&kh(b)};var ph="function"==typeof WeakSet?WeakSet:Set;function qh(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=jc(c)),null!==c&&ic(c.type),b=b.value,null!==a&&1===a.tag&&ic(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e})}}function rh(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(c){sh(a,c)}else b.current=null}function th(a,b,c){if(null!==(c=null!==(c=c.updateQueue)?c.lastEffect:null)){var d=c=c.next;do{if((d.tag&a)!==Nf){var e=d.destroy;d.destroy=void 0,void 0!==e&&e()}(d.tag&b)!==Nf&&(e=d.create,d.destroy=e()),d=d.next}while(d!==c)}}function vh(a){switch("function"==typeof Re&&Re(a),a.tag){case 0:case 11:case 14:case 15:var b=a.updateQueue;if(null!==b&&null!==(b=b.lastEffect)){var c=b=b.next;do{var d=c.destroy;if(void 0!==d){var e=a;try{d()}catch(f){sh(e,f)}}c=c.next}while(c!==b)}break;case 1:if(rh(a),"function"==typeof(b=a.stateNode).componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(f){sh(a,f)}break;case 5:rh(a);break;case 4:wh(a)}}function xh(a){return 5===a.tag||3===a.tag||4===a.tag}function yh(a){a:{for(var b=a.return;null!==b;){if(xh(b)){var c=b;break a}b=b.return}x("160"),c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode,d=!1;break;case 3:case 4:b=c.stateNode.containerInfo,d=!0;break;default:x("161")}16&c.effectTag&&(ke(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||xh(c.return)){c=null;break a}c=c.return}for(c.sibling.return=c.return,c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(2&c.effectTag)continue b;if(null===c.child||4===c.tag)continue b;c.child.return=c,c=c.child}if(!(2&c.effectTag)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)if(c)if(d){var f=b,g=e.stateNode,h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(e.stateNode,c);else d?(g=b,h=e.stateNode,8===g.nodeType?(f=g.parentNode).insertBefore(h,g):(f=g).appendChild(h),null!=(g=g._reactRootContainer)||null!==f.onclick||(f.onclick=te)):b.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function wh(a){for(var b=a,c=!1,d=void 0,e=void 0;;){if(!c){c=b.return;a:for(;;){switch(null===c&&x("160"),c.tag){case 5:d=c.stateNode,e=!1;break a;case 3:case 4:d=c.stateNode.containerInfo,e=!0;break a}c=c.return}c=!0}if(5===b.tag||6===b.tag){a:for(var f=b,g=f;;)if(vh(g),null!==g.child&&4!==g.tag)g.child.return=g,g=g.child;else{if(g===f)break;for(;null===g.sibling;){if(null===g.return||g.return===f)break a;g=g.return}g.sibling.return=g.return,g=g.sibling}e?(f=d,g=b.stateNode,8===f.nodeType?f.parentNode.removeChild(g):f.removeChild(g)):d.removeChild(b.stateNode)}else if(4===b.tag){if(null!==b.child){d=b.stateNode.containerInfo,e=!0,b.child.return=b,b=b.child;continue}}else if(vh(b),null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return;4===(b=b.return).tag&&(c=!1)}b.sibling.return=b.return,b=b.sibling}}function zh(a,b){switch(b.tag){case 0:case 11:case 14:case 15:th(Pf,Qf,b);break;case 1:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null,null!==f&&function Ce(a,b,c,d,e){a[Ga]=e,"input"===c&&"radio"===e.type&&null!=e.name&&xc(a,e),re(c,d),d=re(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];"style"===g?oe(a,h):"dangerouslySetInnerHTML"===g?je(a,h):"children"===g?ke(a,h):tc(a,g,h,d)}switch(c){case"input":yc(a,e);break;case"textarea":de(a,e);break;case"select":b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,null!=(c=e.value)?ae(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?ae(a,!!e.multiple,e.defaultValue,!0):ae(a,!!e.multiple,e.multiple?[]:"",!1))}}(c,f,e,a,d)}break;case 6:null===b.stateNode&&x("162"),b.stateNode.nodeValue=b.memoizedProps;break;case 3:case 12:break;case 13:if(c=b.memoizedState,d=void 0,a=b,null===c?d=!1:(d=!0,a=b.child,0===c.timedOutAt&&(c.timedOutAt=lf())),null!==a&&function uh(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d.style.display="none";else{d=c.stateNode;var e=c.memoizedProps.style;e=null!=e&&e.hasOwnProperty("display")?e.display:null,d.style.display=ne("display",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?"":c.memoizedProps;else{if(13===c.tag&&null!==c.memoizedState){(d=c.child.sibling).return=c,c=d;continue}if(null!==c.child){c.child.return=c,c=c.child;continue}}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}}(a,d),null!==(c=b.updateQueue)){b.updateQueue=null;var g=b.stateNode;null===g&&(g=b.stateNode=new ph),c.forEach(function(a){var c=function Ah(a,b){var c=a.stateNode;null!==c&&c.delete(b),b=mf(b=lf(),a),null!==(a=hi(a,b))&&(cf(a,b),0!==(b=a.expirationTime)&&Xh(a,b))}.bind(null,b,a);g.has(a)||(g.add(a),a.then(c,c))})}break;case 17:break;default:x("163")}}var Bh="function"==typeof WeakMap?WeakMap:Map;function Ch(a,b,c){(c=nf(c)).tag=ah,c.payload={element:null};var d=b.value;return c.callback=function(){Dh(d),qh(a,b)},c}function Eh(a,b,c){(c=nf(c)).tag=ah;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===Fh?Fh=new Set([this]):Fh.add(this));var c=b.value,e=b.stack;qh(a,b),this.componentDidCatch(c,{componentStack:null!==e?e:""})}),c}function Gh(a){switch(a.tag){case 1:J(a.type)&&Ke();var b=a.effectTag;return 2048&b?(a.effectTag=-2049&b|64,a):null;case 3:return Kf(),Le(),0!=(64&(b=a.effectTag))&&x("285"),a.effectTag=-2049&b|64,a;case 5:return Mf(a),null;case 13:return 2048&(b=a.effectTag)?(a.effectTag=-2049&b|64,a):null;case 18:return null;case 4:return Kf(),null;case 10:return Zg(a),null;default:return null}}var Hh=Tb.ReactCurrentDispatcher,Ih=Tb.ReactCurrentOwner,Jh=1073741822,Kh=!1,T=null,Lh=null,U=0,Mh=-1,Nh=!1,V=null,Oh=!1,Ph=null,Qh=null,Rh=null,Fh=null;function Sh(){if(null!==T)for(var a=T.return;null!==a;){var b=a;switch(b.tag){case 1:var c=b.type.childContextTypes;null!=c&&Ke();break;case 3:Kf(),Le();break;case 5:Mf(b);break;case 4:Kf();break;case 10:Zg(b)}a=a.return}Lh=null,U=0,Mh=-1,Nh=!1,T=null}function Th(){for(;null!==V;){var a=V.effectTag;if(16&a&&ke(V.stateNode,""),128&a){var b=V.alternate;null!==b&&(null!==(b=b.ref)&&("function"==typeof b?b(null):b.current=null))}switch(14&a){case 2:yh(V),V.effectTag&=-3;break;case 6:yh(V),V.effectTag&=-3,zh(V.alternate,V);break;case 4:zh(V.alternate,V);break;case 8:wh(a=V),a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,null!==(a=a.alternate)&&(a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null)}V=V.nextEffect}}function Uh(){for(;null!==V;){if(256&V.effectTag)a:{var a=V.alternate,b=V;switch(b.tag){case 0:case 11:case 15:th(Of,Nf,b);break a;case 1:if(256&b.effectTag&&null!==a){var c=a.memoizedProps,d=a.memoizedState;b=(a=b.stateNode).getSnapshotBeforeUpdate(b.elementType===b.type?c:L(b.type,c),d),a.__reactInternalSnapshotBeforeUpdate=b}break a;case 3:case 5:case 6:case 4:case 17:break a;default:x("163")}}V=V.nextEffect}}function Vh(a,b){for(;null!==V;){var c=V.effectTag;if(36&c){var d=V.alternate,e=V,f=b;switch(e.tag){case 0:case 11:case 15:th(Rf,Sf,e);break;case 1:var g=e.stateNode;if(4&e.effectTag)if(null===d)g.componentDidMount();else{var h=e.elementType===e.type?d.memoizedProps:L(e.type,d.memoizedProps);g.componentDidUpdate(h,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}null!==(d=e.updateQueue)&&hh(0,d,g);break;case 3:if(null!==(d=e.updateQueue)){if(g=null,null!==e.child)switch(e.child.tag){case 5:g=e.child.stateNode;break;case 1:g=e.child.stateNode}hh(0,d,g)}break;case 5:f=e.stateNode,null===d&&4&e.effectTag&&we(e.type,e.memoizedProps)&&f.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:x("163")}}128&c&&(null!==(e=V.ref)&&(f=V.stateNode,"function"==typeof e?e(f):e.current=f)),512&c&&(Ph=a),V=V.nextEffect}}function of(){null!==Qh&&Be(Qh),null!==Rh&&Rh()}function Zh(a,b){Oh=Kh=!0,a.current===b&&x("177");var c=a.pendingCommitExpirationTime;0===c&&x("261"),a.pendingCommitExpirationTime=0;var d=b.expirationTime,e=b.childExpirationTime;for(function ef(a,b){if(a.didError=!1,0===b)a.earliestPendingTime=0,a.latestPendingTime=0,a.earliestSuspendedTime=0,a.latestSuspendedTime=0,a.latestPingedTime=0;else{b<a.latestPingedTime&&(a.latestPingedTime=0);var c=a.latestPendingTime;0!==c&&(c>b?a.earliestPendingTime=a.latestPendingTime=0:a.earliestPendingTime>b&&(a.earliestPendingTime=a.latestPendingTime)),0===(c=a.earliestSuspendedTime)?cf(a,b):b<a.latestSuspendedTime?(a.earliestSuspendedTime=0,a.latestSuspendedTime=0,a.latestPingedTime=0,cf(a,b)):b>c&&cf(a,b)}df(0,a)}(a,e>d?e:d),Ih.current=null,d=void 0,1<b.effectTag?null!==b.lastEffect?(b.lastEffect.nextEffect=b,d=b.firstEffect):d=b:d=b.firstEffect,ue=Bd,ve=function Pd(){var a=Nd();if(Od(a)){if("selectionStart"in a)var b={start:a.selectionStart,end:a.selectionEnd};else a:{var c=(b=(b=a.ownerDocument)&&b.defaultView||window).getSelection&&b.getSelection();if(c&&0!==c.rangeCount){b=c.anchorNode;var d=c.anchorOffset,e=c.focusNode;c=c.focusOffset;try{b.nodeType,e.nodeType}catch(A){b=null;break a}var f=0,g=-1,h=-1,l=0,k=0,m=a,p=null;b:for(;;){for(var t;m!==b||0!==d&&3!==m.nodeType||(g=f+d),m!==e||0!==c&&3!==m.nodeType||(h=f+c),3===m.nodeType&&(f+=m.nodeValue.length),null!==(t=m.firstChild);)p=m,m=t;for(;;){if(m===a)break b;if(p===b&&++l===d&&(g=f),p===e&&++k===c&&(h=f),null!==(t=m.nextSibling))break;p=(m=p).parentNode}m=t}b=-1===g||-1===h?null:{start:g,end:h}}else b=null}b=b||{start:0,end:0}}else b=null;return{focusedElem:a,selectionRange:b}}(),Bd=!1,V=d;null!==V;){e=!1;var f=void 0;try{Uh()}catch(h){e=!0,f=h}e&&(null===V&&x("178"),sh(V,f),null!==V&&(V=V.nextEffect))}for(V=d;null!==V;){e=!1,f=void 0;try{Th()}catch(h){e=!0,f=h}e&&(null===V&&x("178"),sh(V,f),null!==V&&(V=V.nextEffect))}for(Qd(ve),ve=null,Bd=!!ue,ue=null,a.current=b,V=d;null!==V;){e=!1,f=void 0;try{Vh(a,c)}catch(h){e=!0,f=h}e&&(null===V&&x("178"),sh(V,f),null!==V&&(V=V.nextEffect))}if(null!==d&&null!==Ph){var g=function Wh(a,b){Rh=Qh=Ph=null;var c=W;W=!0;do{if(512&b.effectTag){var d=!1,e=void 0;try{var f=b;th(Uf,Nf,f),th(Nf,Tf,f)}catch(g){d=!0,e=g}d&&sh(b,e)}b=b.nextEffect}while(null!==b);W=c,0!==(c=a.expirationTime)&&Xh(a,c),X||W||Yh(1073741823,!1)}.bind(null,a,d);Qh=r.unstable_runWithPriority(r.unstable_NormalPriority,function(){return Ae(g)}),Rh=g}Kh=Oh=!1,"function"==typeof Qe&&Qe(b.stateNode),c=b.expirationTime,0===(b=(b=b.childExpirationTime)>c?b:c)&&(Fh=null),function $h(a,b){a.expirationTime=b,a.finishedWork=null}(a,b)}function ai(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0==(1024&a.effectTag)){T=a;a:{var e=b,f=U,g=(b=a).pendingProps;switch(b.tag){case 2:case 16:break;case 15:case 0:break;case 1:J(b.type)&&Ke();break;case 3:Kf(),Le(),(g=b.stateNode).pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),null!==e&&null!==e.child||(Eg(b),b.effectTag&=-3),mh(b);break;case 5:Mf(b);var h=If(Hf.current);if(f=b.type,null!==e&&null!=b.stateNode)nh(e,b,f,g,h),e.ref!==b.ref&&(b.effectTag|=128);else if(g){var l=If(N.current);if(Eg(b)){e=(g=b).stateNode;var k=g.type,m=g.memoizedProps,p=h;switch(e[Fa]=g,e[Ga]=m,f=void 0,h=k){case"iframe":case"object":E("load",e);break;case"video":case"audio":for(k=0;k<ab.length;k++)E(ab[k],e);break;case"source":E("error",e);break;case"img":case"image":case"link":E("error",e),E("load",e);break;case"form":E("reset",e),E("submit",e);break;case"details":E("toggle",e);break;case"input":wc(e,m),E("invalid",e),se(p,"onChange");break;case"select":e._wrapperState={wasMultiple:!!m.multiple},E("invalid",e),se(p,"onChange");break;case"textarea":ce(e,m),E("invalid",e),se(p,"onChange")}for(f in qe(h,m),k=null,m)m.hasOwnProperty(f)&&(l=m[f],"children"===f?"string"==typeof l?e.textContent!==l&&(k=["children",l]):"number"==typeof l&&e.textContent!==""+l&&(k=["children",""+l]):ra.hasOwnProperty(f)&&null!=l&&se(p,f));switch(h){case"input":Rb(e),Ac(e,m,!0);break;case"textarea":Rb(e),ee(e);break;case"select":case"option":break;default:"function"==typeof m.onClick&&(e.onclick=te)}f=k,g.updateQueue=f,(g=null!==f)&&kh(b)}else{m=b,p=f,e=g,k=9===h.nodeType?h:h.ownerDocument,l===fe.html&&(l=ge(p)),l===fe.html?"script"===p?((e=k.createElement("div")).innerHTML="<script><\/script>",k=e.removeChild(e.firstChild)):"string"==typeof e.is?k=k.createElement(p,{is:e.is}):(k=k.createElement(p),"select"===p&&(p=k,e.multiple?p.multiple=!0:e.size&&(p.size=e.size))):k=k.createElementNS(l,p),(e=k)[Fa]=m,e[Ga]=g,lh(e,b,!1,!1),p=e;var t=h,A=re(k=f,m=g);switch(k){case"iframe":case"object":E("load",p),h=m;break;case"video":case"audio":for(h=0;h<ab.length;h++)E(ab[h],p);h=m;break;case"source":E("error",p),h=m;break;case"img":case"image":case"link":E("error",p),E("load",p),h=m;break;case"form":E("reset",p),E("submit",p),h=m;break;case"details":E("toggle",p),h=m;break;case"input":wc(p,m),h=vc(p,m),E("invalid",p),se(t,"onChange");break;case"option":h=$d(p,m);break;case"select":p._wrapperState={wasMultiple:!!m.multiple},h=n({},m,{value:void 0}),E("invalid",p),se(t,"onChange");break;case"textarea":ce(p,m),h=be(p,m),E("invalid",p),se(t,"onChange");break;default:h=m}qe(k,h),l=void 0;var v=k,R=p,u=h;for(l in u)if(u.hasOwnProperty(l)){var q=u[l];"style"===l?oe(R,q):"dangerouslySetInnerHTML"===l?null!=(q=q?q.__html:void 0)&&je(R,q):"children"===l?"string"==typeof q?("textarea"!==v||""!==q)&&ke(R,q):"number"==typeof q&&ke(R,""+q):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(ra.hasOwnProperty(l)?null!=q&&se(t,l):null!=q&&tc(R,l,q,A))}switch(k){case"input":Rb(p),Ac(p,m,!1);break;case"textarea":Rb(p),ee(p);break;case"option":null!=m.value&&p.setAttribute("value",""+uc(m.value));break;case"select":(h=p).multiple=!!m.multiple,null!=(p=m.value)?ae(h,!!m.multiple,p,!1):null!=m.defaultValue&&ae(h,!!m.multiple,m.defaultValue,!0);break;default:"function"==typeof h.onClick&&(p.onclick=te)}(g=we(f,g))&&kh(b),b.stateNode=e}null!==b.ref&&(b.effectTag|=128)}else null===b.stateNode&&x("166");break;case 6:e&&null!=b.stateNode?oh(e,b,e.memoizedProps,g):("string"!=typeof g&&(null===b.stateNode&&x("166")),e=If(Hf.current),If(N.current),Eg(b)?(f=(g=b).stateNode,e=g.memoizedProps,f[Fa]=g,(g=f.nodeValue!==e)&&kh(b)):(f=b,(g=(9===e.nodeType?e:e.ownerDocument).createTextNode(g))[Fa]=b,f.stateNode=g));break;case 11:break;case 13:if(g=b.memoizedState,0!=(64&b.effectTag)){b.expirationTime=f,T=b;break a}g=null!==g,f=null!==e&&null!==e.memoizedState,null!==e&&!g&&f&&(null!==(e=e.child.sibling)&&(null!==(h=b.firstEffect)?(b.firstEffect=e,e.nextEffect=h):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)),(g||f)&&(b.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Kf(),mh(b);break;case 10:Zg(b);break;case 9:case 14:break;case 17:J(b.type)&&Ke();break;case 18:break;default:x("156")}T=null}if(b=a,1===U||1!==b.childExpirationTime){for(g=0,f=b.child;null!==f;)(e=f.expirationTime)>g&&(g=e),(h=f.childExpirationTime)>g&&(g=h),f=f.sibling;b.childExpirationTime=g}if(null!==T)return T;null!==c&&0==(1024&c.effectTag)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a))}else{if(null!==(a=Gh(a)))return a.effectTag&=1023,a;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=1024)}if(null!==d)return d;if(null===c)break;a=c}return null}function bi(a){var b=Tg(a.alternate,a,U);return a.memoizedProps=a.pendingProps,null===b&&(b=ai(a)),Ih.current=null,b}function ci(a,b){Kh&&x("243"),of(),Kh=!0;var c=Hh.current;Hh.current=kg;var d=a.nextExpirationTimeToWorkOn;d===U&&a===Lh&&null!==T||(Sh(),U=d,T=Xe((Lh=a).current,null),a.pendingCommitExpirationTime=0);for(var e=!1;;){try{if(b)for(;null!==T&&!di();)T=bi(T);else for(;null!==T;)T=bi(T)}catch(u){if(Yg=Xg=Wg=null,lg(),null===T)e=!0,Dh(u);else{null===T&&x("271");var f=T,g=f.return;if(null!==g){a:{var h=a,l=g,k=f,m=u;if(g=U,k.effectTag|=1024,k.firstEffect=k.lastEffect=null,null!==m&&"object"==typeof m&&"function"==typeof m.then){var p=m;m=l;var t=-1,A=-1;do{if(13===m.tag){var v=m.alternate;if(null!==v&&null!==(v=v.memoizedState)){A=10*(1073741822-v.timedOutAt);break}"number"==typeof(v=m.pendingProps.maxDuration)&&(0>=v?t=0:(-1===t||v<t)&&(t=v))}m=m.return}while(null!==m);m=l;do{if((v=13===m.tag)&&(v=void 0!==m.memoizedProps.fallback&&null===m.memoizedState),v){if(null===(l=m.updateQueue)?((l=new Set).add(p),m.updateQueue=l):l.add(p),0==(1&m.mode)){m.effectTag|=64,k.effectTag&=-1957,1===k.tag&&(null===k.alternate?k.tag=17:((g=nf(1073741823)).tag=sf,pf(k,g))),k.expirationTime=1073741823;break a}l=g;var R=(k=h).pingCache;null===R?(R=k.pingCache=new Bh,v=new Set,R.set(p,v)):void 0===(v=R.get(p))&&(v=new Set,R.set(p,v)),v.has(l)||(v.add(l),k=ei.bind(null,k,p,l),p.then(k,k)),-1===t?h=1073741823:(-1===A&&(A=10*(1073741822-gf(h,g))-5e3),h=A+t),0<=h&&Mh<h&&(Mh=h),m.effectTag|=2048,m.expirationTime=g;break a}m=m.return}while(null!==m);m=Error((ic(k.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+jc(k))}Nh=!0,m=jh(m,k),h=l;do{switch(h.tag){case 3:h.effectTag|=2048,h.expirationTime=g,eh(h,g=Ch(h,m,g));break a;case 1:if(t=m,A=h.type,k=h.stateNode,0==(64&h.effectTag)&&("function"==typeof A.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===Fh||!Fh.has(k)))){h.effectTag|=2048,h.expirationTime=g,eh(h,g=Eh(h,t,g));break a}}h=h.return}while(null!==h)}T=ai(f);continue}e=!0,Dh(u)}}break}if(Kh=!1,Hh.current=c,Yg=Xg=Wg=null,lg(),e)Lh=null,a.finishedWork=null;else if(null!==T)a.finishedWork=null;else{if(null===(c=a.current.alternate)&&x("281"),Lh=null,Nh){if(e=a.latestPendingTime,f=a.latestSuspendedTime,g=a.latestPingedTime,0!==e&&e<d||0!==f&&f<d||0!==g&&g<d)return ff(a,d),void fi(a,c,d,a.expirationTime,-1);if(!a.didError&&b)return a.didError=!0,d=a.nextExpirationTimeToWorkOn=d,b=a.expirationTime=1073741823,void fi(a,c,d,b,-1)}b&&-1!==Mh?(ff(a,d),(b=10*(1073741822-gf(a,d)))<Mh&&(Mh=b),b=10*(1073741822-lf()),b=Mh-b,fi(a,c,d,a.expirationTime,0>b?0:b)):(a.pendingCommitExpirationTime=d,a.finishedWork=c)}}function sh(a,b){for(var c=a.return;null!==c;){switch(c.tag){case 1:var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===Fh||!Fh.has(d)))return pf(c,a=Eh(c,a=jh(b,a),1073741823)),void qf(c,1073741823);break;case 3:return pf(c,a=Ch(c,a=jh(b,a),1073741823)),void qf(c,1073741823)}c=c.return}3===a.tag&&(pf(a,c=Ch(a,c=jh(b,a),1073741823)),qf(a,1073741823))}function mf(a,b){var c=r.unstable_getCurrentPriorityLevel(),d=void 0;if(0==(1&b.mode))d=1073741823;else if(Kh&&!Oh)d=U;else{switch(c){case r.unstable_ImmediatePriority:d=1073741823;break;case r.unstable_UserBlockingPriority:d=1073741822-10*(1+((1073741822-a+15)/10|0));break;case r.unstable_NormalPriority:d=1073741822-25*(1+((1073741822-a+500)/25|0));break;case r.unstable_LowPriority:case r.unstable_IdlePriority:d=1;break;default:x("313")}null!==Lh&&d===U&&--d}return c===r.unstable_UserBlockingPriority&&(0===gi||d<gi)&&(gi=d),d}function ei(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),null!==Lh&&U===c?Lh=null:(b=a.earliestSuspendedTime,d=a.latestSuspendedTime,0!==b&&c<=b&&c>=d&&(a.didError=!1,(0===(b=a.latestPingedTime)||b>c)&&(a.latestPingedTime=c),df(c,a),0!==(c=a.expirationTime)&&Xh(a,c)))}function hi(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return e}function qf(a,b){null!==(a=hi(a,b))&&(!Kh&&0!==U&&b>U&&Sh(),cf(a,b),Kh&&!Oh&&Lh===a||Xh(a,a.expirationTime),ii>ji&&(ii=0,x("185")))}function ki(a,b,c,d,e){return r.unstable_runWithPriority(r.unstable_ImmediatePriority,function(){return a(b,c,d,e)})}var li=null,Y=null,mi=0,ni=void 0,W=!1,oi=null,Z=0,gi=0,pi=!1,qi=null,X=!1,ri=!1,si=null,ti=r.unstable_now(),ui=1073741822-(ti/10|0),vi=ui,ji=50,ii=0,wi=null;function xi(){ui=1073741822-((r.unstable_now()-ti)/10|0)}function yi(a,b){if(0!==mi){if(b<mi)return;null!==ni&&r.unstable_cancelCallback(ni)}mi=b,a=r.unstable_now()-ti,ni=r.unstable_scheduleCallback(zi,{timeout:10*(1073741822-b)-a})}function fi(a,b,c,d,e){a.expirationTime=d,0!==e||di()?0<e&&(a.timeoutHandle=ye(function Ai(a,b,c){a.pendingCommitExpirationTime=c,a.finishedWork=b,xi(),vi=ui,Bi(a,c)}.bind(null,a,b,c),e)):(a.pendingCommitExpirationTime=c,a.finishedWork=b)}function lf(){return W?vi:(Ci(),0!==Z&&1!==Z||(xi(),vi=ui),vi)}function Xh(a,b){null===a.nextScheduledRoot?(a.expirationTime=b,null===Y?(li=Y=a,a.nextScheduledRoot=a):(Y=Y.nextScheduledRoot=a).nextScheduledRoot=li):b>a.expirationTime&&(a.expirationTime=b),W||(X?ri&&(oi=a,Z=1073741823,Di(a,1073741823,!1)):1073741823===b?Yh(1073741823,!1):yi(a,b))}function Ci(){var a=0,b=null;if(null!==Y)for(var c=Y,d=li;null!==d;){var e=d.expirationTime;if(0===e){if((null===c||null===Y)&&x("244"),d===d.nextScheduledRoot){li=Y=d.nextScheduledRoot=null;break}if(d===li)li=e=d.nextScheduledRoot,Y.nextScheduledRoot=e,d.nextScheduledRoot=null;else{if(d===Y){(Y=c).nextScheduledRoot=li,d.nextScheduledRoot=null;break}c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null}d=c.nextScheduledRoot}else{if(e>a&&(a=e,b=d),d===Y)break;if(1073741823===a)break;c=d,d=d.nextScheduledRoot}}oi=b,Z=a}var Ei=!1;function di(){return!!Ei||!!r.unstable_shouldYield()&&(Ei=!0)}function zi(){try{if(!di()&&null!==li){xi();var a=li;do{var b=a.expirationTime;0!==b&&ui<=b&&(a.nextExpirationTimeToWorkOn=ui),a=a.nextScheduledRoot}while(a!==li)}Yh(0,!0)}finally{Ei=!1}}function Yh(a,b){if(Ci(),b)for(xi(),vi=ui;null!==oi&&0!==Z&&a<=Z&&!(Ei&&ui>Z);)Di(oi,Z,ui>Z),Ci(),xi(),vi=ui;else for(;null!==oi&&0!==Z&&a<=Z;)Di(oi,Z,!1),Ci();if(b&&(mi=0,ni=null),0!==Z&&yi(oi,Z),ii=0,wi=null,null!==si)for(a=si,si=null,b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(d){pi||(pi=!0,qi=d)}}if(pi)throw a=qi,qi=null,pi=!1,a}function Bi(a,b){W&&x("253"),oi=a,Z=b,Di(a,b,!1),Yh(1073741823,!1)}function Di(a,b,c){if(W&&x("245"),W=!0,c){var d=a.finishedWork;null!==d?Fi(a,d,b):(a.finishedWork=null,-1!==(d=a.timeoutHandle)&&(a.timeoutHandle=-1,ze(d)),ci(a,c),null!==(d=a.finishedWork)&&(di()?a.finishedWork=d:Fi(a,d,b)))}else null!==(d=a.finishedWork)?Fi(a,d,b):(a.finishedWork=null,-1!==(d=a.timeoutHandle)&&(a.timeoutHandle=-1,ze(d)),ci(a,c),null!==(d=a.finishedWork)&&Fi(a,d,b));W=!1}function Fi(a,b,c){var d=a.firstBatch;if(null!==d&&d._expirationTime>=c&&(null===si?si=[d]:si.push(d),d._defer))return a.finishedWork=b,void(a.expirationTime=0);a.finishedWork=null,a===wi?ii++:(wi=a,ii=0),r.unstable_runWithPriority(r.unstable_ImmediatePriority,function(){Zh(a,b)})}function Dh(a){null===oi&&x("246"),oi.expirationTime=0,pi||(pi=!0,qi=a)}function Gi(a,b){var c=X;X=!0;try{return a(b)}finally{(X=c)||W||Yh(1073741823,!1)}}function Hi(a,b){if(X&&!ri){ri=!0;try{return a(b)}finally{ri=!1}}return a(b)}function Ii(a,b,c){X||W||0===gi||(Yh(gi,!1),gi=0);var d=X;X=!0;try{return r.unstable_runWithPriority(r.unstable_UserBlockingPriority,function(){return a(b,c)})}finally{(X=d)||W||Yh(1073741823,!1)}}function Ji(a,b,c,d,e){var f=b.current;a:if(c){b:{2===ed(c=c._reactInternalFiber)&&1===c.tag||x("170");var g=c;do{switch(g.tag){case 3:g=g.stateNode.context;break b;case 1:if(J(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}}g=g.return}while(null!==g);x("171"),g=void 0}if(1===c.tag){var h=c.type;if(J(h)){c=Ne(c,h,g);break a}}c=g}else c=He;return null===b.context?b.context=c:b.pendingContext=c,b=e,(e=nf(d)).payload={element:a},null!==(b=void 0===b?null:b)&&(e.callback=b),of(),pf(f,e),qf(f,d),d}function Ki(a,b,c,d){var e=b.current;return Ji(a,b,c,e=mf(lf(),e),d)}function Li(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function Ni(a){var b=1073741822-25*(1+((1073741822-lf()+500)/25|0));b>=Jh&&(b=Jh-1),this._expirationTime=Jh=b,this._root=a,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Oi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Pi(a,b,c){a={current:b=K(3,null,null,b?3:0),containerInfo:a,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:c,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=b.stateNode=a}function Qi(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Si(a,b,c,d,e){var f=c._reactRootContainer;if(f){if("function"==typeof e){var g=e;e=function(){var a=Li(f._internalRoot);g.call(a)}}null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)}else{if(f=c._reactRootContainer=function Ri(a,b){if(b||(b=!(!(b=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new Pi(a,!1,b)}(c,d),"function"==typeof e){var h=e;e=function(){var a=Li(f._internalRoot);h.call(a)}}Hi(function(){null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)})}return Li(f._internalRoot)}function Ti(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Qi(b)||x("200"),function Mi(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Wb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}(a,b,null,c)}Ab=function(a,b,c){switch(b){case"input":if(yc(a,c),b=c.name,"radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Ka(d);e||x("90"),Sb(d),yc(d,e)}}}break;case"textarea":de(a,c);break;case"select":null!=(b=c.value)&&ae(a,!!c.multiple,b,!1)}},Ni.prototype.render=function(a){this._defer||x("250"),this._hasChildren=!0,this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new Oi;return Ji(a,b,null,c,d._onCommit),d},Ni.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]),b.push(a)}},Ni.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;if(this._defer&&null!==b||x("251"),this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;null===d&&x("251"),d._next=e._next,this._next=b,a.firstBatch=this}this._defer=!1,Bi(a,c),b=this._next,this._next=null,null!==(b=a.firstBatch=b)&&b._hasChildren&&b.render(b._children)}else this._next=null,this._defer=!1},Ni.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}},Oi.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]),b.push(a)}},Oi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];"function"!=typeof c&&x("191",c),c()}}},Pi.prototype.render=function(a,b){var c=this._internalRoot,d=new Oi;return null!==(b=void 0===b?null:b)&&d.then(b),Ki(a,c,null,d._onCommit),d},Pi.prototype.unmount=function(a){var b=this._internalRoot,c=new Oi;return null!==(a=void 0===a?null:a)&&c.then(a),Ki(null,b,null,c._onCommit),c},Pi.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new Oi;return null!==(c=void 0===c?null:c)&&e.then(c),Ki(b,d,a,e._onCommit),e},Pi.prototype.createBatch=function(){var a=new Ni(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime>=b;)c=d,d=d._next;a._next=d,null!==c&&(c._next=a)}return a},Gb=Gi,Hb=Ii,Ib=function(){W||0===gi||(Yh(gi,!1),gi=0)};var Vi={createPortal:Ti,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;return void 0===b&&("function"==typeof a.render?x("188"):x("268",Object.keys(a))),a=null===(a=hd(b))?null:a.stateNode},hydrate:function(a,b,c){return Qi(b)||x("200"),Si(null,a,b,!0,c)},render:function(a,b,c){return Qi(b)||x("200"),Si(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){return Qi(c)||x("200"),(null==a||void 0===a._reactInternalFiber)&&x("38"),Si(a,b,c,!1,d)},unmountComponentAtNode:function(a){return Qi(a)||x("40"),!!a._reactRootContainer&&(Hi(function(){Si(null,null,a,!1,function(){a._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ti.apply(void 0,arguments)},unstable_batchedUpdates:Gi,unstable_interactiveUpdates:Ii,flushSync:function(a,b){W&&x("187");var c=X;X=!0;try{return ki(a,b)}finally{X=c,Yh(1073741823,!1)}},unstable_createRoot:function Ui(a,b){return Qi(a)||x("299","unstable_createRoot"),new Pi(a,!0,null!=b&&!0===b.hydrate)},unstable_flushControlled:function(a){var b=X;X=!0;try{ki(a)}finally{(X=b)||W||Yh(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ia,Ja,Ka,Ba.injectEventPluginsByName,pa,Qa,function(a){ya(a,Pa)},Eb,Fb,Dd,Da]}};!function(a){var b=a.findFiberByHostInstance;(function Te(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Qe=Se(function(a){return b.onCommitFiberRoot(c,a)}),Re=Se(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0})(n({},a,{overrideProps:null,currentDispatcherRef:Tb.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return null===(a=hd(a))?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))}({findFiberByHostInstance:Ha,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Wi={default:Vi},Xi=Wi&&Vi||Wi;module.exports=Xi.default||Xi},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(435)},function(module,exports,__webpack_require__){"use strict";(function(global){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(exports,"__esModule",{value:!0});var d=null,e=!1,g=3,k=-1,l=-1,m=!1,n=!1;function p(){if(!m){var a=d.expirationTime;n?q():n=!0,r(t,a)}}function u(){var a=d,b=d.next;if(d===b)d=null;else{var c=d.previous;d=c.next=b,b.previous=c}a.next=a.previous=null,c=a.callback,b=a.expirationTime,a=a.priorityLevel;var f=g,Q=l;g=a,l=b;try{var h=c()}finally{g=f,l=Q}if("function"==typeof h)if(h={callback:h,priorityLevel:a,expirationTime:b,next:null,previous:null},null===d)d=h.next=h.previous=h;else{c=null,a=d;do{if(a.expirationTime>=b){c=a;break}a=a.next}while(a!==d);null===c?c=d:c===d&&(d=h,p()),(b=c.previous).next=c.previous=h,h.next=c,h.previous=b}}function v(){if(-1===k&&null!==d&&1===d.priorityLevel){m=!0;try{do{u()}while(null!==d&&1===d.priorityLevel)}finally{m=!1,null!==d?p():n=!1}}}function t(a){m=!0;var b=e;e=a;try{if(a)for(;null!==d;){var c=exports.unstable_now();if(!(d.expirationTime<=c))break;do{u()}while(null!==d&&d.expirationTime<=c)}else if(null!==d)do{u()}while(null!==d&&!w())}finally{m=!1,e=b,null!==d?p():n=!1,v()}}var C,D,x=Date,y="function"==typeof setTimeout?setTimeout:void 0,z="function"==typeof clearTimeout?clearTimeout:void 0,A="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,B="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function E(a){C=A(function(b){z(D),a(b)}),D=y(function(){B(C),a(exports.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var F=performance;exports.unstable_now=function(){return F.now()}}else exports.unstable_now=function(){return x.now()};var r,q,w,G=null;if("undefined"!=typeof window?G=window:void 0!==global&&(G=global),G&&G._schedMock){var H=G._schedMock;r=H[0],q=H[1],w=H[2],exports.unstable_now=H[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var I=null,J=function(a){if(null!==I)try{I(a)}finally{I=null}};r=function(a){null!==I?setTimeout(r,0,a):(I=a,setTimeout(J,0,!1))},q=function(){I=null},w=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof A&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof B&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var K=null,L=!1,M=-1,N=!1,O=!1,P=0,R=33,S=33;w=function(){return P<=exports.unstable_now()};var T=new MessageChannel,U=T.port2;T.port1.onmessage=function(){L=!1;var a=K,b=M;K=null,M=-1;var c=exports.unstable_now(),f=!1;if(0>=P-c){if(!(-1!==b&&b<=c))return N||(N=!0,E(V)),K=a,void(M=b);f=!0}if(null!==a){O=!0;try{a(f)}finally{O=!1}}};var V=function(a){if(null!==K){E(V);var b=a-P+S;b<S&&R<S?(8>b&&(b=8),S=b<R?R:b):R=b,P=a+S,L||(L=!0,U.postMessage(void 0))}else N=!1};r=function(a,b){K=a,M=b,O||0>b?U.postMessage(void 0):N||(N=!0,E(V))},q=function(){K=null,L=!1,M=-1}}exports.unstable_ImmediatePriority=1,exports.unstable_UserBlockingPriority=2,exports.unstable_NormalPriority=3,exports.unstable_IdlePriority=5,exports.unstable_LowPriority=4,exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=g,f=k;g=a,k=exports.unstable_now();try{return b()}finally{g=c,k=f,v()}},exports.unstable_next=function(a){switch(g){case 1:case 2:case 3:var b=3;break;default:b=g}var c=g,f=k;g=b,k=exports.unstable_now();try{return a()}finally{g=c,k=f,v()}},exports.unstable_scheduleCallback=function(a,b){var c=-1!==k?k:exports.unstable_now();if("object"==typeof b&&null!==b&&"number"==typeof b.timeout)b=c+b.timeout;else switch(g){case 1:b=c+-1;break;case 2:b=c+250;break;case 5:b=c+1073741823;break;case 4:b=c+1e4;break;default:b=c+5e3}if(a={callback:a,priorityLevel:g,expirationTime:b,next:null,previous:null},null===d)d=a.next=a.previous=a,p();else{c=null;var f=d;do{if(f.expirationTime>b){c=f;break}f=f.next}while(f!==d);null===c?c=d:c===d&&(d=a,p()),(b=c.previous).next=c.previous=a,a.next=c,a.previous=b}return a},exports.unstable_cancelCallback=function(a){var b=a.next;if(null!==b){if(b===a)d=null;else{a===d&&(d=b);var c=a.previous;c.next=b,b.previous=c}a.next=a.previous=null}},exports.unstable_wrapCallback=function(a){var b=g;return function(){var c=g,f=k;g=b,k=exports.unstable_now();try{return a.apply(this,arguments)}finally{g=c,k=f,v()}}},exports.unstable_getCurrentPriorityLevel=function(){return g},exports.unstable_shouldYield=function(){return!e&&(null!==d&&d.expirationTime<l||w())},exports.unstable_continueExecution=function(){null!==d&&p()},exports.unstable_pauseExecution=function(){},exports.unstable_getFirstCallbackNode=function(){return d}}).call(this,__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.isPriorToFiber=exports.isValidFiberElement=void 0,__webpack_require__(78),__webpack_require__(63),__webpack_require__(56),__webpack_require__(240),__webpack_require__(125),__webpack_require__(90),__webpack_require__(437),__webpack_require__(241);var _react=_interopRequireDefault(__webpack_require__(9)),_flattenDeep=_interopRequireDefault(__webpack_require__(440));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var isValidFiberElement=function isValidFiberElement(element){return"string"==typeof element||"number"==typeof element||_react.default.isValidElement(element)};exports.isValidFiberElement=isValidFiberElement;var isPriorToFiber=function isPriorToFiber(version){var majorVersion=_slicedToArray(version.split("."),1)[0];return Number(majorVersion)<16};exports.isPriorToFiber=isPriorToFiber;var _default=function isReactRenderable(element){if(isPriorToFiber(_react.default.version))return _react.default.isValidElement(element);if(!Array.isArray(element))return isValidFiberElement(element);var elementsList=element.map(isReactRenderable);return!(0,_flattenDeep.default)(elementsList).filter(function(elementIsRenderable){return!1===elementIsRenderable}).length};exports.default=_default},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(29),has=__webpack_require__(64),cof=__webpack_require__(77),inheritIfRequired=__webpack_require__(237),toPrimitive=__webpack_require__(118),fails=__webpack_require__(38),gOPN=__webpack_require__(164).f,gOPD=__webpack_require__(165).f,dP=__webpack_require__(42).f,$trim=__webpack_require__(438).trim,$Number=global.Number,Base=$Number,proto=$Number.prototype,BROKEN_COF="Number"==cof(__webpack_require__(108)(proto)),TRIM="trim"in String.prototype,toNumber=function(argument){var it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2){var third,radix,maxCode,first=(it=TRIM?it.trim():$trim(it,3)).charCodeAt(0);if(43===first||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(var code,digits=it.slice(2),i=0,l=digits.length;i<l;i++)if((code=digits.charCodeAt(i))<48||code>maxCode)return NaN;return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function Number(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):"Number"!=cof(that))?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var key,keys=__webpack_require__(37)?gOPN(Base):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(Base,key=keys[j])&&!has($Number,key)&&dP($Number,key,gOPD(Base,key));$Number.prototype=proto,proto.constructor=$Number,__webpack_require__(48)(global,"Number",$Number)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(23),defined=__webpack_require__(106),fails=__webpack_require__(38),spaces=__webpack_require__(439),space="["+spaces+"]",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(KEY,exec,ALIAS){var exp={},FORCE=fails(function(){return!!spaces[KEY]()||""!=""[KEY]()}),fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];ALIAS&&(exp[ALIAS]=fn),$export($export.P+$export.F*FORCE,"String",exp)},trim=exporter.trim=function(string,TYPE){return string=String(defined(string)),1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string};module.exports=exporter},function(module,exports){module.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(module,exports,__webpack_require__){var baseFlatten=__webpack_require__(441),INFINITY=1/0;module.exports=function flattenDeep(array){return null!=array&&array.length?baseFlatten(array,INFINITY):[]}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(246),isFlattenable=__webpack_require__(442);module.exports=function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(130),isArguments=__webpack_require__(248),isArray=__webpack_require__(133),spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;module.exports=function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(131),isObjectLike=__webpack_require__(132),argsTag="[object Arguments]";module.exports=function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(130),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},,function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"action",{enumerable:!0,get:function get(){return _action.default}}),Object.defineProperty(exports,"actions",{enumerable:!0,get:function get(){return _actions.default}}),Object.defineProperty(exports,"configureActions",{enumerable:!0,get:function get(){return _configureActions.configureActions}}),Object.defineProperty(exports,"decorateAction",{enumerable:!0,get:function get(){return _decorateAction.decorateAction}}),Object.defineProperty(exports,"decorate",{enumerable:!0,get:function get(){return _decorateAction.decorate}}),Object.defineProperty(exports,"withActions",{enumerable:!0,get:function get(){return _withActions.default}});var _action=_interopRequireDefault(__webpack_require__(184)),_actions=_interopRequireDefault(__webpack_require__(185)),_configureActions=__webpack_require__(451),_decorateAction=__webpack_require__(452),_withActions=_interopRequireDefault(__webpack_require__(250));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(449),bytesToUuid=__webpack_require__(450),_lastMSecs=0,_lastNSecs=0;module.exports=function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},function(module,exports){var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var r,i=0;i<16;i++)0==(3&i)&&(r=4294967296*Math.random()),rnds[i]=r>>>((3&i)<<3)&255;return rnds}}},function(module,exports){for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=function bytesToUuid(buf,offset){var i=offset||0,bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureActions=function configureActions(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(config,options)},exports.config=void 0,__webpack_require__(80);var config={depth:10,clearOnStoryChange:!0,limit:50};exports.config=config},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.decorateAction=decorateAction,exports.decorate=function decorate(decorators){var decorated=decorateAction(decorators),decoratedActions=function decoratedActions(){var rawActions=_actions.default.apply(void 0,arguments),actionsObject={};return Object.keys(rawActions).forEach(function(name){actionsObject[name]=applyDecorators(decorators,rawActions[name])}),actionsObject};return{action:decorated,actions:decoratedActions,withActions:(0,_withActions.createDecorator)(decoratedActions)}},__webpack_require__(124),__webpack_require__(167),__webpack_require__(169),__webpack_require__(171),__webpack_require__(78),__webpack_require__(63),__webpack_require__(90),__webpack_require__(110),__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(111),__webpack_require__(89),__webpack_require__(173);var _action=_interopRequireDefault(__webpack_require__(184)),_actions=_interopRequireDefault(__webpack_require__(185)),_withActions=__webpack_require__(250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function applyDecorators(decorators,actionCallback){return function(){for(var _len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++)_args[_key]=arguments[_key];var decorated=decorators.reduce(function(args,storyFn){return storyFn(args)},_args);actionCallback.apply(void 0,_toConsumableArray(decorated))}}function decorateAction(decorators){return function(name,options){var callAction=(0,_action.default)(name,options);return applyDecorators(decorators,callAction)}}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(454);module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(455),isObjectLike=__webpack_require__(132);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(456),equalArrays=__webpack_require__(256),equalByTag=__webpack_require__(488),equalObjects=__webpack_require__(492),getTag=__webpack_require__(511),isArray=__webpack_require__(133),isBuffer=__webpack_require__(257),isTypedArray=__webpack_require__(258),COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(134),stackClear=__webpack_require__(462),stackDelete=__webpack_require__(463),stackGet=__webpack_require__(464),stackHas=__webpack_require__(465),stackSet=__webpack_require__(466);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports){module.exports=function listCacheClear(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(135),splice=Array.prototype.splice;module.exports=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,0))}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(135);module.exports=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(135);module.exports=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(135);module.exports=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(134);module.exports=function stackClear(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function stackGet(key){return this.__data__.get(key)}},function(module,exports){module.exports=function stackHas(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(134),Map=__webpack_require__(186),MapCache=__webpack_require__(255),LARGE_ARRAY_SIZE=200;module.exports=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(252),isMasked=__webpack_require__(468),isObject=__webpack_require__(253),toSource=__webpack_require__(254),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(469),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(57)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function getValue(object,key){return null==object?void 0:object[key]}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(472),ListCache=__webpack_require__(134),Map=__webpack_require__(186);module.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(473),hashDelete=__webpack_require__(474),hashGet=__webpack_require__(475),hashHas=__webpack_require__(476),hashSet=__webpack_require__(477);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(136);module.exports=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports){module.exports=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(136),HASH_UNDEFINED="__lodash_hash_undefined__",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(136),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(136),HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(137);module.exports=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(137);module.exports=function mapCacheGet(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(137);module.exports=function mapCacheHas(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(137);module.exports=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(255),setCacheAdd=__webpack_require__(484),setCacheHas=__webpack_require__(485);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}},function(module,exports){module.exports=function setCacheHas(value){return this.__data__.has(value)}},function(module,exports){module.exports=function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports){module.exports=function cacheHas(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(130),Uint8Array=__webpack_require__(489),eq=__webpack_require__(251),equalArrays=__webpack_require__(256),mapToArray=__webpack_require__(490),setToArray=__webpack_require__(491),COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(57).Uint8Array;module.exports=Uint8Array},function(module,exports){module.exports=function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}},function(module,exports){module.exports=function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(493),COMPARE_PARTIAL_FLAG=1,hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(494),getSymbols=__webpack_require__(495),keys=__webpack_require__(498);module.exports=function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(246),isArray=__webpack_require__(133);module.exports=function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(496),stubArray=__webpack_require__(497),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function stubArray(){return[]}},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(499),baseKeys=__webpack_require__(506),isArrayLike=__webpack_require__(510);module.exports=function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(500),isArguments=__webpack_require__(248),isArray=__webpack_require__(133),isBuffer=__webpack_require__(257),isIndex=__webpack_require__(502),isTypedArray=__webpack_require__(258),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){module.exports=function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports){module.exports=function stubFalse(){return!1}},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(131),isLength=__webpack_require__(259),isObjectLike=__webpack_require__(132),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports){module.exports=function baseUnary(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(247),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(79)(module))},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(507),nativeKeys=__webpack_require__(508),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports){var objectProto=Object.prototype;module.exports=function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(509)(Object.keys,Object);module.exports=nativeKeys},function(module,exports){module.exports=function overArg(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(252),isLength=__webpack_require__(259);module.exports=function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(512),Map=__webpack_require__(186),Promise=__webpack_require__(513),Set=__webpack_require__(514),WeakMap=__webpack_require__(515),baseGetTag=__webpack_require__(131),toSource=__webpack_require__(254),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var DataView=__webpack_require__(93)(__webpack_require__(57),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(93)(__webpack_require__(57),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var Set=__webpack_require__(93)(__webpack_require__(57),"Set");module.exports=Set},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(93)(__webpack_require__(57),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.withLinks=exports.hrefTo=exports.linkTo=exports.navigate=void 0,__webpack_require__(124),__webpack_require__(167),__webpack_require__(169),__webpack_require__(171),__webpack_require__(78),__webpack_require__(63),__webpack_require__(56),__webpack_require__(90),__webpack_require__(517),__webpack_require__(55),__webpack_require__(80),__webpack_require__(239);var _global=__webpack_require__(49),_qs=_interopRequireDefault(__webpack_require__(174)),_addons=_interopRequireDefault(__webpack_require__(112)),_coreEvents=__webpack_require__(92),_constants=_interopRequireDefault(__webpack_require__(523));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var navigate=function navigate(params){return _addons.default.getChannel().emit(_coreEvents.SELECT_STORY,params)};exports.navigate=navigate;exports.linkTo=function linkTo(kind,story){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var resolver=function valueOrCall(args){return function(value){return"function"==typeof value?value.apply(void 0,_toConsumableArray(args)):value}}(args);navigate({kind:resolver(kind),story:resolver(story)})}};exports.hrefTo=function hrefTo(kind,name){return new Promise(function(resolve){var channel=_addons.default.getChannel();channel.once(_constants.default.RECEIVE,function(id){return resolve(function generateUrl(id){var location=_global.document.location,query=_qs.default.parse(location.search,{ignoreQueryPrefix:!0});return"".concat(location.origin+location.pathname,"?").concat(_qs.default.stringify(Object.assign({},query,{id:id}),{encode:!1}))}(id))}),channel.emit(_constants.default.REQUEST,{kind:kind,name:name})})};var linksListener=function linksListener(e){var _e$target$dataset=e.target.dataset,kind=_e$target$dataset.sbKind,story=_e$target$dataset.sbStory;(kind||story)&&(e.preventDefault(),navigate({kind:kind,story:story}))},hasListener=!1,off=function off(){hasListener&&(hasListener=!1,_global.document.removeEventListener("click",linksListener))};exports.withLinks=function withLinks(storyFn){return function on(){hasListener||(hasListener=!0,_global.document.addEventListener("click",linksListener))}(),_addons.default.getChannel().once(_coreEvents.STORY_CHANGED,off),storyFn()}},function(module,exports,__webpack_require__){"use strict";var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=__webpack_require__(104),global=__webpack_require__(29),ctx=__webpack_require__(67),classof=__webpack_require__(123),$export=__webpack_require__(23),isObject=__webpack_require__(39),aFunction=__webpack_require__(87),anInstance=__webpack_require__(177),forOf=__webpack_require__(178),speciesConstructor=__webpack_require__(242),task=__webpack_require__(260).set,microtask=__webpack_require__(519)(),newPromiseCapabilityModule=__webpack_require__(261),perform=__webpack_require__(520),userAgent=__webpack_require__(521),promiseResolve=__webpack_require__(522),TypeError=global.TypeError,process=global.process,versions=process&&process.versions,v8=versions&&versions.v8||"",$Promise=global.Promise,isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[__webpack_require__(28)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise&&0!==v8.indexOf("6.6")&&-1===userAgent.indexOf("Chrome/66")}catch(e){}}(),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,exited,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){domain&&!exited&&domain.exit(),reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var result,handler,console,value=promise._v,unhandled=isUnhandled(promise);if(unhandled&&(result=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,unhandled&&result.e)throw result.v})},isUnhandled=function(promise){return 1!==promise._h&&0===(promise._a||promise._c).length},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,(promise=promise._w||promise)._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function Promise(executor){anInstance(this,$Promise,"Promise","_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},(Internal=function Promise(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=__webpack_require__(176)($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),__webpack_require__(105)($Promise,"Promise"),__webpack_require__(235)("Promise"),Wrapper=__webpack_require__(65).Promise,$export($export.S+$export.F*!USE_NATIVE,"Promise",{reject:function reject(r){var capability=newPromiseCapability(this);return(0,capability.reject)(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),"Promise",{resolve:function resolve(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(168)(function(iter){$Promise.all(iter).catch(empty)})),"Promise",{all:function all(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.e&&reject(result.v),capability.promise},race:function race(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return result.e&&reject(result.v),capability.promise}})},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),macrotask=__webpack_require__(260).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(77)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(!Observer||global.navigator&&global.navigator.standalone)if(Promise&&Promise.resolve){var promise=Promise.resolve(void 0);notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};else{var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},function(module,exports){module.exports=function(exec){try{return{e:!1,v:exec()}}catch(e){return{e:!0,v:e}}}},function(module,exports,__webpack_require__){var navigator=__webpack_require__(29).navigator;module.exports=navigator&&navigator.userAgent||""},function(module,exports,__webpack_require__){var anObject=__webpack_require__(33),isObject=__webpack_require__(39),newPromiseCapability=__webpack_require__(261);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ADDON_ID=void 0;var ADDON_ID="storybook/links";exports.ADDON_ID=ADDON_ID;var _default={NAVIGATE:"".concat(ADDON_ID,"/navigate"),REQUEST:"".concat(ADDON_ID,"/request"),RECEIVE:"".concat(ADDON_ID,"/receive")};exports.default=_default},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(63),__webpack_require__(181),__webpack_require__(56),__webpack_require__(70),__webpack_require__(55),__webpack_require__(111),__webpack_require__(80);var _react=_interopRequireDefault(__webpack_require__(9)),_propTypes=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var Main=function Main(props){return _react.default.createElement("article",_extends({},props,{style:{padding:15,lineHeight:1.4,fontFamily:'"Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif',backgroundColor:"#fff"}}))},Title=function Title(_ref){var children=_ref.children,props=_objectWithoutProperties(_ref,["children"]);return _react.default.createElement("h1",props,children)};Title.propTypes={children:_propTypes.default.node},Title.defaultProps={children:void 0};var Note=function Note(props){return _react.default.createElement("p",_extends({},props,{style:{opacity:.5}}))},InlineCode=function InlineCode(props){return _react.default.createElement("code",_extends({},props,{style:{fontSize:15,fontWeight:600,padding:"2px 5px",border:"1px solid #eae9e9",borderRadius:4,backgroundColor:"#f3f2f2",color:"#3a3a3a"}}))},Link=function Link(_ref2){var children=_ref2.children,href=_ref2.href,props=_objectWithoutProperties(_ref2,["children","href"]);return _react.default.createElement("a",_extends({href:href},props,{style:{color:"#1474f3",textDecoration:"none",borderBottom:"1px solid #1474f3",paddingBottom:2}}),children)};Link.propTypes={href:_propTypes.default.string,children:_propTypes.default.node},Link.defaultProps={href:void 0,children:void 0};var NavButton=function NavButton(_ref3){var children=_ref3.children,props=_objectWithoutProperties(_ref3,["children"]);return _react.default.createElement("button",_extends({},props,{type:"button",style:{color:"#1474f3",textDecoration:"none",borderBottom:"1px solid #1474f3",paddingBottom:2,borderTop:"none",borderRight:"none",borderLeft:"none",backgroundColor:"transparent",padding:0,cursor:"pointer",font:"inherit"}}),children)};NavButton.propTypes={children:_propTypes.default.node},NavButton.defaultProps={children:void 0};var Welcome=function Welcome(_ref4){var showApp=_ref4.showApp;return _react.default.createElement(Main,null,_react.default.createElement(Title,null,"Welcome to storybook"),_react.default.createElement("p",null,"This is a UI component dev environment for your app."),_react.default.createElement("p",null,"We've added some basic stories inside the ",_react.default.createElement(InlineCode,null,"src/stories")," directory.",_react.default.createElement("br",null),"A story is a single state of one or more UI components. You can have as many stories as you want.",_react.default.createElement("br",null),"(Basically a story is like a visual test case.)"),_react.default.createElement("p",null,"See these sample ",_react.default.createElement(NavButton,{onClick:showApp},"stories")," for a component called"," ",_react.default.createElement(InlineCode,null,"Button"),"."),_react.default.createElement("p",null,"Just like that, you can add your own components as stories.",_react.default.createElement("br",null),"You can also edit those components and see changes right away.",_react.default.createElement("br",null),"(Try editing the ",_react.default.createElement(InlineCode,null,"Button")," stories located at"," ",_react.default.createElement(InlineCode,null,"src/stories/index.js"),".)"),_react.default.createElement("p",null,"Usually we create stories with smaller UI components in the app.",_react.default.createElement("br",null),"Have a look at the"," ",_react.default.createElement(Link,{href:"https://storybook.js.org/basics/writing-stories",target:"_blank",rel:"noopener noreferrer"},"Writing Stories")," ","section in our documentation."),_react.default.createElement(Note,null,_react.default.createElement("b",null,"NOTE:"),_react.default.createElement("br",null),"Have a look at the ",_react.default.createElement(InlineCode,null,".storybook/webpack.config.js")," to add webpack loaders and plugins you are using in this project."))};exports.default=Welcome,Welcome.displayName="Welcome",Welcome.propTypes={showApp:_propTypes.default.func},Welcome.defaultProps={showApp:null}},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(526);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports,__webpack_require__){"use strict";__webpack_require__(20),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(9)),_propTypes=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var styles={border:"1px solid #eee",borderRadius:3,backgroundColor:"#FFFFFF",cursor:"pointer",fontSize:15,padding:"3px 10px",margin:10},Button=function Button(_ref){var children=_ref.children,onClick=_ref.onClick;return _react.default.createElement("button",{onClick:onClick,style:styles,type:"button"},children)};Button.displayName="Button",Button.propTypes={children:_propTypes.default.node.isRequired,onClick:_propTypes.default.func},Button.defaultProps={onClick:function onClick(){}};var _default=Button;exports.default=_default},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(window,document,exportName,undefined){"use strict";var assign,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return!!Array.isArray(arg)&&(each(arg,context[fn],context),!0)}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace"),stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",log=window.console&&(window.console.warn||window.console.log);return log&&log.call(window.console,deprecationMessage,stack),method.apply(this,arguments)}}assign="function"!=typeof Object.assign?function assign(target){if(target===undefined||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&null!==source)for(var nextKey in source)source.hasOwnProperty(nextKey)&&(output[nextKey]=source[nextKey])}return output}:Object.assign;var extend=deprecate(function extend(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&dest[keys[i]]===undefined)&&(dest[keys[i]]=src[keys[i]]),i++;return dest},"extend","Use `assign`."),merge=deprecate(function merge(dest,src){return extend(dest,src,!0)},"merge","Use `assign`.");function inherit(child,base,properties){var childP,baseP=base.prototype;(childP=child.prototype=Object.create(baseP)).constructor=child,childP._super=baseP,properties&&assign(childP,properties)}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args&&args[0]||undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,!1)})}function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,!1)})}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort(function sortUniqueArray(a,b){return a[key]>b[key]}):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if((prop=(prefix=VENDOR_PREFIXES[i])?prefix+camelProp:property)in obj)return prop;i++}return undefined}var _uniqueId=1;function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}var SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen==0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen==0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input));pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};input.eventType!==INPUT_START&&prevInput.eventType!==INPUT_END||(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y});input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x,input.overallVelocityY=overallVelocity.y,input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y,input.scale=firstMultiple?function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):0,input.maxPointers=session.prevInput?input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers:input.pointers.length,function computeIntervalInputData(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX,deltaY=input.deltaY-last.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target);input.target=target}(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;i<pointersLength;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x<0?DIRECTION_LEFT:DIRECTION_RIGHT:y<0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&0===ev.button&&(this.pressed=!0),eventType&INPUT_MOVE&&1!==ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:"touch",3:"pen",4:"mouse",5:"kinect"},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch="touch"==pointerType,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(0===ev.button||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0),storeIndex<0||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS,this.evWin=SINGLE_TOUCH_WINDOW_EVENTS,this.started=!1,Input.apply(this,arguments)}inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START&&(this.started=!0),this.started){var touches=function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0));return[all,changed]}.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length==0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target)}),type===INPUT_START)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;i=0;for(;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;if(!changedTargetTouches.length)return;return[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]}.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}});var DEDUP_TIMEOUT=2500,DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler),this.primaryTouch=null,this.lastTouches=[]}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;setTimeout(function(){var i=lts.indexOf(lastTouch);i>-1&&lts.splice(i,1)},DEDUP_TIMEOUT)}}inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch="touch"==inputData.pointerType,isMouse="mouse"==inputData.pointerType;if(!(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents)){if(isTouch)(function recordTouches(eventType,eventData){eventType&INPUT_START?(this.primaryTouch=eventData.changedPointers[0].identifier,setLastTouch.call(this,eventData)):eventType&(INPUT_END|INPUT_CANCEL)&&setLastTouch.call(this,eventData)}).call(this,inputEvent,inputData);else if(isMouse&&function isSyntheticEvent(eventData){for(var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i],dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE)return!0}return!1}.call(this,inputData))return;this.callback(manager,inputEvent,inputData)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y",TOUCH_ACTION_MAP=function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION)return!1;var touchMap={},cssSupports=window.CSS&&window.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(val){touchMap[val]=!cssSupports||window.CSS.supports("touch-action",val)}),touchMap}();function TouchAction(manager,value){this.manager=manager,this.set(value)}TouchAction.prototype={set:function(value){"compute"==value&&(value=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))}),function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY)return TOUCH_ACTION_NONE;if(hasPanX||hasPanY)return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;if(inStr(actions,TOUCH_ACTION_MANIPULATION))return TOUCH_ACTION_MANIPULATION;return TOUCH_ACTION_AUTO}(actions.join(" "))},preventDefaults:function(input){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)srcEvent.preventDefault();else{var actions=this.actions,hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE],hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y],hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=1===input.pointers.length,isTapMovement=input.distance<2,isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime)return}if(!hasPanX||!hasPanY)return hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16;function Recognizer(options){this.options=assign({},this.defaults,options||{}),this.id=function uniqueId(){return _uniqueId++}(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return state&STATE_CANCELLED?"cancel":state&STATE_ENDED?"end":state&STATE_CHANGED?"move":state&STATE_BEGAN?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return(options=options||{}).recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}Recognizer.prototype={defaults:{},set:function(options){return assign(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return simultaneous[(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this)).id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)?this:(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id],this)},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return-1===inArray(requireFail,otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this))&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){var self=this,state=this.state;function emit(event){self.manager.emit(event,input)}state<STATE_ENDED&&emit(self.options.event+stateStr(state)),emit(self.options.event),input.additionalEvent&&emit(input.additionalEvent),state>=STATE_ENDED&&emit(self.options.event+stateStr(state))},tryEmit:function(input){if(this.canEmit())return this.emit(input);this.state=32},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(32|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone]))return this.reset(),void(this.state=32);this.state&(STATE_RECOGNIZED|STATE_CANCELLED|32)&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(inputDataClone)},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=state&(STATE_BEGAN|STATE_CHANGED),isValid=this.attrTest(input);return isRecognized&&(eventType&INPUT_CANCEL||!isValid)?state|STATE_CANCELLED:isRecognized||isValid?eventType&INPUT_END?state|STATE_ENDED:state&STATE_BEGAN?state|STATE_CHANGED:STATE_BEGAN:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];return direction&DIRECTION_HORIZONTAL&&actions.push(TOUCH_ACTION_PAN_Y),direction&DIRECTION_VERTICAL&&actions.push(TOUCH_ACTION_PAN_X),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=0===x?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&(input.additionalEvent=this.options.event+direction),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){if(1!==input.scale){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.time,this);else if(input.eventType&INPUT_END)return STATE_RECOGNIZED;return 32},reset:function(){clearTimeout(this._timer)},emit:function(input){this.state===STATE_RECOGNIZED&&(input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.overallVelocity:direction&DIRECTION_HORIZONTAL?velocity=input.overallVelocityX:direction&DIRECTION_VERTICAL&&(velocity=input.overallVelocityY),this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.offsetDirection);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),input.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=!this.pTime||input.timeStamp-this.pTime<options.interval,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;if(this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input,0===this.count%options.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.interval,this),STATE_BEGAN):STATE_RECOGNIZED}return 32},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(element,options){this.options=assign({},Hammer.defaults,options||{}),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=element,this.input=function createInputInstance(manager){var inputClass=manager.options.inputClass;return new(inputClass||(SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput))(manager,inputHandler)}(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])},this)}function toggleCssProps(manager,add){var prop,element=manager.element;element.style&&(each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name),add?(manager.oldCssProps[prop]=element.style[prop],element.style[prop]=value):element.style[prop]=manager.oldCssProps[prop]||""}),add||(manager.oldCssProps={}))}Manager.prototype={set:function(options){return assign(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?2:1},recognize:function(inputData){var session=this.session;if(!session.stopped){var recognizer;this.touchAction.preventDefaults(inputData);var recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],2===session.stopped||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;if(recognizer=this.get(recognizer)){var recognizers=this.recognizers,index=inArray(recognizers,recognizer);-1!==index&&(recognizers.splice(index,1),this.touchAction.update())}return this},on:function(events,handler){if(events!==undefined&&handler!==undefined){var handlers=this.handlers;return each(splitStr(events),function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)}),this}},off:function(events,handler){if(events!==undefined){var handlers=this.handlers;return each(splitStr(events),function(event){handler?handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]}),this}},emit:function(event,data){this.options.domEvents&&function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:32,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==window?window:"undefined"!=typeof self?self:{}).Hammer=Hammer,(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document)},,,,function(module,exports,__webpack_require__){var runtime=function(exports){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){var previousPromise;this._invoke=function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},function(error){return invoke("throw",error,resolve,reject)})}reject(record.arg)}(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}return GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}},exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime)}},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function byteLength(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function toByteArray(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return flyToViewport});var _math_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31),_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26),EPSILON=.01,VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"];function flyToViewport(startProps,endProps,t){var viewport={},startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.l)(startZoom),endZoom=endProps.zoom,endCenter=[endProps.longitude,endProps.latitude],scale=Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.l)(endZoom-startZoom),startCenterXY=Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.g)(startCenter,startScale),endCenterXY=Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.g)(endCenter,startScale),uDelta=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_2__.g([],endCenterXY,startCenterXY),w0=Math.max(startProps.width,startProps.height),w1=w0/scale,u1=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_2__.c(uDelta);if(Math.abs(u1)<EPSILON){for(var _i=0;_i<VIEWPORT_TRANSITION_PROPS.length;_i++){var key=VIEWPORT_TRANSITION_PROPS[_i],startValue=startProps[key],endValue=endProps[key];viewport[key]=Object(_math_utils__WEBPACK_IMPORTED_MODULE_0__.b)(startValue,endValue,t)}return viewport}var rho2=1.414*1.414,b0=(w1*w1-w0*w0+rho2*rho2*u1*u1)/(2*w0*rho2*u1),b1=(w1*w1-w0*w0-rho2*rho2*u1*u1)/(2*w1*rho2*u1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),s=t*((Math.log(Math.sqrt(b1*b1+1)-b1)-r0)/1.414),w=Math.cosh(r0)/Math.cosh(r0+1.414*s),u=w0*((Math.cosh(r0)*Math.tanh(r0+1.414*s)-Math.sinh(r0))/rho2)/u1,scaleIncrement=1/w,newZoom=startZoom+Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.i)(scaleIncrement),newCenterWorld=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_2__.f([],uDelta,u);gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_2__.a(newCenterWorld,newCenterWorld,startCenterXY),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_2__.f(newCenterWorld,newCenterWorld,scaleIncrement);var newCenter=Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.j)(newCenterWorld,Object(_web_mercator_utils__WEBPACK_IMPORTED_MODULE_1__.l)(newZoom));return viewport.longitude=newCenter[0],viewport.latitude=newCenter[1],viewport.zoom=newZoom,viewport}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return normalizeViewportProps});var _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(115),_math_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31),MAX_LATITUDE=85.05113,MIN_LATITUDE=-85.05113;function normalizeViewportProps(_ref){var width=_ref.width,height=_ref.height,longitude=_ref.longitude,latitude=_ref.latitude,zoom=_ref.zoom,_ref$pitch=_ref.pitch,pitch=void 0===_ref$pitch?0:_ref$pitch,_ref$bearing=_ref.bearing,bearing=void 0===_ref$bearing?0:_ref$bearing;(longitude<-180||longitude>180)&&(longitude=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.c)(longitude+180,360)-180),(bearing<-180||bearing>180)&&(bearing=Object(_math_utils__WEBPACK_IMPORTED_MODULE_1__.c)(bearing+180,360)-180);var flatViewport=new _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_0__.a({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom}),topY=flatViewport.project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1],shiftY=0;return bottomY-topY<height&&(zoom+=Math.log2(height/(bottomY-topY)),topY=(flatViewport=new _web_mercator_viewport__WEBPACK_IMPORTED_MODULE_0__.a({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})).project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1]),topY>0?shiftY=topY:bottomY<height&&(shiftY=bottomY-height),shiftY&&(latitude=flatViewport.unproject([width/2,height/2+shiftY])[1]),{width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var esm_typeof=__webpack_require__(14),toConsumableArray=__webpack_require__(15),defineProperty=__webpack_require__(0),classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),globals=__webpack_require__(61);var local_storage_LocalStorage=function(){function LocalStorage(id,defaultSettings){var type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(classCallCheck.a)(this,LocalStorage),this.storage=function getStorage(type){try{var storage=window[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),storage}catch(e){return null}}(type),this.id=id,this.config={},Object.assign(this.config,defaultSettings),this._loadConfiguration()}return Object(createClass.a)(LocalStorage,[{key:"getConfiguration",value:function getConfiguration(){return this.config}},{key:"setConfiguration",value:function setConfiguration(configuration){return this.config={},this.updateConfiguration(configuration)}},{key:"updateConfiguration",value:function updateConfiguration(configuration){if(Object.assign(this.config,configuration),this.storage){var serialized=JSON.stringify(this.config);this.storage.setItem(this.id,serialized)}return this}},{key:"_loadConfiguration",value:function _loadConfiguration(){var configuration={};if(this.storage){var serializedConfiguration=this.storage.getItem(this.id);configuration=serializedConfiguration?JSON.parse(serializedConfiguration):{}}return Object.assign(this.config,configuration),this}}]),LocalStorage}();function formatImage(image,message,scale){var maxWidth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,imageUrl=image.src.replace(/\(/g,"%28").replace(/\)/g,"%29");image.width>maxWidth&&(scale=Math.min(scale,maxWidth/image.width));var width=image.width*scale,height=image.height*scale,style=["font-size:1px;","padding:".concat(Math.floor(height/2),"px ").concat(Math.floor(width/2),"px;"),"line-height:".concat(height,"px;"),"background:url(".concat(imageUrl,");"),"background-size:".concat(width,"px ").concat(height,"px;"),"color:transparent;"].join("");return["".concat(message," %c+"),style]}var COLOR={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function getColor(color){return"string"==typeof color?COLOR[color.toUpperCase()]||COLOR.WHITE:color}function assert_assert(condition,message){if(!condition)throw new Error(message||"Assertion failed")}var hi_res_timestamp=__webpack_require__(53);__webpack_require__.d(__webpack_exports__,"a",function(){return log_Log});var originalConsole={debug:globals.b&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_SETTINGS={enabled:!1,priority:0};function noop(){}var cache={};var log_Log=function(){function Log(){var id=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(classCallCheck.a)(this,Log),this.id=id,this.VERSION=globals.a,this._startTs=Object(hi_res_timestamp.a)(),this._deltaTs=Object(hi_res_timestamp.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new local_storage_LocalStorage("__probe-".concat(this.id,"__"),DEFAULT_SETTINGS),this.userData={},this.timeStamp("".concat(this.id," started")),function autobind(obj){var predefined=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function _loop(){var key=_step.value;"function"==typeof obj[key]&&(predefined.find(function(name){return key===name})||(obj[key]=obj[key].bind(obj)))},_iterator=propNames[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}(this),Object.seal(this)}return Object(createClass.a)(Log,[{key:"isEnabled",value:function isEnabled(){return this._storage.config.enabled}},{key:"getPriority",value:function getPriority(){return this._storage.config.priority}},{key:"getLevel",value:function getLevel(){return this._storage.config.priority}},{key:"getTotal",value:function getTotal(){return Number((Object(hi_res_timestamp.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function getDelta(){return Number((Object(hi_res_timestamp.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function enable(){var enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:enabled}),this}},{key:"setLevel",value:function setLevel(level){return this._storage.updateConfiguration({priority:level}),this}},{key:"assert",value:function assert(condition,message){assert_assert(condition,message)}},{key:"warn",value:function warn(message){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return this._getLogFunction({message:message,args:args,method:originalConsole.warn,once:!0})}},{key:"error",value:function error(message){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return this._getLogFunction({message:message,args:args,method:originalConsole.error})}},{key:"deprecated",value:function deprecated(oldUsage,newUsage){return this.warn("`".concat(oldUsage,"` is deprecated and will be removed in a later version. Use `").concat(newUsage,"` instead"))}},{key:"removed",value:function removed(oldUsage,newUsage){return this.error("`".concat(oldUsage,"` has been removed. Use `").concat(newUsage,"` instead"))}},{key:"probe",value:function probe(priority,message){for(var _len3=arguments.length,args=new Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)args[_key3-2]=arguments[_key3];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.log,time:!0,once:!0})}},{key:"log",value:function log(priority,message){for(var _len4=arguments.length,args=new Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++)args[_key4-2]=arguments[_key4];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.debug})}},{key:"info",value:function info(priority,message){for(var _len5=arguments.length,args=new Array(_len5>2?_len5-2:0),_key5=2;_key5<_len5;_key5++)args[_key5-2]=arguments[_key5];return this._getLogFunction({priority:priority,message:message,args:args,method:console.info})}},{key:"once",value:function once(priority,message){for(var _len6=arguments.length,args=new Array(_len6>2?_len6-2:0),_key6=2;_key6<_len6;_key6++)args[_key6-2]=arguments[_key6];return this._getLogFunction({priority:priority,message:message,args:args,method:originalConsole.debug||originalConsole.info,once:!0})}},{key:"table",value:function table(priority,_table,columns){if(_table){var tag=function getTableHeader(table){for(var key in table)for(var title in table[key])return title||"untitled";return"empty"}(_table);return this._getLogFunction({priority:priority,message:_table,args:columns&&[columns],tag:tag,method:console.table||noop})}return noop}},{key:"image",value:function image(_ref2){var priority=_ref2.priority,_image=_ref2.image,_ref2$message=_ref2.message,message=void 0===_ref2$message?"":_ref2$message,_ref2$scale=_ref2.scale,scale=void 0===_ref2$scale?1:_ref2$scale;return priority>this.getPriority()?noop:globals.b?this._logImageInBrowser({image:_image,message:message,scale:scale}):this._logImageInNode({image:_image,message:message,scale:scale})}},{key:"settings",value:function settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function get(setting){return this._storage.config[setting]}},{key:"set",value:function set(setting,value){this._storage.updateConfiguration(Object(defineProperty.a)({},setting,value))}},{key:"_logImageInNode",value:function _logImageInNode(_ref3){var image=_ref3.image,_ref3$scale=(_ref3.message,_ref3.scale),scale=void 0===_ref3$scale?1:_ref3$scale,asciify=null;try{asciify=__webpack_require__(529)}catch(error){}return asciify?function(){return asciify(image,{fit:"box",width:"".concat(Math.round(80*scale),"%")}).then(function(data){return console.log(data)})}:noop}},{key:"_logImageInBrowser",value:function _logImageInBrowser(_ref4){var image=_ref4.image,_ref4$message=_ref4.message,message=void 0===_ref4$message?"":_ref4$message,_ref4$scale=_ref4.scale,scale=void 0===_ref4$scale?1:_ref4$scale;if("string"==typeof image){var img=new Image;return img.onload=function(){var _console,args=formatImage(img,message,scale);(_console=console).log.apply(_console,Object(toConsumableArray.a)(args))},img.src=image,noop}var _console2,element=image.nodeName||"";if("img"===element.toLowerCase())return(_console2=console).log.apply(_console2,Object(toConsumableArray.a)(formatImage(image,message,scale))),noop;if("canvas"===element.toLowerCase()){var _img=new Image;return _img.onload=function(){var _console3;return(_console3=console).log.apply(_console3,Object(toConsumableArray.a)(formatImage(_img,message,scale)))},_img.src=image.toDataURL(),noop}return noop}},{key:"time",value:function time(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function timeEnd(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function timeStamp(priority,message){return this._getLogFunction({priority:priority,message:message,method:console.timeStamp||noop})}},{key:"group",value:function group(priority,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},collapsed=(opts=this._normalizeArguments({priority:priority,message:message,opts:opts})).collapsed;return this._getLogFunction({priority:priority,message:message,opts:opts,method:(collapsed?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function groupCollapsed(priority,message){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(priority,message,Object.assign({},opts,{collapsed:!0}))}},{key:"groupEnd",value:function groupEnd(priority){return this._getLogFunction({priority:priority,message:"",method:console.groupEnd||noop})}},{key:"withGroup",value:function withGroup(priority,message,func){var opts=this._normalizeArguments({priority:priority,message:message});this.group(opts);try{func()}finally{this.groupEnd(opts.message)}}},{key:"trace",value:function trace(){console.trace&&console.trace()}},{key:"_shouldLog",value:function _shouldLog(priority){return 0===(priority=this._normalizePriority(priority))||this.isEnabled()&&this.getPriority()>=priority}},{key:"_getElapsedTime",value:function _getElapsedTime(){var total=this.getTotal(),delta=this.getDelta();return this._deltaTs=Object(hi_res_timestamp.a)(),{total:total,delta:delta}}},{key:"_getLogFunction",value:function _getLogFunction(opts){if(this._shouldLog(opts.priority)){var method=opts.method;opts=this._parseArguments(opts),assert_assert(method);var message=opts.message,tag=opts.tag||opts.message;if(opts.once){if(cache[tag])return noop;cache[tag]=Object(hi_res_timestamp.a)()}return message=this._decorateMessage(message,opts),method.bind.apply(method,[console,message].concat(Object(toConsumableArray.a)(opts.args)))}return noop}},{key:"_parseArguments",value:function _parseArguments(options){var normOpts=this._normalizeArguments(options),_this$_getElapsedTime=this._getElapsedTime(),delta=_this$_getElapsedTime.delta,total=_this$_getElapsedTime.total;return Object.assign(options,normOpts,{delta:delta,total:total})}},{key:"_normalizePriority",value:function _normalizePriority(priority){var resolvedPriority;switch(Object(esm_typeof.a)(priority)){case"number":resolvedPriority=priority;break;case"object":resolvedPriority=priority.priority||0;break;default:resolvedPriority=0}return assert_assert(Number.isFinite(resolvedPriority)&&resolvedPriority>=0),resolvedPriority}},{key:"_normalizeArguments",value:function _normalizeArguments(_ref5){var priority=_ref5.priority,message=_ref5.message,_ref5$args=_ref5.args,args=void 0===_ref5$args?[]:_ref5$args,opts=_ref5.opts,newOpts={priority:this._normalizePriority(priority),message:message,args:args};switch(Object(esm_typeof.a)(priority)){case"string":case"function":void 0!==message&&args.unshift(message),Object.assign(newOpts,{message:priority});break;case"object":Object.assign(newOpts,priority)}return"function"==typeof newOpts.message&&(newOpts.message=this._shouldLog(newOpts.priority)?newOpts.message():""),assert_assert("string"==typeof newOpts.message||"object"===Object(esm_typeof.a)(newOpts.message)),Object.assign(newOpts,opts)}},{key:"_decorateMessage",value:function _decorateMessage(message,opts){if("string"==typeof message){var time="";if(opts.time)time=function leftPad(string){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,padLength=Math.max(length-string.length,0);return"".concat(" ".repeat(padLength)).concat(string)}(function formatTime(ms){return ms<10?"".concat(ms.toFixed(2),"ms"):ms<100?"".concat(ms.toFixed(1),"ms"):ms<1e3?"".concat(ms.toFixed(0),"ms"):"".concat((ms/1e3).toFixed(2),"s")}(this._getElapsedTime().total));message=function addColor(string,color,background){return globals.b||"string"!=typeof string||(color&&(color=getColor(color),string="[".concat(color,"m").concat(string,"[39m")),background&&(color=getColor(background),string="[".concat(background+10,"m").concat(string,"[49m"))),string}(message=opts.time?"".concat(this.id,": ").concat(time,"  ").concat(message):"".concat(this.id,": ").concat(message),opts.color,opts.background)}return message}},{key:"priority",set:function set(newPriority){return this._storage.updateConfiguration({priority:newPriority}),this},get:function get(){return this._storage.config.priority}}]),Log}();log_Log.VERSION=globals.a},function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(11),toConsumableArray=__webpack_require__(15),classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),possibleConstructorReturn=__webpack_require__(4),getPrototypeOf=__webpack_require__(3),inherits=__webpack_require__(5),math_array=__webpack_require__(144),common=__webpack_require__(16);function validateVector(v,length){return v.length===length&&v.every(Number.isFinite)}var vector2=__webpack_require__(192),vector3=__webpack_require__(113),vector4_Vector4=function(_Vector){function Vector4(){var _this,x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(classCallCheck.a)(this,Vector4),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Vector4).call(this)),Array.isArray(x)&&1===arguments.length?_this.copy(x):_this.set(x,y,z,w),_this}return Object(inherits.a)(Vector4,_Vector),Object(createClass.a)(Vector4,[{key:"applyMatrix4",value:function applyMatrix4(m){return m.transformVector(this,this),this}},{key:"ELEMENTS",get:function get(){return 4}},{key:"z",get:function get(){return this[2]},set:function set(value){return this[2]=Object(common.a)(value)}},{key:"w",get:function get(){return this[3]},set:function set(value){return this[3]=Object(common.a)(value)}}]),Vector4}(__webpack_require__(95).a),mat4=__webpack_require__(13),vec2=__webpack_require__(26),vec3=__webpack_require__(40),vec4=__webpack_require__(36);__webpack_require__.d(__webpack_exports__,"a",function(){return matrix4_Matrix4});var IDENTITY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var matrix4_Matrix4=function(_MathArray){function Matrix4(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return Object(classCallCheck.a)(this,Matrix4),_this=Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Matrix4).call(this)),Array.isArray(args[0])&&1===arguments.length?_this.copy(args[0]):_this.identity(),_this}return Object(inherits.a)(Matrix4,_MathArray),Object(createClass.a)(Matrix4,[{key:"setRowMajor",value:function setRowMajor(){var m00=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,m01=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m02=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m03=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m10=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m11=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,m12=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m13=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m20=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,m21=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,m22=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,m23=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,m30=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,m31=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m32=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m33=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"setColumnMajor",value:function setColumnMajor(){var m00=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,m10=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m20=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,m30=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,m01=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m11=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,m21=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m31=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m02=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,m12=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,m22=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,m32=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,m03=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,m13=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m23=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m33=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}},{key:"copy",value:function copy(array){return this.setColumnMajor.apply(this,Object(toConsumableArray.a)(array))}},{key:"set",value:function set(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function getElement(i,j){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[i][j]:this[j][i]}},{key:"setElement",value:function setElement(i,j,value){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[i][j]=Object(common.a)(value):this[j][i]=Object(common.a)(value),this}},{key:"determinant",value:function determinant(){return mat4.a(this)}},{key:"identity",value:function identity(){return this.copy(IDENTITY)}},{key:"fromQuaternion",value:function fromQuaternion(q){return mat4.c(this,q),this.check()}},{key:"frustum",value:function frustum(_ref){var left=_ref.left,right=_ref.right,bottom=_ref.bottom,top=_ref.top,near=_ref.near,far=_ref.far;return mat4.d(this,left,right,bottom,top,near,far),this.check()}},{key:"lookAt",value:function lookAt(_ref2){var eye=_ref2.eye,_ref2$center=_ref2.center,center=void 0===_ref2$center?[0,0,0]:_ref2$center,_ref2$up=_ref2.up,up=void 0===_ref2$up?[0,1,0]:_ref2$up;return mat4.f(this,eye,center,up),this.check()}},{key:"ortho",value:function ortho(_ref3){var left=_ref3.left,right=_ref3.right,bottom=_ref3.bottom,top=_ref3.top,_ref3$near=_ref3.near,near=void 0===_ref3$near?.1:_ref3$near,_ref3$far=_ref3.far,far=void 0===_ref3$far?500:_ref3$far;return mat4.h(this,left,right,bottom,top,near,far),this.check()}},{key:"orthographic",value:function orthographic(_ref4){var _ref4$fovy=_ref4.fovy,fovy=void 0===_ref4$fovy?45*Math.PI/180:_ref4$fovy,_ref4$aspect=_ref4.aspect,aspect=void 0===_ref4$aspect?1:_ref4$aspect,_ref4$focalDistance=_ref4.focalDistance,focalDistance=void 0===_ref4$focalDistance?1:_ref4$focalDistance,_ref4$near=_ref4.near,near=void 0===_ref4$near?.1:_ref4$near,_ref4$far=_ref4.far,far=void 0===_ref4$far?500:_ref4$far;if(fovy>2*Math.PI)throw Error("radians");var halfY=fovy/2,top=focalDistance*Math.tan(halfY),right=top*aspect;return(new Matrix4).ortho({left:-right,right:right,bottom:-top,top:top,near:near,far:far})}},{key:"perspective",value:function perspective(){var _ref5=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},fovy=_ref5.fovy,_ref5$fov=_ref5.fov,fov=void 0===_ref5$fov?45*Math.PI/180:_ref5$fov,_ref5$aspect=_ref5.aspect,aspect=void 0===_ref5$aspect?1:_ref5$aspect,_ref5$near=_ref5.near,near=void 0===_ref5$near?.1:_ref5$near,_ref5$far=_ref5.far,far=void 0===_ref5$far?500:_ref5$far;if((fovy=fovy||fov)>2*Math.PI)throw Error("radians");return mat4.i(this,fovy,aspect,near,far),this.check()}},{key:"transpose",value:function transpose(){return mat4.p(this,this),this.check()}},{key:"invert",value:function invert(){return mat4.e(this,this),this.check()}},{key:"multiplyLeft",value:function multiplyLeft(a){return mat4.g(this,a,this),this.check()}},{key:"multiplyRight",value:function multiplyRight(a){return mat4.g(this,this,a),this.check()}},{key:"rotateX",value:function rotateX(radians){return mat4.k(this,this,radians),this.check()}},{key:"rotateY",value:function rotateY(radians){return mat4.l(this,this,radians),this.check()}},{key:"rotateZ",value:function rotateZ(radians){return mat4.m(this,this,radians),this.check()}},{key:"rotateXYZ",value:function rotateXYZ(_ref6){var _ref7=Object(slicedToArray.a)(_ref6,3),rx=_ref7[0],ry=_ref7[1],rz=_ref7[2];return this.rotateX(rx).rotateY(ry).rotateZ(rz)}},{key:"rotateAxis",value:function rotateAxis(radians,axis){return mat4.j(this,this,radians,axis),this.check()}},{key:"scale",value:function scale(factor){return Array.isArray(factor)?mat4.n(this,this,factor):mat4.n(this,this,[factor,factor,factor]),this.check()}},{key:"translate",value:function translate(vec){return mat4.o(this,this,vec),this.check()}},{key:"transformVector2",value:function transformVector2(vector,out){return out=out||new vector2.a,vec2.h(out,vector,this),validateVector(out,2),out}},{key:"transformVector3",value:function transformVector3(vector,out){return out=out||new vector3.a,vec3.i(out,vector,this),validateVector(out,3),out}},{key:"transformVector4",value:function transformVector4(vector,out){return out=out||new vector4_Vector4,vec4.c(out,vector,this),validateVector(out,4),out.check()}},{key:"transformVector",value:function transformVector(vector,out){switch(vector.length){case 2:return this.transformVector2(vector,out);case 3:return this.transformVector3(vector,out);case 4:return this.transformVector4(vector,out);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function transformDirection(vector,out){return this._transformVector(vector,out,0)}},{key:"transformPoint",value:function transformPoint(vector,out){return this._transformVector(vector,out,1)}},{key:"_transformVector",value:function _transformVector(vector,out,w){switch(vector.length){case 2:out=out||new vector2.a,vec4.c(out,[vector[0],vector[1],0,w],this),out.length=2,validateVector(out,2);break;case 3:out=out||new vector3.a,vec4.c(out,[vector[0],vector[1],vector[2],w],this),out.length=3,validateVector(out,3);break;case 4:if(Boolean(w)!==Boolean(vector[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");out=out||new vector4_Vector4,vec4.c(out,vector,this),validateVector(out,4);break;default:throw new Error("Illegal vector")}return out}},{key:"makeRotationX",value:function makeRotationX(radians){return this.identity().rotateX(radians)}},{key:"makeTranslation",value:function makeTranslation(x,y,z){return this.identity().translate([x,y,z])}},{key:"ELEMENTS",get:function get(){return 16}}]),Matrix4}(math_array.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(1),createClass=__webpack_require__(2),hi_res_timestamp=__webpack_require__(53),stat_Stat=function(){function Stat(name){Object(classCallCheck.a)(this,Stat),this.name=name,this.reset()}return Object(createClass.a)(Stat,[{key:"incrementCount",value:function incrementCount(){this.addCount(1)}},{key:"decrementCount",value:function decrementCount(){this.subtractCount(1)}},{key:"addCount",value:function addCount(value){this.count+=value}},{key:"subtractCount",value:function subtractCount(value){this.count-=value}},{key:"addTime",value:function addTime(time){this.time+=time,this.lastTiming=time,this.count++}},{key:"timeStart",value:function timeStart(){this._startTime=Object(hi_res_timestamp.a)(),this._timerPending=!0}},{key:"timeEnd",value:function timeEnd(){this._timerPending&&(this.addTime(Object(hi_res_timestamp.a)()-this._startTime),this._timerPending=!1)}},{key:"getAverageTime",value:function getAverageTime(){return this.count>0?this.time/this.count:0}},{key:"getHz",value:function getHz(){return this.time>0?this.count/(this.time/1e3):0}},{key:"reset",value:function reset(){this.time=0,this.count=0,this.lastTiming=0,this._startTime=0,this._timerPending=!1}}]),Stat}();__webpack_require__.d(__webpack_exports__,"a",function(){return stats_Stats});var stats_Stats=function(){function Stats(_ref){var id=_ref.id;Object(classCallCheck.a)(this,Stats),this.id=id,this.stats={},Object.seal(this)}return Object(createClass.a)(Stats,[{key:"get",value:function get(name){return this.stats[name]=this.stats[name]||new stat_Stat(name),this.stats[name]}},{key:"reset",value:function reset(){for(var key in this.stats)this.stats[key].reset();return this}},{key:"forEach",value:function forEach(fn){for(var key in this.stats)fn(this.stats[key])}},{key:"getTable",value:function getTable(){var table={};return this.forEach(function(stat){table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}}),table}}]),Stats}()}]]);
//# sourceMappingURL=vendors~main.ad40a057f9a3c00b8be5.bundle.js.map